"use strict";(self.webpackChunkng_football=self.webpackChunkng_football||[]).push([[179],{9058:(_t,Ne,O)=>{O.d(Ne,{BH:()=>ve,DV:()=>St,Dv:()=>Ui,G6:()=>Be,GJ:()=>fn,L:()=>De,LL:()=>Fe,Pz:()=>Ve,Sg:()=>He,UG:()=>Te,UI:()=>ur,US:()=>ae,Wj:()=>Gt,Wl:()=>dt,Yr:()=>lt,ZB:()=>he,ZR:()=>Ae,aH:()=>pe,b$:()=>Dt,cI:()=>Rn,dS:()=>qt,eu:()=>ue,g5:()=>z,gK:()=>Et,gQ:()=>Nt,h$:()=>Le,hl:()=>ie,hu:()=>ne,jU:()=>xt,lb:()=>cr,m9:()=>Mi,ne:()=>Hn,p$:()=>J,pd:()=>Yt,r3:()=>$t,ru:()=>Tt,tV:()=>W,uI:()=>se,ug:()=>Ai,vZ:()=>mn,w1:()=>on,w9:()=>Dn,xO:()=>Qn,xb:()=>en,z$:()=>We,zd:()=>bt});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ne=function(re,j){if(!re)throw z(j)},z=function(re){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+re)},fe=function(re){const j=[];let $=0;for(let B=0;B<re.length;B++){let H=re.charCodeAt(B);H<128?j[$++]=H:H<2048?(j[$++]=H>>6|192,j[$++]=63&H|128):55296==(64512&H)&&B+1<re.length&&56320==(64512&re.charCodeAt(B+1))?(H=65536+((1023&H)<<10)+(1023&re.charCodeAt(++B)),j[$++]=H>>18|240,j[$++]=H>>12&63|128,j[$++]=H>>6&63|128,j[$++]=63&H|128):(j[$++]=H>>12|224,j[$++]=H>>6&63|128,j[$++]=63&H|128)}return j},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,j){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let H=0;H<re.length;H+=3){const ge=re[H],$e=H+1<re.length,it=$e?re[H+1]:0,Ot=H+2<re.length,kt=Ot?re[H+2]:0;let Yn=(15&it)<<2|kt>>6,ye=63&kt;Ot||(ye=64,$e||(Yn=64)),B.push($[ge>>2],$[(3&ge)<<4|it>>4],$[Yn],$[ye])}return B.join("")},encodeString(re,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(re):this.encodeByteArray(fe(re),j)},decodeString(re,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(re):function(re){const j=[];let $=0,B=0;for(;$<re.length;){const H=re[$++];if(H<128)j[B++]=String.fromCharCode(H);else if(H>191&&H<224){const ge=re[$++];j[B++]=String.fromCharCode((31&H)<<6|63&ge)}else if(H>239&&H<365){const Ot=((7&H)<<18|(63&re[$++])<<12|(63&re[$++])<<6|63&re[$++])-65536;j[B++]=String.fromCharCode(55296+(Ot>>10)),j[B++]=String.fromCharCode(56320+(1023&Ot))}else{const ge=re[$++],$e=re[$++];j[B++]=String.fromCharCode((15&H)<<12|(63&ge)<<6|63&$e)}}return j.join("")}(this.decodeStringToByteArray(re,j))},decodeStringToByteArray(re,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let H=0;H<re.length;){const ge=$[re.charAt(H++)],it=H<re.length?$[re.charAt(H)]:0;++H;const kt=H<re.length?$[re.charAt(H)]:64;++H;const Vt=H<re.length?$[re.charAt(H)]:64;if(++H,null==ge||null==it||null==kt||null==Vt)throw new me;B.push(ge<<2|it>>4),64!==kt&&(B.push(it<<4&240|kt>>2),64!==Vt&&B.push(kt<<6&192|Vt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(re){const j=fe(re);return ae.encodeByteArray(j,!0)},De=function(re){return Le(re).replace(/\./g,"")},W=function(re){try{return ae.decodeString(re,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function J(re){return he(void 0,re)}function he(re,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!Ue($)||(re[$]=he(re[$],j[$]));return re}function Ue(re){return"__proto__"!==re}const Xe=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=re&&W(re[1]);return j&&JSON.parse(j)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},pe=()=>{var re;return null===(re=Xe())||void 0===re?void 0:re.config},Ve=re=>{var j;return null===(j=Xe())||void 0===j?void 0:j[`_${re}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,B)=>{$?this.reject($):this.resolve(B),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,B))}}}function He(re,j){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=j||"demo-project",H=re.iat||0,ge=re.sub||re.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:H,exp:H+3600,auth_time:H,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},re);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify($e)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Te(){var re;const j=null===(re=Xe())||void 0===re?void 0:re.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function Tt(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function Dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function on(){const re=We();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function lt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Be(){return!Te()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((re,j)=>{try{let $=!0;const B="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(B);H.onsuccess=()=>{H.result.close(),$||self.indexedDB.deleteDatabase(B),re(!0)},H.onupgradeneeded=()=>{$=!1},H.onerror=()=>{var ge;j((null===(ge=H.error)||void 0===ge?void 0:ge.message)||"")}}catch($){j($)}})}class Ae extends Error{constructor(j,$,B){super($),this.code=j,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,$,B){this.service=j,this.serviceName=$,this.errors=B}create(j,...$){const B=$[0]||{},H=`${this.service}/${j}`,ge=this.errors[j],$e=ge?function ot(re,j){return re.replace(Je,($,B)=>{const H=j[B];return null!=H?String(H):`<${B}?>`})}(ge,B):"Error";return new Ae(H,`${this.serviceName}: ${$e} (${H}).`,B)}}const Je=/\{\$([^}]+)}/g;function Rn(re){return JSON.parse(re)}function dt(re){return JSON.stringify(re)}const Zt=function(re){let j={},$={},B={},H="";try{const ge=re.split(".");j=Rn(W(ge[0])||""),$=Rn(W(ge[1])||""),H=ge[2],B=$.d||{},delete $.d}catch{}return{header:j,claims:$,data:B,signature:H}},Dn=function(re){const $=Zt(re).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},fn=function(re){const j=Zt(re).claims;return"object"==typeof j&&!0===j.admin};function $t(re,j){return Object.prototype.hasOwnProperty.call(re,j)}function St(re,j){if(Object.prototype.hasOwnProperty.call(re,j))return re[j]}function en(re){for(const j in re)if(Object.prototype.hasOwnProperty.call(re,j))return!1;return!0}function ur(re,j,$){const B={};for(const H in re)Object.prototype.hasOwnProperty.call(re,H)&&(B[H]=j.call($,re[H],H,re));return B}function mn(re,j){if(re===j)return!0;const $=Object.keys(re),B=Object.keys(j);for(const H of $){if(!B.includes(H))return!1;const ge=re[H],$e=j[H];if(ri(ge)&&ri($e)){if(!mn(ge,$e))return!1}else if(ge!==$e)return!1}for(const H of B)if(!$.includes(H))return!1;return!0}function ri(re){return null!==re&&"object"==typeof re}function Qn(re){const j=[];for(const[$,B]of Object.entries(re))Array.isArray(B)?B.forEach(H=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(H))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(B));return j.length?"&"+j.join("&"):""}function bt(re){const j={};return re.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[H,ge]=B.split("=");j[decodeURIComponent(H)]=decodeURIComponent(ge)}}),j}function Yt(re){const j=re.indexOf("?");if(!j)return"";const $=re.indexOf("#",j);return re.substring(j,$>0?$:void 0)}class Nt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,$){$||($=0);const B=this.W_;if("string"==typeof j)for(let Vt=0;Vt<16;Vt++)B[Vt]=j.charCodeAt($)<<24|j.charCodeAt($+1)<<16|j.charCodeAt($+2)<<8|j.charCodeAt($+3),$+=4;else for(let Vt=0;Vt<16;Vt++)B[Vt]=j[$]<<24|j[$+1]<<16|j[$+2]<<8|j[$+3],$+=4;for(let Vt=16;Vt<80;Vt++){const Yn=B[Vt-3]^B[Vt-8]^B[Vt-14]^B[Vt-16];B[Vt]=4294967295&(Yn<<1|Yn>>>31)}let kt,Ct,H=this.chain_[0],ge=this.chain_[1],$e=this.chain_[2],it=this.chain_[3],Ot=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(kt=it^ge&($e^it),Ct=1518500249):(kt=ge^$e^it,Ct=1859775393):Vt<60?(kt=ge&$e|it&(ge|$e),Ct=2400959708):(kt=ge^$e^it,Ct=3395469782);const Yn=(H<<5|H>>>27)+kt+Ot+Ct+B[Vt]&4294967295;Ot=it,it=$e,$e=4294967295&(ge<<30|ge>>>2),ge=H,H=Yn}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+ge&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+Ot&4294967295}update(j,$){if(null==j)return;void 0===$&&($=j.length);const B=$-this.blockSize;let H=0;const ge=this.buf_;let $e=this.inbuf_;for(;H<$;){if(0===$e)for(;H<=B;)this.compress_(j,H),H+=this.blockSize;if("string"==typeof j){for(;H<$;)if(ge[$e]=j.charCodeAt(H),++$e,++H,$e===this.blockSize){this.compress_(ge),$e=0;break}}else for(;H<$;)if(ge[$e]=j[H],++$e,++H,$e===this.blockSize){this.compress_(ge),$e=0;break}}this.inbuf_=$e,this.total_+=$}digest(){const j=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&$,$/=256;this.compress_(this.buf_);let B=0;for(let H=0;H<5;H++)for(let ge=24;ge>=0;ge-=8)j[B]=this.chain_[H]>>ge&255,++B;return j}}function Hn(re,j){const $=new Kr(re,j);return $.subscribe.bind($)}class Kr{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(B=>{this.error(B)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,B){let H;if(void 0===j&&void 0===$&&void 0===B)throw new Error("Missing Observer.");H=function vn(re,j){if("object"!=typeof re||null===re)return!1;for(const $ of j)if($ in re&&"function"==typeof re[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:B},void 0===H.next&&(H.next=qn),void 0===H.error&&(H.error=qn),void 0===H.complete&&(H.complete=qn);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),ge}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qn(){}const Ui=function(re,j,$,B){let H;if(B<j?H="at least "+j:B>$&&(H=0===$?"none":"no more than "+$),H)throw new Error(re+" failed: Was called with "+B+(1===B?" argument.":" arguments.")+" Expects "+H+".")};function Et(re,j){return`${re} failed: ${j} argument `}function Gt(re,j,$,B){if((!B||$)&&"function"!=typeof $)throw new Error(Et(re,j)+"must be a valid function.")}function cr(re,j,$,B){if((!B||$)&&("object"!=typeof $||null===$))throw new Error(Et(re,j)+"must be a valid context object.")}const qt=function(re){const j=[];let $=0;for(let B=0;B<re.length;B++){let H=re.charCodeAt(B);if(H>=55296&&H<=56319){const ge=H-55296;B++,ne(B<re.length,"Surrogate pair missing trail surrogate."),H=65536+(ge<<10)+(re.charCodeAt(B)-56320)}H<128?j[$++]=H:H<2048?(j[$++]=H>>6|192,j[$++]=63&H|128):H<65536?(j[$++]=H>>12|224,j[$++]=H>>6&63|128,j[$++]=63&H|128):(j[$++]=H>>18|240,j[$++]=H>>12&63|128,j[$++]=H>>6&63|128,j[$++]=63&H|128)}return j},Ai=function(re){let j=0;for(let $=0;$<re.length;$++){const B=re.charCodeAt($);B<128?j++:B<2048?j+=2:B>=55296&&B<=56319?(j+=4,$++):j+=3}return j};function Mi(re){return re&&re._delegate?re._delegate:re}},1478:(_t,Ne,O)=>{var y=O(6593),ne=O(3781),z=O(5879);const fe=[{path:"",loadChildren:()=>O.e(843).then(O.bind(O,2843)).then(i=>i.LeagueModule)},{path:"**",redirectTo:""}];let le=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=z.oAB({type:i});static#n=this.\u0275inj=z.cJS({imports:[ne.Bz.forRoot(fe,{useHash:!0}),ne.Bz]})}return i})(),ae=(()=>{class i{constructor(){this.title="ng-football"}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=z.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(s,u){1&s&&(z.TgZ(0,"div",0),z._UZ(1,"router-outlet"),z.qZA())},dependencies:[ne.lC],styles:["p[_ngcontent-%COMP%]{font-family:Lato}"]})}return i})();var me=O(9862),Le=O(7217),De=O(6814),W=O(8326),J=O(7213),he=O(6321),Ue=O(5592),je=O(2459),tt=O(2096),qe=O(7921),st=O(9360),Xe=O(8251);function wt(){return(0,st.e)((i,e)=>{let n,s=!1;i.subscribe((0,Xe.x)(e,u=>{const l=n;n=u,s&&e.next([l,u]),s=!0}))})}var Qe,ht=O(7398),pe=O(6699),Ve=O(3997),ve=O(2181),We=(O(999),O(3106)),se=O(5861),Te=O(534),xt=O(4537),Tt=O(7879),Dt=O(9058),Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={},lt=lt||{},Be=Qt||self;function ie(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ue(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ee="closure_uid_"+(1e9*Math.random()>>>0),Ae=0;function Fe(i,e,n){return i.call.apply(i.bind,arguments)}function ot(i,e,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Je(i,e,n){return(Je=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:ot).apply(null,arguments)}function Rn(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function dt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(s,u,l){for(var p=Array(arguments.length-2),T=2;T<arguments.length;T++)p[T-2]=arguments[T];return e.prototype[u].apply(s,p)}}function Zt(){this.s=this.s,this.o=this.o}Zt.prototype.s=!1,Zt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ce(i){Object.prototype.hasOwnProperty.call(i,Ee)&&i[Ee]||(i[Ee]=++Ae)}(this)},Zt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Dn(i){const e=i.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=i[s];return n}return[]}function fn(i,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(ie(s)){const u=i.length||0,l=s.length||0;i.length=u+l;for(let p=0;p<l;p++)i[u+p]=s[p]}else i.push(s)}}function $t(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};Be.addEventListener("test",n,e),Be.removeEventListener("test",n,e)}catch{}return i}();function en(i){return/^[\s\xa0]*$/.test(i)}function ur(){var i=Be.navigator;return i&&(i=i.userAgent)?i:""}function mn(i){return-1!=ur().indexOf(i)}function ri(i){return ri[" "](i),i}ri[" "]=function(){};var vn,i,Qn=mn("Opera"),bt=mn("Trident")||mn("MSIE"),Yt=mn("Edge"),Nt=Yt||bt,Hn=mn("Gecko")&&!(-1!=ur().toLowerCase().indexOf("webkit")&&!mn("Edge"))&&!(mn("Trident")||mn("MSIE"))&&!mn("Edge"),Kr=-1!=ur().toLowerCase().indexOf("webkit")&&!mn("Edge");function Dr(){var i=Be.document;return i?i.documentMode:void 0}e:{var qn="",Ui=(i=ur(),Hn?/rv:([^\);]+)(\)|;)/.exec(i):Yt?/Edge\/([\d\.]+)/.exec(i):bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Kr?/WebKit\/(\S+)/.exec(i):Qn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ui&&(qn=Ui?Ui[1]:""),bt){var Et=Dr();if(null!=Et&&Et>parseFloat(qn)){vn=String(Et);break e}}vn=qn}var cr=Be.document&&bt&&(Dr()||parseInt(vn,10))||void 0;function qt(i,e){if($t.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Hn){e:{try{ri(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Ai[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&qt.$.h.call(this)}}dt(qt,$t);var Ai={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var oi="closure_listenable_"+(1e6*Math.random()|0),fr=0;function Cr(i,e,n,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=u,this.key=++fr,this.fa=this.ia=!1}function Ar(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Zr(i,e,n){for(const s in i)e.call(n,i[s],s,i)}function ai(i){const e={};for(const n in i)e[n]=i[n];return e}const ui="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mi(i,e){let n,s;for(let u=1;u<arguments.length;u++){for(n in s=arguments[u],s)i[n]=s[n];for(let l=0;l<ui.length;l++)n=ui[l],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function re(i){this.src=i,this.g={},this.h=0}function j(i,e){var n=e.type;if(n in i.g){var l,s=i.g[n],u=yn(s,e);(l=0<=u)&&Array.prototype.splice.call(s,u,1),l&&(Ar(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function $(i,e,n,s){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==s)return u}return-1}re.prototype.add=function(i,e,n,s,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var p=$(i,e,s,u);return-1<p?(e=i[p],n||(e.ia=!1)):((e=new Cr(e,this.src,l,!!s,u)).ia=n,i.push(e)),e};var B="closure_lm_"+(1e6*Math.random()|0),H={};function ge(i,e,n,s,u){if(s&&s.once)return Ot(i,e,n,s,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ge(i,e[l],n,s,u);return null}return n=ce(n),i&&i[oi]?i.O(e,n,ue(s)?!!s.capture:!!s,u):$e(i,e,n,!1,s,u)}function $e(i,e,n,s,u,l){if(!e)throw Error("Invalid event type");var p=ue(u)?!!u.capture:!!u,T=ye(i);if(T||(i[B]=T=new re(i)),(n=T.add(e,n,s,p,l)).proxy)return n;if(s=function it(){const e=Yn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)St||(u=p),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(Vt(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return n}function Ot(i,e,n,s,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ot(i,e[l],n,s,u);return null}return n=ce(n),i&&i[oi]?i.P(e,n,ue(s)?!!s.capture:!!s,u):$e(i,e,n,!0,s,u)}function kt(i,e,n,s,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)kt(i,e[l],n,s,u);else s=ue(s)?!!s.capture:!!s,n=ce(n),i&&i[oi]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=$(l=i.g[e],n,s,u))&&(Ar(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=ye(i))&&(e=i.g[e.toString()],i=-1,e&&(i=$(e,n,s,u)),(n=-1<i?e[i]:null)&&Ct(n))}function Ct(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[oi])j(e.i,i);else{var n=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(n,s,i.capture):e.detachEvent?e.detachEvent(Vt(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=ye(e))?(j(n,i),0==n.h&&(n.src=null,e[B]=null)):Ar(i)}}}function Vt(i){return i in H?H[i]:H[i]="on"+i}function Yn(i,e){if(i.fa)i=!0;else{e=new qt(e,this);var n=i.listener,s=i.la||i.src;i.ia&&Ct(i),i=n.call(s,e)}return i}function ye(i){return(i=i[B])instanceof re?i:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(i){return"function"==typeof i?i:(i[te]||(i[te]=function(e){return i.handleEvent(e)}),i[te])}function Q(){Zt.call(this),this.i=new re(this),this.S=this,this.J=null}function K(i,e){var n,s=i.J;if(s)for(n=[];s;s=s.J)n.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new $t(e,i);else if(e instanceof $t)e.target=e.target||i;else{var u=e;Mi(e=new $t(s,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var p=e.g=n[l];u=_e(p,s,!0,e)&&u}if(u=_e(p=e.g=i,s,!0,e)&&u,u=_e(p,s,!1,e)&&u,n)for(l=0;l<n.length;l++)u=_e(p=e.g=n[l],s,!1,e)&&u}function _e(i,e,n,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==n){var T=p.listener,S=p.la||p.src;p.ia&&j(i.i,p),u=!1!==T.call(S,s)&&u}}return u&&!s.defaultPrevented}dt(Q,Zt),Q.prototype[oi]=!0,Q.prototype.removeEventListener=function(i,e,n,s){kt(this,i,e,n,s)},Q.prototype.N=function(){if(Q.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],s=0;s<n.length;s++)Ar(n[s]);delete i.g[e],i.h--}}this.J=null},Q.prototype.O=function(i,e,n,s){return this.i.add(String(i),e,!1,n,s)},Q.prototype.P=function(i,e,n,s){return this.i.add(String(i),e,!0,n,s)};var xe=Be.JSON.stringify;function Ze(){var i=Vn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Nn=new class at{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new an,i=>i.reset());class an{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Kn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Sr(i){Be.setTimeout(()=>{throw i},0)}let kr,Pn=!1,Vn=new class Ut{constructor(){this.h=this.g=null}add(e,n){const s=Nn.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}},ci=()=>{const i=Be.Promise.resolve(void 0);kr=()=>{i.then(Bs)}};var Bs=()=>{for(var i;i=Ze();){try{i.h.call(i.g)}catch(n){Sr(n)}var e=Nn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Pn=!1};function yr(i,e){Q.call(this),this.h=i||1,this.g=e||Be,this.j=Je(this.qb,this),this.l=Date.now()}function pn(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Xi(i,e,n){if("function"==typeof i)n&&(i=Je(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Je(i.handleEvent,i)}return 2147483647<Number(e)?-1:Be.setTimeout(i,e||0)}function _i(i){i.g=Xi(()=>{i.g=null,i.i&&(i.i=!1,_i(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}dt(yr,Q),(Qe=yr.prototype).ga=!1,Qe.T=null,Qe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),K(this,"tick"),this.ga&&(pn(this),this.start()))}},Qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.N=function(){yr.$.N.call(this),pn(this),delete this.g};class Lu extends Zt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(i){Zt.call(this),this.h=i,this.g={}}dt(ji,Zt);var $a=[];function Oo(i,e,n,s){Array.isArray(n)||(n&&($a[0]=n.toString()),n=$a);for(var u=0;u<n.length;u++){var l=ge(e,n[u],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function li(i){Zr(i.g,function(e,n){this.g.hasOwnProperty(n)&&Ct(e)},i),i.g={}}function ps(){this.g=!0}function di(i,e,n,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function js(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<u.length;p++)u[p]=""}}}return xe(n)}catch{return e}}(i,n)+(s?" "+s:"")})}ji.prototype.N=function(){ji.$.N.call(this),li(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ps.prototype.Ea=function(){this.g=!1},ps.prototype.info=function(){};var yi={},oa=null;function vi(){return oa=oa||new Q}function aa(i){$t.call(this,yi.Ta,i)}function co(i){const e=vi();K(e,new aa(e))}function Fu(i,e){$t.call(this,yi.STAT_EVENT,i),this.stat=e}function Qr(i){const e=vi();K(e,new Fu(e,i))}function za(i,e){$t.call(this,yi.Ua,i),this.size=e}function $s(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){i()},e)}yi.Ta="serverreachability",dt(aa,$t),yi.STAT_EVENT="statevent",dt(Fu,$t),yi.Ua="timingevent",dt(za,$t);var Lo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ga={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gs(){}function ln(){}gs.prototype.h=null;var vr,lr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Lr(){$t.call(this,"d")}function Rs(){$t.call(this,"c")}function lo(){}function Hi(i,e,n,s){this.l=i,this.j=e,this.m=n,this.W=s||1,this.U=new ji(this),this.P=zi,this.V=new yr(i=Nt?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hs}function Hs(){this.i=null,this.g="",this.h=!1}dt(Lr,$t),dt(Rs,$t),dt(lo,gs),lo.prototype.g=function(){return new XMLHttpRequest},lo.prototype.i=function(){return{}},vr=new lo;var zi=45e3,Gi={},zn={};function mt(i,e,n){i.L=1,i.A=Ni(Fr(e)),i.u=n,i.S=!0,Kt(i,null)}function Kt(i,e){i.G=Date.now(),tr(i),i.B=Fr(i.A);var n=i.B,s=i.W;Array.isArray(s)||(s=[String(s)]),Gn(n.i,"t",s),i.o=0,n=i.l.J,i.h=new Hs,i.g=Xa(i.l,n?e:null,!i.u),0<i.O&&(i.M=new Lu(Je(i.Pa,i,i.g),i.O)),Oo(i.U,i.g,"readystatechange",i.nb),e=i.I?ai(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),co(),function $i(i,e,n,s,u,l){i.info(function(){if(i.g)if(l)for(var p="",T=l.split("&"),S=0;S<T.length;S++){var x=T[S].split("=");if(1<x.length){var L=x[0];x=x[1];var G=L.split("_");p=2<=G.length&&"type"==G[1]?p+(L+"=")+x+"&":p+(L+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+n+"\n"+p})}(i.j,i.v,i.B,i.m,i.W,i.u)}function Mn(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Hr(i,e,n){let u,s=!0;for(;!i.J&&i.o<n.length;){if(u=ua(i,n),u==zn){4==e&&(i.s=4,Qr(14),s=!1),di(i.j,i.m,null,"[Incomplete Response]");break}if(u==Gi){i.s=4,Qr(15),di(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}di(i.j,i.m,u,null),Ht(i,u)}Mn(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,Qr(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tc(e),e.M=!0,Qr(11))):(di(i.j,i.m,n,"[Invalid Chunked Response]"),Yr(i),Si(i))}function ua(i,e){var n=i.o,s=e.indexOf("\n",n);return-1==s?zn:(n=Number(e.substring(n,s)),isNaN(n)?Gi:(s+=1)+n>e.length?zn:(e=e.slice(s,s+n),i.o=s+n,e))}function tr(i){i.Y=Date.now()+i.P,Ps(i,i.P)}function Ps(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=$s(Je(i.lb,i),e)}function Fn(i){i.C&&(Be.clearTimeout(i.C),i.C=null)}function Si(i){0==i.l.H||i.J||Ja(i.l,i)}function Yr(i){Fn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,pn(i.V),li(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ht(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||Bu(n.i,i)))if(!i.K&&Bu(n.i,i)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Io(n),qs(n)}ma(n),Qr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=$s(Je(n.ib,n),6e3));if(1>=Bo(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ks(n,11)}else if((i.K||n.g==i)&&Io(n),!en(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let x=u[e];if(n.V=x[0],x=x[1],2==n.H)if("c"==x[0]){n.K=x[1],n.pa=x[2];const L=x[3];null!=L&&(n.ra=L,n.l.info("VER="+n.ra));const G=x[4];null!=G&&(n.Ga=G,n.l.info("SVER="+n.Ga));const oe=x[5];null!=oe&&"number"==typeof oe&&0<oe&&(n.L=s=1.5*oe,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const be=i.g;if(be){const rt=be.g?be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rt){var l=s.i;l.g||-1==rt.indexOf("spdy")&&-1==rt.indexOf("quic")&&-1==rt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(jo(l,l.h),l.h=null))}if(s.F){const gt=be.g?be.g.getResponseHeader("X-HTTP-Session-Id"):null;gt&&(s.Da=gt,Cn(s.I,s.F,gt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var p=i;if((s=n).wa=Dc(s,s.J?s.pa:null,s.Y),p.K){Vr(s.i,p);var T=p,S=s.L;S&&T.setTimeout(S),T.C&&(Fn(T),tr(T)),s.g=p}else ga(s);0<n.j.length&&vo(n)}else"stop"!=x[0]&&"close"!=x[0]||Ks(n,7);else 3==n.H&&("stop"==x[0]||"close"==x[0]?"stop"==x[0]?Ks(n,7):Ws(n):"noop"!=x[0]&&n.h&&n.h.Aa(x),n.A=0)}co()}catch{}}function zr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ie(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function ho(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ie(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const s in i)e[n++]=s;return e}}}(i),s=function Ms(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ie(i)){for(var e=[],n=i.length,s=0;s<n;s++)e.push(i[s]);return e}for(s in e=[],n=0,i)e[n++]=i[s];return e}(i),u=s.length,l=0;l<u;l++)e.call(void 0,s[l],n&&n[l],i)}(Qe=Hi.prototype).setTimeout=function(i){this.P=i},Qe.nb=function(i){i=i.target;const e=this.M;e&&3==rr(i)?e.l():this.Pa(i)},Qe.Pa=function(i){try{if(i==this.g)e:{const L=rr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>L)&&(3!=L||Nt||this.g&&(this.h.h||this.g.ja()||Hu(this.g)))){this.J||4!=L||7==e||co(),Fn(this);var n=this.g.da();this.ca=n;t:if(Mn(this)){var s=Hu(this.g);i="";var u=s.length,l=4==rr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Si(this);var p="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:l&&e==u-1});s.length=0,this.h.g+=i,this.o=0,p=this.h.g}else p=this.g.ja();if(this.i=200==n,function Ha(i,e,n,s,u,l,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+p})}(this.j,this.v,this.B,this.m,this.W,L,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var T,S=this.g;if((T=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!en(T)){var x=T;break t}}x=null}if(!(n=x)){this.i=!1,this.s=3,Qr(12),Yr(this),Si(this);break e}di(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ht(this,n)}this.S?(Hr(this,L,p),Nt&&this.i&&3==L&&(Oo(this.U,this.V,"tick",this.mb),this.V.start())):(di(this.j,this.m,p,null),Ht(this,p)),4==L&&Yr(this),this.i&&!this.J&&(4==L?Ja(this.l,this):(this.i=!1,tr(this)))}else(function pa(i){const e={};i=(i.g&&2<=rr(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(en(i[s]))continue;var n=Kn(i[s]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function Bi(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(s){return s.join(", ")})})(this.g),400==n&&0<p.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Yr(this),Si(this)}}}catch{}},Qe.mb=function(){if(this.g){var i=rr(this.g),e=this.g.ja();this.o<e.length&&(Fn(this),Hr(this,i,e),this.i&&4!=i&&tr(this))}},Qe.cancel=function(){this.J=!0,Yr(this)},Qe.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function ko(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(co(),Qr(17)),Yr(this),this.s=2,Si(this)):Ps(this,this.Y-i)};var nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Jn){this.h=i.h,es(this,i.j),this.s=i.s,this.g=i.g,fo(this,i.m),this.l=i.l;var e=i.i,n=new ts;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),xi(this,n),this.o=i.o}else i&&(e=String(i).match(nr))?(this.h=!1,es(this,e[1]||"",!0),this.s=ms(e[2]||""),this.g=ms(e[3]||"",!0),fo(this,e[4]),this.l=ms(e[5]||"",!0),xi(this,e[6]||"",!0),this.o=ms(e[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}function Fr(i){return new Jn(i)}function es(i,e,n){i.j=n?ms(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function fo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function xi(i,e,n){e instanceof ts?(i.i=e,function Wi(i,e){e&&!i.j&&(On(i),i.i=null,i.g.forEach(function(n,s){var u=s.toLowerCase();s!=u&&(Uo(this,s),Gn(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=tn(e,po)),i.i=new ts(e,i.h))}function Cn(i,e,n){i.i.set(e,n)}function Ni(i){return Cn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ms(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function tn(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Vu),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Vu(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Jn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(tn(e,_s,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(tn(e,_s,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(tn(n,"/"==n.charAt(0)?ys:la,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",tn(n,Vo)),i.join("")};var _s=/[#\/\?@]/g,la=/[#\?:]/g,ys=/[#\?]/g,po=/[#\?@]/g,Vo=/#/g;function ts(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function On(i){i.g||(i.g=new Map,i.h=0,i.i&&function ca(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),u=null;if(0<=s){var l=i[n].substring(0,s);u=i[n].substring(s+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Uo(i,e){On(i),e=vs(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function pr(i,e){return On(i),e=vs(i,e),i.g.has(e)}function Gn(i,e,n){Uo(i,e),0<n.length&&(i.i=null,i.g.set(vs(i,e),Dn(n)),i.h+=n.length)}function vs(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Gr(i){this.l=i||Wa,i=Be.PerformanceNavigationTiming?0<(i=Be.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Be.g&&Be.g.Ka&&Be.g.Ka()&&Be.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=ts.prototype).add=function(i,e){On(this),this.i=null,i=vs(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Qe.forEach=function(i,e){On(this),this.g.forEach(function(n,s){n.forEach(function(u){i.call(e,u,s,this)},this)},this)},Qe.ta=function(){On(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const u=i[s];for(let l=0;l<u.length;l++)n.push(e[s])}return n},Qe.Z=function(i){On(this);let e=[];if("string"==typeof i)pr(this,i)&&(e=e.concat(this.g.get(vs(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Qe.set=function(i,e){return On(this),this.i=null,pr(this,i=vs(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Qe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var u=l;""!==p[s]&&(u+="="+encodeURIComponent(String(p[s]))),i.push(u)}}return this.i=i.join("&")};var Wa=10;function go(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Bo(i){return i.h?1:i.g?i.g.size:0}function Bu(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function jo(i,e){i.g?i.g.add(e):i.h=e}function Vr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function mo(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Dn(i.i)}Gr.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Zd=class{stringify(i){return Be.JSON.stringify(i,void 0)}parse(i){return Be.JSON.parse(i,void 0)}};function Ic(){this.g=new Zd}function Un(i,e,n){const s=n||"";try{zr(i,function(u,l){let p=u;ue(u)&&(p=xe(u)),e.push(s+l+"="+encodeURIComponent(p))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function qa(i,e,n,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function Ka(i){this.l=i.ec||null,this.j=i.ob||!1}function ha(i,e){Q.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Za,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(Ka,gs),Ka.prototype.g=function(){return new ha(this.l,this.j)},Ka.prototype.i=function(i){return function(){return i}}({}),dt(ha,Q);var Za=0;function ju(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function _o(i){i.readyState=4,i.l=null,i.j=null,i.A=null,$o(i)}function $o(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Qe=ha.prototype).open=function(i,e){if(this.readyState!=Za)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,$o(this)},Qe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_o(this)),this.readyState=Za},Qe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Be.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ju(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Qe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?_o(this):$o(this),3==this.readyState&&ju(this)}},Qe.Za=function(i){this.g&&(this.response=this.responseText=i,_o(this))},Qe.Ya=function(i){this.g&&(this.response=i,_o(this))},Qe.ka=function(){this.g&&_o(this)},Qe.setRequestHeader=function(i,e){this.v.append(i,e)},Qe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var $u=Be.JSON.parse;function Xn(i){Q.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fa,this.L=this.M=!1}dt(Xn,Q);var fa="",xs=/^https?$/i,Qa=["POST","PUT"];function Oi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,zs(i),Er(i)}function zs(i){i.F||(i.F=!0,K(i,"complete"),K(i,"error"))}function wc(i){if(i.h&&typeof lt<"u"&&(!i.C[1]||4!=rr(i)||2!=i.da()))if(i.v&&4==rr(i))Xi(i.La,0,i);else if(K(i,"readystatechange"),4==rr(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=0===p){var u=String(i.I).match(nr)[1]||null;!u&&Be.self&&Be.self.location&&(u=Be.self.location.protocol.slice(0,-1)),s=!xs.test(u?u.toLowerCase():"")}n=s}if(n)K(i,"complete"),K(i,"success");else{i.m=6;try{var l=2<rr(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",zs(i)}}finally{Er(i)}}}function Er(i,e){if(i.g){yo(i);const n=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||K(i,"ready");try{n.onreadystatechange=s}catch{}}}function yo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Be.clearTimeout(i.A),i.A=null)}function rr(i){return i.g?i.g.readyState:0}function Hu(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case fa:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Gs(i){let e="";return Zr(i,function(n,s){e+=s,e+=":",e+=n,e+="\r\n"}),e}function ns(i,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Gs(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Cn(i,e,n))}function Is(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function rs(i){this.Ga=0,this.j=[],this.l=new ps,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Is("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Is("baseRetryDelayMs",5e3,i),this.hb=Is("retryDelaySeedMs",1e4,i),this.eb=Is("forwardChannelMaxRetries",2,i),this.xa=Is("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Gr(i&&i.concurrentRequestLimit),this.Ja=new Ic,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ws(i){if(zu(i),3==i.H){var e=i.W++,n=Fr(i.I);if(Cn(n,"SID",i.K),Cn(n,"RID",e),Cn(n,"TYPE","terminate"),qi(i,n),(e=new Hi(i,i.l,e)).L=2,e.A=Ni(Fr(n)),n=!1,Be.navigator&&Be.navigator.sendBeacon)try{n=Be.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Be.Image&&((new Image).src=e.A,n=!0),n||(e.g=Xa(e.l,null),e.g.ha(e.A)),e.G=Date.now(),tr(e)}Ho(i)}function qs(i){i.g&&(Tc(i),i.g.cancel(),i.g=null)}function zu(i){qs(i),i.u&&(Be.clearTimeout(i.u),i.u=null),Io(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Be.clearTimeout(i.m),i.m=null)}function vo(i){if(!go(i.i)&&!i.m){i.m=!0;var e=i.Na;kr||ci(),Pn||(kr(),Pn=!0),Vn.add(e,i),i.C=0}}function Eo(i,e){var n;n=e?e.m:i.W++;const s=Fr(i.I);Cn(s,"SID",i.K),Cn(s,"RID",n),Cn(s,"AID",i.V),qi(i,s),i.o&&i.s&&ns(s,i.o,i.s),n=new Hi(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ws(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),jo(i.i,n),mt(n,s,e)}function qi(i,e){i.na&&Zr(i.na,function(n,s){Cn(e,s,n)}),i.h&&zr({},function(n,s){Cn(e,s,n)})}function ws(i,e,n){n=Math.min(i.j.length,n);var s=i.h?Je(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const p=["count="+n];-1==l?0<n?(l=u[0].g,p.push("ofs="+l)):l=0:p.push("ofs="+l);let T=!0;for(let S=0;S<n;S++){let x=u[S].g;const L=u[S].map;if(x-=l,0>x)l=Math.max(0,u[S].g-100),T=!1;else try{Un(L,p,"req"+x+"_")}catch{s&&s(L)}}if(T){s=p.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,s}function ga(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;kr||ci(),Pn||(kr(),Pn=!0),Vn.add(e,i),i.A=0}}function ma(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=$s(Je(i.Ma,i),Cl(i,i.A)),i.A++,0))}function Tc(i){null!=i.B&&(Be.clearTimeout(i.B),i.B=null)}function Gu(i){i.g=new Hi(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Fr(i.wa);Cn(e,"RID","rpc"),Cn(e,"SID",i.K),Cn(e,"AID",i.V),Cn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Cn(e,"TO",i.qa),Cn(e,"TYPE","xmlhttp"),qi(i,e),i.o&&i.s&&ns(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=Ni(Fr(e)),n.u=null,n.S=!0,Kt(n,i)}function Io(i){null!=i.v&&(Be.clearTimeout(i.v),i.v=null)}function Ja(i,e){var n=null;if(i.g==e){Io(i),Tc(i),i.g=null;var s=2}else{if(!Bu(i.i,e))return;n=e.F,Vr(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;K(s=vi(),new za(s,n)),vo(i)}else ga(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==s&&function Ya(i,e){return!(Bo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=$s(Je(i.Na,i,e),Cl(i,i.C)),i.C++,0)))}(i,e)||2==s&&ma(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Ks(i,5);break;case 4:Ks(i,10);break;case 3:Ks(i,6);break;default:Ks(i,2)}}function Cl(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Ks(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var s=Je(i.pb,i);n||(n=new Jn("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||es(n,"https"),Ni(n)),function da(i,e){const n=new ps;if(Be.Image){const s=new Image;s.onload=Rn(qa,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Rn(qa,n,s,"TestLoadImage: error",!1,e),s.onabort=Rn(qa,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Rn(qa,n,s,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(n.toString(),s)}else Qr(2);i.H=0,i.h&&i.h.za(e),Ho(i),zu(i)}function Ho(i){if(i.H=0,i.ma=[],i.h){const e=mo(i.i);(0!=e.length||0!=i.j.length)&&(fn(i.ma,e),fn(i.ma,i.j),i.i.i.length=0,Dn(i.j),i.j.length=0),i.h.ya()}}function Dc(i,e,n){var s=n instanceof Jn?Fr(n):new Jn(n);if(""!=s.g)e&&(s.g=e+"."+s.g),fo(s,s.m);else{var u=Be.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new Jn(null);s&&es(l,s),e&&(l.g=e),u&&fo(l,u),n&&(l.l=n),s=l}return e=i.Da,(n=i.F)&&e&&Cn(s,n,e),Cn(s,"VER",i.ra),qi(i,s),s}function Xa(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(i.Ha&&!i.va?new Ka({ob:n}):i.va)).Oa(i.J),e}function eu(){}function zo(){if(bt&&!(10<=Number(cr)))throw Error("Environmental error: no available transport.")}function hi(i,e){Q.call(this),this.g=new rs(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!en(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!en(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new b(this)}function w(i){Lr.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function k(){Rs.call(this),this.status=1}function b(i){this.g=i}function Z(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pe(i,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)s[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)s[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],p=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+s[0]+3614090360&4294967295;p=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(p<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(u^l&(n^u))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(n^u^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(u^(n|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=n+((p=e+(u^(n|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((u=l+((p=u+(e^(l|~n))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function Oe(i,e){this.h=e;for(var n=[],s=!0,u=i.length-1;0<=u;u--){var l=0|i[u];s&&l==e||(n[u]=l,s=!1)}this.g=n}(Qe=Xn.prototype).Oa=function(i){this.M=i},Qe.ha=function(i,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vr.g(),this.C=function Fo(i){return i.h||(i.h=i.i())}(this.u?this.u:vr),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void Oi(this,l)}if(i=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)n.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())n.set(l,s.get(l))}s=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=Be.FormData&&i instanceof Be.FormData,!(0<=yn(Qa,e))||s||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of n)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yo(this),0<this.B&&((this.L=function Es(i){return bt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=Xi(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Oi(this,l)}},Qe.ua=function(){typeof lt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,K(this,"timeout"),this.abort(8))},Qe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,K(this,"complete"),K(this,"abort"),Er(this))},Qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Er(this,!0)),Xn.$.N.call(this)},Qe.La=function(){this.s||(this.G||this.v||this.l?wc(this):this.kb())},Qe.kb=function(){wc(this)},Qe.isActive=function(){return!!this.g},Qe.da=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},Qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),$u(e)}},Qe.Ia=function(){return this.m},Qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=rs.prototype).ra=8,Qe.H=1,Qe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Hi(this,this.l,i);let l=this.s;if(this.U&&(l?(l=ai(l),Mi(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ws(this,u,e),Cn(n=Fr(this.I),"RID",i),Cn(n,"CVER",22),this.F&&Cn(n,"X-HTTP-Session-Id",this.F),qi(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(Gs(l)))+"&"+e:this.o&&ns(n,this.o,l)),jo(this.i,u),this.bb&&Cn(n,"TYPE","init"),this.P?(Cn(n,"$req",e),Cn(n,"SID","null"),u.aa=!0,mt(u,n,null)):mt(u,n,e),this.H=2}}else 3==this.H&&(i?Eo(this,i):0==this.j.length||go(this.i)||Eo(this))},Qe.Ma=function(){if(this.u=null,Gu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=$s(Je(this.jb,this),i)}},Qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Qr(10),qs(this),Gu(this))},Qe.ib=function(){null!=this.v&&(this.v=null,qs(this),ma(this),Qr(19))},Qe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Qr(2)):(this.l.info("Failed to ping google.com"),Qr(1))},Qe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qe=eu.prototype).Ba=function(){},Qe.Aa=function(){},Qe.za=function(){},Qe.ya=function(){},Qe.isActive=function(){return!0},Qe.Va=function(){},zo.prototype.g=function(i,e){return new hi(i,e)},dt(hi,Q),hi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Qr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Dc(i,null,i.Y),vo(i)},hi.prototype.close=function(){Ws(this.g)},hi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=xe(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&vo(e)},hi.prototype.N=function(){this.g.h=null,delete this.j,Ws(this.g),delete this.g,hi.$.N.call(this)},dt(w,Lr),dt(k,Rs),dt(b,eu),b.prototype.Ba=function(){K(this.g,"a")},b.prototype.Aa=function(i){K(this.g,new w(i))},b.prototype.za=function(i){K(this.g,new k)},b.prototype.ya=function(){K(this.g,"b")},dt(Z,function N(){this.blockSize=-1}),Z.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Z.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,s=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)Pe(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(s[u++]=i.charCodeAt(l++),u==this.blockSize){Pe(this,s),u=0;break}}else for(;l<e;)if(s[u++]=i[l++],u==this.blockSize){Pe(this,s),u=0;break}}this.h=u,this.i+=e},Z.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)i[n++]=this.g[e]>>>s&255;return i};var At={};function kn(i){return-128<=i&&128>i?function ii(i,e){var n=At;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Oe([0|e],0>e?-1:0)}):new Oe([0|i],0>i?-1:0)}function nn(i){if(isNaN(i)||!isFinite(i))return Bn;if(0>i)return mr(nn(-i));for(var e=[],n=1,s=0;i>=n;s++)e[s]=i/n|0,n*=rn;return new Oe(e,0)}var rn=4294967296,Bn=kn(0),Ln=kn(1),gr=kn(16777216);function dr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function hr(i){return-1==i.h}function mr(i){for(var e=i.g.length,n=[],s=0;s<e;s++)n[s]=~i.g[s];return new Oe(n,~i.h).add(Ln)}function Jr(i,e){return i.add(mr(e))}function is(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function br(i,e){this.g=i,this.h=e}function bi(i,e){if(dr(e))throw Error("division by zero");if(dr(i))return new br(Bn,Bn);if(hr(i))return e=bi(mr(i),e),new br(mr(e.g),mr(e.h));if(hr(e))return e=bi(i,mr(e)),new br(mr(e.g),e.h);if(30<i.g.length){if(hr(i)||hr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ln,s=e;0>=s.X(i);)n=Al(n),s=Al(s);var u=jn(n,1),l=jn(s,1);for(s=jn(s,2),n=jn(n,2);!dr(s);){var p=l.add(s);0>=p.X(i)&&(u=u.add(n),l=p),s=jn(s,1),n=jn(n,1)}return e=Jr(i,u.R(e)),new br(u,e)}for(u=Bn;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),p=(l=nn(n)).R(e);hr(p)||0<p.X(i);)p=(l=nn(n-=s)).R(e);dr(l)&&(l=Ln),u=u.add(l),i=Jr(i,p)}return new br(u,i)}function Al(i){for(var e=i.g.length+1,n=[],s=0;s<e;s++)n[s]=i.D(s)<<1|i.D(s-1)>>>31;return new Oe(n,i.h)}function jn(i,e){var n=e>>5;e%=32;for(var s=i.g.length-n,u=[],l=0;l<s;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new Oe(u,i.h)}(Qe=Oe.prototype).ea=function(){if(hr(this))return-mr(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);i+=(0<=s?s:rn+s)*e,e*=rn}return i},Qe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(dr(this))return"0";if(hr(this))return"-"+mr(this).toString(i);for(var e=nn(Math.pow(i,6)),n=this,s="";;){var u=bi(n,e).g,l=((0<(n=Jr(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(dr(n=u))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},Qe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Qe.X=function(i){return hr(i=Jr(this,i))?-1:dr(i)?0:1},Qe.abs=function(){return hr(this)?mr(this):this},Qe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0,u=0;u<=e;u++){var l=s+(65535&this.D(u))+(65535&i.D(u)),p=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);s=p>>>16,n[u]=(p&=65535)<<16|(l&=65535)}return new Oe(n,-2147483648&n[n.length-1]?-1:0)},Qe.R=function(i){if(dr(this)||dr(i))return Bn;if(hr(this))return hr(i)?mr(this).R(mr(i)):mr(mr(this).R(i));if(hr(i))return mr(this.R(mr(i)));if(0>this.X(gr)&&0>i.X(gr))return nn(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var u=0;u<i.g.length;u++){var l=this.D(s)>>>16,p=65535&this.D(s),T=i.D(u)>>>16,S=65535&i.D(u);n[2*s+2*u]+=p*S,is(n,2*s+2*u),n[2*s+2*u+1]+=l*S,is(n,2*s+2*u+1),n[2*s+2*u+1]+=p*T,is(n,2*s+2*u+1),n[2*s+2*u+2]+=l*T,is(n,2*s+2*u+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Oe(n,0)},Qe.gb=function(i){return bi(this,i).h},Qe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&i.D(s);return new Oe(n,this.h&i.h)},Qe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|i.D(s);return new Oe(n,this.h|i.h)},Qe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^i.D(s);return new Oe(n,this.h^i.h)},zo.prototype.createWebChannel=zo.prototype.g,hi.prototype.send=hi.prototype.u,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Ga.COMPLETE="complete",ln.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",Q.prototype.listen=Q.prototype.O,Xn.prototype.listenOnce=Xn.prototype.P,Xn.prototype.getLastError=Xn.prototype.Sa,Xn.prototype.getLastErrorCode=Xn.prototype.Ia,Xn.prototype.getStatus=Xn.prototype.da,Xn.prototype.getResponseJson=Xn.prototype.Wa,Xn.prototype.getResponseText=Xn.prototype.ja,Xn.prototype.send=Xn.prototype.ha,Xn.prototype.setWithCredentials=Xn.prototype.Oa,Z.prototype.digest=Z.prototype.l,Z.prototype.reset=Z.prototype.reset,Z.prototype.update=Z.prototype.j,Oe.prototype.add=Oe.prototype.add,Oe.prototype.multiply=Oe.prototype.R,Oe.prototype.modulo=Oe.prototype.gb,Oe.prototype.compare=Oe.prototype.X,Oe.prototype.toNumber=Oe.prototype.ea,Oe.prototype.toString=Oe.prototype.toString,Oe.prototype.getBits=Oe.prototype.D,Oe.fromNumber=nn,Oe.fromString=function An(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return mr(An(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nn(Math.pow(e,8)),s=Bn,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),p=parseInt(i.substring(u,u+l),e);8>l?(l=nn(Math.pow(e,l)),s=s.R(l).add(nn(p))):s=(s=s.R(n)).add(nn(p))}return s};var _a=on.createWebChannelTransport=function(){return new zo},Go=on.getStatEventTarget=function(){return vi()},Ei=on.ErrorCode=Lo,Qd=on.EventType=Ga,Yd=on.Event=yi,ya=on.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Cc=(on.FetchXmlHttpFactory=Ka,on.WebChannel=ln),Jd=on.XhrIo=Xn,Sl=on.Md5=Z,Ri=on.Integer=Oe;const Zs="@firebase/firestore";class Mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");let va="10.8.0";const wo=new Tt.Yd("@firebase/firestore");function Wo(){return wo.logLevel}function Me(i,...e){if(wo.logLevel<=Tt.in.DEBUG){const n=e.map(Ki);wo.debug(`Firestore (${va}): ${i}`,...n)}}function xr(i,...e){if(wo.logLevel<=Tt.in.ERROR){const n=e.map(Ki);wo.error(`Firestore (${va}): ${i}`,...n)}}function Ii(i,...e){if(wo.logLevel<=Tt.in.WARN){const n=e.map(Ki);wo.warn(`Firestore (${va}): ${i}`,...n)}}function Ki(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function It(i="Unexpected state"){const e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+i;throw xr(e),new Error(e)}function Mt(i,e){i||It()}function ut(i,e){return i}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Dt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class tu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mr.UNAUTHENTICATED))}shutdown(){}}class Ke{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Sn{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var s=this;let u=this.i;const l=x=>this.i!==u?(u=this.i,n(x)):Promise.resolve();let p=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Ur,e.enqueueRetryable(()=>l(this.currentUser))};const T=()=>{const x=p;e.enqueueRetryable((0,se.Z)(function*(){yield x.promise,yield l(s.currentUser)}))},S=x=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(x=>S(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?S(x):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Ur)}},0),T()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Mt("string"==typeof s.accessToken),new tu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new Mr(e)}}class Pl{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nu{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Pl(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Br{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=l=>{null!=l.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.R;return this.R=l.token,Me("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const u=l=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Mt("string"==typeof n.token),this.R=n.token,new fi(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ts(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class ru{static newId(){const n=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=Ts(40);for(let l=0;l<u.length;++l)s.length<20&&u[l]<n&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return s}}function Wt(i,e){return i<e?-1:i>e?1:0}function Ea(i,e,n){return i.length===e.length&&i.every((s,u)=>n(s,e[u]))}function Xd(i){return i+"\0"}class ir{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ir(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new ir(0,0))}static max(){return new yt(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wi{constructor(e,n,s){void 0===n?n=0:n>e.length&&It(),void 0===s?s=e.length-n:s>e.length-n&&It(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return 0===wi.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let u=0;u<s;u++){const l=e.get(u),p=n.get(u);if(l<p)return-1;if(l>p)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _n extends wi{construct(e,n,s){return new _n(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(u=>u.length>0))}return new _n(n)}static emptyPath(){return new _n([])}}const Ns=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends wi{construct(e,n,s){return new En(e,n,s)}static isValidIdentifier(e){return Ns.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new En(["__name__"])}static fromServerFormat(e){const n=[];let s="",u=0;const l=()=>{if(0===s.length)throw new Ye(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let p=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new Ye(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Ye(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===T?(p=!p,u++):"."!==T||p?(s+=T,u++):(l(),u++)}if(l(),p)throw new Ye(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}class ft{constructor(e){this.path=e}static fromPath(e){return new ft(_n.fromString(e))}static fromName(e){return new ft(_n.fromString(e).popFirst(5))}static empty(){return new ft(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return _n.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new _n(e.slice()))}}class To{constructor(e,n,s,u){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=u}}function Ac(i){return i.fields.find(e=>2===e.kind)}function Do(i){return i.fields.filter(e=>2!==e.kind)}To.UNKNOWN_ID=-1;class Os{constructor(e,n){this.fieldPath=e,this.kind=n}}class E{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new E(0,D.min())}}function C(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=yt.fromTimestamp(1e9===s?new ir(n+1,0):new ir(n,s));return new D(u,ft.empty(),e)}function v(i){return new D(i.readTime,i.key,-1)}class D{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new D(yt.min(),ft.empty(),-1)}static max(){return new D(yt.max(),ft.empty(),-1)}}function P(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=ft.comparator(i.documentKey,e.documentKey),0!==n?n:Wt(i.largestBatchId,e.largestBatchId))}const U="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Re(i){return Se.apply(this,arguments)}function Se(){return Se=(0,se.Z)(function*(i){if(i.code!==ke.FAILED_PRECONDITION||i.message!==U)throw i;Me("LocalStore","Unexpectedly lost primary lease")}),Se.apply(this,arguments)}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((s,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,s)=>{n(e)})}static reject(e){return new X((n,s)=>{s(e)})}static waitFor(e){return new X((n,s)=>{let u=0,l=0,p=!1;e.forEach(T=>{++u,T.next(()=>{++l,p&&l===u&&n()},S=>s(S))}),p=!0,l===u&&n()})}static or(e){let n=X.resolve(!1);for(const s of e)n=n.next(u=>u?X.resolve(u):s());return n}static forEach(e,n){const s=[];return e.forEach((u,l)=>{s.push(n.call(this,u,l))}),this.waitFor(s)}static mapArray(e,n){return new X((s,u)=>{const l=e.length,p=new Array(l);let T=0;for(let S=0;S<l;S++){const x=S;n(e[x]).next(L=>{p[x]=L,++T,T===l&&s(p)},L=>u(L))}})}static doWhile(e,n){return new X((s,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):s()};l()})}}class Jt{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ur,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new In(e,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=su(s.target.error);this.V.reject(new In(e,u))}}static open(e,n,s,u){try{return new Jt(n,e.transaction(u,s))}catch(l){throw new In(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new iu(n)}}class zt{constructor(e,n,s){this.name=e,this.version=n,this.p=s,12.2===zt.S((0,Dt.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Qs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Dt.hl)())return!1;if(zt.C())return!0;const e=(0,Dt.z$)(),n=zt.S(e),s=0<n&&n<10,u=zt.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var n=this;return(0,se.Z)(function*(){return n.db||(Me("SimpleDb","Opening database:",n.name),n.db=yield new Promise((s,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{u(new In(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const T=p.target.error;u("VersionError"===T.name?new Ye(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new Ye(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new In(e,T))},l.onupgradeneeded=p=>{Me("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',p.oldVersion),n.p.N(p.target.result,l.transaction,p.oldVersion,n.version).next(()=>{Me("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=s=>n.B(s)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,s,u){var l=this;return(0,se.Z)(function*(){const p="readonly"===n;let T=0;for(;;){++T;try{l.db=yield l.O(e);const S=Jt.open(l.db,e,p?"readonly":"readwrite",s),x=u(S).next(L=>(S.g(),L)).catch(L=>(S.abort(L),X.reject(L))).toPromise();return x.catch(()=>{}),yield S.m,x}catch(S){const x=S,L="FirebaseError"!==x.name&&T<3;if(Me("SimpleDb","Transaction failed with error:",x.message,"Retrying:",L),l.close(),!L)return Promise.reject(x)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gn{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Qs(this.k.delete())}}class In extends Ye{constructor(e,n){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ss(i){return"IndexedDbTransactionError"===i.name}class iu{constructor(e){this.store=e}put(e,n){let s;return void 0!==n?(Me("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Qs(s)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Qs(this.store.add(e))}get(e){return Qs(this.store.get(e)).next(n=>(void 0===n&&(n=null),Me("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Qs(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Qs(this.store.count())}W(e,n){const s=this.options(e,n),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const l=u.getAll(s.range);return new X((p,T)=>{l.onerror=S=>{T(S.target.error)},l.onsuccess=S=>{p(S.target.result)}})}{const l=this.cursor(s),p=[];return this.G(l,(T,S)=>{p.push(S)}).next(()=>p)}}j(e,n){const s=this.store.getAll(e,null===n?void 0:n);return new X((u,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}H(e,n){Me("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.J=!1;const u=this.cursor(s);return this.G(u,(l,p,T)=>T.delete())}Y(e,n){let s;n?s=e:(s={},n=e);const u=this.cursor(s);return this.G(u,n)}Z(e){const n=this.cursor({});return new X((s,u)=>{n.onerror=l=>{const p=su(l.target.error);u(p)},n.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(T=>{T?p.continue():s()}):s()}})}G(e,n){const s=[];return new X((u,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const T=p.target.result;if(!T)return void u();const S=new gn(T),x=n(T.primaryKey,T.value,S);if(x instanceof X){const L=x.catch(G=>(S.done(),X.reject(G)));s.push(L)}S.isDone?u():null===S.$?T.continue():T.continue(S.$)}}).next(()=>X.waitFor(s))}options(e,n){let s;return void 0!==e&&("string"==typeof e?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Qs(i){return new X((e,n)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=su(s.target.error);n(u)}})}let qo=!1;function su(i){const e=zt.S((0,Dt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const s=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qo||(qo=!0,setTimeout(()=>{throw s},0)),s}}return i}class ef{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Me("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.Z)(function*(){n.task=null;try{Me("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(s){ss(s)?Me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Re(s)}yield n.ee(6e4)}))}}class Nl{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,se.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>n.ne(s,e))})()}ne(e,n){const s=new Set;let u=n,l=!0;return X.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return Me("IndexBackfiller",`Processing collection: ${p}`),this.re(e,p,u).next(T=>{u-=T,s.add(p)});l=!1})).next(()=>n-u)}re(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ie(u,l)).next(T=>(Me("IndexBackfiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,n,T))).next(()=>p.size)}))}ie(e,n){let s=e;return n.changes.forEach((u,l)=>{const p=v(l);P(p,s)>0&&(s=p)}),new D(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Xr=(()=>{class i{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=u=>this.se(u),this.oe=u=>s.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function ou(i){return null==i}function Ia(i){return 0===i&&1/i==-1/0}function au(i){return"number"==typeof i&&Number.isInteger(i)&&!Ia(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function pi(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=eh(e)),e=Sc(i.get(n),e);return eh(e)}function Sc(i,e){let n=e;const s=i.length;for(let u=0;u<s;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function eh(i){return i+"\x01\x01"}function Ds(i){const e=i.length;if(Mt(e>=2),2===e)return Mt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),_n.emptyPath();const n=e-2,s=[];let u="";for(let l=0;l<e;){const p=i.indexOf("\x01",l);switch((p<0||p>n)&&It(),i.charAt(p+1)){case"\x01":const T=i.substring(l,p);let S;0===u.length?S=T:(u+=T,S=u,u=""),s.push(S);break;case"\x10":u+=i.substring(l,p),u+="\0";break;case"\x11":u+=i.substring(l,p+1);break;default:It()}l=p+2}return new _n(s)}const bc=["userId","batchId"];function Ys(i,e){return[i,pi(e)]}function qu(i,e,n){return[i,pi(e),n]}const th={},Ol=["prefixPath","collectionGroup","readTime","documentId"],Ko=["prefixPath","collectionGroup","documentId"],tf=["collectionGroup","readTime","prefixPath","documentId"],dg=["canonicalId","targetId"],hg=["targetId","path"],m_=["path","targetId"],nf=["collectionId","parent"],kl=["indexId","uid"],Rc=["uid","sequenceNumber"],fg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uu=["indexId","uid","orderedDocumentKey"],nh=["userId","collectionPath","documentId"],Ku=["userId","collectionPath","largestBatchId"],__=["userId","collectionGroup","largestBatchId"],Pc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ll=[...Pc,"documentOverlays"],rf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zi=rf,pg=[...Zi,"indexConfiguration","indexState","indexEntries"];class Zu extends Y{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function jr(i,e){const n=ut(i);return zt.M(n.ae,e)}function Mc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Cs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Fl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class sr{constructor(e,n){this.comparator=e,this.root=n||gi.EMPTY}insert(e,n){return new sr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return n+s.left.size;u<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,n,s,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,n,s,u,l){this.key=e,this.value=n,this.color=s??gi.RED,this.left=u??gi.EMPTY,this.right=l??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,u,l){return new gi(e??this.key,n??this.value,s??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let u=this;const l=s(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,s),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return gi.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1,gi.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(e,n,s,u,l){return this}insert(e,n,s){return new gi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new er(this.comparator);return n.data=e,n}}class rh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wa(i){return i.hasNext()?i.getNext():void 0}class Pi{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Pi([])}unionWith(e){let n=new er(En.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Pi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class Ta extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ta("Invalid base64 string: "+l):l}}(e);return new ei(n)}static fromUint8Array(e){const n=function(u){let l="";for(let p=0;p<u.length;++p)l+=String.fromCharCode(u[p]);return l}(e);return new ei(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let u=0;u<n.length;u++)s[u]=n.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const sf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(i){if(Mt(!!i),"string"==typeof i){let e=0;const n=sf.exec(i);if(Mt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:$r(i.seconds),nanos:$r(i.nanos)}}function $r(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ir(i){return"string"==typeof i?ei.fromBase64String(i):ei.fromUint8Array(i)}function cu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lu(i){const e=i.mapValue.fields.__previous_value__;return cu(e)?lu(e):e}function Da(i){const e=os(i.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class sh{constructor(e,n,s,u,l,p,T,S,x){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=u,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=S,this.useFetchStreams=x}}class Zo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}const Js={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Co={nullValue:"NULL_VALUE"};function as(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?cu(i)?4:uf(i)?9007199254740991:10:It()}function Qi(i,e){if(i===e)return!0;const n=as(i);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Da(i).isEqual(Da(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const p=os(u.timestampValue),T=os(l.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,Ir(i.bytesValue).isEqual(Ir(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,l){return $r(u.geoPointValue.latitude)===$r(l.geoPointValue.latitude)&&$r(u.geoPointValue.longitude)===$r(l.geoPointValue.longitude)}(i,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return $r(u.integerValue)===$r(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const p=$r(u.doubleValue),T=$r(l.doubleValue);return p===T?Ia(p)===Ia(T):isNaN(p)&&isNaN(T)}return!1}(i,e);case 9:return Ea(i.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:return function(u,l){const p=u.mapValue.fields||{},T=l.mapValue.fields||{};if(Mc(p)!==Mc(T))return!1;for(const S in p)if(p.hasOwnProperty(S)&&(void 0===T[S]||!Qi(p[S],T[S])))return!1;return!0}(i,e);default:return It()}var l}function du(i,e){return void 0!==(i.values||[]).find(n=>Qi(n,e))}function ks(i,e){if(i===e)return 0;const n=as(i),s=as(e);if(n!==s)return Wt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wt(i.booleanValue,e.booleanValue);case 2:return function(l,p){const T=$r(l.integerValue||l.doubleValue),S=$r(p.integerValue||p.doubleValue);return T<S?-1:T>S?1:T===S?0:isNaN(T)?isNaN(S)?0:-1:1}(i,e);case 3:return hu(i.timestampValue,e.timestampValue);case 4:return hu(Da(i),Da(e));case 5:return Wt(i.stringValue,e.stringValue);case 6:return function(l,p){const T=Ir(l),S=Ir(p);return T.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const T=l.split("/"),S=p.split("/");for(let x=0;x<T.length&&x<S.length;x++){const L=Wt(T[x],S[x]);if(0!==L)return L}return Wt(T.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const T=Wt($r(l.latitude),$r(p.latitude));return 0!==T?T:Wt($r(l.longitude),$r(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const T=l.values||[],S=p.values||[];for(let x=0;x<T.length&&x<S.length;++x){const L=ks(T[x],S[x]);if(L)return L}return Wt(T.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){if(l===Js.mapValue&&p===Js.mapValue)return 0;if(l===Js.mapValue)return 1;if(p===Js.mapValue)return-1;const T=l.fields||{},S=Object.keys(T),x=p.fields||{},L=Object.keys(x);S.sort(),L.sort();for(let G=0;G<S.length&&G<L.length;++G){const oe=Wt(S[G],L[G]);if(0!==oe)return oe;const be=ks(T[S[G]],x[L[G]]);if(0!==be)return be}return Wt(S.length,L.length)}(i.mapValue,e.mapValue);default:throw It()}}function hu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Wt(i,e);const n=os(i),s=os(e),u=Wt(n.seconds,s.seconds);return 0!==u?u:Wt(n.nanos,s.nanos)}function xc(i){return oh(i)}function oh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=os(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ir(i.bytesValue).toBase64():"referenceValue"in i?ft.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",u=!0;for(const l of n.values||[])u?u=!1:s+=",",s+=oh(l);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const p of s)l?l=!1:u+=",",u+=`${p}:${oh(n.fields[p])}`;return u+"}"}(i.mapValue):It()}function Yu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function af(i){return!!i&&"integerValue"in i}function Oc(i){return!!i&&"arrayValue"in i}function gg(i){return!!i&&"nullValue"in i}function Vl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qo(i){return!!i&&"mapValue"in i}function kc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Cs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=kc(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function uf(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function mi(i){return"nullValue"in i?Co:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Yu(Zo.empty(),ft.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:It()}function mg(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Yu(Zo.empty(),ft.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Js:It()}function Ju(i,e){const n=ks(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function cf(i,e){const n=ks(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Qo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(n)}setAll(e){let n=En.emptyPath(),s={},u=[];e.forEach((p,T)=>{if(!n.isImmediateParentOf(T)){const S=this.getFieldsMap(n);this.applyChanges(S,s,u),s={},u=[],n=T.popLast()}p?s[T.lastSegment()]=kc(p):u.push(T.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,s,u)}delete(e){const n=this.field(e.popLast());Qo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=n.mapValue.fields[e.get(s)];Qo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,s){Cs(n,(u,l)=>e[u]=l);for(const u of s)delete e[u]}clone(){return new or(kc(this.value))}}function Yo(i){const e=[];return Cs(i.fields,(n,s)=>{const u=new En([n]);if(Qo(s)){const l=Yo(s.mapValue).fields;if(0===l.length)e.push(u);else for(const p of l)e.push(u.child(p))}else e.push(u)}),new Pi(e)}class _r{constructor(e,n,s,u,l,p,T){this.key=e,this.documentType=n,this.version=s,this.readTime=u,this.createTime=l,this.data=p,this.documentState=T}static newInvalidDocument(e){return new _r(e,0,yt.min(),yt.min(),yt.min(),or.empty(),0)}static newFoundDocument(e,n,s,u){return new _r(e,1,n,yt.min(),s,u,0)}static newNoDocument(e,n){return new _r(e,2,n,yt.min(),yt.min(),or.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,yt.min(),yt.min(),or.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xs{constructor(e,n){this.position=e,this.inclusive=n}}function Xu(i,e,n){let s=0;for(let u=0;u<i.position.length;u++){const l=e[u],p=i.position[u];if(s=l.field.isKeyField()?ft.comparator(ft.fromName(p.referenceValue),n.key):ks(p,n.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function lf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Qi(i.position[n],e.position[n]))return!1;return!0}class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function df(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class _g{}class Xt extends _g{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,s):new yg(e,n,s):"array-contains"===n?new tc(e,s):"in"===n?new ch(e,s):"not-in"===n?new fu(e,s):"array-contains-any"===n?new pf(e,s):new Xt(e,n,s)}static createKeyFieldInFilter(e,n,s){return"in"===n?new Lc(e,s):new $l(e,s)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ks(n,this.value)):null!==n&&as(this.value)===as(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends _g{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Wn(e,n)}matches(e){return eo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function eo(i){return"and"===i.op}function hf(i){return"or"===i.op}function ec(i){return Bl(i)&&eo(i)}function Bl(i){for(const e of i.filters)if(e instanceof Wn)return!1;return!0}function ah(i){if(i instanceof Xt)return i.field.canonicalString()+i.op.toString()+xc(i.value);if(ec(i))return i.filters.map(e=>ah(e)).join(",");{const e=i.filters.map(n=>ah(n)).join(",");return`${i.op}(${e})`}}function jl(i,e){return i instanceof Xt?(s=i,(u=e)instanceof Xt&&s.op===u.op&&s.field.isEqual(u.field)&&Qi(s.value,u.value)):i instanceof Wn?function(s,u){return u instanceof Wn&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((l,p,T)=>l&&jl(p,u.filters[T]),!0)}(i,e):void It();var s,u}function ff(i,e){const n=i.filters.concat(e);return Wn.create(n,i.op)}function uh(i){return i instanceof Xt?`${(n=i).field.canonicalString()} ${n.op} ${xc(n.value)}`:i instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(uh).join(" ,")+"}"}(i):"Filter";var n}class yg extends Xt{constructor(e,n,s){super(e,n,s),this.key=ft.fromName(s.referenceValue)}matches(e){const n=ft.comparator(e.key,this.key);return this.matchesComparison(n)}}class Lc extends Xt{constructor(e,n){super(e,"in",n),this.keys=vg(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $l extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=vg(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vg(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(s=>ft.fromName(s.referenceValue))}class tc extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oc(n)&&du(n.arrayValue,this.value)}}class ch extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&du(this.value.arrayValue,n)}}class fu extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!du(this.value.arrayValue,n)}}class pf extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>du(this.value.arrayValue,s))}}class lh{constructor(e,n=null,s=[],u=[],l=null,p=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=u,this.limit=l,this.startAt=p,this.endAt=T,this.ce=null}}function Fc(i,e=null,n=[],s=[],u=null,l=null,p=null){return new lh(i,e,n,s,u,l,p)}function Ao(i){const e=ut(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ah(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>{return(l=s).field.canonicalString()+l.dir;var l}).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>xc(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>xc(s)).join(",")),e.ce=n}return e.ce}function nc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!df(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jl(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!lf(i.startAt,e.startAt)&&lf(i.endAt,e.endAt)}function Hl(i){return ft.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function zl(i,e){return i.filters.filter(n=>n instanceof Xt&&n.field.isEqual(e))}function Ca(i,e,n){let s=Co,u=!0;for(const l of zl(i,e)){let p=Co,T=!0;switch(l.op){case"<":case"<=":p=mi(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,T=!1;break;case"!=":case"not-in":p=Co}Ju({value:s,inclusive:u},{value:p,inclusive:T})<0&&(s=p,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];Ju({value:s,inclusive:u},{value:p,inclusive:n.inclusive})<0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}function rc(i,e,n){let s=Js,u=!0;for(const l of zl(i,e)){let p=Js,T=!0;switch(l.op){case">=":case">":p=mg(l.value),T=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,T=!1;break;case"!=":case"not-in":p=Js}cf({value:s,inclusive:u},{value:p,inclusive:T})>0&&(s=p,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];cf({value:s,inclusive:u},{value:p,inclusive:n.inclusive})>0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}class Aa{constructor(e,n=null,s=[],u=[],l=null,p="F",T=null,S=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=u,this.limit=l,this.limitType=p,this.startAt=T,this.endAt=S,this.le=null,this.he=null,this.Pe=null}}function Eg(i,e,n,s,u,l,p,T){return new Aa(i,e,n,s,u,l,p,T)}function As(i){return new Aa(i)}function gf(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function mf(i){return null!==i.collectionGroup}function Sa(i){const e=ut(i);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new er(En.comparator);return p.filters.forEach(S=>{S.getFlattenedFilters().forEach(x=>{x.isInequality()&&(T=T.add(x.field))})}),T})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new Ul(l,s))}),n.has(En.keyField().canonicalString())||e.le.push(new Ul(En.keyField(),s))}return e.le}function Yi(i){const e=ut(i);return e.he||(e.he=function Gl(i,e){if("F"===i.limitType)return Fc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Ul(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Xs(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Xs(i.startAt.position,i.startAt.inclusive):null;return Fc(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}(e,Sa(i))),e.he}function ic(i,e){const n=i.filters.concat([e]);return new Aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Vc(i,e,n){return new Aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function pu(i,e){return nc(Yi(i),Yi(e))&&i.limitType===e.limitType}function dh(i){return`${Ao(Yi(i))}|lt:${i.limitType}`}function Uc(i){return`Query(target=${function(n){let s=n.path.canonicalString();return null!==n.collectionGroup&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(u=>uh(u)).join(", ")}]`),ou(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(u=>{return`${(p=u).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(u=>xc(u)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(u=>xc(u)).join(",")),`Target(${s})`}(Yi(i))}; limitType=${i.limitType})`}function ba(i,e){return e.isFoundDocument()&&function(s,u){const l=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ft.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(i,e)&&function(s,u){for(const l of Sa(s))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(i,e)&&function(s,u){for(const l of s.filters)if(!l.matches(u))return!1;return!0}(i,e)&&(u=e,!((s=i).startAt&&!function(p,T,S){const x=Xu(p,T,S);return p.inclusive?x<=0:x<0}(s.startAt,Sa(s),u)||s.endAt&&!function(p,T,S){const x=Xu(p,T,S);return p.inclusive?x>=0:x>0}(s.endAt,Sa(s),u)));var s,u}function Ig(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function _f(i){return(e,n)=>{let s=!1;for(const u of Sa(i)){const l=wg(u,e,n);if(0!==l)return l;s=s||u.field.isKeyField()}return 0}}function wg(i,e,n){const s=i.field.isKeyField()?ft.comparator(e.key,n.key):function(l,p,T){const S=p.data.field(l),x=T.data.field(l);return null!==S&&null!==x?ks(S,x):It()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return It()}}class to{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0!==s)for(const[u,l]of s)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[n]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,s)=>{for(const[u,l]of s)e(u,l)})}isEmpty(){return Fl(this.inner)}size(){return this.innerSize}}const y_=new sr(ft.comparator);function us(){return y_}const sc=new sr(ft.comparator);function Wl(...i){let e=sc;for(const n of i)e=e.insert(n.key,n);return e}function Tg(i){let e=sc;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function no(){return ql()}function hh(){return ql()}function ql(){return new to(i=>i.toString(),(i,e)=>i.isEqual(e))}const Dg=new sr(ft.comparator),gu=new er(ft.comparator);function sn(...i){let e=gu;for(const n of i)e=e.add(n);return e}const yf=new er(Wt);function Kl(){return yf}function Zl(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ia(e)?"-0":e}}function mu(i){return{integerValue:""+i}}function fh(i,e){return au(e)?mu(e):Zl(i,e)}class Bc{constructor(){this._=void 0}}function Ql(i,e,n){return i instanceof _u?function(u,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&cu(l)&&(l=lu(l)),l&&(p.fields.__previous_value__=l),{mapValue:p}}(n,e):i instanceof yu?vf(i,e):i instanceof Pa?Yl(i,e):function(u,l){const p=jc(u,l),T=Jl(p)+Jl(u.Ie);return af(p)&&af(u.Ie)?mu(T):Zl(u.serializer,T)}(i,e)}function Ra(i,e,n){return i instanceof yu?vf(i,e):i instanceof Pa?Yl(i,e):n}function jc(i,e){return i instanceof vu?af(s=e)||(l=s)&&"doubleValue"in l?e:{integerValue:0}:null;var s,l}class _u extends Bc{}class yu extends Bc{constructor(e){super(),this.elements=e}}function vf(i,e){const n=Xl(e);for(const s of i.elements)n.some(u=>Qi(u,s))||n.push(s);return{arrayValue:{values:n}}}class Pa extends Bc{constructor(e){super(),this.elements=e}}function Yl(i,e){let n=Xl(e);for(const s of i.elements)n=n.filter(u=>!Qi(u,s));return{arrayValue:{values:n}}}class vu extends Bc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Jl(i){return $r(i.integerValue||i.doubleValue)}function Xl(i){return Oc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Eu{constructor(e,n){this.field=e,this.transform=n}}class ph{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ti(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Jo{}function $c(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new wu(i.key,bn.none()):new Iu(i.key,i.data,bn.none());{const n=i.data,s=or.empty();let u=new er(En.comparator);for(let l of e.fields)if(!u.has(l)){let p=n.field(l);null===p&&l.length>1&&(l=l.popLast(),p=n.field(l)),null===p?s.delete(l):s.set(l,p),u=u.add(l)}return new So(i.key,s,new Pi(u.toArray()),bn.none())}}function ki(i,e,n){i instanceof Iu?function(u,l,p){const T=u.value.clone(),S=td(u.fieldTransforms,l,p.transformResults);T.setAll(S),l.convertToFoundDocument(p.version,T).setHasCommittedMutations()}(i,e,n):i instanceof So?function(u,l,p){if(!Ti(u.precondition,l))return void l.convertToUnknownDocument(p.version);const T=td(u.fieldTransforms,l,p.transformResults),S=l.data;S.setAll(Xo(u)),S.setAll(T),l.convertToFoundDocument(p.version,S).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ro(i,e,n,s){return i instanceof Iu?function(l,p,T,S){if(!Ti(l.precondition,p))return T;const x=l.value.clone(),L=Ef(l.fieldTransforms,S,p);return x.setAll(L),p.convertToFoundDocument(p.version,x).setHasLocalMutations(),null}(i,e,n,s):i instanceof So?function(l,p,T,S){if(!Ti(l.precondition,p))return T;const x=Ef(l.fieldTransforms,S,p),L=p.data;return L.setAll(Xo(l)),L.setAll(x),p.convertToFoundDocument(p.version,L).setHasLocalMutations(),null===T?null:T.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(G=>G.field))}(i,e,n,s):(T=n,Ti(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T);var p,T}function ed(i,e){let n=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),l=jc(s.transform,u||null);null!=l&&(null===n&&(n=or.empty()),n.set(s.field,l))}return n||null}function gh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=i.fieldTransforms)&&void 0===u||s&&u&&Ea(s,u,(l,p)=>function Cg(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(s=i.transform)instanceof yu&&u instanceof yu||s instanceof Pa&&u instanceof Pa?Ea(s.elements,u.elements,Qi):s instanceof vu&&u instanceof vu?Qi(s.Ie,u.Ie):s instanceof _u&&u instanceof _u);var s,u}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var s,u}class Iu extends Jo{constructor(e,n,s,u=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class So extends Jo{constructor(e,n,s,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Xo(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function td(i,e,n){const s=new Map;Mt(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],p=l.transform,T=e.data.field(l.field);s.set(l.field,Ra(p,T,n[u]))}return s}function Ef(i,e,n){const s=new Map;for(const u of i){const l=u.transform,p=n.data.field(u.field);s.set(u.field,Ql(l,p,e))}return s}class wu extends Jo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mh extends Jo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nd{constructor(e,n,s,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&ki(l,e,s[u])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ro(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ro(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=hh();return this.mutations.forEach(u=>{const l=e.get(u.key),p=l.overlayedDocument;let T=this.applyToLocalView(p,l.mutatedFields);T=n.has(u.key)?null:T;const S=$c(p,T);null!==S&&s.set(u.key,S),p.isValidDocument()||p.convertToNoDocument(yt.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),sn())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,s)=>gh(n,s))&&Ea(this.baseMutations,e.baseMutations,(n,s)=>gh(n,s))}}class Di{constructor(e,n,s,u){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=u}static from(e,n,s){Mt(e.mutations.length===s.length);let u=Dg;const l=e.mutations;for(let p=0;p<l.length;p++)u=u.insert(l[p].key,s[p].version);return new Di(e,n,s,u)}}class Tu{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hc{constructor(e,n){this.count=e,this.unchangedNames=n}}var ar,Tn;function rd(i){switch(i){default:return It();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function id(i){if(void 0===i)return xr("GRPC error has no .code"),ke.UNKNOWN;switch(i){case ar.OK:return ke.OK;case ar.CANCELLED:return ke.CANCELLED;case ar.UNKNOWN:return ke.UNKNOWN;case ar.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case ar.INTERNAL:return ke.INTERNAL;case ar.UNAVAILABLE:return ke.UNAVAILABLE;case ar.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case ar.NOT_FOUND:return ke.NOT_FOUND;case ar.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case ar.ABORTED:return ke.ABORTED;case ar.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case ar.DATA_LOSS:return ke.DATA_LOSS;default:return It()}}(Tn=ar||(ar={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";function ea(){return new TextEncoder}const sd=new Ri([4294967295,4294967295],0);function yh(i){const e=ea().encode(i),n=new Sl;return n.update(e),new Uint8Array(n.digest())}function od(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ri([n,s],0),new Ri([u,l],0)]}class oc{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new g(`Invalid padding: ${n}`);if(s<0)throw new g(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new g(`Invalid hash count: ${s}`);if(0===e.length&&0!==n)throw new g(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ri.fromNumber(this.Te)}de(e,n,s){let u=e.add(n.multiply(Ri.fromNumber(s)));return 1===u.compare(sd)&&(u=new Ri([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=yh(e),[s,u]=od(n);for(let l=0;l<this.hashCount;l++){const p=this.de(s,u,l);if(!this.Ae(p))return!1}return!0}static create(e,n,s){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new oc(l,u,n);return s.forEach(T=>p.insert(T)),p}insert(e){if(0===this.Te)return;const n=yh(e),[s,u]=od(n);for(let l=0;l<this.hashCount;l++){const p=this.de(s,u,l);this.Re(p)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class d{constructor(e,n,s,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const u=new Map;return u.set(e,f.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new d(yt.min(),u,new sr(Wt),us(),sn())}}class f{constructor(e,n,s,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new f(s,n,sn(),sn(),sn())}}class _{constructor(e,n,s,u){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=u}}class R{constructor(e,n){this.targetId=e,this.fe=n}}class F{constructor(e,n,s=ei.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=u}}class ee{constructor(){this.ge=0,this.pe=pt(),this.ye=ei.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sn(),n=sn(),s=sn();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:s=s.add(u);break;default:It()}}),new f(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=pt()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Mt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Ie{constructor(e){this.Le=e,this.ke=new Map,this.qe=us(),this.Qe=ze(),this.Ke=new sr(Wt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:It()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,s=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(Hl(l))if(0===s){const p=new ft(l.path);this.We(n,p,_r.newNoDocument(p,yt.min()))}else Mt(1===s);else{const p=this.Ze(n);if(p!==s){const T=this.Xe(e),S=T?this.et(T,e,p):1;0!==S&&(this.He(n),this.Ke=this.Ke.insert(n,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:l=0}=n;let p,T;try{p=Ir(s).toUint8Array()}catch(S){if(S instanceof Ta)return Ii("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{T=new oc(p,u,l)}catch(S){return Ii(S instanceof g?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===T.Te?null:T}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let u=0;return s.forEach(l=>{const p=this.Le.nt(),T=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;e.mightContain(T)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,p)=>{const T=this.Ye(p);if(T){if(l.current&&Hl(T.target)){const S=new ft(T.target.path);null!==this.qe.get(S)||this.st(p,S)||this.We(p,S,_r.newNoDocument(S,e))}l.De&&(n.set(p,l.ve()),l.Fe())}});let s=sn();this.Qe.forEach((l,p)=>{let T=!0;p.forEachWhile(S=>{const x=this.Ye(S);return!x||"TargetPurposeLimboResolution"===x.purpose||(T=!1,!1)}),T&&(s=s.add(l))}),this.qe.forEach((l,p)=>p.setReadTime(e));const u=new d(e,n,this.Ke,this.qe,s);return this.qe=us(),this.Qe=ze(),this.Ke=new sr(Wt),u}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ee,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new er(Wt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Me("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ee),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ze(){return new sr(ft.comparator)}function pt(){return new sr(ft.comparator)}const Rt={asc:"ASCENDING",desc:"DESCENDING"},Pt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wr={and:"AND",or:"OR"};class Ls{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fs(i,e){return i.useProto3Json||ou(e)?e:{value:e}}function Ma(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gc(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function If(i,e){return Ma(i,e.toTimestamp())}function Wr(i){return Mt(!!i),yt.fromTimestamp(function(n){const s=os(n);return new ir(s.seconds,s.nanos)}(i))}function xa(i,e){return ad(i,e).canonicalString()}function ad(i,e){const n=(u=i,new _n(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function ud(i){const e=_n.fromString(i);return Mt(T_(e)),e}function Na(i,e){return xa(i.databaseId,e.path)}function Vs(i,e){const n=ud(e);if(n.get(1)!==i.databaseId.projectId)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ft(ld(n))}function cd(i,e){return xa(i.databaseId,e)}function Wc(i){const e=ud(i);return 4===e.length?_n.emptyPath():ld(e)}function ac(i){return new _n(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ld(i){return Mt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ag(i,e,n){return{name:Na(i,e),fields:n.value.mapValue.fields}}function wf(i,e,n){const s=Vs(i,e.name),u=Wr(e.updateTime),l=e.createTime?Wr(e.createTime):yt.min(),p=new or({mapValue:{fields:e.fields}}),T=_r.newFoundDocument(s,u,l,p);return n&&T.setHasCommittedMutations(),n?T.setHasCommittedMutations():T}function qc(i,e){let n;if(e instanceof Iu)n={update:Ag(i,e.key,e.value)};else if(e instanceof wu)n={delete:Na(i,e.key)};else if(e instanceof So)n={update:Ag(i,e.key,e.data),updateMask:FI(e.fieldMask)};else{if(!(e instanceof mh))return It();n={verify:Na(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(l,p){const T=p.transform;if(T instanceof _u)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof yu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Pa)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof vu)return{fieldPath:p.field.canonicalString(),increment:T.Ie};throw It()}(0,s))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:If(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:It()),n;var l}function Kc(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?bn.updateTime(Wr(l.updateTime)):void 0!==l.exists?bn.exists(l.exists):bn.none():bn.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(p,T){let S=null;"setToServerValue"in T?(Mt("REQUEST_TIME"===T.setToServerValue),S=new _u):"appendMissingElements"in T?S=new yu(T.appendMissingElements.values||[]):"removeAllFromArray"in T?S=new Pa(T.removeAllFromArray.values||[]):"increment"in T?S=new vu(p,T.increment):It();const x=En.fromServerFormat(T.fieldPath);return new Eu(x,S)}(i,u)):[];var l;if(e.update){const u=Vs(i,e.update.name),l=new or({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Pi((e.updateMask.fieldPaths||[]).map(L=>En.fromServerFormat(L)));return new So(u,l,p,n,s)}return new Iu(u,l,n,s)}if(e.delete){const u=Vs(i,e.delete);return new wu(u,n)}if(e.verify){const u=Vs(i,e.verify);return new mh(u,n)}return It()}function Sg(i,e){return{documents:[cd(i,e.path)]}}function bg(i,e){const n={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=cd(i,u);const l=function(x){if(0!==x.length)return w_(Wn.create(x,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const p=function(x){if(0!==x.length)return x.map(L=>{return{field:io((oe=L).field),direction:I_(oe.dir)};var oe})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const T=Fs(i,e.limit);return null!==T&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(e.endAt)),{ut:n,parent:u};var x}function E_(i){let e=Wc(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let u=null;if(s>0){Mt(1===s);const L=n.from[0];L.allDescendants?u=L.collectionId:e=e.child(L.collectionId)}let l=[];n.where&&(l=function(G){const oe=Rg(G);return oe instanceof Wn&&ec(oe)?oe.getFilters():[oe]}(n.where));let p=[];n.orderBy&&(p=n.orderBy.map(oe=>{return new Ul(dd((rt=oe).field),function(ct){switch(ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(rt.direction));var rt}));let T=null;n.limit&&(T=function(G){let oe;return oe="object"==typeof G?G.value:G,ou(oe)?null:oe}(n.limit));let S=null;var G;n.startAt&&(S=new Xs((G=n.startAt).values||[],!!G.before));let x=null;return n.endAt&&(x=function(G){return new Xs(G.values||[],!G.before)}(n.endAt)),Eg(e,u,p,l,T,"F",S,x)}function Rg(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=dd(n.unaryFilter.field);return Xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=dd(n.unaryFilter.field);return Xt.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=dd(n.unaryFilter.field);return Xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=dd(n.unaryFilter.field);return Xt.create(p,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(i):void 0!==i.fieldFilter?Xt.create(dd((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Wn.create(n.compositeFilter.filters.map(s=>Rg(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return It()}}(n.compositeFilter.op))}(i):It();var n}function I_(i){return Rt[i]}function Df(i){return Pt[i]}function Pg(i){return wr[i]}function io(i){return{fieldPath:i.canonicalString()}}function dd(i){return En.fromServerFormat(i.fieldPath)}function w_(i){return i instanceof Xt?function(n){if("=="===n.op){if(Vl(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NAN"}};if(gg(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Vl(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NAN"}};if(gg(n.value))return{unaryFilter:{field:io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(n.field),op:Df(n.op),value:n.value}}}(i):i instanceof Wn?function(n){const s=n.getFilters().map(u=>w_(u));return 1===s.length?s[0]:{compositeFilter:{op:Pg(n.op),filters:s}}}(i):It()}function FI(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function T_(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class ta{constructor(e,n,s,u,l=yt.min(),p=yt.min(),T=ei.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=S}withSequenceNumber(e){return new ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class D_{constructor(e){this.ct=e}}function vh(i,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Na(l=i.ct,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Ma(l,p.version.toTimestamp()),createTime:Ma(l,p.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:uc(e.version)};else{if(!e.isUnknownDocument())return It();s.unknownDocument={path:n.path.toArray(),version:uc(e.version)}}var l,p;return s}function fd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function uc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cc(i){const e=new ir(i.seconds,i.nanoseconds);return yt.fromTimestamp(e)}function lc(i,e){const n=(e.baseMutations||[]).map(l=>Kc(i.ct,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const s=e.mutations.map(l=>Kc(i.ct,l)),u=ir.fromMillis(e.localWriteTimeMs);return new nd(e.batchId,u,n,s)}function pd(i){const e=cc(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?cc(i.lastLimboFreeSnapshotVersion):yt.min();let s;return s=void 0!==i.query.documents?(Mt(1===(l=i.query).documents.length),Yi(As(Wc(l.documents[0])))):function(l){return Yi(E_(l))}(i.query),new ta(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,ei.fromBase64String(i.resumeToken));var l}function C_(i,e){const n=uc(e.snapshotVersion),s=uc(e.lastLimboFreeSnapshotVersion);let u;u=Hl(e.target)?Sg(i.ct,e.target):bg(i.ct,e.target).ut;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ao(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Mg(i){const e=E_({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Vc(e,e.limit,"L"):e}function xg(i,e){return new Tu(e.largestBatchId,Kc(i.ct,e.overlayMutation))}function A_(i,e){const n=e.path.lastSegment();return[i,pi(e.path.popLast()),n]}function S_(i,e,n,s){return{indexId:i,uid:e,sequenceNumber:n,readTime:uc(s.readTime),documentKey:pi(s.documentKey.path),largestBatchId:s.largestBatchId}}class dc{getBundleMetadata(e,n){return gd(e).get(n).next(s=>{if(s)return{id:(l=s).bundleId,createTime:cc(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return gd(e).put({bundleId:(u=n).id,createTime:uc(Wr(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return b_(e).get(n).next(s=>{if(s)return{name:(l=s).name,query:Mg(l.bundledQuery),readTime:cc(l.readTime)};var l})}saveNamedQuery(e,n){return b_(e).put({name:(u=n).name,readTime:uc(Wr(u.readTime)),bundledQuery:u.bundledQuery});var u}}function gd(i){return jr(i,"bundles")}function b_(i){return jr(i,"namedQueries")}class Ng{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Ng(e,n.uid||"")}getOverlay(e,n){return Cf(e).get(A_(this.userId,n)).next(s=>s?xg(this.serializer,s):null)}getOverlays(e,n){const s=no();return X.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){const u=[];return s.forEach((l,p)=>{const T=new Tu(n,p);u.push(this.ht(e,T))}),X.waitFor(u)}removeOverlaysForBatchId(e,n,s){const u=new Set;n.forEach(p=>u.add(pi(p.getCollectionPath())));const l=[];return u.forEach(p=>{const T=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(Cf(e).H("collectionPathOverlayIndex",T))}),X.waitFor(l)}getOverlaysForCollection(e,n,s){const u=no(),l=pi(n),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Cf(e).W("collectionPathOverlayIndex",p).next(T=>{for(const S of T){const x=xg(this.serializer,S);u.set(x.getKey(),x)}return u})}getOverlaysForCollectionGroup(e,n,s,u){const l=no();let p;const T=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Cf(e).Y({index:"collectionGroupOverlayIndex",range:T},(S,x,L)=>{const G=xg(this.serializer,x);l.size()<u||G.largestBatchId===p?(l.set(G.getKey(),G),p=G.largestBatchId):L.done()}).next(()=>l)}ht(e,n){return Cf(e).put(function(u,l,p){const[T,S,x]=A_(l,p.mutation.key);return{userId:l,collectionPath:S,documentId:x,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:qc(u.ct,p.mutation)}}(this.serializer,this.userId,n))}}function Cf(i){return jr(i,"documentOverlays")}class md{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt($r(e.integerValue));else if("doubleValue"in e){const s=$r(e.doubleValue);isNaN(s)?this.Et(n,13):(this.Et(n,15),Ia(s)?n.dt(0):n.dt(s))}else if("timestampValue"in e){const s=e.timestampValue;this.Et(n,20),"string"==typeof s?n.At(s):(n.At(`${s.seconds||""}`),n.dt(s.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ir(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(n,45),n.dt(s.latitude||0),n.dt(s.longitude||0)}else"mapValue"in e?uf(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):It()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const s=e.fields||{};this.Et(n,55);for(const u of Object.keys(s))this.Rt(u,n),this.It(s[u],n)}wt(e,n){const s=e.values||[];this.Et(n,50);for(const u of s)this.It(u,n)}gt(e,n){this.Et(n,37),ft.fromName(e).path.forEach(s=>{this.Et(n,60),this.St(s,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function VI(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Mv(i){const e=64-function(s){let u=0;for(let l=0;l<8;++l){const p=VI(255&s[l]);if(u+=p,8!==p)break}return u}(i);return Math.ceil(e/8)}md.bt=new md;class R_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Ct(s.value),s=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Mt(s.value),s=n.next();this.xt()}Ot(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Bt(e){const n=this.Lt(e),s=Mv(n);this.kt(1+s),this.buffer[this.position++]=255&s;for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Lt(e),s=Mv(n);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&n[0]);n[0]^=s?255:128;for(let u=1;u<n.length;++u)n[u]^=s?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class xv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Nv{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Eh{constructor(){this.Gt=new R_,this.zt=new xv(this.Gt),this.jt=new Nv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Zc{constructor(e,n,s,u){this.indexId=e,this.documentKey=n,this.arrayValue=s,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(n);return s.set(this.directionalValue,0),n!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Zc(this.indexId,this.documentKey,this.arrayValue,s)}}function Oa(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=ka(i.arrayValue,e.arrayValue),0!==n?n:(n=ka(i.directionalValue,e.directionalValue),0!==n?n:ft.comparator(i.documentKey,e.documentKey)))}function ka(i,e){for(let n=0;n<i.length&&n<e.length;++n){const s=i[n]-e[n];if(0!==s)return s}return i.length-e.length}class _d{constructor(e){this.Yt=new er((n,s)=>En.comparator(n.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const s=n;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(Mt(e.collectionGroup===this.collectionId),this.en)return!1;const n=Ac(e);if(void 0!==n&&!this.nn(n))return!1;const s=Do(e);let u=new Set,l=0,p=0;for(;l<s.length&&this.nn(s[l]);++l)u=u.add(s[l].fieldPath.canonicalString());if(l===s.length)return!0;if(this.Yt.size>0){const T=this.Yt.getIterator().getNext();if(!u.has(T.field.canonicalString())){const S=s[l];if(!this.rn(T,S)||!this.sn(this.Zt[p++],S))return!1}++l}for(;l<s.length;++l)if(p>=this.Zt.length||!this.sn(this.Zt[p++],s[l]))return!1;return!0}on(){if(this.en)return null;let e=new er(En.comparator);const n=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)n.push(new Os(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Os(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Os(s.field,"asc"===s.dir?0:1)));return new To(To.UNKNOWN_ID,this.collectionId,n,E.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Og(i){var e,n;if(Mt(i instanceof Xt||i instanceof Wn),i instanceof Xt){if(i instanceof ch){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>Xt.create(i.field,"==",l)))||[];return Wn.create(u,"or")}return i}const s=i.filters.map(u=>Og(u));return Wn.create(s,i.op)}function P_(i){if(0===i.getFilters().length)return[];const e=x_(Og(i));return Mt(Ov(e)),Af(e)||M_(e)?[e]:e.getFilters()}function Af(i){return i instanceof Xt}function M_(i){return i instanceof Wn&&ec(i)}function Ov(i){return Af(i)||M_(i)||function(n){if(n instanceof Wn&&hf(n)){for(const s of n.getFilters())if(!Af(s)&&!M_(s))return!1;return!0}return!1}(i)}function x_(i){if(Mt(i instanceof Xt||i instanceof Wn),i instanceof Xt)return i;if(1===i.filters.length)return x_(i.filters[0]);const e=i.filters.map(s=>x_(s));let n=Wn.create(e,i.op);return n=kg(n),Ov(n)?n:(Mt(n instanceof Wn),Mt(eo(n)),Mt(n.filters.length>1),n.filters.reduce((s,u)=>Ih(s,u)))}function Ih(i,e){let n;return Mt(i instanceof Xt||i instanceof Wn),Mt(e instanceof Xt||e instanceof Wn),n=i instanceof Xt?e instanceof Xt?Wn.create([i,e],"and"):Sf(i,e):e instanceof Xt?Sf(e,i):function(u,l){if(Mt(u.filters.length>0&&l.filters.length>0),eo(u)&&eo(l))return ff(u,l.getFilters());const p=hf(u)?u:l,T=hf(u)?l:u,S=p.filters.map(x=>Ih(x,T));return Wn.create(S,"or")}(i,e),kg(n)}function Sf(i,e){if(eo(e))return ff(e,i.getFilters());{const n=e.filters.map(s=>Ih(i,s));return Wn.create(n,"or")}}function kg(i){if(Mt(i instanceof Xt||i instanceof Wn),i instanceof Xt)return i;const e=i.getFilters();if(1===e.length)return kg(e[0]);if(Bl(i))return i;const n=e.map(u=>kg(u)),s=[];return n.forEach(u=>{u instanceof Xt?s.push(u):u instanceof Wn&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:Wn.create(s,i.op)}class UI{constructor(){this._n=new bf}addToCollectionParentIndex(e,n){return this._n.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(D.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(D.min())}updateCollectionGroup(e,n,s){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class bf{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n]||new er(_n.comparator),l=!u.has(s);return this.index[n]=u.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n];return u&&u.has(s)}getEntries(e){return(this.index[e]||new er(_n.comparator)).toArray()}}const Rf=new Uint8Array(0);class kv{constructor(e,n){this.databaseId=n,this.an=new bf,this.un=new to(s=>Ao(s),(s,u)=>nc(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const s=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const l={collectionId:s,parent:pi(u)};return N_(e).put(l)}return X.resolve()}getCollectionParents(e,n){const s=[],u=IDBKeyRange.bound([n,""],[Xd(n),""],!1,!0);return N_(e).W(u).next(l=>{for(const p of l){if(p.collectionId!==n)break;s.push(Ds(p.parent))}return s})}addFieldIndex(e,n){const s=vd(e),u={indexId:(T=n).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var T;delete u.indexId;const l=s.add(u);if(n.indexState){const p=Du(e);return l.next(T=>{p.put(S_(T,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const s=vd(e),u=Du(e),l=yd(e);return s.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vd(e),s=yd(e),u=Du(e);return n.H().next(()=>s.H()).next(()=>u.H())}createTargetIndexes(e,n){return X.forEach(this.cn(n),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const l=new _d(s).on();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const s=yd(e);let u=!0;const l=new Map;return X.forEach(this.cn(n),p=>this.ln(e,p).next(T=>{u&&(u=!!T),l.set(p,T)})).next(()=>{if(u){let p=sn();const T=[];return X.forEach(l,(S,x)=>{var Lt;Me("IndexedDbIndexManager",`Using index ${Lt=S,`id=${Lt.indexId}|cg=${Lt.collectionGroup}|f=${Lt.fields.map(cn=>`${cn.fieldPath}:${cn.kind}`).join(",")}`} to execute ${Ao(n)}`);const L=function(Lt,cn){const $n=Ac(cn);if(void 0===$n)return null;for(const Zn of zl(Lt,$n.fieldPath))switch(Zn.op){case"array-contains-any":return Zn.value.arrayValue.values||[];case"array-contains":return[Zn.value]}return null}(x,S),G=function(Lt,cn){const $n=new Map;for(const Zn of Do(cn))for(const ni of zl(Lt,Zn.fieldPath))switch(ni.op){case"==":case"in":$n.set(Zn.fieldPath.canonicalString(),ni.value);break;case"not-in":case"!=":return $n.set(Zn.fieldPath.canonicalString(),ni.value),Array.from($n.values())}return null}(x,S),oe=function(Lt,cn){const $n=[];let Zn=!0;for(const ni of Do(cn)){const Vi=0===ni.kind?Ca(Lt,ni.fieldPath,Lt.startAt):rc(Lt,ni.fieldPath,Lt.startAt);$n.push(Vi.value),Zn&&(Zn=Vi.inclusive)}return new Xs($n,Zn)}(x,S),be=function(Lt,cn){const $n=[];let Zn=!0;for(const ni of Do(cn)){const Vi=0===ni.kind?rc(Lt,ni.fieldPath,Lt.endAt):Ca(Lt,ni.fieldPath,Lt.endAt);$n.push(Vi.value),Zn&&(Zn=Vi.inclusive)}return new Xs($n,Zn)}(x,S),rt=this.hn(S,x,oe),gt=this.hn(S,x,be),ct=this.Pn(S,x,G),Ft=this.In(S.indexId,L,rt,oe.inclusive,gt,be.inclusive,ct);return X.forEach(Ft,un=>s.j(un,n.limit).next(Lt=>{Lt.forEach(cn=>{const $n=ft.fromSegments(cn.documentKey);p.has($n)||(p=p.add($n),T.push($n))})}))}).next(()=>T)}return X.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:P_(Wn.create(e.filters,"and")).map(s=>Fc(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,s,u,l,p,T){const S=(null!=n?n.length:1)*Math.max(s.length,l.length),x=S/(null!=n?n.length:1),L=[];for(let G=0;G<S;++G){const oe=n?this.Tn(n[G/x]):Rf,be=this.En(e,oe,s[G%x],u),rt=this.dn(e,oe,l[G%x],p),gt=T.map(ct=>this.En(e,oe,ct,!0));L.push(...this.createRange(be,rt,gt))}return L}En(e,n,s,u){const l=new Zc(e,ft.empty(),n,s);return u?l:l.Jt()}dn(e,n,s,u){const l=new Zc(e,ft.empty(),n,s);return u?l.Jt():l}ln(e,n){const s=new _d(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let p=null;for(const T of l)s.tn(T)&&(!p||T.fields.length>p.fields.length)&&(p=T);return p})}getIndexType(e,n){let s=2;const u=this.cn(n);return X.forEach(u,l=>this.ln(e,l).next(p=>{p?0!==s&&p.fields.length<function(S){let x=new er(En.comparator),L=!1;for(const G of S.filters)for(const oe of G.getFlattenedFilters())oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?L=!0:x=x.add(oe.field));for(const G of S.orderBy)G.field.isKeyField()||(x=x.add(G.field));return x.size+(L?1:0)}(l)&&(s=1):s=0})).next(()=>null!==n.limit&&u.length>1&&2===s?1:s)}An(e,n){const s=new Eh;for(const u of Do(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const p=s.Ht(u.kind);md.bt.Pt(l,p)}return s.Wt()}Tn(e){const n=new Eh;return md.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const s=new Eh;return md.bt.Pt(Yu(this.databaseId,n),s.Ht(function(l){const p=Do(l);return 0===p.length?0:p[p.length-1].kind}(e))),s.Wt()}Pn(e,n,s){if(null===s)return[];let u=[];u.push(new Eh);let l=0;for(const p of Do(e)){const T=s[l++];for(const S of u)if(this.Vn(n,p.fieldPath)&&Oc(T))u=this.mn(u,p,T);else{const x=S.Ht(p.kind);md.bt.Pt(T,x)}}return this.fn(u)}hn(e,n,s){return this.Pn(e,n,s.position)}fn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].Wt();return n}mn(e,n,s){const u=[...e],l=[];for(const p of s.arrayValue.values||[])for(const T of u){const S=new Eh;S.seed(T.Wt()),md.bt.Pt(p,S.Ht(n.kind)),l.push(S)}return l}Vn(e,n){return!!e.filters.find(s=>s instanceof Xt&&s.field.isEqual(n)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,n){const s=vd(e),u=Du(e);return(n?s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):s.W()).next(l=>{const p=[];return X.forEach(l,T=>u.get([T.indexId,this.uid]).next(S=>{p.push(function(L,G){const oe=G?new E(G.sequenceNumber,new D(cc(G.readTime),new ft(Ds(G.documentKey)),G.largestBatchId)):E.empty(),be=L.fields.map(([rt,gt])=>new Os(En.fromServerFormat(rt),gt));return new To(L.indexId,L.collectionGroup,be,oe)}(T,S))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((s,u)=>{const l=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:Wt(s.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const u=vd(e),l=Du(e);return this.gn(e).next(p=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(T=>X.forEach(T,S=>l.put(S_(S.indexId,this.uid,p,s)))))}updateIndexEntries(e,n){const s=new Map;return X.forEach(n,(u,l)=>{const p=s.get(u.collectionGroup);return(p?X.resolve(p):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(s.set(u.collectionGroup,T),X.forEach(T,S=>this.pn(e,u,S).next(x=>{const L=this.yn(l,S);return x.isEqual(L)?X.resolve():this.wn(e,l,S,x,L)}))))})}Sn(e,n,s,u){return yd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(s,n.key),documentKey:n.key.path.toArray()})}bn(e,n,s,u){return yd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(s,n.key),n.key.path.toArray()])}pn(e,n,s){const u=yd(e);let l=new er(Oa);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,n)])},(p,T)=>{l=l.add(new Zc(s.indexId,n,T.arrayValue,T.directionalValue))}).next(()=>l)}yn(e,n){let s=new er(Oa);const u=this.An(n,e);if(null==u)return s;const l=Ac(n);if(null!=l){const p=e.data.field(l.fieldPath);if(Oc(p))for(const T of p.arrayValue.values||[])s=s.add(new Zc(n.indexId,e.key,this.Tn(T),u))}else s=s.add(new Zc(n.indexId,e.key,Rf,u));return s}wn(e,n,s,u,l){Me("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const p=[];return function(S,x,L,G,oe){const be=S.getIterator(),rt=x.getIterator();let gt=wa(be),ct=wa(rt);for(;gt||ct;){let Ft=!1,un=!1;if(gt&&ct){const Lt=L(gt,ct);Lt<0?un=!0:Lt>0&&(Ft=!0)}else null!=gt?un=!0:Ft=!0;Ft?(G(ct),ct=wa(rt)):un?(oe(gt),gt=wa(be)):(gt=wa(be),ct=wa(rt))}}(u,l,Oa,T=>{p.push(this.Sn(e,n,s,T))},T=>{p.push(this.bn(e,n,s,T))}),X.waitFor(p)}gn(e){let n=1;return Du(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((p,T)=>Oa(p,T)).filter((p,T,S)=>!T||0!==Oa(p,S[T-1]));const u=[];u.push(e);for(const p of s){const T=Oa(p,e),S=Oa(p,n);if(0===T)u[0]=e.Jt();else if(T>0&&S<0)u.push(p),u.push(p.Jt());else if(S>0)break}u.push(n);const l=[];for(let p=0;p<u.length;p+=2){if(this.Dn(u[p],u[p+1]))return[];l.push(IDBKeyRange.bound([u[p].indexId,this.uid,u[p].arrayValue,u[p].directionalValue,Rf,[]],[u[p+1].indexId,this.uid,u[p+1].arrayValue,u[p+1].directionalValue,Rf,[]]))}return l}Dn(e,n){return Oa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(O_)}getMinOffset(e,n){return X.mapArray(this.cn(n),s=>this.ln(e,s).next(u=>u||It())).next(O_)}}function N_(i){return jr(i,"collectionParents")}function yd(i){return jr(i,"indexEntries")}function vd(i){return jr(i,"indexConfiguration")}function Du(i){return jr(i,"indexState")}function O_(i){Mt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;P(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new D(e.readTime,e.documentKey,n)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qc(i,e,n){const s=i.store("mutations"),u=i.store("documentMutations"),l=[],p=IDBKeyRange.only(n.batchId);let T=0;const S=s.Y({range:p},(L,G,oe)=>(T++,oe.delete()));l.push(S.next(()=>{Mt(1===T)}));const x=[];for(const L of n.mutations){const G=qu(e,L.key.path,n.batchId);l.push(u.delete(G)),x.push(L.key)}return X.waitFor(l).next(()=>x)}function Mf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw It();e=i.noDocument}return JSON.stringify(e).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class xf{constructor(e,n,s,u){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=u,this.Cn={}}static lt(e,n,s,u){Mt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xf(l,n,s,u)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).Y({index:"userMutationsIndex",range:s},(u,l,p)=>{n=!1,p.done()}).next(()=>n)}addMutationBatch(e,n,s,u){const l=Ed(e),p=Cu(e);return p.add({}).next(T=>{Mt("number"==typeof T);const S=new nd(T,n,s,u),x=function(be,rt,gt){const ct=gt.baseMutations.map(un=>qc(be.ct,un)),Ft=gt.mutations.map(un=>qc(be.ct,un));return{userId:rt,batchId:gt.batchId,localWriteTimeMs:gt.localWriteTime.toMillis(),baseMutations:ct,mutations:Ft}}(this.serializer,this.userId,S),L=[];let G=new er((oe,be)=>Wt(oe.canonicalString(),be.canonicalString()));for(const oe of u){const be=qu(this.userId,oe.key.path,T);G=G.add(oe.key.path.popLast()),L.push(p.put(x)),L.push(l.put(be,th))}return G.forEach(oe=>{L.push(this.indexManager.addToCollectionParentIndex(e,oe))}),e.addOnCommittedListener(()=>{this.Cn[T]=S.keys()}),X.waitFor(L).next(()=>S)})}lookupMutationBatch(e,n){return Cu(e).get(n).next(s=>s?(Mt(s.userId===this.userId),lc(this.serializer,s)):null)}vn(e,n){return this.Cn[n]?X.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const u=s.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,u=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Cu(e).Y({index:"userMutationsIndex",range:u},(p,T,S)=>{T.userId===this.userId&&(Mt(T.batchId>=s),l=lc(this.serializer,T)),S.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Cu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).W("userMutationsIndex",n).next(s=>s.map(u=>lc(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Ys(this.userId,n.path),u=IDBKeyRange.lowerBound(s),l=[];return Ed(e).Y({range:u},(p,T,S)=>{const[x,L,G]=p,oe=Ds(L);if(x===this.userId&&n.path.isEqual(oe))return Cu(e).get(G).next(be=>{if(!be)throw It();Mt(be.userId===this.userId),l.push(lc(this.serializer,be))});S.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new er(Wt);const u=[];return n.forEach(l=>{const p=Ys(this.userId,l.path),T=IDBKeyRange.lowerBound(p),S=Ed(e).Y({range:T},(x,L,G)=>{const[oe,be,rt]=x,gt=Ds(be);oe===this.userId&&l.path.isEqual(gt)?s=s.add(rt):G.done()});u.push(S)}),X.waitFor(u).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1,l=Ys(this.userId,s),p=IDBKeyRange.lowerBound(l);let T=new er(Wt);return Ed(e).Y({range:p},(S,x,L)=>{const[G,oe,be]=S,rt=Ds(oe);G===this.userId&&s.isPrefixOf(rt)?rt.length===u&&(T=T.add(be)):L.done()}).next(()=>this.Fn(e,T))}Fn(e,n){const s=[],u=[];return n.forEach(l=>{u.push(Cu(e).get(l).next(p=>{if(null===p)throw It();Mt(p.userId===this.userId),s.push(lc(this.serializer,p))}))}),X.waitFor(u).next(()=>s)}removeMutationBatch(e,n){return Qc(e.ae,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),X.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return X.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return Ed(e).Y({range:s},(l,p,T)=>{if(l[0]===this.userId){const S=Ds(l[1]);u.push(S)}else T.done()}).next(()=>{Mt(0===u.length)})})}containsKey(e,n){return Lg(e,this.userId,n)}xn(e){return k_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lg(i,e,n){const s=Ys(e,n.path),u=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return Ed(i).Y({range:l,J:!0},(T,S,x)=>{const[L,G,oe]=T;L===e&&G===u&&(p=!0),x.done()}).next(()=>p)}function Cu(i){return jr(i,"mutations")}function Ed(i){return jr(i,"documentMutations")}function k_(i){return jr(i,"mutationQueues")}class Yc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Yc(0)}static Bn(){return new Yc(-1)}}class Lv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const s=new Yc(n.highestTargetId);return n.highestTargetId=s.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>yt.fromTimestamp(new ir(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.Ln(e).next(u=>(u.highestListenSequenceNumber=n,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(s=>(s.targetCount+=1,this.Qn(n,s),this.kn(e,s))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Jc(e).delete(n.targetId)).next(()=>this.Ln(e)).next(s=>(Mt(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,n,s){let u=0;const l=[];return Jc(e).Y((p,T)=>{const S=pd(T);S.sequenceNumber<=n&&null===s.get(S.targetId)&&(u++,l.push(this.removeTargetData(e,S)))}).next(()=>X.waitFor(l)).next(()=>u)}forEachTarget(e,n){return Jc(e).Y((s,u)=>{const l=pd(u);n(l)})}Ln(e){return Fv(e).get("targetGlobalKey").next(n=>(Mt(null!==n),n))}kn(e,n){return Fv(e).put("targetGlobalKey",n)}qn(e,n){return Jc(e).put(C_(this.serializer,n))}Qn(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Ao(n),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Jc(e).Y({range:u,index:"queryTargetsIndex"},(p,T,S)=>{const x=pd(T);nc(n,x.target)&&(l=x,S.done())}).next(()=>l)}addMatchingKeys(e,n,s){const u=[],l=Xc(e);return n.forEach(p=>{const T=pi(p.path);u.push(l.put({targetId:s,path:T})),u.push(this.referenceDelegate.addReference(e,s,p))}),X.waitFor(u)}removeMatchingKeys(e,n,s){const u=Xc(e);return X.forEach(n,l=>{const p=pi(l.path);return X.waitFor([u.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,n){const s=Xc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),u=Xc(e);let l=sn();return u.Y({range:s,J:!0},(p,T,S)=>{const x=Ds(p[1]),L=new ft(x);l=l.add(L)}).next(()=>l)}containsKey(e,n){const s=pi(n.path),u=IDBKeyRange.bound([s],[Xd(s)],!1,!0);let l=0;return Xc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([p,T],S,x)=>{0!==p&&(l++,x.done())}).next(()=>l>0)}_t(e,n){return Jc(e).get(n).next(s=>s?pd(s):null)}}function Jc(i){return jr(i,"targets")}function Fv(i){return jr(i,"targetGlobal")}function Xc(i){return jr(i,"targetDocuments")}function Id([i,e],[n,s]){const u=Wt(i,n);return 0===u?Wt(e,s):u}class wh{constructor(e){this.Kn=e,this.buffer=new er(Id),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Id(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fg{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(s){ss(s)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Re(s)}yield n.zn(3e5)}))}}class L_{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(0===n)return X.resolve(Xr._e);const s=new wh(n);return this.jn.forEachTarget(e,u=>s.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>s.Wn(u))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.jn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Pf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let s,u,l,p,T,S,x;const L=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(G=>(G>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${G}`),u=this.params.maximumSequenceNumbersToCollect):u=G,p=Date.now(),this.nthSequenceNumber(e,u))).next(G=>(s=G,T=Date.now(),this.removeTargets(e,s,n))).next(G=>(l=G,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(G=>(x=Date.now(),Wo()<=Tt.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-L}ms\n\tDetermined least recently used ${u} in `+(T-p)+`ms\n\tRemoved ${l} targets in `+(S-T)+`ms\n\tRemoved ${G} documents in `+(x-S)+`ms\nTotal Duration: ${x-L}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:G})))}}class Vg{constructor(e,n){this.db=e,this.garbageCollector=function Nf(i,e){return new L_(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(u=>s+u))}Zn(e){let n=0;return this.Jn(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(s,u)=>n(u))}addReference(e,n,s){return Of(e,s)}removeReference(e,n,s){return Of(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return Of(e,n)}er(e,n){return function(u,l){let p=!1;return k_(u).Z(T=>Lg(u,T,l).next(S=>(S&&(p=!0),X.resolve(!S)))).next(()=>p)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Xn(e,(p,T)=>{if(T<=n){const S=this.er(e,p).next(x=>{if(!x)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,yt.min()),Xc(e).delete([0,pi(p.path)])))});u.push(S)}}).next(()=>X.waitFor(u)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return Of(e,n)}Xn(e,n){const s=Xc(e);let u,l=Xr._e;return s.Y({index:"documentTargetsIndex"},([p,T],{path:S,sequenceNumber:x})=>{0===p?(l!==Xr._e&&n(new ft(Ds(u)),l),l=x,u=S):l=Xr._e}).next(()=>{l!==Xr._e&&n(new ft(Ds(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Of(i,e){return Xc(i).put((u=i.currentSequenceNumber,{targetId:0,path:pi(e.path),sequenceNumber:u}));var u}class Ug{constructor(){this.changes=new to(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return void 0!==s?X.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return el(e).put(s)}removeEntry(e,n,s){return el(e).delete(function(l,p){const T=l.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],fd(p),T[T.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.tr(e,s)))}getEntry(e,n){let s=_r.newInvalidDocument(n);return el(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(tl(n))},(u,l)=>{s=this.nr(n,l)}).next(()=>s)}rr(e,n){let s={size:0,document:_r.newInvalidDocument(n)};return el(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(tl(n))},(u,l)=>{s={document:this.nr(n,l),size:Mf(l)}}).next(()=>s)}getEntries(e,n){let s=us();return this.ir(e,n,(u,l)=>{const p=this.nr(u,l);s=s.insert(u,p)}).next(()=>s)}sr(e,n){let s=us(),u=new sr(ft.comparator);return this.ir(e,n,(l,p)=>{const T=this.nr(l,p);s=s.insert(l,T),u=u.insert(l,Mf(p))}).next(()=>({documents:s,_r:u}))}ir(e,n,s){if(n.isEmpty())return X.resolve();let u=new er(jg);n.forEach(S=>u=u.add(S));const l=IDBKeyRange.bound(tl(u.first()),tl(u.last())),p=u.getIterator();let T=p.getNext();return el(e).Y({index:"documentKeyIndex",range:l},(S,x,L)=>{const G=ft.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;T&&jg(T,G)<0;)s(T,null),T=p.getNext();T&&T.isEqual(G)&&(s(T,x),T=p.hasNext()?p.getNext():null),T?L.U(tl(T)):L.done()}).next(()=>{for(;T;)s(T,null),T=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,n,s,u,l){const p=n.path,T=[p.popLast().toArray(),p.lastSegment(),fd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return el(e).W(IDBKeyRange.bound(T,S,!0)).next(x=>{l?.incrementDocumentReadCount(x.length);let L=us();for(const G of x){const oe=this.nr(ft.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);oe.isFoundDocument()&&(ba(n,oe)||u.has(oe.key))&&(L=L.insert(oe.key,oe))}return L})}getAllFromCollectionGroup(e,n,s,u){let l=us();const p=Bg(n,s),T=Bg(n,D.max());return el(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,T,!0)},(S,x,L)=>{const G=this.nr(ft.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);l=l.insert(G.key,G),l.size===u&&L.done()}).next(()=>l)}newChangeBuffer(e){return new BI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return kf(e).get("remoteDocumentGlobalKey").next(n=>(Mt(!!n),n))}tr(e,n){return kf(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const s=function hd(i,e){let n;if(e.document)n=wf(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ft.fromSegments(e.noDocument.path),u=cc(e.noDocument.readTime);n=_r.newNoDocument(s,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const s=ft.fromSegments(e.unknownDocument.path),u=cc(e.unknownDocument.version);n=_r.newUnknownDocument(s,u)}}return e.readTime&&n.setReadTime(function(u){const l=new ir(u[0],u[1]);return yt.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!s.isNoDocument()||!s.version.isEqual(yt.min()))return s}return _r.newInvalidDocument(e)}}function Th(i){return new F_(i)}class BI extends Ug{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new to(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const n=[];let s=0,u=new er((l,p)=>Wt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const T=this.ur.get(l);if(n.push(this.ar.removeEntry(e,l,T.readTime)),p.isValidDocument()){const S=vh(this.ar.serializer,p);u=u.add(l.path.popLast());const x=Mf(S);s+=x-T.size,n.push(this.ar.addEntry(e,l,S))}else if(s-=T.size,this.trackRemovals){const S=vh(this.ar.serializer,p.convertToNoDocument(yt.min()));n.push(this.ar.addEntry(e,l,S))}}),u.forEach(l=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,l))}),n.push(this.ar.updateMetadata(e,s)),X.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(s=>(this.ur.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:s,_r:u})=>(u.forEach((l,p)=>{this.ur.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function kf(i){return jr(i,"remoteDocumentGlobal")}function el(i){return jr(i,"remoteDocumentsV14")}function tl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bg(i,e){const n=e.documentKey.path.toArray();return[i,fd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jg(i,e){const n=i.path.toArray(),s=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<s.length-2;++l)if(u=Wt(n[l],s[l]),u)return u;return u=Wt(n.length,s.length),u||(u=Wt(n[n.length-2],s[s.length-2]),u||Wt(n[n.length-1],s[s.length-1]))}class nl{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class V_{constructor(e,n,s,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==s&&ro(s.mutation,u,Pi.empty(),ir.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,sn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=sn()){const u=no();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,s).next(l=>{let p=Wl();return l.forEach((T,S)=>{p=p.insert(T,S.overlayedDocument)}),p}))}getOverlayedDocuments(e,n){const s=no();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,sn()))}populateOverlays(e,n,s){const u=[];return s.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((p,T)=>{n.set(p,T)})})}computeViews(e,n,s,u){let l=us();const p=ql(),T=ql();return n.forEach((S,x)=>{const L=s.get(x.key);u.has(x.key)&&(void 0===L||L.mutation instanceof So)?l=l.insert(x.key,x):void 0!==L?(p.set(x.key,L.mutation.getFieldMask()),ro(L.mutation,x,L.mutation.getFieldMask(),ir.now())):p.set(x.key,Pi.empty())}),this.recalculateAndSaveOverlays(e,l).next(S=>(S.forEach((x,L)=>p.set(x,L)),n.forEach((x,L)=>{var G;return T.set(x,new nl(L,null!==(G=p.get(x))&&void 0!==G?G:null))}),T))}recalculateAndSaveOverlays(e,n){const s=ql();let u=new sr((p,T)=>p-T),l=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(p=>{for(const T of p)T.keys().forEach(S=>{const x=n.get(S);if(null===x)return;let L=s.get(S)||Pi.empty();L=T.applyToLocalView(x,L),s.set(S,L);const G=(u.get(T.batchId)||sn()).add(S);u=u.insert(T.batchId,G)})}).next(()=>{const p=[],T=u.getReverseIterator();for(;T.hasNext();){const S=T.getNext(),x=S.key,L=S.value,G=hh();L.forEach(oe=>{if(!l.has(oe)){const be=$c(n.get(oe),s.get(oe));null!==be&&G.set(oe,be),l=l.add(oe)}}),p.push(this.documentOverlayCache.saveOverlays(e,x,G))}return X.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,u){return ft.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):mf(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,u):this.getDocumentsMatchingCollectionQuery(e,n,s,u);var p}getNextDocuments(e,n,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,u).next(l=>{const p=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,u-l.size):X.resolve(no());let T=-1,S=l;return p.next(x=>X.forEach(x,(L,G)=>(T<G.largestBatchId&&(T=G.largestBatchId),l.get(L)?X.resolve():this.remoteDocumentCache.getEntry(e,L).next(oe=>{S=S.insert(L,oe)}))).next(()=>this.populateOverlays(e,x,l)).next(()=>this.computeViews(e,S,x,sn())).next(L=>({batchId:T,changes:Tg(L)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ft(n)).next(s=>{let u=Wl();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,s,u){const l=n.collectionGroup;let p=Wl();return this.indexManager.getCollectionParents(e,l).next(T=>X.forEach(T,S=>{const x=(G=n,oe=S.child(l),new Aa(oe,null,G.explicitOrderBy.slice(),G.filters.slice(),G.limit,G.limitType,G.startAt,G.endAt));var G,oe;return this.getDocumentsMatchingCollectionQuery(e,x,s,u).next(L=>{L.forEach((G,oe)=>{p=p.insert(G,oe)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,n,s,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(p=>(l=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,u))).next(p=>{l.forEach((S,x)=>{const L=x.getKey();null===p.get(L)&&(p=p.insert(L,_r.newInvalidDocument(L)))});let T=Wl();return p.forEach((S,x)=>{const L=l.get(S);void 0!==L&&ro(L.mutation,x,Pi.empty(),ir.now()),ba(n,x)&&(T=T.insert(S,x))}),T})}}class $g{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return X.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:Wr(u.createTime)}),X.resolve();var u}getNamedQuery(e,n){return X.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:Mg(u.bundledQuery),readTime:Wr(u.readTime)}),X.resolve();var u}}class Lf{constructor(){this.overlays=new sr(ft.comparator),this.hr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const s=no();return X.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((u,l)=>{this.ht(e,n,l)}),X.resolve()}removeOverlaysForBatchId(e,n,s){const u=this.hr.get(s);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.hr.delete(s)),X.resolve()}getOverlaysForCollection(e,n,s){const u=no(),l=n.length+1,p=new ft(n.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const S=T.getNext().value,x=S.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===l&&S.largestBatchId>s&&u.set(S.getKey(),S)}return X.resolve(u)}getOverlaysForCollectionGroup(e,n,s,u){let l=new sr((x,L)=>x-L);const p=this.overlays.getIterator();for(;p.hasNext();){const x=p.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>s){let L=l.get(x.largestBatchId);null===L&&(L=no(),l=l.insert(x.largestBatchId,L)),L.set(x.getKey(),x)}}const T=no(),S=l.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((x,L)=>T.set(x,L)),!(T.size()>=u)););return X.resolve(T)}ht(e,n,s){const u=this.overlays.get(s.key);if(null!==u){const p=this.hr.get(u.largestBatchId).delete(s.key);this.hr.set(u.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new Tu(n,s));let l=this.hr.get(n);void 0===l&&(l=sn(),this.hr.set(n,l)),this.hr.set(n,l.add(s.key))}}class Hg{constructor(){this.Pr=new er(Ci.Ir),this.Tr=new er(Ci.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const s=new Ci(e,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Ar(new Ci(e,n))}Rr(e,n){e.forEach(s=>this.removeReference(s,n))}Vr(e){const n=new ft(new _n([])),s=new Ci(n,e),u=new Ci(n,e+1),l=[];return this.Tr.forEachInRange([s,u],p=>{this.Ar(p),l.push(p.key)}),l}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ft(new _n([])),s=new Ci(n,e),u=new Ci(n,e+1);let l=sn();return this.Tr.forEachInRange([s,u],p=>{l=l.add(p.key)}),l}containsKey(e){const n=new Ci(e,0),s=this.Pr.firstAfterOrEqual(n);return null!==s&&e.isEqual(s.key)}}class Ci{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ft.comparator(e.key,n.key)||Wt(e.pr,n.pr)}static Er(e,n){return Wt(e.pr,n.pr)||ft.comparator(e.key,n.key)}}class Ff{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new er(Ci.Ir)}checkEmpty(e){return X.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,s,u){const l=this.yr;this.yr++;const p=new nd(l,n,s,u);this.mutationQueue.push(p);for(const T of u)this.wr=this.wr.add(new Ci(T.key,l)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return X.resolve(p)}lookupMutationBatch(e,n){return X.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),l=u<0?0:u;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ci(n,0),u=new Ci(n,Number.POSITIVE_INFINITY),l=[];return this.wr.forEachInRange([s,u],p=>{const T=this.Sr(p.pr);l.push(T)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new er(Wt);return n.forEach(u=>{const l=new Ci(u,0),p=new Ci(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([l,p],T=>{s=s.add(T.pr)})}),X.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1;let l=s;ft.isDocumentKey(l)||(l=l.child(""));const p=new Ci(new ft(l),0);let T=new er(Wt);return this.wr.forEachWhile(S=>{const x=S.key.path;return!!s.isPrefixOf(x)&&(x.length===u&&(T=T.add(S.pr)),!0)},p),X.resolve(this.Dr(T))}Dr(e){const n=[];return e.forEach(s=>{const u=this.Sr(s);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Mt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return X.forEach(n.mutations,u=>{const l=new Ci(u.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,n){const s=new Ci(n,0),u=this.wr.firstAfterOrEqual(s);return X.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return X.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class La{constructor(e){this.vr=e,this.docs=new sr(ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,u=this.docs.get(s),l=u?u.size:0,p=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let s=us();return n.forEach(u=>{const l=this.docs.get(u);s=s.insert(u,l?l.document.mutableCopy():_r.newInvalidDocument(u))}),X.resolve(s)}getDocumentsMatchingQuery(e,n,s,u){let l=us();const p=n.path,T=new ft(p.child("")),S=this.docs.getIteratorFrom(T);for(;S.hasNext();){const{key:x,value:{document:L}}=S.getNext();if(!p.isPrefixOf(x.path))break;x.path.length>p.length+1||P(v(L),s)<=0||(u.has(L.key)||ba(n,L))&&(l=l.insert(L.key,L.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,n,s,u){It()}Fr(e,n){return X.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new wd(this)}getSize(e){return X.resolve(this.size)}}class wd extends Ug{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(s)}),X.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class zg{constructor(e){this.persistence=e,this.Mr=new to(n=>Ao(n),nc),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Hg,this.targetCount=0,this.Br=Yc.Nn()}forEachTarget(e,n){return this.Mr.forEach((s,u)=>n(u)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),X.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Yc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.qn(n),X.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,s){let u=0;const l=[];return this.Mr.forEach((p,T)=>{T.sequenceNumber<=n&&null===s.get(T.targetId)&&(this.Mr.delete(p),l.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),X.waitFor(l).next(()=>u)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const s=this.Mr.get(n)||null;return X.resolve(s)}addMatchingKeys(e,n,s){return this.Nr.dr(n,s),X.resolve()}removeMatchingKeys(e,n,s){this.Nr.Rr(n,s);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(p=>{l.push(u.markPotentiallyOrphaned(e,p))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Nr.gr(n);return X.resolve(s)}containsKey(e,n){return X.resolve(this.Nr.containsKey(n))}}class Gg{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Xr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zg(this),this.indexManager=new UI,this.remoteDocumentCache=new La(s=>this.referenceDelegate.Kr(s)),this.serializer=new D_(n),this.$r=new $g(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lf,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Lr[e.toKey()];return s||(s=new Ff(n,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,s){Me("MemoryPersistence","Starting transaction:",e);const u=new Vv(this.kr.next());return this.referenceDelegate.Ur(),s(u).next(l=>this.referenceDelegate.Wr(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Gr(e,n){return X.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,n)))}}class Vv extends Y{constructor(e){super(),this.currentSequenceNumber=e}}class Dh{constructor(e){this.persistence=e,this.zr=new Hg,this.jr=null}static Hr(e){return new Dh(e)}get Jr(){if(this.jr)return this.jr;throw It()}addReference(e,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),X.resolve()}removeReference(e,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),X.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Jr.add(l.toString()))}).next(()=>s.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Jr,s=>{const u=ft.fromPath(s);return this.Yr(e,u).next(l=>{l||n.removeEntry(u,yt.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return X.or([()=>X.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Uv{constructor(e){this.serializer=e}N(e,n,s,u){const l=new Jt("createOrUpgrade",n);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bc,{unique:!0}),S.createObjectStore("documentMutations"),U_(e),function(S){S.createObjectStore("remoteDocuments")}(e));let p=X.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),U_(e)),p=p.next(()=>function(S){const x=S.store("targetGlobal"),L={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return x.put("targetGlobalKey",L)}(l))),s<4&&u>=4&&(0!==s&&(p=p.next(()=>function(S,x){return x.store("mutations").W().next(L=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bc,{unique:!0});const G=x.store("mutations"),oe=L.map(be=>G.put(be));return X.waitFor(oe)})}(e,l))),p=p.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(p=p.next(()=>this.Xr(l))),s<6&&u>=6&&(p=p.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ei(l)))),s<7&&u>=7&&(p=p.next(()=>this.ti(l))),s<8&&u>=8&&(p=p.next(()=>this.ni(e,l))),s<9&&u>=9&&(p=p.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(p=p.next(()=>this.ri(l))),s<11&&u>=11&&(p=p.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(p=p.next(()=>{!function(S){const x=S.createObjectStore("documentOverlays",{keyPath:nh});x.createIndex("collectionPathOverlayIndex",Ku,{unique:!1}),x.createIndex("collectionGroupOverlayIndex",__,{unique:!1})}(e)})),s<13&&u>=13&&(p=p.next(()=>function(S){const x=S.createObjectStore("remoteDocumentsV14",{keyPath:Ol});x.createIndex("documentKeyIndex",Ko),x.createIndex("collectionGroupIndex",tf)}(e)).next(()=>this.ii(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(p=p.next(()=>this.si(e,l))),s<15&&u>=15&&(p=p.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:kl}).createIndex("sequenceNumberIndex",Rc,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:fg}).createIndex("documentKeyIndex",uu,{unique:!1})}(e))),p}ei(e){let n=0;return e.store("remoteDocuments").Y((s,u)=>{n+=Mf(u)}).next(()=>{const s={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const n=e.store("mutationQueues"),s=e.store("mutations");return n.W().next(u=>X.forEach(u,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",p).next(T=>X.forEach(T,S=>{Mt(S.userId===l.userId);const x=lc(this.serializer,S);return Qc(e,l.userId,x).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return s.Y((p,T)=>{const S=new _n(p),x=[0,pi(S)];l.push(n.get(x).next(L=>L?X.resolve():n.put({targetId:0,path:pi(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>X.waitFor(l))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:nf});const s=n.store("collectionParents"),u=new bf,l=p=>{if(u.add(p)){const T=p.lastSegment(),S=p.popLast();return s.put({collectionId:T,parent:pi(S)})}};return n.store("remoteDocuments").Y({J:!0},(p,T)=>{const S=new _n(p);return l(S.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([p,T,S],x)=>{const L=Ds(T);return l(L.popLast())}))}ri(e){const n=e.store("targets");return n.Y((s,u)=>{const l=pd(u),p=C_(this.serializer,l);return n.put(p)})}ii(e,n){const s=n.store("remoteDocuments"),u=[];return s.Y((l,p)=>{const T=n.store("remoteDocumentsV14"),S=(G=p,G.document?new ft(_n.fromString(G.document.name).popFirst(5)):G.noDocument?ft.fromSegments(G.noDocument.path):G.unknownDocument?ft.fromSegments(G.unknownDocument.path):It()).path.toArray(),x={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};var G;u.push(T.put(x))}).next(()=>X.waitFor(u))}si(e,n){const s=n.store("mutations"),u=Th(this.serializer),l=new Gg(Dh.Hr,this.serializer.ct);return s.W().next(p=>{const T=new Map;return p.forEach(S=>{var x;let L=null!==(x=T.get(S.userId))&&void 0!==x?x:sn();lc(this.serializer,S).keys().forEach(G=>L=L.add(G)),T.set(S.userId,L)}),X.forEach(T,(S,x)=>{const L=new Mr(x),G=Ng.lt(this.serializer,L),oe=l.getIndexManager(L),be=xf.lt(L,this.serializer,oe,l.referenceDelegate);return new V_(u,be,G,oe).recalculateAndSaveOverlaysForDocumentKeys(new Zu(n,Xr._e),S).next()})})}}function U_(i){i.createObjectStore("targetDocuments",{keyPath:hg}).createIndex("documentTargetsIndex",m_,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dg,{unique:!0}),i.createObjectStore("targetGlobal")}const Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ch{constructor(e,n,s,u,l,p,T,S,x,L,G=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.oi=l,this.window=p,this.document=T,this._i=x,this.ai=L,this.ui=G,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=oe=>Promise.resolve(),!Ch.D())throw new Ye(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vg(this,u),this.Ti=n+"main",this.serializer=new D_(S),this.Ei=new zt(this.Ti,this.ui,new Uv(this.serializer)),this.Qr=new Lv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Th(this.serializer),this.$r=new dc,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===L&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,Wg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Xr(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var s=(0,se.Z)(function*(u){if(n.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,se.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,se.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ss(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Td(e).get("owner").next(n=>X.resolve(this.Si(n)))}bi(e){return Vf(e).delete(this.clientId)}Di(){var e=this;return(0,se.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=jr(s,"clientMetadata");return u.W().next(l=>{const p=e.vi(l,18e5),T=l.filter(S=>-1===p.indexOf(S));return X.forEach(T,S=>u.delete(S.clientId)).next(()=>T)})}).catch(()=>[]);if(e.di)for(const s of n)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?X.resolve(!0):Td(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vf(e).W().next(s=>void 0===this.vi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Me("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,se.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const s=new Zu(n,Xr._e);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(s=>this.Ci(s.updateTimeMs,n)&&!this.Mi(s.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Vf(e).W().next(n=>this.vi(n,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return xf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ng.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,s){Me("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(S=this.ui)?pg:14===S?Zi:13===S?rf:12===S?Ll:11===S?Pc:void It();var S;let p;return this.Ei.runTransaction(e,u,l,T=>(p=new Zu(T,this.kr?this.kr.next():Xr._e),"readwrite-primary"===n?this.gi(p).next(S=>!!S||this.pi(p)).next(S=>{if(!S)throw xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ye(ke.FAILED_PRECONDITION,U);return s(p)}).next(S=>this.wi(p).next(()=>S)):this.ki(p).next(()=>s(p)))).then(T=>(p.raiseOnCommittedEvent(),T))}ki(e){return Td(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ye(ke.FAILED_PRECONDITION,Wg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Td(e).put("owner",n)}static D(){return zt.D()}yi(e){const n=Td(e);return n.get("owner").next(s=>this.Si(s)?(Me("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):X.resolve())}Ci(e,n){const s=Date.now();return!(e<s-n||e>s&&(xr(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,Dt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const s=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Me("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return xr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Td(i){return jr(i,"owner")}function Vf(i){return jr(i,"clientMetadata")}function Uf(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Ah{constructor(e,n,s,u){this.targetId=e,this.fromCache=n,this.qi=s,this.Qi=u}static Ki(e,n){let s=sn(),u=sn();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Ah(e,n.fromCache,s,u)}}class jI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Bv{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Dt.G6)()?8:zt.v((0,Dt.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,s,u){const l={result:null};return this.ji(e,n).next(p=>{l.result=p}).next(()=>{if(!l.result)return this.Hi(e,n,u,s).next(p=>{l.result=p})}).next(()=>{if(l.result)return;const p=new jI;return this.Ji(e,n,p).next(T=>{if(l.result=T,this.Ui)return this.Yi(e,n,p,T.size)})}).next(()=>l.result)}Yi(e,n,s,u){return s.documentReadCount<this.Wi?(Wo()<=Tt.in.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",Uc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),X.resolve()):(Wo()<=Tt.in.DEBUG&&Me("QueryEngine","Query:",Uc(n),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Gi*u?(Wo()<=Tt.in.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",Uc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(n))):X.resolve())}ji(e,n){if(gf(n))return X.resolve(null);let s=Yi(n);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Vc(n,null,"F"),s=Yi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=sn(...l);return this.zi.getDocuments(e,p).next(T=>this.indexManager.getMinOffset(e,s).next(S=>{const x=this.Zi(n,T);return this.Xi(n,x,p,S.readTime)?this.ji(e,Vc(n,null,"F")):this.es(e,x,n,S)}))})))}Hi(e,n,s,u){return gf(n)||u.isEqual(yt.min())?X.resolve(null):this.zi.getDocuments(e,s).next(l=>{const p=this.Zi(n,l);return this.Xi(n,p,s,u)?X.resolve(null):(Wo()<=Tt.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Uc(n)),this.es(e,p,n,C(u,-1)).next(T=>T))})}Zi(e,n){let s=new er(_f(e));return n.forEach((u,l)=>{ba(e,l)&&(s=s.add(l))}),s}Xi(e,n,s,u){if(null===e.limit)return!1;if(s.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Ji(e,n,s){return Wo()<=Tt.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Uc(n)),this.zi.getDocumentsMatchingQuery(e,n,D.min(),s)}es(e,n,s,u){return this.zi.getDocumentsMatchingQuery(e,s,u).next(l=>(n.forEach(p=>{l=l.insert(p.key,p)}),l))}}class jv{constructor(e,n,s,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new sr(Wt),this.rs=new to(l=>Ao(l),nc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function B_(i,e,n,s){return new jv(i,e,n,s)}function $v(i,e){return j_.apply(this,arguments)}function j_(){return j_=(0,se.Z)(function*(i,e){const n=ut(i);return yield n.persistence.runTransaction("Handle user change","readonly",s=>{let u;return n.mutationQueue.getAllMutationBatches(s).next(l=>(u=l,n._s(e),n.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],T=[];let S=sn();for(const x of u){p.push(x.batchId);for(const L of x.mutations)S=S.add(L.key)}for(const x of l){T.push(x.batchId);for(const L of x.mutations)S=S.add(L.key)}return n.localDocuments.getDocuments(s,S).next(x=>({us:x,removedBatchIds:p,addedBatchIds:T}))})})}),j_.apply(this,arguments)}function $_(i){const e=ut(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function jf(i,e,n){let s=sn(),u=sn();return n.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let p=us();return n.forEach((T,S)=>{const x=l.get(T);S.isFoundDocument()!==x.isFoundDocument()&&(u=u.add(T)),S.isNoDocument()&&S.version.isEqual(yt.min())?(e.removeEntry(T,S.readTime),p=p.insert(T,S)):!x.isValidDocument()||S.version.compareTo(x.version)>0||0===S.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(S),p=p.insert(T,S)):Me("LocalStore","Ignoring outdated watch update for ",T,". Current version:",x.version," Watch version:",S.version)}),{cs:p,ls:u}})}function Dd(i,e){const n=ut(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hc(i,e){const n=ut(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return n.Qr.getTargetData(s,e).next(l=>l?(u=l,X.resolve(u)):n.Qr.allocateTargetId(s).next(p=>(u=new ta(e,p,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=n.ns.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(e,s.targetId)),s})}function fc(i,e,n){return rl.apply(this,arguments)}function rl(){return rl=(0,se.Z)(function*(i,e,n){const s=ut(i),u=s.ns.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,u)))}catch(p){if(!ss(p))throw p;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.ns=s.ns.remove(e),s.rs.delete(u.target)}),rl.apply(this,arguments)}function il(i,e,n){const s=ut(i);let u=yt.min(),l=sn();return s.persistence.runTransaction("Execute query","readwrite",p=>function(S,x,L){const G=ut(S),oe=G.rs.get(L);return void 0!==oe?X.resolve(G.ns.get(oe)):G.Qr.getTargetData(x,L)}(s,p,Yi(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(p,T.targetId).next(S=>{l=S})}).next(()=>s.ts.getDocumentsMatchingQuery(p,e,n?u:yt.min(),n?l:sn())).next(T=>(Hf(s,Ig(e),T),{documents:T,hs:l})))}function sl(i,e){const n=ut(i),s=ut(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>s._t(l,e).next(p=>p?p.target:null))}function $f(i,e){const n=ut(i),s=n.ss.get(e)||yt.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,C(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Hf(n,e,u),u))}function Hf(i,e,n){let s=i.ss.get(e)||yt.min();n.forEach((u,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.ss.set(e,s)}function H_(){return H_=(0,se.Z)(function*(i,e,n,s){const u=ut(i);let l=sn(),p=us();for(const x of n){const L=e.Ps(x.metadata.name);x.document&&(l=l.add(L));const G=e.Is(x);G.setReadTime(e.Ts(x.metadata.readTime)),p=p.insert(L,G)}const T=u.os.newChangeBuffer({trackRemovals:!0}),S=yield hc(u,(L=s,Yi(As(_n.fromString(`__bundle__/docs/${L}`)))));var L;return u.persistence.runTransaction("Apply bundle documents","readwrite",x=>jf(x,T,p).next(L=>(T.apply(x),L)).next(L=>u.Qr.removeMatchingKeysForTargetId(x,S.targetId).next(()=>u.Qr.addMatchingKeys(x,l,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(x,L.cs,L.ls)).next(()=>L.cs)))}),H_.apply(this,arguments)}function Kg(i,e){return ol.apply(this,arguments)}function ol(){return ol=(0,se.Z)(function*(i,e,n=sn()){const s=yield hc(i,Yi(Mg(e.bundledQuery))),u=ut(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const p=Wr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return u.$r.saveNamedQuery(l,e);const T=s.withResumeToken(ei.EMPTY_BYTE_STRING,p);return u.ns=u.ns.insert(T.targetId,T),u.Qr.updateTargetData(l,T).next(()=>u.Qr.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>u.Qr.addMatchingKeys(l,n,s.targetId)).next(()=>u.$r.saveNamedQuery(l,e))})}),ol.apply(this,arguments)}function z_(i,e){return`firestore_clients_${i}_${e}`}function Zg(i,e,n){let s=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Qg(i,e){return`firestore_targets_${i}_${e}`}class Gf{constructor(e,n,s,u){this.user=e,this.batchId=n,this.state=s,this.error=u}static Es(e,n,s){const u=JSON.parse(s);let l,p="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return p&&u.error&&(p="string"==typeof u.error.message&&"string"==typeof u.error.code,p&&(l=new Ye(u.error.code,u.error.message))),p?new Gf(e,n,u.state,l):(xr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class al{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static Es(e,n){const s=JSON.parse(n);let u,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ye(s.error.code,s.error.message))),l?new al(e,s.state,u):(xr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const s=JSON.parse(n);let u="object"==typeof s&&s.activeTargetIds instanceof Array,l=Kl();for(let p=0;u&&p<s.activeTargetIds.length;++p)u=au(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return u?new Sh(e,l):(xr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Yg{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Yg(n.clientId,n.onlineState):(xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jg{constructor(){this.activeTargetIds=Kl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G_{constructor(e,n,s,u,l){this.window=e,this.oi=n,this.persistenceKey=s,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new sr(Wt),this.started=!1,this.ys=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ws=z_(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Jg),this.bs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.Z)(function*(){const n=yield e.syncEngine.Li();for(const u of n){if(u===e.Vs)continue;const l=e.getItem(z_(e.persistenceKey,u));if(l){const p=Sh.Es(u,l);p&&(e.ps=e.ps.insert(p.clientId,p))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const u=e.xs(s);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((s,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,s){this.Bs(e,n,s),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Qg(this.persistenceKey,e));if(s){const u=al.Es(e,s);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qg(this.persistenceKey,e))}updateQueryState(e,n,s){this.qs(e,n,s)}handleUserChange(e,n,s){n.forEach(u=>{this.Ls(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Me("SharedClientState","READ",e,n),n}setItem(e,n){Me("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const s=e;if(s.storageArea===this.storage){if(Me("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,se.Z)(function*(){if(n.started){if(null!==s.key)if(n.bs.test(s.key)){if(null==s.newValue){const u=n.$s(s.key);return n.Us(u,null)}{const u=n.Ws(s.key,s.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(s.key)){if(null!==s.newValue){const u=n.Gs(s.key,s.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(s.key)){if(null!==s.newValue){const u=n.js(s.key,s.newValue);if(u)return n.Hs(u)}}else if(s.key===n.vs){if(null!==s.newValue){const u=n.xs(s.newValue);if(u)return n.Os(u)}}else if(s.key===n.Ss){const u=function(p){let T=Xr._e;if(null!=p)try{const S=JSON.parse(p);Mt("number"==typeof S),T=S}catch(S){xr("SharedClientState","Failed to read sequence number from WebStorage",S)}return T}(s.newValue);u!==Xr._e&&n.sequenceNumberHandler(u)}else if(s.key===n.Fs){const u=n.Js(s.newValue);yield Promise.all(u.map(l=>n.syncEngine.Ys(l)))}}else n.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,s){const u=new Gf(this.currentUser,e,n,s),l=Zg(this.persistenceKey,this.currentUser,e);this.setItem(l,u.ds())}Ls(e){const n=Zg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,s){const u=Qg(this.persistenceKey,e),l=new al(e,n,s);this.setItem(u,l.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const s=this.$s(e);return Sh.Es(s,n)}Gs(e,n){const s=this.Ds.exec(e),u=Number(s[1]);return Gf.Es(new Mr(void 0!==s[2]?s[2]:null),u,n)}js(e,n){const s=this.Cs.exec(e),u=Number(s[1]);return al.Es(u,n)}xs(e){return Yg.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,se.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const s=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),l=this.Ns(s),p=[],T=[];return l.forEach(S=>{u.has(S)||p.push(S)}),u.forEach(S=>{l.has(S)||T.push(S)}),this.syncEngine.eo(p,T).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Kl();return e.forEach((s,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class W_{constructor(){this.no=new Jg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,s){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Jg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wf{io(e){}shutdown(){}}class qf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Kf=null;function Zf(){return null===Kf?Kf=268435456+Math.round(2147483648*Math.random()):Kf++,"0x"+Kf.toString(16)}const Xg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const ls="WebChannelConnection";class q_ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${u}/databases/${l}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get wo(){return!1}So(n,s,u,l,p){const T=Zf(),S=this.bo(n,s.toUriEncodedString());Me("RestConnection",`Sending RPC '${n}' ${T}:`,S,u);const x={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(x,l,p),this.Co(n,S,x,u).then(L=>(Me("RestConnection",`Received RPC '${n}' ${T}: `,L),L),L=>{throw Ii("RestConnection",`RPC '${n}' ${T} failed with error: `,L,"url: ",S,"request:",u),L})}vo(n,s,u,l,p,T){return this.So(n,s,u,l,p)}Do(n,s,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+va,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,p)=>n[p]=l),u&&u.headers.forEach((l,p)=>n[p]=l)}bo(n,s){return`${this.fo}/v1/${s}:${Xg[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,s,u){const l=Zf();return new Promise((p,T)=>{const S=new Jd;S.setWithCredentials(!0),S.listenOnce(Qd.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Ei.NO_ERROR:const L=S.getResponseJson();Me(ls,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(L)),p(L);break;case Ei.TIMEOUT:Me(ls,`RPC '${e}' ${l} timed out`),T(new Ye(ke.DEADLINE_EXCEEDED,"Request time out"));break;case Ei.HTTP_ERROR:const G=S.getStatus();if(Me(ls,`RPC '${e}' ${l} failed with status:`,G,"response text:",S.getResponseText()),G>0){let oe=S.getResponseJson();Array.isArray(oe)&&(oe=oe[0]);const be=oe?.error;if(be&&be.status&&be.message){const rt=function(ct){const Ft=ct.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(Ft)>=0?Ft:ke.UNKNOWN}(be.status);T(new Ye(rt,be.message))}else T(new Ye(ke.UNKNOWN,"Server responded with status "+S.getStatus()))}else T(new Ye(ke.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{Me(ls,`RPC '${e}' ${l} completed.`)}});const x=JSON.stringify(u);Me(ls,`RPC '${e}' ${l} sending request:`,u),S.send(n,"POST",x,s,15)})}Fo(e,n,s){const u=Zf(),l=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=_a(),T=Go(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;void 0!==x&&(S.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Do(S.initMessageHeaders,n,s),S.encodeInitMessageHeaders=!0;const L=l.join("");Me(ls,`Creating RPC '${e}' stream ${u}: ${L}`,S);const G=p.createWebChannel(L,S);let oe=!1,be=!1;const rt=new Qf({lo:ct=>{be?Me(ls,`Not sending because RPC '${e}' stream ${u} is closed:`,ct):(oe||(Me(ls,`Opening RPC '${e}' stream ${u} transport.`),G.open(),oe=!0),Me(ls,`RPC '${e}' stream ${u} sending:`,ct),G.send(ct))},ho:()=>G.close()}),gt=(ct,Ft,un)=>{ct.listen(Ft,Lt=>{try{un(Lt)}catch(cn){setTimeout(()=>{throw cn},0)}})};return gt(G,Cc.EventType.OPEN,()=>{be||Me(ls,`RPC '${e}' stream ${u} transport opened.`)}),gt(G,Cc.EventType.CLOSE,()=>{be||(be=!0,Me(ls,`RPC '${e}' stream ${u} transport closed`),rt.Vo())}),gt(G,Cc.EventType.ERROR,ct=>{be||(be=!0,Ii(ls,`RPC '${e}' stream ${u} transport errored:`,ct),rt.Vo(new Ye(ke.UNAVAILABLE,"The operation could not be completed")))}),gt(G,Cc.EventType.MESSAGE,ct=>{var Ft;if(!be){const un=ct.data[0];Mt(!!un);const cn=un.error||(null===(Ft=un[0])||void 0===Ft?void 0:Ft.error);if(cn){Me(ls,`RPC '${e}' stream ${u} received error:`,cn);const $n=cn.status;let Zn=function(XE){const pv=ar[XE];if(void 0!==pv)return id(pv)}($n),ni=cn.message;void 0===Zn&&(Zn=ke.INTERNAL,ni="Unknown error status: "+$n+" with message "+cn.message),be=!0,rt.Vo(new Ye(Zn,ni)),G.close()}else Me(ls,`RPC '${e}' stream ${u} received:`,un),rt.mo(un)}}),gt(T,Yd.STAT_EVENT,ct=>{ct.stat===ya.PROXY?Me(ls,`RPC '${e}' stream ${u} detected buffering proxy`):ct.stat===ya.NOPROXY&&Me(ls,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{rt.Ro()},0),rt}}function K_(){return typeof window<"u"?window:null}function bh(){return typeof document<"u"?document:null}function Yf(i){return new Ls(i,!0)}class em{constructor(e,n,s=1e3,u=1.5,l=6e4){this.oi=e,this.timerId=n,this.Mo=s,this.xo=u,this.Oo=l,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),u=Math.max(0,n-s);u>0&&Me("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Rh{constructor(e,n,s,u,l,p,T,S){this.oi=e,this.$o=s,this.Uo=u,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=S,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new em(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,se.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,se.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var s=this;return(0,se.Z)(function*(){s.n_(),s.r_(),s.jo.cancel(),s.Wo++,4!==e?s.jo.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),s.jo.ko()):n&&n.code===ke.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.i_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Wo===n&&this.o_(s,u)},s=>{e(()=>{const u=new Ye(ke.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(u)})})}o_(e,n){const s=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{s(()=>this.__(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,se.Z)(function*(){e.state=0,e.start()}))}__(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hv extends Rh{constructor(e,n,s,u,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function v_(i,e){let n;if("targetChange"in e){const s="NO_CHANGE"===(x=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===x?1:"REMOVE"===x?2:"CURRENT"===x?3:"RESET"===x?4:It(),u=e.targetChange.targetIds||[],l=function(x,L){return x.useProto3Json?(Mt(void 0===L||"string"==typeof L),ei.fromBase64String(L||"")):(Mt(void 0===L||L instanceof Uint8Array),ei.fromUint8Array(L||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&function(x){const L=void 0===x.code?ke.UNKNOWN:id(x.code);return new Ye(L,x.message||"")}(p);n=new F(s,u,l,T||null)}else if("documentChange"in e){const s=e.documentChange,u=Vs(i,s.document.name),l=Wr(s.document.updateTime),p=s.document.createTime?Wr(s.document.createTime):yt.min(),T=new or({mapValue:{fields:s.document.fields}}),S=_r.newFoundDocument(u,l,p,T);n=new _(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=Vs(i,s.document),l=s.readTime?Wr(s.readTime):yt.min(),p=_r.newNoDocument(u,l);n=new _([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,u=Vs(i,s.document);n=new _([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return It();{const s=e.filter,{count:u=0,unchangedNames:l}=s,p=new Hc(u,l);n=new R(s.targetId,p)}}var x;return n}(this.serializer,e),s=function(l){if(!("targetChange"in l))return yt.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?yt.min():p.readTime?Wr(p.readTime):yt.min()}(e);return this.listener.u_(n,s)}c_(e){const n={};n.database=ac(this.serializer),n.addTarget=function(l,p){let T;const S=p.target;if(T=Hl(S)?{documents:Sg(l,S)}:{query:bg(l,S).ut},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=Gc(l,p.resumeToken);const x=Fs(l,p.expectedCount);null!==x&&(T.expectedCount=x)}else if(p.snapshotVersion.compareTo(yt.min())>0){T.readTime=Ma(l,p.snapshotVersion.toTimestamp());const x=Fs(l,p.expectedCount);null!==x&&(T.expectedCount=x)}return T}(this.serializer,e);const s=function Pv(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);s&&(n.labels=s),this.t_(n)}l_(e){const n={};n.database=ac(this.serializer),n.removeTarget=e,this.t_(n)}}class Cd extends Rh{constructor(e,n,s,u,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Rv(i,e){return i&&i.length>0?(Mt(void 0!==e),i.map(n=>function(u,l){let p=Wr(u.updateTime?u.updateTime:l);return p.isEqual(yt.min())&&(p=Wr(l)),new ph(p,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),s=Wr(e.commitTime);return this.listener.T_(s,n)}return Mt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=ac(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>qc(this.serializer,s))};this.t_(n)}}class Ph extends class{}{constructor(e,n,s,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.So(e,ad(n,s),u,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ye(ke.UNKNOWN,l.toString())})}vo(e,n,s,u,l){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,T])=>this.connection.vo(e,ad(n,s),u,p,T,l)).catch(p=>{throw"FirebaseError"===p.name?(p.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ye(ke.UNKNOWN,p.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Gv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(xr(n),this.g_=!1):Me("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Wv{constructor(e,n,s,u,l){var p=this;this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=l,this.M_.io(T=>{s.enqueueAndForget((0,se.Z)(function*(){var S;pc(p)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,se.Z)(function*(L){const G=ut(L);G.v_.add(4),yield ul(G),G.x_.set("Unknown"),G.v_.delete(4),yield Mh(G)}),function x(L){return S.apply(this,arguments)})(p))}))}),this.x_=new Gv(s,u)}}function Mh(i){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,se.Z)(function*(i){if(pc(i))for(const e of i.F_)yield e(!0)}),Xf.apply(this,arguments)}function ul(i){return xh.apply(this,arguments)}function xh(){return xh=(0,se.Z)(function*(i){for(const e of i.F_)yield e(!1)}),xh.apply(this,arguments)}function tm(i,e){const n=ut(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),tp(n)?nm(n):Ad(n).Jo()&&ep(n,e))}function cl(i,e){const n=ut(i),s=Ad(n);n.C_.delete(e),s.Jo()&&Z_(n,e),0===n.C_.size&&(s.Jo()?s.Xo():pc(n)&&n.x_.set("Unknown"))}function ep(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ad(i).c_(e)}function Z_(i,e){i.O_.Oe(e),Ad(i).l_(e)}function nm(i){i.O_=new Ie({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Ad(i).start(),i.x_.p_()}function tp(i){return pc(i)&&!Ad(i).Ho()&&i.C_.size>0}function pc(i){return 0===ut(i).v_.size}function rm(i){i.O_=void 0}function qv(i){return im.apply(this,arguments)}function im(){return im=(0,se.Z)(function*(i){i.C_.forEach((e,n)=>{ep(i,e)})}),im.apply(this,arguments)}function $I(i,e){return np.apply(this,arguments)}function np(){return np=(0,se.Z)(function*(i,e){rm(i),tp(i)?(i.x_.S_(e),nm(i)):i.x_.set("Unknown")}),np.apply(this,arguments)}function Q_(i,e,n){return so.apply(this,arguments)}function so(){return so=(0,se.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof F&&2===e.state&&e.cause)try{yield(s=(0,se.Z)(function*(l,p){const T=p.cause;for(const S of p.targetIds)l.C_.has(S)&&(yield l.remoteSyncer.rejectListen(S,T),l.C_.delete(S),l.O_.removeTarget(S))}),function u(l,p){return s.apply(this,arguments)})(i,e)}catch(s){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Nh(i,s)}else if(e instanceof _?i.O_.$e(e):e instanceof R?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(yt.min()))try{const s=yield $_(i.localStore);n.compareTo(s)>=0&&(yield function(l,p){const T=l.O_.it(p);return T.targetChanges.forEach((S,x)=>{if(S.resumeToken.approximateByteSize()>0){const L=l.C_.get(x);L&&l.C_.set(x,L.withResumeToken(S.resumeToken,p))}}),T.targetMismatches.forEach((S,x)=>{const L=l.C_.get(S);if(!L)return;l.C_.set(S,L.withResumeToken(ei.EMPTY_BYTE_STRING,L.snapshotVersion)),Z_(l,S);const G=new ta(L.target,S,x,L.sequenceNumber);ep(l,G)}),l.remoteSyncer.applyRemoteEvent(T)}(i,n))}catch(s){Me("RemoteStore","Failed to raise snapshot:",s),yield Nh(i,s)}var s}),so.apply(this,arguments)}function Nh(i,e,n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,se.Z)(function*(i,e,n){if(!ss(e))throw e;i.v_.add(1),yield ul(i),i.x_.set("Offline"),n||(n=()=>$_(i.localStore)),i.asyncQueue.enqueueRetryable((0,se.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield Mh(i)}))}),Y_.apply(this,arguments)}function rp(i,e){return e().catch(n=>Nh(i,n,e))}function oo(i){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,se.Z)(function*(i){const e=ut(i),n=Su(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Kv(e);)try{const u=yield Dd(e.localStore,s);if(null===u){0===e.D_.length&&n.Xo();break}s=u.batchId,HI(e,u)}catch(u){yield Nh(e,u)}J_(e)&&ip(e)}),Oh.apply(this,arguments)}function Kv(i){return pc(i)&&i.D_.length<10}function HI(i,e){i.D_.push(e);const n=Su(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function J_(i){return pc(i)&&!Su(i).Ho()&&i.D_.length>0}function ip(i){Su(i).start()}function Fa(i){return sp.apply(this,arguments)}function sp(){return sp=(0,se.Z)(function*(i){Su(i).d_()}),sp.apply(this,arguments)}function Zv(i){return X_.apply(this,arguments)}function X_(){return X_=(0,se.Z)(function*(i){const e=Su(i);for(const n of i.D_)e.I_(n.mutations)}),X_.apply(this,arguments)}function Li(i,e,n){return sm.apply(this,arguments)}function sm(){return sm=(0,se.Z)(function*(i,e,n){const s=i.D_.shift(),u=Di.from(s,e,n);yield rp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield oo(i)}),sm.apply(this,arguments)}function om(i,e){return am.apply(this,arguments)}function am(){return am=(0,se.Z)(function*(i,e){var n;e&&Su(i).P_&&(yield(n=(0,se.Z)(function*(u,l){if(rd(T=l.code)&&T!==ke.ABORTED){const p=u.D_.shift();Su(u).Zo(),yield rp(u,()=>u.remoteSyncer.rejectFailedWrite(p.batchId,l)),yield oo(u)}var T}),function s(u,l){return n.apply(this,arguments)})(i,e)),J_(i)&&ip(i)}),am.apply(this,arguments)}function ey(i,e){return kh.apply(this,arguments)}function kh(){return kh=(0,se.Z)(function*(i,e){const n=ut(i);n.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const s=pc(n);n.v_.add(3),yield ul(n),s&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Mh(n)}),kh.apply(this,arguments)}function op(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,se.Z)(function*(i,e){const n=ut(i);e?(n.v_.delete(2),yield Mh(n)):e||(n.v_.add(2),yield ul(n),n.x_.set("Unknown"))}),ap.apply(this,arguments)}function Ad(i){return i.N_||(i.N_=function(n,s,u){const l=ut(n);return l.R_(),new Hv(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{Po:qv.bind(null,i),To:$I.bind(null,i),u_:Q_.bind(null,i)}),i.F_.push(function(){var e=(0,se.Z)(function*(n){n?(i.N_.Zo(),tp(i)?nm(i):i.x_.set("Unknown")):(yield i.N_.stop(),rm(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function Su(i){return i.B_||(i.B_=function(n,s,u){const l=ut(n);return l.R_(),new Cd(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{Po:Fa.bind(null,i),To:om.bind(null,i),E_:Zv.bind(null,i),T_:Li.bind(null,i)}),i.F_.push(function(){var e=(0,se.Z)(function*(n){n?(i.B_.Zo(),yield oo(i)):(yield i.B_.stop(),i.D_.length>0&&(Me("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.B_}class up{constructor(e,n,s,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=u,this.removalCallback=l,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,u,l){const p=Date.now()+s,T=new up(e,n,p,u,l);return T.start(s),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(i,e){if(xr("AsyncQueue",`${e}: ${i}`),ss(i))return new Ye(ke.UNAVAILABLE,`${e}: ${i}`);throw i}class bd{constructor(e){this.comparator=e?(n,s)=>e(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=Wl(),this.sortedSet=new sr(this.comparator)}static emptySet(e){return new bd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const s=new bd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class ty{constructor(){this.L_=new sr(ft.comparator)}track(e){const n=e.doc.key,s=this.L_.get(n);s?0!==e.type&&3===s.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==s.type?this.L_=this.L_.insert(n,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.L_=this.L_.remove(n):1===e.type&&2===s.type?this.L_=this.L_.insert(n,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):It():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,s)=>{e.push(s)}),e}}class ll{constructor(e,n,s,u,l,p,T,S,x){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=S,this.hasCachedResults=x}static fromInitialDocuments(e,n,s,u,l){const p=[];return n.forEach(T=>{p.push({type:0,doc:T})}),new ll(e,n,bd.emptySet(n),p,s,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==s[u].type||!n[u].doc.isEqual(s[u].doc))return!1;return!0}}class Rd{constructor(){this.q_=void 0,this.Q_=[]}}class bu{constructor(){this.queries=new to(e=>dh(e),pu),this.onlineState="Unknown",this.K_=new Set}}function gc(i,e){return um.apply(this,arguments)}function um(){return um=(0,se.Z)(function*(i,e){const n=ut(i),s=e.query;let u=!1,l=n.queries.get(s);if(l||(u=!0,l=new Rd),u)try{l.q_=yield n.onListen(s)}catch(p){const T=Sd(p,`Initialization of query '${Uc(e.query)}' failed`);return void e.onError(T)}n.queries.set(s,l),l.Q_.push(e),e.U_(n.onlineState),l.q_&&e.W_(l.q_)&&dl(n)}),um.apply(this,arguments)}function cm(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,se.Z)(function*(i,e){const n=ut(i),s=e.query;let u=!1;const l=n.queries.get(s);if(l){const p=l.Q_.indexOf(e);p>=0&&(l.Q_.splice(p,1),u=0===l.Q_.length)}if(u)return n.queries.delete(s),n.onUnlisten(s)}),cp.apply(this,arguments)}function ny(i,e){const n=ut(i);let s=!1;for(const u of e){const p=n.queries.get(u.query);if(p){for(const T of p.Q_)T.W_(u)&&(s=!0);p.q_=u}}s&&dl(n)}function lm(i,e,n){const s=ut(i),u=s.queries.get(e);if(u)for(const l of u.Q_)l.onError(n);s.queries.delete(e)}function dl(i){i.K_.forEach(e=>{e.next()})}class Pd{constructor(e,n,s){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new ll(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class ry{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class dm{constructor(e){this.serializer=e}Ps(e){return Vs(this.serializer,e)}Is(e){return e.metadata.exists?wf(this.serializer,e.document,!1):_r.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Wr(e)}}class Qv{constructor(e,n,s){this.ta=e,this.localStore=n,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const s=_n.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,s=new dm(this.serializer);for(const u of e)if(u.metadata.queries){const l=s.Ps(u.metadata.name);for(const p of u.metadata.queries){const T=(n.get(p)||sn()).add(l);n.set(p,T)}}return n}complete(){var e=this;return(0,se.Z)(function*(){const n=yield function zf(i,e,n,s){return H_.apply(this,arguments)}(e.localStore,new dm(e.serializer),e.documents,e.ta.id),s=e.ra(e.documents);for(const u of e.queries)yield Kg(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function iy(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class sy{constructor(e){this.key=e}}class oy{constructor(e){this.key=e}}class hm{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=sn(),this.mutatedKeys=sn(),this.ua=_f(e),this.ca=new bd(this.ua)}get la(){return this.oa}ha(e,n){const s=n?n.Pa:new ty,u=n?n.ca:this.ca;let l=n?n.mutatedKeys:this.mutatedKeys,p=u,T=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,x="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((L,G)=>{const oe=u.get(L),be=ba(this.query,G)?G:null,rt=!!oe&&this.mutatedKeys.has(oe.key),gt=!!be&&(be.hasLocalMutations||this.mutatedKeys.has(be.key)&&be.hasCommittedMutations);let ct=!1;oe&&be?oe.data.isEqual(be.data)?rt!==gt&&(s.track({type:3,doc:be}),ct=!0):this.Ia(oe,be)||(s.track({type:2,doc:be}),ct=!0,(S&&this.ua(be,S)>0||x&&this.ua(be,x)<0)&&(T=!0)):!oe&&be?(s.track({type:0,doc:be}),ct=!0):oe&&!be&&(s.track({type:1,doc:oe}),ct=!0,(S||x)&&(T=!0)),ct&&(be?(p=p.add(be),l=gt?l.add(L):l.delete(L)):(p=p.delete(L),l=l.delete(L)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const L="F"===this.query.limitType?p.last():p.first();p=p.delete(L.key),l=l.delete(L.key),s.track({type:1,doc:L})}return{ca:p,Pa:s,Xi:T,mutatedKeys:l}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,u){const l=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const p=e.Pa.k_();p.sort((L,G)=>function(be,rt){const gt=ct=>{switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return gt(be)-gt(rt)}(L.type,G.type)||this.ua(L.doc,G.doc)),this.Ta(s),u=null!=u&&u;const T=n&&!u?this.Ea():[],S=0===this.aa.size&&this.current&&!u?1:0,x=S!==this._a;return this._a=S,0!==p.length||x?{snapshot:new ll(this.query,e.ca,l,p,e.mutatedKeys,0===S,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:T}:{da:T}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ty,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=sn(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const n=[];return e.forEach(s=>{this.aa.has(s)||n.push(new oy(s))}),this.aa.forEach(s=>{e.has(s)||n.push(new sy(s))}),n}Ra(e){this.oa=e.hs,this.aa=sn();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ll.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class zI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Yv{constructor(e){this.key=e,this.ma=!1}}class GI{constructor(e,n,s,u,l,p){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.fa={},this.ga=new to(T=>dh(T),pu),this.pa=new Map,this.ya=new Set,this.wa=new sr(ft.comparator),this.Sa=new Map,this.ba=new Hg,this.Da={},this.Ca=new Map,this.va=Yc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function WI(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,se.Z)(function*(i,e){const n=Ip(i);let s,u;const l=n.ga.get(e);if(l)s=l.targetId,n.sharedClientState.addLocalQueryTarget(s),u=l.view.Va();else{const p=yield hc(n.localStore,Yi(e)),T=n.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,u=yield dp(n,e,s,"current"===T,p.resumeToken),n.isPrimaryClient&&tm(n.remoteStore,p)}return u}),lp.apply(this,arguments)}function dp(i,e,n,s,u){return ay.apply(this,arguments)}function ay(){return ay=(0,se.Z)(function*(i,e,n,s,u){i.Ma=(G,oe,be)=>{return(rt=(0,se.Z)(function*(ct,Ft,un,Lt){let cn=Ft.view.ha(un);cn.Xi&&(cn=yield il(ct.localStore,Ft.query,!1).then(({documents:Vi})=>Ft.view.ha(Vi,cn)));const $n=Lt&&Lt.targetChanges.get(Ft.targetId),Zn=Lt&&null!=Lt.targetMismatches.get(Ft.targetId),ni=Ft.view.applyChanges(cn,ct.isPrimaryClient,$n,Zn);return Fh(ct,Ft.targetId,ni.da),ni.snapshot}),function gt(ct,Ft,un,Lt){return rt.apply(this,arguments)})(i,G,oe,be);var rt};const l=yield il(i.localStore,e,!0),p=new hm(e,l.hs),T=p.ha(l.documents),S=f.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==i.onlineState,u),x=p.applyChanges(T,i.isPrimaryClient,S);Fh(i,n,x.da);const L=new zI(e,n,p);return i.ga.set(e,L),i.pa.has(n)?i.pa.get(n).push(e):i.pa.set(n,[e]),x.snapshot}),ay.apply(this,arguments)}function hp(i,e){return fp.apply(this,arguments)}function fp(){return fp=(0,se.Z)(function*(i,e){const n=ut(i),s=n.ga.get(e),u=n.pa.get(s.targetId);if(u.length>1)return n.pa.set(s.targetId,u.filter(l=>!pu(l,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||(yield fc(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),cl(n.remoteStore,s.targetId),mc(n,s.targetId)}).catch(Re))):(mc(n,s.targetId),yield fc(n.localStore,s.targetId,!0))}),fp.apply(this,arguments)}function fm(){return fm=(0,se.Z)(function*(i,e,n){const s=wm(i);try{const u=yield function(p,T){const S=ut(p),x=ir.now(),L=T.reduce((be,rt)=>be.add(rt.key),sn());let G,oe;return S.persistence.runTransaction("Locally write mutations","readwrite",be=>{let rt=us(),gt=sn();return S.os.getEntries(be,L).next(ct=>{rt=ct,rt.forEach((Ft,un)=>{un.isValidDocument()||(gt=gt.add(Ft))})}).next(()=>S.localDocuments.getOverlayedDocuments(be,rt)).next(ct=>{G=ct;const Ft=[];for(const un of T){const Lt=ed(un,G.get(un.key).overlayedDocument);null!=Lt&&Ft.push(new So(un.key,Lt,Yo(Lt.value.mapValue),bn.exists(!0)))}return S.mutationQueue.addMutationBatch(be,x,Ft,T)}).next(ct=>{oe=ct;const Ft=ct.applyToLocalDocumentSet(G,gt);return S.documentOverlayCache.saveOverlays(be,ct.batchId,Ft)})}).then(()=>({batchId:oe.batchId,changes:Tg(G)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(p,T,S){let x=p.Da[p.currentUser.toKey()];x||(x=new sr(Wt)),x=x.insert(T,S),p.Da[p.currentUser.toKey()]=x}(s,u.batchId,n),yield Ru(s,u.changes),yield oo(s.remoteStore)}catch(u){const l=Sd(u,"Failed to persist write");n.reject(l)}}),fm.apply(this,arguments)}function pm(i,e){return pp.apply(this,arguments)}function pp(){return pp=(0,se.Z)(function*(i,e){const n=ut(i);try{const s=yield function qg(i,e){const n=ut(i),s=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const T=[];e.targetChanges.forEach((L,G)=>{const oe=u.get(G);if(!oe)return;T.push(n.Qr.removeMatchingKeys(l,L.removedDocuments,G).next(()=>n.Qr.addMatchingKeys(l,L.addedDocuments,G)));let be=oe.withSequenceNumber(l.currentSequenceNumber);var gt,ct,Ft;null!==e.targetMismatches.get(G)?be=be.withResumeToken(ei.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):L.resumeToken.approximateByteSize()>0&&(be=be.withResumeToken(L.resumeToken,s)),u=u.insert(G,be),ct=be,Ft=L,(0===(gt=oe).resumeToken.approximateByteSize()||ct.snapshotVersion.toMicroseconds()-gt.snapshotVersion.toMicroseconds()>=3e8||Ft.addedDocuments.size+Ft.modifiedDocuments.size+Ft.removedDocuments.size>0)&&T.push(n.Qr.updateTargetData(l,be))});let S=us(),x=sn();if(e.documentUpdates.forEach(L=>{e.resolvedLimboDocuments.has(L)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(l,L))}),T.push(jf(l,p,e.documentUpdates).next(L=>{S=L.cs,x=L.ls})),!s.isEqual(yt.min())){const L=n.Qr.getLastRemoteSnapshotVersion(l).next(G=>n.Qr.setTargetsMetadata(l,l.currentSequenceNumber,s));T.push(L)}return X.waitFor(T).next(()=>p.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,S,x)).next(()=>S)}).then(l=>(n.ns=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const p=n.Sa.get(l);p&&(Mt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?p.ma=!0:u.modifiedDocuments.size>0?Mt(p.ma):u.removedDocuments.size>0&&(Mt(p.ma),p.ma=!1))}),yield Ru(n,s,e)}catch(s){yield Re(s)}}),pp.apply(this,arguments)}function dn(i,e,n){const s=ut(i);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const u=[];s.ga.forEach((l,p)=>{const T=p.view.U_(e);T.snapshot&&u.push(T.snapshot)}),function(p,T){const S=ut(p);S.onlineState=T;let x=!1;S.queries.forEach((L,G)=>{for(const oe of G.Q_)oe.U_(T)&&(x=!0)}),x&&dl(S)}(s.eventManager,e),u.length&&s.fa.u_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function cy(i,e,n){return gp.apply(this,arguments)}function gp(){return gp=(0,se.Z)(function*(i,e,n){const s=ut(i);s.sharedClientState.updateQueryState(e,"rejected",n);const u=s.Sa.get(e),l=u&&u.key;if(l){let p=new sr(ft.comparator);p=p.insert(l,_r.newNoDocument(l,yt.min()));const T=sn().add(l),S=new d(yt.min(),new Map,new sr(Wt),p,T);yield pm(s,S),s.wa=s.wa.remove(l),s.Sa.delete(e),Vh(s)}else yield fc(s.localStore,e,!1).then(()=>mc(s,e,n)).catch(Re)}),gp.apply(this,arguments)}function Md(i,e){return mp.apply(this,arguments)}function mp(){return mp=(0,se.Z)(function*(i,e){const n=ut(i),s=e.batch.batchId;try{const u=yield function Bf(i,e){const n=ut(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),l=n.os.newChangeBuffer({trackRemovals:!0});return function(T,S,x,L){const G=x.batch,oe=G.keys();let be=X.resolve();return oe.forEach(rt=>{be=be.next(()=>L.getEntry(S,rt)).next(gt=>{const ct=x.docVersions.get(rt);Mt(null!==ct),gt.version.compareTo(ct)<0&&(G.applyToRemoteDocument(gt,x),gt.isValidDocument()&&(gt.setReadTime(x.commitVersion),L.addEntry(gt)))})}),be.next(()=>T.mutationQueue.removeMutationBatch(S,G))}(n,s,e,l).next(()=>l.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(T){let S=sn();for(let x=0;x<T.mutationResults.length;++x)T.mutationResults[x].transformResults.length>0&&(S=S.add(T.batch.mutations[x].key));return S}(e))).next(()=>n.localDocuments.getDocuments(s,u))})}(n.localStore,e);_p(n,s,null),hl(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),yield Ru(n,u)}catch(u){yield Re(u)}}),mp.apply(this,arguments)}function Jv(i,e,n){return xd.apply(this,arguments)}function xd(){return xd=(0,se.Z)(function*(i,e,n){const s=ut(i);try{const u=yield function(p,T){const S=ut(p);return S.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let L;return S.mutationQueue.lookupMutationBatch(x,T).next(G=>(Mt(null!==G),L=G.keys(),S.mutationQueue.removeMutationBatch(x,G))).next(()=>S.mutationQueue.performConsistencyCheck(x)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(x,L,T)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,L)).next(()=>S.localDocuments.getDocuments(x,L))})}(s.localStore,e);_p(s,e,n),hl(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),yield Ru(s,u)}catch(u){yield Re(u)}}),xd.apply(this,arguments)}function Lh(){return Lh=(0,se.Z)(function*(i,e){const n=ut(i);pc(n.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const T=ut(p);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>T.mutationQueue.getHighestUnacknowledgedBatchId(S))}(n.localStore);if(-1===s)return void e.resolve();const u=n.Ca.get(s)||[];u.push(e),n.Ca.set(s,u)}catch(s){const u=Sd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Lh.apply(this,arguments)}function hl(i,e){(i.Ca.get(e)||[]).forEach(n=>{n.resolve()}),i.Ca.delete(e)}function _p(i,e,n){const s=ut(i);let u=s.Da[s.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),s.Da[s.currentUser.toKey()]=u}}function mc(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.pa.get(e))i.ga.delete(s),n&&i.fa.xa(s,n);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(s=>{i.ba.containsKey(s)||yp(i,s)})}function yp(i,e){i.ya.delete(e.path.canonicalString());const n=i.wa.get(e);null!==n&&(cl(i.remoteStore,n),i.wa=i.wa.remove(e),i.Sa.delete(n),Vh(i))}function Fh(i,e,n){for(const s of n)s instanceof sy?(i.ba.addReference(s.key,e),ly(i,s)):s instanceof oy?(Me("SyncEngine","Document no longer in limbo: "+s.key),i.ba.removeReference(s.key,e),i.ba.containsKey(s.key)||yp(i,s.key)):It()}function ly(i,e){const n=e.key,s=n.path.canonicalString();i.wa.get(n)||i.ya.has(s)||(Me("SyncEngine","New document in limbo: "+n),i.ya.add(s),Vh(i))}function Vh(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const n=new ft(_n.fromString(e)),s=i.va.next();i.Sa.set(s,new Yv(n)),i.wa=i.wa.insert(n,s),tm(i.remoteStore,new ta(Yi(As(n.path)),s,"TargetPurposeLimboResolution",Xr._e))}}function Ru(i,e,n){return gm.apply(this,arguments)}function gm(){return gm=(0,se.Z)(function*(i,e,n){const s=ut(i),u=[],l=[],p=[];var T;s.ga.isEmpty()||(s.ga.forEach((T,S)=>{p.push(s.Ma(S,e,n).then(x=>{if((x||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(S.targetId,x?.fromCache?"not-current":"current"),x){u.push(x);const L=Ah.Ki(S.targetId,x);l.push(L)}}))}),yield Promise.all(p),s.fa.u_(u),yield(T=(0,se.Z)(function*(x,L){const G=ut(x);try{yield G.persistence.runTransaction("notifyLocalViewChanges","readwrite",oe=>X.forEach(L,be=>X.forEach(be.qi,rt=>G.persistence.referenceDelegate.addReference(oe,be.targetId,rt)).next(()=>X.forEach(be.Qi,rt=>G.persistence.referenceDelegate.removeReference(oe,be.targetId,rt)))))}catch(oe){if(!ss(oe))throw oe;Me("LocalStore","Failed to update sequence numbers: "+oe)}for(const oe of L){const be=oe.targetId;if(!oe.fromCache){const rt=G.ns.get(be),ct=rt.withLastLimboFreeSnapshotVersion(rt.snapshotVersion);G.ns=G.ns.insert(be,ct)}}}),function S(x,L){return T.apply(this,arguments)})(s.localStore,l))}),gm.apply(this,arguments)}function Xv(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,se.Z)(function*(i,e){const n=ut(i);if(!n.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const s=yield $v(n.localStore,e);n.currentUser=e,(l=n).Ca.forEach(T=>{T.forEach(S=>{S.reject(new Ye(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Ca.clear(),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ru(n,s.us)}var l}),vp.apply(this,arguments)}function eE(i,e){const n=ut(i),s=n.Sa.get(e);if(s&&s.ma)return sn().add(s.key);{let u=sn();const l=n.pa.get(e);if(!l)return u;for(const p of l){const T=n.ga.get(p);u=u.unionWith(T.view.la)}return u}}function tE(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,se.Z)(function*(i,e){const n=ut(i),s=yield il(n.localStore,e.query,!0),u=e.view.Ra(s);return n.isPrimaryClient&&Fh(n,e.targetId,u.da),u}),mm.apply(this,arguments)}function nE(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,se.Z)(function*(i,e){const n=ut(i);return $f(n.localStore,e).then(s=>Ru(n,s))}),Ep.apply(this,arguments)}function dy(i,e,n,s){return _m.apply(this,arguments)}function _m(){return _m=(0,se.Z)(function*(i,e,n,s){const u=ut(i),l=yield function(T,S){const x=ut(T),L=ut(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",G=>L.vn(G,S).next(oe=>oe?x.localDocuments.getDocuments(G,oe):X.resolve(null)))}(u.localStore,e);var S;null!==l?("pending"===n?yield oo(u.remoteStore):"acknowledged"===n||"rejected"===n?(_p(u,e,s||null),hl(u,e),S=e,ut(ut(u.localStore).mutationQueue).Mn(S)):It(),yield Ru(u,l)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),_m.apply(this,arguments)}function Ss(){return Ss=(0,se.Z)(function*(i,e){const n=ut(i);if(Ip(n),wm(n),!0===e&&!0!==n.Fa){const s=n.sharedClientState.getAllActiveQueryTargets(),u=yield hy(n,s.toArray());n.Fa=!0,yield op(n.remoteStore,!0);for(const l of u)tm(n.remoteStore,l)}else if(!1===e&&!1!==n.Fa){const s=[];let u=Promise.resolve();n.pa.forEach((l,p)=>{n.sharedClientState.isLocalQueryTarget(p)?s.push(p):u=u.then(()=>(mc(n,p),fc(n.localStore,p,!0))),cl(n.remoteStore,p)}),yield u,yield hy(n,s),function(p){const T=ut(p);T.Sa.forEach((S,x)=>{cl(T.remoteStore,x)}),T.ba.mr(),T.Sa=new Map,T.wa=new sr(ft.comparator)}(n),n.Fa=!1,yield op(n.remoteStore,!1)}}),Ss.apply(this,arguments)}function hy(i,e,n){return ym.apply(this,arguments)}function ym(){return ym=(0,se.Z)(function*(i,e,n){const s=ut(i),u=[],l=[];for(const p of e){let T;const S=s.pa.get(p);if(S&&0!==S.length){T=yield hc(s.localStore,Yi(S[0]));for(const x of S){const L=s.ga.get(x),G=yield tE(s,L);G.snapshot&&l.push(G.snapshot)}}else{const x=yield sl(s.localStore,p);T=yield hc(s.localStore,x),yield dp(s,iE(x),p,!1,T.resumeToken)}u.push(T)}return s.fa.u_(l),u}),ym.apply(this,arguments)}function iE(i){return Eg(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function vm(i){return n=ut(i).localStore,ut(ut(n).persistence).Li();var n}function fy(i,e,n,s){return Em.apply(this,arguments)}function Em(){return Em=(0,se.Z)(function*(i,e,n,s){const u=ut(i);if(u.Fa)return void Me("SyncEngine","Ignoring unexpected query state notification.");const l=u.pa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const p=yield $f(u.localStore,Ig(l[0])),T=d.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ei.EMPTY_BYTE_STRING);yield Ru(u,p,T);break}case"rejected":yield fc(u.localStore,e,!0),mc(u,e,s);break;default:It()}}),Em.apply(this,arguments)}function sE(i,e,n){return Im.apply(this,arguments)}function Im(){return Im=(0,se.Z)(function*(i,e,n){const s=Ip(i);if(s.Fa){for(const u of e){if(s.pa.has(u)){Me("SyncEngine","Adding an already active target "+u);continue}const l=yield sl(s.localStore,u),p=yield hc(s.localStore,l);yield dp(s,iE(l),p.targetId,!1,p.resumeToken),tm(s.remoteStore,p)}for(const u of n)s.pa.has(u)&&(yield fc(s.localStore,u,!1).then(()=>{cl(s.remoteStore,u),mc(s,u)}).catch(Re))}}),Im.apply(this,arguments)}function Ip(i){const e=ut(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cy.bind(null,e),e.fa.u_=ny.bind(null,e.eventManager),e.fa.xa=lm.bind(null,e.eventManager),e}function wm(i){const e=ut(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Md.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jv.bind(null,e),e}class fl{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,se.Z)(function*(){n.serializer=Yf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return B_(this.persistence,new Bv,e.initialUser,this.serializer)}createPersistence(e){return new Gg(Dh.Hr,this.serializer)}createSharedClientState(e){return new W_}terminate(){var e=this;return(0,se.Z)(function*(){var n,s;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tm extends fl{constructor(e,n,s){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield n().call(s,e),yield s.Na.initialize(s,e),yield wm(s.Na.syncEngine),yield oo(s.Na.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return B_(this.persistence,new Bv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Fg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const s=new Nl(n,this.persistence);return new ef(e.asyncQueue,s)}createPersistence(e){const n=Uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new Ch(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,K_(),bh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new W_}}class py extends Tm{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,s=this;return(0,se.Z)(function*(){yield n().call(s,e);const u=s.Na.syncEngine;s.sharedClientState instanceof G_&&(s.sharedClientState.syncEngine={Zs:dy.bind(null,u),Xs:fy.bind(null,u),eo:sE.bind(null,u),Li:vm.bind(null,u),Ys:nE.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var l=(0,se.Z)(function*(p){yield function rE(i,e){return Ss.apply(this,arguments)}(s.Na.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=K_();if(!G_.D(n))throw new Ye(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G_(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class Od{initialize(e,n){var s=this;return(0,se.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(n),s.remoteStore=s.createRemoteStore(n),s.eventManager=s.createEventManager(n),s.syncEngine=s.createSyncEngine(n,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>dn(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=Xv.bind(null,s.syncEngine),yield op(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bu}createDatastore(e){const n=Yf(e.databaseInfo.databaseId),s=new q_(e.databaseInfo);return new Ph(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return s=this.localStore,u=this.datastore,l=e.asyncQueue,p=n=>dn(this.syncEngine,n,0),T=qf.D()?new qf:new Wf,new Wv(s,u,l,p,T);var s,u,l,p,T}createSyncEngine(e,n){return function(u,l,p,T,S,x,L){const G=new GI(u,l,p,T,S,x);return L&&(G.Fa=!0),G}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,se.Z)(function*(){var n,s;yield(s=(0,se.Z)(function*(l){const p=ut(l);Me("RemoteStore","RemoteStore shutting down."),p.v_.add(5),yield ul(p),p.M_.shutdown(),p.x_.set("Unknown")}),function u(l){return s.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function gy(i,e=10240){let n=0;return{read:()=>(0,se.Z)(function*(){if(n<i.byteLength){const s={value:i.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ao{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Dm{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Ur,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(s=>{s&&s.ea()?this.metadata.resolve(s.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.X_)}`))},s=>this.metadata.reject(s))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,se.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,se.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,se.Z)(function*(){const n=yield e.Ka();if(null===n)return null;const s=e.qa.decode(n),u=Number(s);isNaN(u)&&e.$a(`length string (${s}) is not valid number`);const l=yield e.Ua(u);return new ry(JSON.parse(l),n.length+u)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,se.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),s})()}Ua(e){var n=this;return(0,se.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const s=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),s})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,se.Z)(function*(){const n=yield e.ka.read();if(!n.done){const s=new Uint8Array(e.buffer.length+n.value.length);s.set(e.buffer),s.set(n.value,e.buffer.length),e.buffer=s}return n.done})()}}class uE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,se.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Ye(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const s=yield(u=(0,se.Z)(function*(p,T){const S=ut(p),x={documents:T.map(be=>Na(S.serializer,be))},L=yield S.vo("BatchGetDocuments",S.serializer.databaseId,_n.emptyPath(),x,T.length),G=new Map;L.forEach(be=>{const rt=function Tf(i,e){return"found"in e?function(s,u){Mt(!!u.found);const l=Vs(s,u.found.name),p=Wr(u.found.updateTime),T=u.found.createTime?Wr(u.found.createTime):yt.min(),S=new or({mapValue:{fields:u.found.fields}});return _r.newFoundDocument(l,p,T,S)}(i,e):"missing"in e?function(s,u){Mt(!!u.missing),Mt(!!u.readTime);const l=Vs(s,u.missing),p=Wr(u.readTime);return _r.newNoDocument(l,p)}(i,e):It()}(S.serializer,be);G.set(rt.key.toString(),rt)});const oe=[];return T.forEach(be=>{const rt=G.get(be.toString());Mt(!!rt),oe.push(rt)}),oe}),function l(p,T){return u.apply(this,arguments)})(n.datastore,e);var u;return s.forEach(u=>n.recordVersion(u)),s})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new wu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var s;e.mutations.forEach(s=>{n.delete(s.key.toString())}),n.forEach((s,u)=>{const l=ft.fromPath(u);e.mutations.push(new mh(l,e.precondition(l)))}),yield(s=(0,se.Z)(function*(l,p){const T=ut(l),S={writes:p.map(x=>qc(T.serializer,x))};yield T.So("Commit",T.serializer.databaseId,_n.emptyPath(),S)}),function u(l,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw It();n=yt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Ye(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(yt.min())?bn.exists(!1):bn.updateTime(n):bn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(yt.min()))throw new Ye(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bn.updateTime(n)}return bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class my{constructor(e,n,s,u,l){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=u,this.deferred=l,this.za=s.maxAttempts,this.jo=new em(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,se.Z)(function*(){const n=new uE(e.datastore),s=e.Ja(n);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.Ya(l)}))}).catch(u=>{e.Ya(u)})}))}Ja(e){try{const n=this.updateFunction(e);return!ou(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!rd(n)}return!1}}class cE{constructor(e,n,s,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=u,this.user=Mr.UNAUTHENTICATED,this.clientId=ru.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,se.Z)(function*(T){Me("FirestoreClient","Received user=",T.uid),yield l.authCredentialListener(T),l.user=T});return function(T){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Me("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(s){const u=Sd(s,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Uh(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,se.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,se.Z)(function*(l){s.isEqual(l)||(yield $v(e.localStore,l),s=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),wp.apply(this,arguments)}function kd(i,e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,se.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Tp(i);Me("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>ey(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,u)=>ey(e.remoteStore,u)),i._onlineComponents=e}),Bh.apply(this,arguments)}function lE(i){return"FirebaseError"===i.name?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Tp(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,se.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Uh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!lE(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),yield Uh(i,new fl)}}else Me("FirestoreClient","Using default OfflineComponentProvider"),yield Uh(i,new fl);return i._offlineComponents}),Dp.apply(this,arguments)}function jh(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,se.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Me("FirestoreClient","Using user provided OnlineComponentProvider"),yield kd(i,i._uninitializedComponentsProvider._online)):(Me("FirestoreClient","Using default OnlineComponentProvider"),yield kd(i,new Od))),i._onlineComponents}),Cp.apply(this,arguments)}function Ap(i){return Tp(i).then(e=>e.persistence)}function Us(i){return Tp(i).then(e=>e.localStore)}function _y(i){return jh(i).then(e=>e.remoteStore)}function Cm(i){return jh(i).then(e=>e.syncEngine)}function Ld(i){return bp.apply(this,arguments)}function bp(){return bp=(0,se.Z)(function*(i){const e=yield jh(i),n=e.eventManager;return n.onListen=WI.bind(null,e.syncEngine),n.onUnlisten=hp.bind(null,e.syncEngine),n}),bp.apply(this,arguments)}function Am(i,e,n={}){const s=new Ur;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(l,p,T,S,x){const L=new ao({next:oe=>{p.enqueueAndForget(()=>cm(l,G));const be=oe.docs.has(T);!be&&oe.fromCache?x.reject(new Ye(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):be&&oe.fromCache&&S&&"server"===S.source?x.reject(new Ye(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(oe)},error:oe=>x.reject(oe)}),G=new Pd(As(T.path),L,{includeMetadataChanges:!0,Z_:!0});return gc(l,G)}(yield Ld(i),i.asyncQueue,e,n,s)})),s.promise}function hE(i,e,n={}){const s=new Ur;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(l,p,T,S,x){const L=new ao({next:oe=>{p.enqueueAndForget(()=>cm(l,G)),oe.fromCache&&"server"===S.source?x.reject(new Ye(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(oe)},error:oe=>x.reject(oe)}),G=new Pd(T,L,{includeMetadataChanges:!0,Z_:!0});return gc(l,G)}(yield Ld(i),i.asyncQueue,e,n,s)})),s.promise}function Sm(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Fd=new Map;function bm(i,e,n){if(!n)throw new Ye(ke.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Rm(i,e,n,s){if(!0===e&&!0===s)throw new Ye(ke.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pm(i){if(!ft.isDocumentKey(i))throw new Ye(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Iy(i){if(ft.isDocumentKey(i))throw new Ye(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Mp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(s=i).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof i?"a function":It()}function wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ye(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mp(i);throw new Ye(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function wy(i,e){if(e<=0)throw new Ye(ke.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Ty{constructor(e){var n,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Sm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,s,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ye(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new Xh;switch(s.type){case"firstParty":return new nu(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ye(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Fd.get(n);s&&(Me("ComponentProvider","Removing Datastore"),Fd.delete(n),s.terminate())}(this),Promise.resolve()}}class Ji{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Nr{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class Va extends Ji{constructor(e,n,s){super(e,n,As(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new ft(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function Cy(i,e,...n){if(i=(0,Dt.m9)(i),bm("collection","path",e),i instanceof Hh){const s=_n.fromString(e,...n);return Iy(s),new Va(i,null,s)}{if(!(i instanceof Nr||i instanceof Va))throw new Ye(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(_n.fromString(e,...n));return Iy(s),new Va(i.firestore,null,s)}}function Vd(i,e,...n){if(i=(0,Dt.m9)(i),1===arguments.length&&(e=ru.newId()),bm("doc","path",e),i instanceof Hh){const s=_n.fromString(e,...n);return Pm(s),new Nr(i,null,new ft(s))}{if(!(i instanceof Nr||i instanceof Va))throw new Ye(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(_n.fromString(e,...n));return Pm(s),new Nr(i.firestore,i instanceof Va?i.converter:null,new ft(s))}}function Sy(i,e){return i=(0,Dt.m9)(i),e=(0,Dt.m9)(e),(i instanceof Nr||i instanceof Va)&&(e instanceof Nr||e instanceof Va)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ud(i,e){return i=(0,Dt.m9)(i),e=(0,Dt.m9)(e),i instanceof Ji&&e instanceof Ji&&i.firestore===e.firestore&&pu(i._query,e._query)&&i.converter===e.converter}class mE{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new em(this,"async_queue_retry"),this._u=()=>{const n=bh();n&&Me("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=bh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=bh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Ur;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,se.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!ss(n))throw n;Me("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{throw this.ru=s,this.iu=!1,xr("INTERNAL UNHANDLED ERROR: ",function(p){let T=p.message||"";return p.stack&&(T=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),T}(s)),s}).then(s=>(this.iu=!1,s))));return this.Xa=n,n}enqueueAfterDelay(e,n,s){this.au(),this.ou.indexOf(e)>-1&&(n=0);const u=up.createAndSchedule(this,e,n,s,l=>this.lu(l));return this.nu.push(u),u}au(){this.ru&&It()}verifyOperationInProgress(){}hu(){var e=this;return(0,se.Z)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function Mm(i){return function(n,s){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(i)}class _E{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pr extends Hh{constructor(e,n,s,u){super(e,n,s,u),this.type="firestore",this._queue=new mE,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xm(this),this._firestoreClient.terminate()}}function qr(i){return i._firestoreClient||xm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function xm(i){var e,n,s;const u=i._freezeSettings(),l=(S=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new sh(i._databaseId,S,i._persistenceKey,(L=u).host,L.ssl,L.experimentalForceLongPolling,L.experimentalAutoDetectLongPolling,Sm(L.experimentalLongPollingOptions),L.useFetchStreams));var S,L;i._firestoreClient=new cE(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(s=u.localCache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nm(i,e,n){const s=new Ur;return i.asyncQueue.enqueue((0,se.Z)(function*(){try{yield Uh(i,n),yield kd(i,e),s.resolve()}catch(u){const l=u;if(!lE(l))throw l;Ii("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function na(i){if(i._initialized||i._terminated)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hs(ei.fromBase64String(e))}catch(n){throw new Ye(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hs(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ye(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mu{constructor(e){this._methodName=e}}class xu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const Bd=/^__.*__$/;class jd{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return null!==this.fieldMask?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(e,this.data,n,this.fieldTransforms)}}class pl{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new So(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gl(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class Nu{constructor(e,n,s,u,l,p){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===l&&this.Eu(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Nu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:s,Vu:!1});return u.mu(e),u}fu(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:s,Vu:!1});return u.Eu(),u}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Up(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(gl(this.du)&&Bd.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class $d{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Yf(e)}Su(e,n,s,u=!1){return new Nu({du:e,methodName:n,wu:s,path:En.emptyPath(),Vu:!1,yu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ro(i){const e=i._freezeSettings(),n=Yf(i._databaseId);return new $d(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ou(i,e,n,s,u,l={}){const p=i.Su(l.merge||l.mergeFields?2:0,e,n,u);Py("Data must be an object, but it was:",p,s);const T=Ry(s,p);let S,x;if(l.merge)S=new Pi(p.fieldMask),x=p.fieldTransforms;else if(l.mergeFields){const L=[];for(const G of l.mergeFields){const oe=zh(e,G,n);if(!p.contains(oe))throw new Ye(ke.INVALID_ARGUMENT,`Field '${oe}' is specified in your field mask but missing from your input data.`);DE(L,oe)||L.push(oe)}S=new Pi(L),x=p.fieldTransforms.filter(G=>S.covers(G.field))}else S=null,x=p.fieldTransforms;return new jd(new or(T),S,x)}class Hd extends Mu{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function km(i,e,n){return new Nu({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Np extends Mu{_toFieldTransform(e){return new Eu(e.path,new _u)}isEqual(e){return e instanceof Np}}class Op extends Mu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=km(this,e,!0),s=this.bu.map(l=>ku(l,n)),u=new yu(s);return new Eu(e.path,u)}isEqual(e){return e instanceof Op&&(0,Dt.vZ)(this.bu,e.bu)}}class kp extends Mu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=km(this,e,!0),s=this.bu.map(l=>ku(l,n)),u=new Pa(s);return new Eu(e.path,u)}isEqual(e){return e instanceof kp&&(0,Dt.vZ)(this.bu,e.bu)}}class Lp extends Mu{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new vu(e.serializer,fh(e.serializer,this.Du));return new Eu(e.path,n)}isEqual(e){return e instanceof Lp&&this.Du===e.Du}}function Fp(i,e,n,s){const u=i.Su(1,e,n);Py("Data must be an object, but it was:",u,s);const l=[],p=or.empty();Cs(s,(S,x)=>{const L=Fm(e,S,n);x=(0,Dt.m9)(x);const G=u.fu(L);if(x instanceof Hd)l.push(L);else{const oe=ku(x,G);null!=oe&&(l.push(L),p.set(L,oe))}});const T=new Pi(l);return new pl(p,T,u.fieldTransforms)}function Vp(i,e,n,s,u,l){const p=i.Su(1,e,n),T=[zh(e,s,n)],S=[u];if(l.length%2!=0)throw new Ye(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let oe=0;oe<l.length;oe+=2)T.push(zh(e,l[oe])),S.push(l[oe+1]);const x=[],L=or.empty();for(let oe=T.length-1;oe>=0;--oe)if(!DE(x,T[oe])){const be=T[oe];let rt=S[oe];rt=(0,Dt.m9)(rt);const gt=p.fu(be);if(rt instanceof Hd)x.push(be);else{const ct=ku(rt,gt);null!=ct&&(x.push(be),L.set(be,ct))}}const G=new Pi(x);return new pl(L,G,p.fieldTransforms)}function Lm(i,e,n,s=!1){return ku(n,i.Su(s?4:3,e))}function ku(i,e){if(wE(i=(0,Dt.m9)(i)))return Py("Unsupported field value:",e,i),Ry(i,e);if(i instanceof Mu)return function(s,u){if(!gl(u.du))throw u.pu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.pu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(s,u){const l=[];let p=0;for(const T of s){let S=ku(T,u.gu(p));null==S&&(S={nullValue:"NULL_VALUE"}),l.push(S),p++}return{arrayValue:{values:l}}}(i,e)}return function(s,u){if(null===(s=(0,Dt.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return fh(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const l=ir.fromDate(s);return{timestampValue:Ma(u.serializer,l)}}if(s instanceof ir){const l=new ir(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ma(u.serializer,l)}}if(s instanceof xu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof hs)return{bytesValue:Gc(u.serializer,s._byteString)};if(s instanceof Nr){const l=u.databaseId,p=s.firestore._databaseId;if(!p.isEqual(l))throw u.pu(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:xa(s.firestore._databaseId||u.databaseId,s._key.path)}}throw u.pu(`Unsupported field value: ${Mp(s)}`)}(i,e)}function Ry(i,e){const n={};return Fl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(i,(s,u)=>{const l=ku(u,e.Ru(s));null!=l&&(n[s]=l)}),{mapValue:{fields:n}}}function wE(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ir||i instanceof xu||i instanceof hs||i instanceof Nr||i instanceof Mu)}function Py(i,e,n){if(!wE(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=Mp(n);throw e.pu("an object"===s?i+" a custom object":i+" "+s)}var u}function zh(i,e,n){if((e=(0,Dt.m9)(e))instanceof bo)return e._internalPath;if("string"==typeof e)return Fm(i,e);throw Up("Field path arguments must be of type string or ",i,!1,void 0,n)}const TE=new RegExp("[~\\*/\\[\\]]");function Fm(i,e,n){if(e.search(TE)>=0)throw Up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new bo(...e.split("."))._internalPath}catch{throw Up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Up(i,e,n,s,u){const l=s&&!s.isEmpty(),p=void 0!==u;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let S="";return(l||p)&&(S+=" (found",l&&(S+=` in field ${s}`),p&&(S+=` in document ${u}`),S+=")"),new Ye(ke.INVALID_ARGUMENT,T+i+S)}function DE(i,e){return i.some(n=>n.isEqual(e))}class Gh{constructor(e,n,s,u,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new CE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class CE extends Gh{data(){return super.data()}}function Bp(i,e){return"string"==typeof e?Fm(i,e):e instanceof bo?e._internalPath:e._delegate._internalPath}function jp(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Ye(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ml{}class _l extends ml{}function ia(i,e,...n){let s=[];e instanceof ml&&s.push(e),s=s.concat(n),function(l){const p=l.filter(S=>S instanceof yl).length,T=l.filter(S=>S instanceof zd).length;if(p>1||p>0&&T>0)throw new Ye(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class zd extends _l{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new zd(e,n,s)}_apply(e){const n=this._parse(e);return Ny(e._query,n),new Ji(e.firestore,e.converter,ic(e._query,n))}_parse(e){const n=Ro(e.firestore);return function(l,p,T,S,x,L,G){let oe;if(x.isKeyField()){if("array-contains"===L||"array-contains-any"===L)throw new Ye(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${L}' queries on documentId().`);if("in"===L||"not-in"===L){xy(G,L);const be=[];for(const rt of G)be.push(jm(S,l,rt));oe={arrayValue:{values:be}}}else oe=jm(S,l,G)}else"in"!==L&&"not-in"!==L&&"array-contains-any"!==L||xy(G,L),oe=Lm(T,"where",G,"in"===L||"not-in"===L);return Xt.create(x,L,oe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class yl extends ml{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yl(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===n.length?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let p=u;const T=l.getFlattenedFilters();for(const S of T)Ny(p,S),p=ic(p,S)}(e._query,n),new Ji(e.firestore,e.converter,ic(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Vm extends _l{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(u,l,p){if(null!==u.startAt)throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(l,p)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(u,l){const p=u.explicitOrderBy.concat([l]);return new Aa(u.path,u.collectionGroup,p,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Hp extends _l{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new Hp(e,n,s)}_apply(e){return new Ji(e.firestore,e.converter,Vc(e._query,this._limit,this._limitType))}}class vl extends _l{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new vl(e,n,s)}_apply(e){const n=My(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(l=n,new Aa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class Gp extends _l{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new Gp(e,n,s)}_apply(e){const n=My(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(l=n,new Aa((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function My(i,e,n,s){if(n[0]=(0,Dt.m9)(n[0]),n[0]instanceof Gh)return function(l,p,T,S,x){if(!S)throw new Ye(ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const L=[];for(const G of Sa(l))if(G.field.isKeyField())L.push(Yu(p,S.key));else{const oe=S.data.field(G.field);if(cu(oe))throw new Ye(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+G.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===oe){const be=G.field.canonicalString();throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${be}' (used as the orderBy) does not exist.`)}L.push(oe)}return new Xs(L,x)}(i._query,i.firestore._databaseId,e,n[0]._document,s);{const u=Ro(i.firestore);return function(p,T,S,x,L,G){const oe=p.explicitOrderBy;if(L.length>oe.length)throw new Ye(ke.INVALID_ARGUMENT,`Too many arguments provided to ${x}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const be=[];for(let rt=0;rt<L.length;rt++){const gt=L[rt];if(oe[rt].field.isKeyField()){if("string"!=typeof gt)throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${x}(), but got a ${typeof gt}`);if(!mf(p)&&-1!==gt.indexOf("/"))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${x}() must be a plain document ID, but '${gt}' contains a slash.`);const ct=p.path.child(_n.fromString(gt));if(!ft.isDocumentKey(ct))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${x}() must result in a valid document path, but '${ct}' is not because it contains an odd number of segments.`);const Ft=new ft(ct);be.push(Yu(T,Ft))}else{const ct=Lm(S,x,gt);be.push(ct)}}return new Xs(be,G)}(i._query,i.firestore._databaseId,u,e,n,s)}}function jm(i,e,n){if("string"==typeof(n=(0,Dt.m9)(n))){if(""===n)throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mf(e)&&-1!==n.indexOf("/"))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(_n.fromString(n));if(!ft.isDocumentKey(s))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Yu(i,new ft(s))}if(n instanceof Nr)return Yu(i,n._key);throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mp(n)}.`)}function xy(i,e){if(!Array.isArray(i)||0===i.length)throw new Ye(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ny(i,e){const n=function(u,l){for(const p of u)for(const T of p.getFlattenedFilters())if(l.indexOf(T.op)>=0)return T.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ye(ke.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Wp{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw It()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Cs(e,(u,l)=>{s[u]=this.convertValue(l,n)}),s}convertGeoPoint(e){return new xu($r(e.latitude),$r(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=lu(e);return null==s?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const n=os(e);return new ir(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=_n.fromString(e);Mt(T_(s));const u=new Zo(s.get(1),s.get(3)),l=new ft(s.popFirst(5));return u.isEqual(n)||xr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function qh(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class RE extends Wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,n)}}class El{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends Gh{constructor(e,n,s,u,l,p){super(e,n,s,u,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _c extends Po{data(e={}){return super.data(e)}}class Ua{constructor(e,n,s,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new El(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new _c(this._firestore,this._userDataWriter,s.key,s,new El(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let p=0;return u._snapshot.docChanges.map(T=>({type:"added",doc:new _c(u._firestore,u._userDataWriter,T.doc.key,T.doc,new El(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:p++}))}{let p=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(T=>l||3!==T.type).map(T=>{const S=new _c(u._firestore,u._userDataWriter,T.doc.key,T.doc,new El(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);let x=-1,L=-1;return 0!==T.type&&(x=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),1!==T.type&&(p=p.add(T.doc),L=p.indexOf(T.doc.key)),{type:Ly(T.type),doc:S,oldIndex:x,newIndex:L}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ly(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function Fy(i,e){return i instanceof Po&&e instanceof Po?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ua&&e instanceof Ua&&i._firestore===e._firestore&&Ud(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class yc extends Wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,n)}}function By(i,e,n){i=wn(i,Nr);const s=wn(i.firestore,Pr),u=qh(i.converter,e,n);return Gd(s,[Ou(Ro(s),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,bn.none())])}function Gm(i,e,n,...s){i=wn(i,Nr);const u=wn(i.firestore,Pr),l=Ro(u);let p;return p="string"==typeof(e=(0,Dt.m9)(e))||e instanceof bo?Vp(l,"updateDoc",i._key,e,n,s):Fp(l,"updateDoc",i._key,e),Gd(u,[p.toMutation(i._key,bn.exists(!0))])}function qp(i,...e){var n,s,u;i=(0,Dt.m9)(i);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Mm(e[p])||(l=e[p],p++);const T={includeMetadataChanges:l.includeMetadataChanges};if(Mm(e[p])){const G=e[p];e[p]=null===(n=G.next)||void 0===n?void 0:n.bind(G),e[p+1]=null===(s=G.error)||void 0===s?void 0:s.bind(G),e[p+2]=null===(u=G.complete)||void 0===u?void 0:u.bind(G)}let S,x,L;if(i instanceof Nr)x=wn(i.firestore,Pr),L=As(i._key.path),S={next:G=>{e[p]&&e[p](Kp(x,i,G))},error:e[p+1],complete:e[p+2]};else{const G=wn(i,Ji);x=wn(G.firestore,Pr),L=G._query;const oe=new yc(x);S={next:be=>{e[p]&&e[p](new Ua(x,oe,G,be))},error:e[p+1],complete:e[p+2]},jp(i._query)}return function(oe,be,rt,gt){const ct=new ao(gt),Ft=new Pd(be,ct,rt);return oe.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return gc(yield Ld(oe),Ft)})),()=>{ct.La(),oe.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return cm(yield Ld(oe),Ft)}))}}(qr(x),L,T,S)}function Gd(i,e){return function(s,u){const l=new Ur;return s.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function uy(i,e,n){return fm.apply(this,arguments)}(yield Cm(s),u,l)})),l.promise}(qr(i),e)}function Kp(i,e,n){const s=n.docs.get(e._key),u=new yc(i);return new Po(i,u,e._key,s,new El(n.hasPendingWrites,n.fromCache),e.converter)}const Qy={maxAttempts:5};class qm{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,n,s){this._verifyNotCommitted();const u=sa(e,this._firestore),l=qh(u.converter,n,s),p=Ou(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,s);return this._mutations.push(p.toMutation(u._key,bn.none())),this}update(e,n,s,...u){this._verifyNotCommitted();const l=sa(e,this._firestore);let p;return p="string"==typeof(n=(0,Dt.m9)(n))||n instanceof bo?Vp(this._dataReader,"WriteBatch.update",l._key,n,s,u):Fp(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(p.toMutation(l._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sa(e,this._firestore);return this._mutations=this._mutations.concat(new wu(n._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sa(i,e){if((i=(0,Dt.m9)(i)).firestore!==e)throw new Ye(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vc extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=Ro(n)}get(n){const s=sa(n,this._firestore),u=new RE(this._firestore);return this._transaction.lookup([s._key]).then(l=>{if(!l||1!==l.length)return It();const p=l[0];if(p.isFoundDocument())return new Gh(this._firestore,u,p.key,p,s.converter);if(p.isNoDocument())return new Gh(this._firestore,u,s._key,null,s.converter);throw It()})}set(n,s,u){const l=sa(n,this._firestore),p=qh(l.converter,s,u),T=Ou(this._dataReader,"Transaction.set",l._key,p,null!==l.converter,u);return this._transaction.set(l._key,T),this}update(n,s,u,...l){const p=sa(n,this._firestore);let T;return T="string"==typeof(s=(0,Dt.m9)(s))||s instanceof bo?Vp(this._dataReader,"Transaction.update",p._key,s,u,l):Fp(this._dataReader,"Transaction.update",p._key,s),this._transaction.update(p._key,T),this}delete(n){const s=sa(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=sa(e,this._firestore),s=new yc(this._firestore);return super.get(e).then(u=>new Po(this._firestore,s,n._key,u._document,new El(!1,!1),n.converter))}}function Ec(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function tv(){if(typeof Uint8Array>"u")throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function nv(){if(!function ih(){return typeof atob<"u"}())throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){va=Te.SDK_VERSION,(0,Te._registerComponent)(new xt.wA("firestore",(s,{instanceIdentifier:u,options:l})=>{const p=s.getProvider("app").getImmediate(),T=new Pr(new Sn(s.getProvider("auth-internal")),new Br(s.getProvider("app-check-internal")),function(x,L){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Ye(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(x.options.projectId,L)}(p,u),p);return l=Object.assign({useFetchStreams:n},l),T._setSettings(l),T},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Zs,"4.4.2",e),(0,Te.registerVersion)(Zs,"4.4.2","esm2017")}();class Wd{constructor(e){this._delegate=e}static fromBase64String(e){return nv(),new Wd(hs.fromBase64String(e))}static fromUint8Array(e){return tv(),new Wd(hs.fromUint8Array(e))}toBase64(){return nv(),this._delegate.toBase64()}toUint8Array(){return tv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ym(i){return function rv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const s of e)if(s in n&&"function"==typeof n[s])return!0;return!1}(i,["next","error","complete"])}class o0{enableIndexedDbPersistence(e,n){return function vE(i,e){na(i=wn(i,Pr));const n=qr(i);if(n._uninitializedComponentsProvider)throw new Ye(ke.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),u=new Od;return Nm(n,u,new Tm(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function ZI(i){na(i=wn(i,Pr));const e=qr(i);if(e._uninitializedComponentsProvider)throw new Ye(ke.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),s=new Od;return Nm(e,s,new py(s,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function by(i){if(i._initialized&&!i._terminated)throw new Ye(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return i._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(n=(0,se.Z)(function*(u){if(!zt.D())return Promise.resolve();const l=u+"main";yield zt.delete(l)}),function s(u){return n.apply(this,arguments)})(Uf(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Jm{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,s={}){!function Dy(i,e,n,s={}){var u;const l=(i=wn(i,Hh))._getSettings(),p=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==p&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:p,ssl:!1})),s.mockUserToken){let T,S;if("string"==typeof s.mockUserToken)T=s.mockUserToken,S=Mr.MOCK_USER;else{T=(0,Dt.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new Ye(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Mr(x)}i._authCredentials=new Ke(new tu(T,S))}}(this._delegate,e,n,s)}enableNetwork(){return function xp(i){return function dE(i){return i.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield Ap(i),n=yield _y(i);return e.setNetworkEnabled(!0),function(u){const l=ut(u);return l.v_.delete(0),Mh(l)}(n)}))}(qr(i=wn(i,Pr)))}(this._delegate)}disableNetwork(){return function EE(i){return function Rp(i){return i.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield Ap(i),n=yield _y(i);return e.setNetworkEnabled(!1),(s=(0,se.Z)(function*(l){const p=ut(l);p.v_.add(0),yield ul(p),p.x_.set("Offline")}),function u(l){return s.apply(this,arguments)})(n);var s}))}(qr(i=wn(i,Pr)))}(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Rm("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QI(i){return function(n){const s=new Ur;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function Nd(i,e){return Lh.apply(this,arguments)}(yield Cm(n),s)})),s.promise}(qr(i=wn(i,Pr)))}(this._delegate)}onSnapshotsInSync(e){return function $y(i,e){return function fE(i,e){const n=new ao(e);return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return u=yield Ld(i),l=n,ut(u).K_.add(l),void l.next();var u,l})),()=>{n.La(),i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return u=yield Ld(i),l=n,void ut(u).K_.delete(l);var u,l}))}}(qr(i=wn(i,Pr)),Mm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ja(this,Cy(this._delegate,e))}catch(n){throw Or(n,"collection()","Firestore.collection()")}}doc(e){try{return new ti(this,Vd(this._delegate,e))}catch(n){throw Or(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function Ay(i,e){if(i=wn(i,Hh),bm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(i,null,(s=e,new Aa(_n.emptyPath(),s)));var s}(this._delegate,e))}catch(n){throw Or(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BE(i,e,n){i=wn(i,Pr);const s=Object.assign(Object.assign({},Qy),n);return function(l){if(l.maxAttempts<1)throw new Ye(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,p,T){const S=new Ur;return l.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const x=yield function Sp(i){return jh(i).then(e=>e.datastore)}(l);new my(l.asyncQueue,x,T,p,S).ja()})),S.promise}(qr(i),u=>e(new vc(i,u)),s)}(this._delegate,n=>e(new iv(this,n)))}batch(){return qr(this._delegate),new sv(new qm(this._delegate,e=>Gd(this._delegate,e)))}loadBundle(e){return function Om(i,e){const n=qr(i=wn(i,Pr)),s=new _E;return function yy(i,e,n,s){const u=function(p,T){let S;return S="string"==typeof p?ea().encode(p):p,L=function(L,G){if(L instanceof Uint8Array)return gy(L,G);if(L instanceof ArrayBuffer)return gy(new Uint8Array(L),G);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Dm(L,T);var L}(n,Yf(e));i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function oE(i,e,n){const s=ut(i);var u;(u=(0,se.Z)(function*(p,T,S){try{const x=yield T.getMetadata();if(yield function(rt,gt){const ct=ut(rt),Ft=Wr(gt.createTime);return ct.persistence.runTransaction("hasNewerBundle","readonly",un=>ct.$r.getBundleMetadata(un,gt.id)).then(un=>!!un&&un.createTime.compareTo(Ft)>=0)}(p.localStore,x))return yield T.close(),S._completeWith({taskState:"Success",documentsLoaded:(rt=x).totalDocuments,bytesLoaded:rt.totalBytes,totalDocuments:rt.totalDocuments,totalBytes:rt.totalBytes}),Promise.resolve(new Set);S._updateProgress(iy(x));const L=new Qv(x,p.localStore,T.serializer);let G=yield T.Oa();for(;G;){const be=yield L.na(G);be&&S._updateProgress(be),G=yield T.Oa()}const oe=yield L.complete();return yield Ru(p,oe.sa,void 0),yield function(rt,gt){const ct=ut(rt);return ct.persistence.runTransaction("Save bundle","readwrite",Ft=>ct.$r.saveBundleMetadata(Ft,gt))}(p.localStore,x),S._completeWith(oe.progress),Promise.resolve(oe.ia)}catch(x){return Ii("SyncEngine",`Loading bundle failed with ${x}`),S._failWith(x),Promise.resolve(new Set)}var rt}),function l(p,T,S){return u.apply(this,arguments)})(s,e,n).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield Cm(i),u,s)}))}(n,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function IE(i,e){return function vy(i,e){return i.asyncQueue.enqueue((0,se.Z)(function*(){return function(s,u){const l=ut(s);return l.persistence.runTransaction("Get named query","readonly",p=>l.$r.getNamedQuery(p,u))}(yield Us(i),e)}))}(qr(i=wn(i,Pr)),e).then(n=>n?new Ji(i,null,n.query):null)}(this._delegate,e).then(n=>n?new bs(this,n):null)}}class qd extends Wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wd(new hs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ti.forKey(n,this.firestore,null)}}class iv{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qd(e)}get(e){const n=wl(e);return this._delegate.get(n).then(s=>new Kh(this._firestore,new Po(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const u=wl(e);return s?(Ec("Transaction.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=wl(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=wl(e);return this._delegate.delete(n),this}}class sv{constructor(e){this._delegate=e}set(e,n,s){const u=wl(e);return s?(Ec("WriteBatch.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=wl(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=wl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class fs{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new _c(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zh(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=fs.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let l=u.get(n);return l||(l=new fs(e,new qd(e),n),u.set(n,l)),l}}fs.INSTANCES=new WeakMap;class ti{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qd(e)}static forPath(e,n,s){if(e.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ti(n,new Nr(n._delegate,s,new ft(e)))}static forKey(e,n,s){return new ti(n,new Nr(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new ja(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ja(this.firestore,Cy(this._delegate,e))}catch(n){throw Or(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Nr&&Sy(this._delegate,e)}set(e,n){n=Ec("DocumentReference.set",n);try{return n?By(this._delegate,e,n):By(this._delegate,e)}catch(s){throw Or(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return 1===arguments.length?Gm(this._delegate,e):Gm(this._delegate,e,n,...s)}catch(u){throw Or(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wm(i){return Gd(wn(i.firestore,Pr),[new wu(i._key,bn.none())])}(this._delegate)}onSnapshot(...e){const n=Xm(e),s=e_(e,u=>new Kh(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return qp(this._delegate,n,s)}get(e){let n;return n="cache"===e?.source?function Hm(i){i=wn(i,Nr);const e=wn(i.firestore,Pr),n=qr(e),s=new yc(e);return function $h(i,e){const n=new Ur;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(l,p,T){try{const S=yield function(L,G){const oe=ut(L);return oe.persistence.runTransaction("read document","readonly",be=>oe.localDocuments.getDocument(be,G))}(l,p);S.isFoundDocument()?T.resolve(S):S.isNoDocument()?T.resolve(null):T.reject(new Ye(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const x=Sd(S,`Failed to get document '${p} from cache`);T.reject(x)}}),function u(l,p,T){return s.apply(this,arguments)})(yield Us(i),e,n);var s})),n.promise}(n,i._key).then(u=>new Po(e,s,i._key,u,new El(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function zm(i){i=wn(i,Nr);const e=wn(i.firestore,Pr);return Am(qr(e),i._key,{source:"server"}).then(n=>Kp(e,i,n))}(this._delegate):function ME(i){i=wn(i,Nr);const e=wn(i.firestore,Pr);return Am(qr(e),i._key).then(n=>Kp(e,i,n))}(this._delegate),n.then(s=>new Kh(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ti(this.firestore,this._delegate.withConverter(e?fs.getInstance(this.firestore,e):null))}}function Or(i,e,n){return i.message=i.message.replace(e,n),i}function Xm(i){for(const e of i)if("object"==typeof e&&!Ym(e))return e;return{}}function e_(i,e){var n,s;let u;return u=Ym(i[0])?i[0]:Ym(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Kh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ti(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Fy(this._delegate,e._delegate)}}class Zh extends Kh{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Rl(i,e){i||It()}(void 0!==n),n}}class bs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qd(e)}where(e,n,s){try{return new bs(this.firestore,ia(this._delegate,function Wh(i,e,n){const s=e,u=Bp("where",i);return zd._create(u,s,n)}(e,n,s)))}catch(u){throw Or(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new bs(this.firestore,ia(this._delegate,function AE(i,e="asc"){const n=e,s=Bp("orderBy",i);return Vm._create(s,n)}(e,n)))}catch(s){throw Or(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,ia(this._delegate,function SE(i){return wy("limit",i),Hp._create("limit",i,"F")}(e)))}catch(n){throw Or(n,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,ia(this._delegate,function Um(i){return wy("limitToLast",i),Hp._create("limitToLast",i,"L")}(e)))}catch(n){throw Or(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,ia(this._delegate,function zp(...i){return vl._create("startAt",i,!0)}(...e)))}catch(n){throw Or(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,ia(this._delegate,function XI(...i){return vl._create("startAfter",i,!1)}(...e)))}catch(n){throw Or(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,ia(this._delegate,function bE(...i){return Gp._create("endBefore",i,!1)}(...e)))}catch(n){throw Or(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,ia(this._delegate,function Bm(...i){return Gp._create("endAt",i,!0)}(...e)))}catch(n){throw Or(n,"endAt()","Query.endAt()")}}isEqual(e){return Ud(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Uy(i){i=wn(i,Ji);const e=wn(i.firestore,Pr),n=qr(e),s=new yc(e);return function Pp(i,e){const n=new Ur;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(s=(0,se.Z)(function*(l,p,T){try{const S=yield il(l,p,!0),x=new hm(p,S.hs),L=x.ha(S.documents),G=x.applyChanges(L,!1);T.resolve(G.snapshot)}catch(S){const x=Sd(S,`Failed to execute query '${p} against cache`);T.reject(x)}}),function u(l,p,T){return s.apply(this,arguments)})(yield Us(i),e,n);var s})),n.promise}(n,i._query).then(u=>new Ua(e,s,i,u))}(this._delegate):"server"===e?.source?function xE(i){i=wn(i,Ji);const e=wn(i.firestore,Pr),n=qr(e),s=new yc(e);return hE(n,i._query,{source:"server"}).then(u=>new Ua(e,s,i,u))}(this._delegate):function Vy(i){i=wn(i,Ji);const e=wn(i.firestore,Pr),n=qr(e),s=new yc(e);return jp(i._query),hE(n,i._query).then(u=>new Ua(e,s,i,u))}(this._delegate),n.then(s=>new Qh(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=Xm(e),s=e_(e,u=>new Qh(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return qp(this._delegate,n,s)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?fs.getInstance(this.firestore,e):null))}}class WE{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qh{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new WE(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new Zh(this._firestore,s))})}isEqual(e){return Fy(this._delegate,e._delegate)}}class ja extends bs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ti(this.firestore,e):null}doc(e){try{return new ti(this.firestore,void 0===e?Vd(this._delegate):Vd(this._delegate,e))}catch(n){throw Or(n,"doc()","CollectionReference.doc()")}}add(e){return function jy(i,e){const n=wn(i.firestore,Pr),s=Vd(i),u=qh(i.converter,e);return Gd(n,[Ou(Ro(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,bn.exists(!1))]).then(()=>s)}(this._delegate,e).then(n=>new ti(this.firestore,n))}isEqual(e){return Sy(this._delegate,e._delegate)}withConverter(e){return new ja(this.firestore,this._delegate.withConverter(e?fs.getInstance(this.firestore,e):null))}}function wl(i){return wn(i,Nr)}class Yp{constructor(...e){this._delegate=new bo(...e)}static documentId(){return new Yp(En.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof bo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Km(){return new Np("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tl(e)}static delete(){const e=function jE(){return new Hd("deleteField")}();return e._methodName="FieldValue.delete",new Tl(e)}static arrayUnion(...e){const n=function Il(...i){return new Op("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Tl(n)}static arrayRemove(...e){const n=function Zm(...i){return new kp("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Tl(n)}static increment(e){const n=function $E(i){return new Lp("increment",i)}(e);return n._methodName="FieldValue.increment",new Tl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qE={Firestore:Jm,GeoPoint:xu,Timestamp:ir,Blob:Wd,Transaction:iv,WriteBatch:sv,DocumentReference:ti,DocumentSnapshot:Kh,Query:bs,QueryDocumentSnapshot:Zh,QuerySnapshot:Qh,CollectionReference:ja,FieldPath:Yp,FieldValue:Tl,setLogLevel:function Ba(i){!function bl(i){wo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function av(i){(function ov(i,e){i.INTERNAL.registerComponent(new xt.wA("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},qE)))})(i,(e,n)=>new Jm(e,n,new o0)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(We.Z);var Jp=O(7142);function t_(i,e){return function KE(i,e=he.z){return new Ue.y(n=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},n)}):s=i.onSnapshot({includeMetadataChanges:!0},n),()=>{s?.()}})}(i,e)}function Xp(i,e){return t_(i,e).pipe((0,ht.U)(n=>({payload:n,type:"query"})))}class cv{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const s=this.ref.collection(e),{ref:u,query:l}=fv(s,n);return new r_(u,l,this.afs)}snapshotChanges(){return function uv(i,e){return t_(i,e).pipe((0,qe.O)(void 0),wt(),(0,ht.U)(n=>{const[s,u]=n;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,je.D)(this.ref.get(e)).pipe(W.iC)}}function eg(i,e){return Xp(i,e).pipe((0,qe.O)(void 0),wt(),(0,ht.U)(n=>{const[s,u]=n,l=u.payload.docChanges(),p=l.map(T=>({type:T.type,payload:T}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((T,S)=>{const x=l.find(G=>G.doc.ref.isEqual(T.ref)),L=s?.payload.docs.find(G=>G.ref.isEqual(T.ref));x&&JSON.stringify(x.doc.metadata)===JSON.stringify(T.metadata)||!x&&L&&JSON.stringify(L.metadata)===JSON.stringify(T.metadata)||p.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:T}})}),p}))}function tg(i,e,n){return eg(i,n).pipe((0,pe.R)((s,u)=>function ng(i,e,n){return e.forEach(s=>{n.indexOf(s.type)>-1&&(i=function lv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return rg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return rg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(l=>l.payload),e),[]),(0,Ve.x)(),(0,ht.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function rg(i,e,n,...s){const u=i.slice();return u.splice(e,n,...s),u}function n_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class r_{ref;query;afs;constructor(e,n,s){this.ref=e,this.query=n,this.afs=s}stateChanges(e){let n=eg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ht.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,qe.O)(void 0),wt(),(0,ve.h)(([s,u])=>u.length>0||!s),(0,ht.U)(([,s])=>s),W.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return tg(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return Xp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(n=>n.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),W.iC)}get(e){return(0,je.D)(this.query.get(e)).pipe(W.iC)}add(e){return this.ref.add(e)}doc(e){return new cv(this.ref.doc(e),this.afs)}}class dv{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?eg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(n=>n.filter(s=>e.indexOf(s.type)>-1)),(0,ve.h)(n=>n.length>0),W.iC):eg(this.query,this.afs.schedulers.outsideAngular).pipe(W.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,pe.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return tg(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return Xp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),W.iC)}get(e){return(0,je.D)(this.query.get(e)).pipe(W.iC)}}const i_=new z.OlP("angularfire2.enableFirestorePersistence"),s_=new z.OlP("angularfire2.firestore.persistenceSettings"),hv=new z.OlP("angularfire2.firestore.settings"),ZE=new z.OlP("angularfire2.firestore.use-emulator");function fv(i,e=(n=>n)){return{query:e(i),ref:i}}let QE=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,s,u,l,p,T,S,x,L,G,oe,be,rt,gt,ct,Ft,un){this.schedulers=S;const Lt=(0,Le.on)(n,T,s),cn=L;G&&(0,J.nw)(Lt,T,oe,rt,gt,ct,be,Ft),[this.firestore,this.persistenceEnabled$]=(0,Le.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const $n=T.runOutsideAngular(()=>Lt.firestore());if(l&&$n.settings(l),cn&&$n.useEmulator(...cn),u&&!(0,De.PM)(p)){const Zn=()=>{try{return(0,je.D)($n.enablePersistence(x||void 0).then(()=>!0,()=>!1))}catch(ni){return typeof console<"u"&&console.warn(ni),(0,tt.of)(!1)}};return[$n,T.runOutsideAngular(Zn)]}return[$n,(0,tt.of)(!1)]},[l,cn,u])}collection(n,s){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:p}=fv(u,s),T=this.schedulers.ngZone.run(()=>l);return new r_(T,p,this)}collectionGroup(n,s){const u=s||(p=>p),l=this.firestore.collectionGroup(n);return new dv(u(l),this)}doc(n){let s;s="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>s);return new cv(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||i)(z.LFG(Le.Dh),z.LFG(Le.xv,8),z.LFG(i_,8),z.LFG(hv,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(W.HU),z.LFG(s_,8),z.LFG(ZE,8),z.LFG(J.zQ,8),z.LFG(J.Qv,8),z.LFG(J.L6,8),z.LFG(J._Q,8),z.LFG(J.rT,8),z.LFG(J.lh,8),z.LFG(J.f7,8),z.LFG(W.Rf,8))};static \u0275prov=z.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),YE=(()=>{class i{constructor(){Jp.Z.registerVersion("angularfire",W.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:i_,useValue:!0},{provide:s_,useValue:n}]}}static \u0275fac=function(s){return new(s||i)};static \u0275mod=z.oAB({type:i});static \u0275inj=z.cJS({providers:[QE]})}return i})(),JE=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=z.oAB({type:i,bootstrap:[ae]});static#n=this.\u0275inj=z.cJS({imports:[Le.hO.initializeApp({apiKey:"AIzaSyC0bhIEMKfNuBKu4Vp5WwGYoZW2GWJGfaY",authDomain:"magic-173de.firebaseapp.com",databaseURL:"https://magic-173de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"magic-173de",storageBucket:"magic-173de.appspot.com",messagingSenderId:"843032359293",appId:"1:843032359293:web:cf9b2d1cfe9dc26dfd5c14"}),YE,J.ww,y.b2,le,me.JF]})}return i})();y.q6().bootstrapModule(JE).catch(i=>console.error(i))},5619:(_t,Ne,O)=>{O.d(Ne,{X:()=>ne});var y=O(8645);class ne extends y.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const le=super._subscribe(fe);return!le.closed&&fe.next(this._value),le}getValue(){const{hasError:fe,thrownError:le,_value:ae}=this;if(fe)throw le;return this._throwIfClosed(),ae}next(fe){super.next(this._value=fe)}}},5592:(_t,Ne,O)=>{O.d(Ne,{y:()=>Le});var y=O(305),ne=O(7394),z=O(4850),fe=O(8407),le=O(2653),ae=O(4674),me=O(1441);let Le=(()=>{class he{constructor(je){je&&(this._subscribe=je)}lift(je){const tt=new he;return tt.source=this,tt.operator=je,tt}subscribe(je,tt,qe){const st=function J(he){return he&&he instanceof y.Lv||function W(he){return he&&(0,ae.m)(he.next)&&(0,ae.m)(he.error)&&(0,ae.m)(he.complete)}(he)&&(0,ne.Nn)(he)}(je)?je:new y.Hp(je,tt,qe);return(0,me.x)(()=>{const{operator:Xe,source:wt}=this;st.add(Xe?Xe.call(st,wt):wt?this._subscribe(st):this._trySubscribe(st))}),st}_trySubscribe(je){try{return this._subscribe(je)}catch(tt){je.error(tt)}}forEach(je,tt){return new(tt=De(tt))((qe,st)=>{const Xe=new y.Hp({next:wt=>{try{je(wt)}catch(ht){st(ht),Xe.unsubscribe()}},error:st,complete:qe});this.subscribe(Xe)})}_subscribe(je){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(je)}[z.L](){return this}pipe(...je){return(0,fe.U)(je)(this)}toPromise(je){return new(je=De(je))((tt,qe)=>{let st;this.subscribe(Xe=>st=Xe,Xe=>qe(Xe),()=>tt(st))})}}return he.create=Ue=>new he(Ue),he})();function De(he){var Ue;return null!==(Ue=he??le.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(_t,Ne,O)=>{O.d(Ne,{x:()=>me});var y=O(5592),ne=O(7394);const fe=(0,O(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=O(9039),ae=O(1441);let me=(()=>{class De extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const he=new Le(this,this);return he.operator=J,he}_throwIfClosed(){if(this.closed)throw new fe}next(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(J)}})}error(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:he}=this;for(;he.length;)he.shift().error(J)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:he,isStopped:Ue,observers:je}=this;return he||Ue?ne.Lc:(this.currentObservers=null,je.push(J),new ne.w0(()=>{this.currentObservers=null,(0,le.P)(je,J)}))}_checkFinalizedStatuses(J){const{hasError:he,thrownError:Ue,isStopped:je}=this;he?J.error(Ue):je&&J.complete()}asObservable(){const J=new y.y;return J.source=this,J}}return De.create=(W,J)=>new Le(W,J),De})();class Le extends me{constructor(W,J){super(),this.destination=W,this.source=J}next(W){var J,he;null===(he=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===he||he.call(J,W)}error(W){var J,he;null===(he=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===he||he.call(J,W)}complete(){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===J||J.call(W)}_subscribe(W){var J,he;return null!==(he=null===(J=this.source)||void 0===J?void 0:J.subscribe(W))&&void 0!==he?he:ne.Lc}}},305:(_t,Ne,O)=>{O.d(Ne,{Hp:()=>qe,Lv:()=>he});var y=O(4674),ne=O(7394),z=O(2653),fe=O(3894),le=O(2420);const ae=De("C",void 0,void 0);function De(pe,Ve,ve){return{kind:pe,value:Ve,error:ve}}var W=O(7599),J=O(1441);class he extends ne.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,ne.Nn)(Ve)&&Ve.add(this)):this.destination=ht}static create(Ve,ve,He){return new qe(Ve,ve,He)}next(Ve){this.isStopped?wt(function Le(pe){return De("N",pe,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?wt(function me(pe){return De("E",void 0,pe)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?wt(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function je(pe,Ve){return Ue.call(pe,Ve)}class tt{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Ve)}catch(He){st(He)}}error(Ve){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Ve)}catch(He){st(He)}else st(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(ve){st(ve)}}}class qe extends he{constructor(Ve,ve,He){let We;if(super(),(0,y.m)(Ve)||!Ve)We={next:Ve??void 0,error:ve??void 0,complete:He??void 0};else{let se;this&&z.config.useDeprecatedNextContext?(se=Object.create(Ve),se.unsubscribe=()=>this.unsubscribe(),We={next:Ve.next&&je(Ve.next,se),error:Ve.error&&je(Ve.error,se),complete:Ve.complete&&je(Ve.complete,se)}):We=Ve}this.destination=new tt(We)}}function st(pe){z.config.useDeprecatedSynchronousErrorHandling?(0,J.O)(pe):(0,fe.h)(pe)}function wt(pe,Ve){const{onStoppedNotification:ve}=z.config;ve&&W.z.setTimeout(()=>ve(pe,Ve))}const ht={closed:!0,next:le.Z,error:function Xe(pe){throw pe},complete:le.Z}},7394:(_t,Ne,O)=>{O.d(Ne,{Lc:()=>ae,w0:()=>le,Nn:()=>me});var y=O(4674);const z=(0,O(2306).d)(De=>function(J){De(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((he,Ue)=>`${Ue+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var fe=O(9039);class le{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const je of J)je.remove(this);else J.remove(this);const{initialTeardown:he}=this;if((0,y.m)(he))try{he()}catch(je){W=je instanceof z?je.errors:[je]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const je of Ue)try{Le(je)}catch(tt){W=W??[],tt instanceof z?W=[...W,...tt.errors]:W.push(tt)}}if(W)throw new z(W)}}add(W){var J;if(W&&W!==this)if(this.closed)Le(W);else{if(W instanceof le){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(W)}}_hasParent(W){const{_parentage:J}=this;return J===W||Array.isArray(J)&&J.includes(W)}_addParent(W){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(W),J):J?[J,W]:W}_removeParent(W){const{_parentage:J}=this;J===W?this._parentage=null:Array.isArray(J)&&(0,fe.P)(J,W)}remove(W){const{_finalizers:J}=this;J&&(0,fe.P)(J,W),W instanceof le&&W._removeParent(this)}}le.EMPTY=(()=>{const De=new le;return De.closed=!0,De})();const ae=le.EMPTY;function me(De){return De instanceof le||De&&"closed"in De&&(0,y.m)(De.remove)&&(0,y.m)(De.add)&&(0,y.m)(De.unsubscribe)}function Le(De){(0,y.m)(De)?De():De.unsubscribe()}},2653:(_t,Ne,O)=>{O.d(Ne,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(_t,Ne,O)=>{O.d(Ne,{z:()=>le});var y=O(7537),z=O(4564),fe=O(2459);function le(...ae){return function ne(){return(0,y.J)(1)}()((0,fe.D)(ae,(0,z.yG)(ae)))}},6232:(_t,Ne,O)=>{O.d(Ne,{E:()=>ne});const ne=new(O(5592).y)(le=>le.complete())},2459:(_t,Ne,O)=>{O.d(Ne,{D:()=>Ve});var y=O(4829),ne=O(3093),z=O(5137),ae=O(5592),Le=O(4971),De=O(4674),W=O(7103);function he(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new ae.y(We=>{(0,W.f)(We,He,()=>{const se=ve[Symbol.asyncIterator]();(0,W.f)(We,He,()=>{se.next().then(Te=>{Te.done?We.complete():We.next(Te.value)})},0,!0)})})}var Ue=O(8382),je=O(4026),tt=O(4266),qe=O(3664),st=O(5726),Xe=O(9853),wt=O(541);function Ve(ve,He){return He?function pe(ve,He){if(null!=ve){if((0,Ue.c)(ve))return function fe(ve,He){return(0,y.Xf)(ve).pipe((0,z.R)(He),(0,ne.Q)(He))}(ve,He);if((0,tt.z)(ve))return function me(ve,He){return new ae.y(We=>{let se=0;return He.schedule(function(){se===ve.length?We.complete():(We.next(ve[se++]),We.closed||this.schedule())})})}(ve,He);if((0,je.t)(ve))return function le(ve,He){return(0,y.Xf)(ve).pipe((0,z.R)(He),(0,ne.Q)(He))}(ve,He);if((0,st.D)(ve))return he(ve,He);if((0,qe.T)(ve))return function J(ve,He){return new ae.y(We=>{let se;return(0,W.f)(We,He,()=>{se=ve[Le.h](),(0,W.f)(We,He,()=>{let Te,xt;try{({value:Te,done:xt}=se.next())}catch(Tt){return void We.error(Tt)}xt?We.complete():We.next(Te)},0,!0)}),()=>(0,De.m)(se?.return)&&se.return()})}(ve,He);if((0,wt.L)(ve))return function ht(ve,He){return he((0,wt.Q)(ve),He)}(ve,He)}throw(0,Xe.z)(ve)}(ve,He):(0,y.Xf)(ve)}},4829:(_t,Ne,O)=>{O.d(Ne,{Xf:()=>Ue});var y=O(7582),ne=O(4266),z=O(4026),fe=O(5592),le=O(8382),ae=O(5726),me=O(9853),Le=O(3664),De=O(541),W=O(4674),J=O(3894),he=O(4850);function Ue(pe){if(pe instanceof fe.y)return pe;if(null!=pe){if((0,le.c)(pe))return function je(pe){return new fe.y(Ve=>{const ve=pe[he.L]();if((0,W.m)(ve.subscribe))return ve.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pe);if((0,ne.z)(pe))return function tt(pe){return new fe.y(Ve=>{for(let ve=0;ve<pe.length&&!Ve.closed;ve++)Ve.next(pe[ve]);Ve.complete()})}(pe);if((0,z.t)(pe))return function qe(pe){return new fe.y(Ve=>{pe.then(ve=>{Ve.closed||(Ve.next(ve),Ve.complete())},ve=>Ve.error(ve)).then(null,J.h)})}(pe);if((0,ae.D)(pe))return Xe(pe);if((0,Le.T)(pe))return function st(pe){return new fe.y(Ve=>{for(const ve of pe)if(Ve.next(ve),Ve.closed)return;Ve.complete()})}(pe);if((0,De.L)(pe))return function wt(pe){return Xe((0,De.Q)(pe))}(pe)}throw(0,me.z)(pe)}function Xe(pe){return new fe.y(Ve=>{(function ht(pe,Ve){var ve,He,We,se;return(0,y.mG)(this,void 0,void 0,function*(){try{for(ve=(0,y.KL)(pe);!(He=yield ve.next()).done;)if(Ve.next(He.value),Ve.closed)return}catch(Te){We={error:Te}}finally{try{He&&!He.done&&(se=ve.return)&&(yield se.call(ve))}finally{if(We)throw We.error}}Ve.complete()})})(pe,Ve).catch(ve=>Ve.error(ve))})}},3019:(_t,Ne,O)=>{O.d(Ne,{T:()=>ae});var y=O(7537),ne=O(4829),z=O(6232),fe=O(4564),le=O(2459);function ae(...me){const Le=(0,fe.yG)(me),De=(0,fe._6)(me,1/0),W=me;return W.length?1===W.length?(0,ne.Xf)(W[0]):(0,y.J)(De)((0,le.D)(W,Le)):z.E}},2096:(_t,Ne,O)=>{O.d(Ne,{of:()=>z});var y=O(4564),ne=O(2459);function z(...fe){const le=(0,y.yG)(fe);return(0,ne.D)(fe,le)}},8251:(_t,Ne,O)=>{O.d(Ne,{x:()=>ne});var y=O(305);function ne(fe,le,ae,me,Le){return new z(fe,le,ae,me,Le)}class z extends y.Lv{constructor(le,ae,me,Le,De,W){super(le),this.onFinalize=De,this.shouldUnsubscribe=W,this._next=ae?function(J){try{ae(J)}catch(he){le.error(he)}}:super._next,this._error=Le?function(J){try{Le(J)}catch(he){le.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},6328:(_t,Ne,O)=>{O.d(Ne,{b:()=>z});var y=O(1631),ne=O(4674);function z(fe,le){return(0,ne.m)(le)?(0,y.z)(fe,le,1):(0,y.z)(fe,1)}},3572:(_t,Ne,O)=>{O.d(Ne,{d:()=>z});var y=O(9360),ne=O(8251);function z(fe){return(0,y.e)((le,ae)=>{let me=!1;le.subscribe((0,ne.x)(ae,Le=>{me=!0,ae.next(Le)},()=>{me||ae.next(fe),ae.complete()}))})}},3997:(_t,Ne,O)=>{O.d(Ne,{x:()=>fe});var y=O(2737),ne=O(9360),z=O(8251);function fe(ae,me=y.y){return ae=ae??le,(0,ne.e)((Le,De)=>{let W,J=!0;Le.subscribe((0,z.x)(De,he=>{const Ue=me(he);(J||!ae(W,Ue))&&(J=!1,W=Ue,De.next(he))}))})}function le(ae,me){return ae===me}},2181:(_t,Ne,O)=>{O.d(Ne,{h:()=>z});var y=O(9360),ne=O(8251);function z(fe,le){return(0,y.e)((ae,me)=>{let Le=0;ae.subscribe((0,ne.x)(me,De=>fe.call(le,De,Le++)&&me.next(De)))})}},4716:(_t,Ne,O)=>{O.d(Ne,{x:()=>ne});var y=O(9360);function ne(z){return(0,y.e)((fe,le)=>{try{fe.subscribe(le)}finally{le.add(z)}})}},1374:(_t,Ne,O)=>{O.d(Ne,{P:()=>me});var y=O(6973),ne=O(2181),z=O(8180),fe=O(3572),le=O(3026),ae=O(2737);function me(Le,De){const W=arguments.length>=2;return J=>J.pipe(Le?(0,ne.h)((he,Ue)=>Le(he,Ue,J)):ae.y,(0,z.q)(1),W?(0,fe.d)(De):(0,le.T)(()=>new y.K))}},7398:(_t,Ne,O)=>{O.d(Ne,{U:()=>z});var y=O(9360),ne=O(8251);function z(fe,le){return(0,y.e)((ae,me)=>{let Le=0;ae.subscribe((0,ne.x)(me,De=>{me.next(fe.call(le,De,Le++))}))})}},7537:(_t,Ne,O)=>{O.d(Ne,{J:()=>z});var y=O(1631),ne=O(2737);function z(fe=1/0){return(0,y.z)(ne.y,fe)}},1631:(_t,Ne,O)=>{O.d(Ne,{z:()=>Le});var y=O(7398),ne=O(4829),z=O(9360),fe=O(7103),le=O(8251),me=O(4674);function Le(De,W,J=1/0){return(0,me.m)(W)?Le((he,Ue)=>(0,y.U)((je,tt)=>W(he,je,Ue,tt))((0,ne.Xf)(De(he,Ue))),J):("number"==typeof W&&(J=W),(0,z.e)((he,Ue)=>function ae(De,W,J,he,Ue,je,tt,qe){const st=[];let Xe=0,wt=0,ht=!1;const pe=()=>{ht&&!st.length&&!Xe&&W.complete()},Ve=He=>Xe<he?ve(He):st.push(He),ve=He=>{je&&W.next(He),Xe++;let We=!1;(0,ne.Xf)(J(He,wt++)).subscribe((0,le.x)(W,se=>{Ue?.(se),je?Ve(se):W.next(se)},()=>{We=!0},void 0,()=>{if(We)try{for(Xe--;st.length&&Xe<he;){const se=st.shift();tt?(0,fe.f)(W,tt,()=>ve(se)):ve(se)}pe()}catch(se){W.error(se)}}))};return De.subscribe((0,le.x)(W,Ve,()=>{ht=!0,pe()})),()=>{qe?.()}}(he,Ue,De,J)))}},3093:(_t,Ne,O)=>{O.d(Ne,{Q:()=>fe});var y=O(7103),ne=O(9360),z=O(8251);function fe(le,ae=0){return(0,ne.e)((me,Le)=>{me.subscribe((0,z.x)(Le,De=>(0,y.f)(Le,le,()=>Le.next(De),ae),()=>(0,y.f)(Le,le,()=>Le.complete(),ae),De=>(0,y.f)(Le,le,()=>Le.error(De),ae)))})}},6699:(_t,Ne,O)=>{O.d(Ne,{R:()=>fe});var y=O(9360),ne=O(8251);function fe(le,ae){return(0,y.e)(function z(le,ae,me,Le,De){return(W,J)=>{let he=me,Ue=ae,je=0;W.subscribe((0,ne.x)(J,tt=>{const qe=je++;Ue=he?le(Ue,tt,qe):(he=!0,tt),Le&&J.next(Ue)},De&&(()=>{he&&J.next(Ue),J.complete()})))}}(le,ae,arguments.length>=2,!0))}},3020:(_t,Ne,O)=>{O.d(Ne,{B:()=>le});var y=O(4829),ne=O(8645),z=O(305),fe=O(9360);function le(me={}){const{connector:Le=(()=>new ne.x),resetOnError:De=!0,resetOnComplete:W=!0,resetOnRefCountZero:J=!0}=me;return he=>{let Ue,je,tt,qe=0,st=!1,Xe=!1;const wt=()=>{je?.unsubscribe(),je=void 0},ht=()=>{wt(),Ue=tt=void 0,st=Xe=!1},pe=()=>{const Ve=Ue;ht(),Ve?.unsubscribe()};return(0,fe.e)((Ve,ve)=>{qe++,!Xe&&!st&&wt();const He=tt=tt??Le();ve.add(()=>{qe--,0===qe&&!Xe&&!st&&(je=ae(pe,J))}),He.subscribe(ve),!Ue&&qe>0&&(Ue=new z.Hp({next:We=>He.next(We),error:We=>{Xe=!0,wt(),je=ae(ht,De,We),He.error(We)},complete:()=>{st=!0,wt(),je=ae(ht,W),He.complete()}}),(0,y.Xf)(Ve).subscribe(Ue))})(he)}}function ae(me,Le,...De){if(!0===Le)return void me();if(!1===Le)return;const W=new z.Hp({next:()=>{W.unsubscribe(),me()}});return(0,y.Xf)(Le(...De)).subscribe(W)}},7921:(_t,Ne,O)=>{O.d(Ne,{O:()=>fe});var y=O(5211),ne=O(4564),z=O(9360);function fe(...le){const ae=(0,ne.yG)(le);return(0,z.e)((me,Le)=>{(ae?(0,y.z)(le,me,ae):(0,y.z)(le,me)).subscribe(Le)})}},5137:(_t,Ne,O)=>{O.d(Ne,{R:()=>ne});var y=O(9360);function ne(z,fe=0){return(0,y.e)((le,ae)=>{ae.add(z.schedule(()=>le.subscribe(ae),fe))})}},4664:(_t,Ne,O)=>{O.d(Ne,{w:()=>fe});var y=O(4829),ne=O(9360),z=O(8251);function fe(le,ae){return(0,ne.e)((me,Le)=>{let De=null,W=0,J=!1;const he=()=>J&&!De&&Le.complete();me.subscribe((0,z.x)(Le,Ue=>{De?.unsubscribe();let je=0;const tt=W++;(0,y.Xf)(le(Ue,tt)).subscribe(De=(0,z.x)(Le,qe=>Le.next(ae?ae(Ue,qe,tt,je++):qe),()=>{De=null,he()}))},()=>{J=!0,he()}))})}},8180:(_t,Ne,O)=>{O.d(Ne,{q:()=>fe});var y=O(6232),ne=O(9360),z=O(8251);function fe(le){return le<=0?()=>y.E:(0,ne.e)((ae,me)=>{let Le=0;ae.subscribe((0,z.x)(me,De=>{++Le<=le&&(me.next(De),le<=Le&&me.complete())}))})}},9397:(_t,Ne,O)=>{O.d(Ne,{b:()=>le});var y=O(4674),ne=O(9360),z=O(8251),fe=O(2737);function le(ae,me,Le){const De=(0,y.m)(ae)||me||Le?{next:ae,error:me,complete:Le}:ae;return De?(0,ne.e)((W,J)=>{var he;null===(he=De.subscribe)||void 0===he||he.call(De);let Ue=!0;W.subscribe((0,z.x)(J,je=>{var tt;null===(tt=De.next)||void 0===tt||tt.call(De,je),J.next(je)},()=>{var je;Ue=!1,null===(je=De.complete)||void 0===je||je.call(De),J.complete()},je=>{var tt;Ue=!1,null===(tt=De.error)||void 0===tt||tt.call(De,je),J.error(je)},()=>{var je,tt;Ue&&(null===(je=De.unsubscribe)||void 0===je||je.call(De)),null===(tt=De.finalize)||void 0===tt||tt.call(De)}))}):fe.y}},3026:(_t,Ne,O)=>{O.d(Ne,{T:()=>fe});var y=O(6973),ne=O(9360),z=O(8251);function fe(ae=le){return(0,ne.e)((me,Le)=>{let De=!1;me.subscribe((0,z.x)(Le,W=>{De=!0,Le.next(W)},()=>De?Le.complete():Le.error(ae())))})}function le(){return new y.K}},1954:(_t,Ne,O)=>{O.d(Ne,{o:()=>le});var y=O(7394);class ne extends y.w0{constructor(me,Le){super()}schedule(me,Le=0){return this}}const z={setInterval(ae,me,...Le){const{delegate:De}=z;return De?.setInterval?De.setInterval(ae,me,...Le):setInterval(ae,me,...Le)},clearInterval(ae){const{delegate:me}=z;return(me?.clearInterval||clearInterval)(ae)},delegate:void 0};var fe=O(9039);class le extends ne{constructor(me,Le){super(me,Le),this.scheduler=me,this.work=Le,this.pending=!1}schedule(me,Le=0){var De;if(this.closed)return this;this.state=me;const W=this.id,J=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(J,W,Le)),this.pending=!0,this.delay=Le,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(J,this.id,Le),this}requestAsyncId(me,Le,De=0){return z.setInterval(me.flush.bind(me,this),De)}recycleAsyncId(me,Le,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Le;null!=Le&&z.clearInterval(Le)}execute(me,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(me,Le);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Le){let W,De=!1;try{this.work(me)}catch(J){De=!0,W=J||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:me,scheduler:Le}=this,{actions:De}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(De,this),null!=me&&(this.id=this.recycleAsyncId(Le,me,null)),this.delay=null,super.unsubscribe()}}}},2631:(_t,Ne,O)=>{O.d(Ne,{v:()=>z});var y=O(4552);class ne{constructor(le,ae=ne.now){this.schedulerActionCtor=le,this.now=ae}schedule(le,ae=0,me){return new this.schedulerActionCtor(this,le).schedule(me,ae)}}ne.now=y.l.now;class z extends ne{constructor(le,ae=ne.now){super(le,ae),this.actions=[],this._active=!1}flush(le){const{actions:ae}=this;if(this._active)return void ae.push(le);let me;this._active=!0;do{if(me=le.execute(le.state,le.delay))break}while(le=ae.shift());if(this._active=!1,me){for(;le=ae.shift();)le.unsubscribe();throw me}}}},6321:(_t,Ne,O)=>{O.d(Ne,{z:()=>z});var y=O(1954);const z=new(O(2631).v)(y.o)},4552:(_t,Ne,O)=>{O.d(Ne,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(_t,Ne,O)=>{O.d(Ne,{z:()=>y});const y={setTimeout(ne,z,...fe){const{delegate:le}=y;return le?.setTimeout?le.setTimeout(ne,z,...fe):setTimeout(ne,z,...fe)},clearTimeout(ne){const{delegate:z}=y;return(z?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},4971:(_t,Ne,O)=>{O.d(Ne,{h:()=>ne});const ne=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(_t,Ne,O)=>{O.d(Ne,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(_t,Ne,O)=>{O.d(Ne,{K:()=>ne});const ne=(0,O(2306).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(_t,Ne,O)=>{O.d(Ne,{_6:()=>ae,jO:()=>fe,yG:()=>le});var y=O(4674);function z(me){return me[me.length-1]}function fe(me){return(0,y.m)(z(me))?me.pop():void 0}function le(me){return function ne(me){return me&&(0,y.m)(me.schedule)}(z(me))?me.pop():void 0}function ae(me,Le){return"number"==typeof z(me)?me.pop():Le}},7453:(_t,Ne,O)=>{O.d(Ne,{D:()=>le});const{isArray:y}=Array,{getPrototypeOf:ne,prototype:z,keys:fe}=Object;function le(me){if(1===me.length){const Le=me[0];if(y(Le))return{args:Le,keys:null};if(function ae(me){return me&&"object"==typeof me&&ne(me)===z}(Le)){const De=fe(Le);return{args:De.map(W=>Le[W]),keys:De}}}return{args:me,keys:null}}},9039:(_t,Ne,O)=>{function y(ne,z){if(ne){const fe=ne.indexOf(z);0<=fe&&ne.splice(fe,1)}}O.d(Ne,{P:()=>y})},2306:(_t,Ne,O)=>{function y(ne){const fe=ne(le=>{Error.call(le),le.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}O.d(Ne,{d:()=>y})},2714:(_t,Ne,O)=>{function y(ne,z){return ne.reduce((fe,le,ae)=>(fe[le]=z[ae],fe),{})}O.d(Ne,{n:()=>y})},1441:(_t,Ne,O)=>{O.d(Ne,{O:()=>fe,x:()=>z});var y=O(2653);let ne=null;function z(le){if(y.config.useDeprecatedSynchronousErrorHandling){const ae=!ne;if(ae&&(ne={errorThrown:!1,error:null}),le(),ae){const{errorThrown:me,error:Le}=ne;if(ne=null,me)throw Le}}else le()}function fe(le){y.config.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=le)}},7103:(_t,Ne,O)=>{function y(ne,z,fe,le=0,ae=!1){const me=z.schedule(function(){fe(),ae?ne.add(this.schedule(null,le)):this.unsubscribe()},le);if(ne.add(me),!ae)return me}O.d(Ne,{f:()=>y})},2737:(_t,Ne,O)=>{function y(ne){return ne}O.d(Ne,{y:()=>y})},4266:(_t,Ne,O)=>{O.d(Ne,{z:()=>y});const y=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},5726:(_t,Ne,O)=>{O.d(Ne,{D:()=>ne});var y=O(4674);function ne(z){return Symbol.asyncIterator&&(0,y.m)(z?.[Symbol.asyncIterator])}},4674:(_t,Ne,O)=>{function y(ne){return"function"==typeof ne}O.d(Ne,{m:()=>y})},8382:(_t,Ne,O)=>{O.d(Ne,{c:()=>z});var y=O(4850),ne=O(4674);function z(fe){return(0,ne.m)(fe[y.L])}},3664:(_t,Ne,O)=>{O.d(Ne,{T:()=>z});var y=O(4971),ne=O(4674);function z(fe){return(0,ne.m)(fe?.[y.h])}},4026:(_t,Ne,O)=>{O.d(Ne,{t:()=>ne});var y=O(4674);function ne(z){return(0,y.m)(z?.then)}},541:(_t,Ne,O)=>{O.d(Ne,{L:()=>fe,Q:()=>z});var y=O(7582),ne=O(4674);function z(le){return(0,y.FC)(this,arguments,function*(){const me=le.getReader();try{for(;;){const{value:Le,done:De}=yield(0,y.qq)(me.read());if(De)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Le)}}finally{me.releaseLock()}})}function fe(le){return(0,ne.m)(le?.getReader)}},9360:(_t,Ne,O)=>{O.d(Ne,{A:()=>ne,e:()=>z});var y=O(4674);function ne(fe){return(0,y.m)(fe?.lift)}function z(fe){return le=>{if(ne(le))return le.lift(function(ae){try{return fe(ae,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(_t,Ne,O)=>{O.d(Ne,{Z:()=>fe});var y=O(7398);const{isArray:ne}=Array;function fe(le){return(0,y.U)(ae=>function z(le,ae){return ne(ae)?le(...ae):le(ae)}(le,ae))}},2420:(_t,Ne,O)=>{function y(){}O.d(Ne,{Z:()=>y})},8407:(_t,Ne,O)=>{O.d(Ne,{U:()=>z,z:()=>ne});var y=O(2737);function ne(...fe){return z(fe)}function z(fe){return 0===fe.length?y.y:1===fe.length?fe[0]:function(ae){return fe.reduce((me,Le)=>Le(me),ae)}}},3894:(_t,Ne,O)=>{O.d(Ne,{h:()=>z});var y=O(2653),ne=O(7599);function z(fe){ne.z.setTimeout(()=>{const{onUnhandledError:le}=y.config;if(!le)throw fe;le(fe)})}},9853:(_t,Ne,O)=>{function y(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ne,{z:()=>y})},6814:(_t,Ne,O)=>{O.d(Ne,{Do:()=>qe,EM:()=>Jn,HT:()=>fe,JF:()=>xi,K0:()=>ae,Mx:()=>Sr,PM:()=>ho,S$:()=>Ue,Ts:()=>Hi,V_:()=>Le,Ye:()=>st,b0:()=>tt,bD:()=>Fn,ez:()=>Ps,q:()=>z,sg:()=>pn,w_:()=>le});var y=O(5879);let ne=null;function z(){return ne}function fe(w){ne||(ne=w)}class le{}const ae=new y.OlP("DocumentToken");let me=(()=>{class w{historyGo(b){throw new Error("Not implemented")}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return(0,y.f3M)(De)},providedIn:"platform"})}return w})();const Le=new y.OlP("Location Initialized");let De=(()=>{class w extends me{constructor(){super(),this._doc=(0,y.f3M)(ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(b){const N=z().getGlobalEventTarget(this._doc,"window");return N.addEventListener("popstate",b,!1),()=>N.removeEventListener("popstate",b)}onHashChange(b){const N=z().getGlobalEventTarget(this._doc,"window");return N.addEventListener("hashchange",b,!1),()=>N.removeEventListener("hashchange",b)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(b){this._location.pathname=b}pushState(b,N,Z){this._history.pushState(b,N,Z)}replaceState(b,N,Z){this._history.replaceState(b,N,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(b=0){this._history.go(b)}getState(){return this._history.state}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return new w},providedIn:"platform"})}return w})();function W(w,k){if(0==w.length)return k;if(0==k.length)return w;let b=0;return w.endsWith("/")&&b++,k.startsWith("/")&&b++,2==b?w+k.substring(1):1==b?w+k:w+"/"+k}function J(w){const k=w.match(/#|\?|$/),b=k&&k.index||w.length;return w.slice(0,b-("/"===w[b-1]?1:0))+w.slice(b)}function he(w){return w&&"?"!==w[0]?"?"+w:w}let Ue=(()=>{class w{historyGo(b){throw new Error("Not implemented")}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return(0,y.f3M)(tt)},providedIn:"root"})}return w})();const je=new y.OlP("appBaseHref");let tt=(()=>{class w extends Ue{constructor(b,N){super(),this._platformLocation=b,this._removeListenerFns=[],this._baseHref=N??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(b){this._removeListenerFns.push(this._platformLocation.onPopState(b),this._platformLocation.onHashChange(b))}getBaseHref(){return this._baseHref}prepareExternalUrl(b){return W(this._baseHref,b)}path(b=!1){const N=this._platformLocation.pathname+he(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&b?`${N}${Z}`:N}pushState(b,N,Z,Pe){const Oe=this.prepareExternalUrl(Z+he(Pe));this._platformLocation.pushState(b,N,Oe)}replaceState(b,N,Z,Pe){const Oe=this.prepareExternalUrl(Z+he(Pe));this._platformLocation.replaceState(b,N,Oe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(b=0){this._platformLocation.historyGo?.(b)}static#e=this.\u0275fac=function(N){return new(N||w)(y.LFG(me),y.LFG(je,8))};static#t=this.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),qe=(()=>{class w extends Ue{constructor(b,N){super(),this._platformLocation=b,this._baseHref="",this._removeListenerFns=[],null!=N&&(this._baseHref=N)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(b){this._removeListenerFns.push(this._platformLocation.onPopState(b),this._platformLocation.onHashChange(b))}getBaseHref(){return this._baseHref}path(b=!1){let N=this._platformLocation.hash;return null==N&&(N="#"),N.length>0?N.substring(1):N}prepareExternalUrl(b){const N=W(this._baseHref,b);return N.length>0?"#"+N:N}pushState(b,N,Z,Pe){let Oe=this.prepareExternalUrl(Z+he(Pe));0==Oe.length&&(Oe=this._platformLocation.pathname),this._platformLocation.pushState(b,N,Oe)}replaceState(b,N,Z,Pe){let Oe=this.prepareExternalUrl(Z+he(Pe));0==Oe.length&&(Oe=this._platformLocation.pathname),this._platformLocation.replaceState(b,N,Oe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(b=0){this._platformLocation.historyGo?.(b)}static#e=this.\u0275fac=function(N){return new(N||w)(y.LFG(me),y.LFG(je,8))};static#t=this.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac})}return w})(),st=(()=>{class w{constructor(b){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=b;const N=this._locationStrategy.getBaseHref();this._basePath=function pe(w){if(new RegExp("^(https?:)?//").test(w)){const[,b]=w.split(/\/\/[^\/]+/);return b}return w}(J(ht(N))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(b=!1){return this.normalize(this._locationStrategy.path(b))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(b,N=""){return this.path()==this.normalize(b+he(N))}normalize(b){return w.stripTrailingSlash(function wt(w,k){if(!w||!k.startsWith(w))return k;const b=k.substring(w.length);return""===b||["/",";","?","#"].includes(b[0])?b:k}(this._basePath,ht(b)))}prepareExternalUrl(b){return b&&"/"!==b[0]&&(b="/"+b),this._locationStrategy.prepareExternalUrl(b)}go(b,N="",Z=null){this._locationStrategy.pushState(Z,"",b,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(b+he(N)),Z)}replaceState(b,N="",Z=null){this._locationStrategy.replaceState(Z,"",b,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(b+he(N)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(b=0){this._locationStrategy.historyGo?.(b)}onUrlChange(b){return this._urlChangeListeners.push(b),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(N=>{this._notifyUrlChangeListeners(N.url,N.state)})),()=>{const N=this._urlChangeListeners.indexOf(b);this._urlChangeListeners.splice(N,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(b="",N){this._urlChangeListeners.forEach(Z=>Z(b,N))}subscribe(b,N,Z){return this._subject.subscribe({next:b,error:N,complete:Z})}static#e=this.normalizeQueryParams=he;static#t=this.joinWithSlash=W;static#n=this.stripTrailingSlash=J;static#r=this.\u0275fac=function(N){return new(N||w)(y.LFG(Ue))};static#i=this.\u0275prov=y.Yz7({token:w,factory:function(){return function Xe(){return new st((0,y.LFG)(Ue))}()},providedIn:"root"})}return w})();function ht(w){return w.replace(/\/index.html$/,"")}function Sr(w,k){k=encodeURIComponent(k);for(const b of w.split(";")){const N=b.indexOf("="),[Z,Pe]=-1==N?[b,""]:[b.slice(0,N),b.slice(N+1)];if(Z.trim()===k)return decodeURIComponent(Pe)}return null}class yr{constructor(k,b,N,Z){this.$implicit=k,this.ngForOf=b,this.index=N,this.count=Z}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pn=(()=>{class w{set ngForOf(b){this._ngForOf=b,this._ngForOfDirty=!0}set ngForTrackBy(b){this._trackByFn=b}get ngForTrackBy(){return this._trackByFn}constructor(b,N,Z){this._viewContainer=b,this._template=N,this._differs=Z,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(b){b&&(this._template=b)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const b=this._ngForOf;!this._differ&&b&&(this._differ=this._differs.find(b).create(this.ngForTrackBy))}if(this._differ){const b=this._differ.diff(this._ngForOf);b&&this._applyChanges(b)}}_applyChanges(b){const N=this._viewContainer;b.forEachOperation((Z,Pe,Oe)=>{if(null==Z.previousIndex)N.createEmbeddedView(this._template,new yr(Z.item,this._ngForOf,-1,-1),null===Oe?void 0:Oe);else if(null==Oe)N.remove(null===Pe?void 0:Pe);else if(null!==Pe){const At=N.get(Pe);N.move(At,Oe),Xi(At,Z)}});for(let Z=0,Pe=N.length;Z<Pe;Z++){const At=N.get(Z).context;At.index=Z,At.count=Pe,At.ngForOf=this._ngForOf}b.forEachIdentityChange(Z=>{Xi(N.get(Z.currentIndex),Z)})}static ngTemplateContextGuard(b,N){return!0}static#e=this.\u0275fac=function(N){return new(N||w)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))};static#t=this.\u0275dir=y.lG2({type:w,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return w})();function Xi(w,k){w.context.$implicit=k.item}let Hi=(()=>{class w{transform(b){return JSON.stringify(b,null,2)}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275pipe=y.Yjl({name:"json",type:w,pure:!1,standalone:!0})}return w})(),Ps=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275mod=y.oAB({type:w});static#n=this.\u0275inj=y.cJS({})}return w})();const Fn="browser",Si="server";function ho(w){return w===Si}let Jn=(()=>{class w{static#e=this.\u0275prov=(0,y.Yz7)({token:w,providedIn:"root",factory:()=>new Fr((0,y.LFG)(ae),window)})}return w})();class Fr{constructor(k,b){this.document=k,this.window=b,this.offset=()=>[0,0]}setOffset(k){this.offset=Array.isArray(k)?()=>k:k}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(k){this.supportsScrolling()&&this.window.scrollTo(k[0],k[1])}scrollToAnchor(k){if(!this.supportsScrolling())return;const b=function es(w,k){const b=w.getElementById(k)||w.getElementsByName(k)[0];if(b)return b;if("function"==typeof w.createTreeWalker&&w.body&&"function"==typeof w.body.attachShadow){const N=w.createTreeWalker(w.body,NodeFilter.SHOW_ELEMENT);let Z=N.currentNode;for(;Z;){const Pe=Z.shadowRoot;if(Pe){const Oe=Pe.getElementById(k)||Pe.querySelector(`[name="${k}"]`);if(Oe)return Oe}Z=N.nextNode()}}return null}(this.document,k);b&&(this.scrollToElement(b),b.focus())}setHistoryScrollRestoration(k){this.supportsScrolling()&&(this.window.history.scrollRestoration=k)}scrollToElement(k){const b=k.getBoundingClientRect(),N=b.left+this.window.pageXOffset,Z=b.top+this.window.pageYOffset,Pe=this.offset();this.window.scrollTo(N-Pe[0],Z-Pe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class xi{}},9862:(_t,Ne,O)=>{O.d(Ne,{JF:()=>H,eN:()=>ie});var y=O(5879),ne=O(2096),z=O(2459),fe=O(5592),le=O(6328),ae=O(2181),me=O(7398),Le=O(4716),De=O(4664),W=O(6814);class J{}class he{}class Ue{constructor(te){this.normalizedNames=new Map,this.lazyUpdate=null,te?"string"==typeof te?this.lazyInit=()=>{this.headers=new Map,te.split("\n").forEach(ce=>{const Q=ce.indexOf(":");if(Q>0){const K=ce.slice(0,Q),_e=K.toLowerCase(),xe=ce.slice(Q+1).trim();this.maybeSetNormalizedName(K,_e),this.headers.has(_e)?this.headers.get(_e).push(xe):this.headers.set(_e,[xe])}})}:typeof Headers<"u"&&te instanceof Headers?(this.headers=new Map,te.forEach((ce,Q)=>{this.setHeaderEntries(Q,ce)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(te).forEach(([ce,Q])=>{this.setHeaderEntries(ce,Q)})}:this.headers=new Map}has(te){return this.init(),this.headers.has(te.toLowerCase())}get(te){this.init();const ce=this.headers.get(te.toLowerCase());return ce&&ce.length>0?ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(te){return this.init(),this.headers.get(te.toLowerCase())||null}append(te,ce){return this.clone({name:te,value:ce,op:"a"})}set(te,ce){return this.clone({name:te,value:ce,op:"s"})}delete(te,ce){return this.clone({name:te,value:ce,op:"d"})}maybeSetNormalizedName(te,ce){this.normalizedNames.has(ce)||this.normalizedNames.set(ce,te)}init(){this.lazyInit&&(this.lazyInit instanceof Ue?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(te=>this.applyUpdate(te)),this.lazyUpdate=null))}copyFrom(te){te.init(),Array.from(te.headers.keys()).forEach(ce=>{this.headers.set(ce,te.headers.get(ce)),this.normalizedNames.set(ce,te.normalizedNames.get(ce))})}clone(te){const ce=new Ue;return ce.lazyInit=this.lazyInit&&this.lazyInit instanceof Ue?this.lazyInit:this,ce.lazyUpdate=(this.lazyUpdate||[]).concat([te]),ce}applyUpdate(te){const ce=te.name.toLowerCase();switch(te.op){case"a":case"s":let Q=te.value;if("string"==typeof Q&&(Q=[Q]),0===Q.length)return;this.maybeSetNormalizedName(te.name,ce);const K=("a"===te.op?this.headers.get(ce):void 0)||[];K.push(...Q),this.headers.set(ce,K);break;case"d":const _e=te.value;if(_e){let xe=this.headers.get(ce);if(!xe)return;xe=xe.filter(at=>-1===_e.indexOf(at)),0===xe.length?(this.headers.delete(ce),this.normalizedNames.delete(ce)):this.headers.set(ce,xe)}else this.headers.delete(ce),this.normalizedNames.delete(ce)}}setHeaderEntries(te,ce){const Q=(Array.isArray(ce)?ce:[ce]).map(_e=>_e.toString()),K=te.toLowerCase();this.headers.set(K,Q),this.maybeSetNormalizedName(te,K)}forEach(te){this.init(),Array.from(this.normalizedNames.keys()).forEach(ce=>te(this.normalizedNames.get(ce),this.headers.get(ce)))}}class tt{encodeKey(te){return wt(te)}encodeValue(te){return wt(te)}decodeKey(te){return decodeURIComponent(te)}decodeValue(te){return decodeURIComponent(te)}}const st=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wt(ye){return encodeURIComponent(ye).replace(st,(te,ce)=>Xe[ce]??te)}function ht(ye){return`${ye}`}class pe{constructor(te={}){if(this.updates=null,this.cloneFrom=null,this.encoder=te.encoder||new tt,te.fromString){if(te.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qe(ye,te){const ce=new Map;return ye.length>0&&ye.replace(/^\?/,"").split("&").forEach(K=>{const _e=K.indexOf("="),[xe,at]=-1==_e?[te.decodeKey(K),""]:[te.decodeKey(K.slice(0,_e)),te.decodeValue(K.slice(_e+1))],Ze=ce.get(xe)||[];Ze.push(at),ce.set(xe,Ze)}),ce}(te.fromString,this.encoder)}else te.fromObject?(this.map=new Map,Object.keys(te.fromObject).forEach(ce=>{const Q=te.fromObject[ce],K=Array.isArray(Q)?Q.map(ht):[ht(Q)];this.map.set(ce,K)})):this.map=null}has(te){return this.init(),this.map.has(te)}get(te){this.init();const ce=this.map.get(te);return ce?ce[0]:null}getAll(te){return this.init(),this.map.get(te)||null}keys(){return this.init(),Array.from(this.map.keys())}append(te,ce){return this.clone({param:te,value:ce,op:"a"})}appendAll(te){const ce=[];return Object.keys(te).forEach(Q=>{const K=te[Q];Array.isArray(K)?K.forEach(_e=>{ce.push({param:Q,value:_e,op:"a"})}):ce.push({param:Q,value:K,op:"a"})}),this.clone(ce)}set(te,ce){return this.clone({param:te,value:ce,op:"s"})}delete(te,ce){return this.clone({param:te,value:ce,op:"d"})}toString(){return this.init(),this.keys().map(te=>{const ce=this.encoder.encodeKey(te);return this.map.get(te).map(Q=>ce+"="+this.encoder.encodeValue(Q)).join("&")}).filter(te=>""!==te).join("&")}clone(te){const ce=new pe({encoder:this.encoder});return ce.cloneFrom=this.cloneFrom||this,ce.updates=(this.updates||[]).concat(te),ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(te=>this.map.set(te,this.cloneFrom.map.get(te))),this.updates.forEach(te=>{switch(te.op){case"a":case"s":const ce=("a"===te.op?this.map.get(te.param):void 0)||[];ce.push(ht(te.value)),this.map.set(te.param,ce);break;case"d":if(void 0===te.value){this.map.delete(te.param);break}{let Q=this.map.get(te.param)||[];const K=Q.indexOf(ht(te.value));-1!==K&&Q.splice(K,1),Q.length>0?this.map.set(te.param,Q):this.map.delete(te.param)}}}),this.cloneFrom=this.updates=null)}}class ve{constructor(){this.map=new Map}set(te,ce){return this.map.set(te,ce),this}get(te){return this.map.has(te)||this.map.set(te,te.defaultValue()),this.map.get(te)}delete(te){return this.map.delete(te),this}has(te){return this.map.has(te)}keys(){return this.map.keys()}}function We(ye){return typeof ArrayBuffer<"u"&&ye instanceof ArrayBuffer}function se(ye){return typeof Blob<"u"&&ye instanceof Blob}function Te(ye){return typeof FormData<"u"&&ye instanceof FormData}class Tt{constructor(te,ce,Q,K){let _e;if(this.url=ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=te.toUpperCase(),function He(ye){switch(ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||K?(this.body=void 0!==Q?Q:null,_e=K):_e=Q,_e&&(this.reportProgress=!!_e.reportProgress,this.withCredentials=!!_e.withCredentials,_e.responseType&&(this.responseType=_e.responseType),_e.headers&&(this.headers=_e.headers),_e.context&&(this.context=_e.context),_e.params&&(this.params=_e.params)),this.headers||(this.headers=new Ue),this.context||(this.context=new ve),this.params){const xe=this.params.toString();if(0===xe.length)this.urlWithParams=ce;else{const at=ce.indexOf("?");this.urlWithParams=ce+(-1===at?"?":at<ce.length-1?"&":"")+xe}}else this.params=new pe,this.urlWithParams=ce}serializeBody(){return null===this.body?null:We(this.body)||se(this.body)||Te(this.body)||function xt(ye){return typeof URLSearchParams<"u"&&ye instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Te(this.body)?null:se(this.body)?this.body.type||null:We(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(te={}){const ce=te.method||this.method,Q=te.url||this.url,K=te.responseType||this.responseType,_e=void 0!==te.body?te.body:this.body,xe=void 0!==te.withCredentials?te.withCredentials:this.withCredentials,at=void 0!==te.reportProgress?te.reportProgress:this.reportProgress;let Ze=te.headers||this.headers,Ut=te.params||this.params;const Nn=te.context??this.context;return void 0!==te.setHeaders&&(Ze=Object.keys(te.setHeaders).reduce((an,Kn)=>an.set(Kn,te.setHeaders[Kn]),Ze)),te.setParams&&(Ut=Object.keys(te.setParams).reduce((an,Kn)=>an.set(Kn,te.setParams[Kn]),Ut)),new Tt(ce,Q,_e,{params:Ut,headers:Ze,context:Nn,reportProgress:at,responseType:K,withCredentials:xe})}}var Dt=function(ye){return ye[ye.Sent=0]="Sent",ye[ye.UploadProgress=1]="UploadProgress",ye[ye.ResponseHeader=2]="ResponseHeader",ye[ye.DownloadProgress=3]="DownloadProgress",ye[ye.Response=4]="Response",ye[ye.User=5]="User",ye}(Dt||{});class Qt{constructor(te,ce=200,Q="OK"){this.headers=te.headers||new Ue,this.status=void 0!==te.status?te.status:ce,this.statusText=te.statusText||Q,this.url=te.url||null,this.ok=this.status>=200&&this.status<300}}class on extends Qt{constructor(te={}){super(te),this.type=Dt.ResponseHeader}clone(te={}){return new on({headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class Qe extends Qt{constructor(te={}){super(te),this.type=Dt.Response,this.body=void 0!==te.body?te.body:null}clone(te={}){return new Qe({body:void 0!==te.body?te.body:this.body,headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class lt extends Qt{constructor(te){super(te,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${te.url||"(unknown url)"}`:`Http failure response for ${te.url||"(unknown url)"}: ${te.status} ${te.statusText}`,this.error=te.error||null}}function Be(ye,te){return{body:te,headers:ye.headers,context:ye.context,observe:ye.observe,params:ye.params,reportProgress:ye.reportProgress,responseType:ye.responseType,withCredentials:ye.withCredentials}}let ie=(()=>{class ye{constructor(ce){this.handler=ce}request(ce,Q,K={}){let _e;if(ce instanceof Tt)_e=ce;else{let Ze,Ut;Ze=K.headers instanceof Ue?K.headers:new Ue(K.headers),K.params&&(Ut=K.params instanceof pe?K.params:new pe({fromObject:K.params})),_e=new Tt(ce,Q,void 0!==K.body?K.body:null,{headers:Ze,context:K.context,params:Ut,reportProgress:K.reportProgress,responseType:K.responseType||"json",withCredentials:K.withCredentials})}const xe=(0,ne.of)(_e).pipe((0,le.b)(Ze=>this.handler.handle(Ze)));if(ce instanceof Tt||"events"===K.observe)return xe;const at=xe.pipe((0,ae.h)(Ze=>Ze instanceof Qe));switch(K.observe||"body"){case"body":switch(_e.responseType){case"arraybuffer":return at.pipe((0,me.U)(Ze=>{if(null!==Ze.body&&!(Ze.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ze.body}));case"blob":return at.pipe((0,me.U)(Ze=>{if(null!==Ze.body&&!(Ze.body instanceof Blob))throw new Error("Response is not a Blob.");return Ze.body}));case"text":return at.pipe((0,me.U)(Ze=>{if(null!==Ze.body&&"string"!=typeof Ze.body)throw new Error("Response is not a string.");return Ze.body}));default:return at.pipe((0,me.U)(Ze=>Ze.body))}case"response":return at;default:throw new Error(`Unreachable: unhandled observe type ${K.observe}}`)}}delete(ce,Q={}){return this.request("DELETE",ce,Q)}get(ce,Q={}){return this.request("GET",ce,Q)}head(ce,Q={}){return this.request("HEAD",ce,Q)}jsonp(ce,Q){return this.request("JSONP",ce,{params:(new pe).append(Q,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ce,Q={}){return this.request("OPTIONS",ce,Q)}patch(ce,Q,K={}){return this.request("PATCH",ce,Be(K,Q))}post(ce,Q,K={}){return this.request("POST",ce,Be(K,Q))}put(ce,Q,K={}){return this.request("PUT",ce,Be(K,Q))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(J))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();function Rn(ye,te){return te(ye)}function dt(ye,te){return(ce,Q)=>te.intercept(ce,{handle:K=>ye(K,Q)})}const jt=new y.OlP(""),yn=new y.OlP(""),Dn=new y.OlP("");function fn(){let ye=null;return(te,ce)=>{null===ye&&(ye=((0,y.f3M)(jt,{optional:!0})??[]).reduceRight(dt,Rn));const Q=(0,y.f3M)(y.HDt),K=Q.add();return ye(te,ce).pipe((0,Le.x)(()=>Q.remove(K)))}}let $t=(()=>{class ye extends J{constructor(ce,Q){super(),this.backend=ce,this.injector=Q,this.chain=null,this.pendingTasks=(0,y.f3M)(y.HDt)}handle(ce){if(null===this.chain){const K=Array.from(new Set([...this.injector.get(yn),...this.injector.get(Dn,[])]));this.chain=K.reduceRight((_e,xe)=>function Zt(ye,te,ce){return(Q,K)=>ce.runInContext(()=>te(Q,_e=>ye(_e,K)))}(_e,xe,this.injector),Rn)}const Q=this.pendingTasks.add();return this.chain(ce,K=>this.backend.handle(K)).pipe((0,Le.x)(()=>this.pendingTasks.remove(Q)))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(he),y.LFG(y.lqb))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();const Kr=/^\)\]\}',?\n/;let vn=(()=>{class ye{constructor(ce){this.xhrFactory=ce}handle(ce){if("JSONP"===ce.method)throw new y.vHH(-2800,!1);const Q=this.xhrFactory;return(Q.\u0275loadImpl?(0,z.D)(Q.\u0275loadImpl()):(0,ne.of)(null)).pipe((0,De.w)(()=>new fe.y(_e=>{const xe=Q.build();if(xe.open(ce.method,ce.urlWithParams),ce.withCredentials&&(xe.withCredentials=!0),ce.headers.forEach((Pn,Vn)=>xe.setRequestHeader(Pn,Vn.join(","))),ce.headers.has("Accept")||xe.setRequestHeader("Accept","application/json, text/plain, */*"),!ce.headers.has("Content-Type")){const Pn=ce.detectContentTypeHeader();null!==Pn&&xe.setRequestHeader("Content-Type",Pn)}if(ce.responseType){const Pn=ce.responseType.toLowerCase();xe.responseType="json"!==Pn?Pn:"text"}const at=ce.serializeBody();let Ze=null;const Ut=()=>{if(null!==Ze)return Ze;const Pn=xe.statusText||"OK",Vn=new Ue(xe.getAllResponseHeaders()),ci=function Dr(ye){return"responseURL"in ye&&ye.responseURL?ye.responseURL:/^X-Request-URL:/m.test(ye.getAllResponseHeaders())?ye.getResponseHeader("X-Request-URL"):null}(xe)||ce.url;return Ze=new on({headers:Vn,status:xe.status,statusText:Pn,url:ci}),Ze},Nn=()=>{let{headers:Pn,status:Vn,statusText:ci,url:Bs}=Ut(),yr=null;204!==Vn&&(yr=typeof xe.response>"u"?xe.responseText:xe.response),0===Vn&&(Vn=yr?200:0);let pn=Vn>=200&&Vn<300;if("json"===ce.responseType&&"string"==typeof yr){const Xi=yr;yr=yr.replace(Kr,"");try{yr=""!==yr?JSON.parse(yr):null}catch(_i){yr=Xi,pn&&(pn=!1,yr={error:_i,text:yr})}}pn?(_e.next(new Qe({body:yr,headers:Pn,status:Vn,statusText:ci,url:Bs||void 0})),_e.complete()):_e.error(new lt({error:yr,headers:Pn,status:Vn,statusText:ci,url:Bs||void 0}))},an=Pn=>{const{url:Vn}=Ut(),ci=new lt({error:Pn,status:xe.status||0,statusText:xe.statusText||"Unknown Error",url:Vn||void 0});_e.error(ci)};let Kn=!1;const Sr=Pn=>{Kn||(_e.next(Ut()),Kn=!0);let Vn={type:Dt.DownloadProgress,loaded:Pn.loaded};Pn.lengthComputable&&(Vn.total=Pn.total),"text"===ce.responseType&&xe.responseText&&(Vn.partialText=xe.responseText),_e.next(Vn)},kr=Pn=>{let Vn={type:Dt.UploadProgress,loaded:Pn.loaded};Pn.lengthComputable&&(Vn.total=Pn.total),_e.next(Vn)};return xe.addEventListener("load",Nn),xe.addEventListener("error",an),xe.addEventListener("timeout",an),xe.addEventListener("abort",an),ce.reportProgress&&(xe.addEventListener("progress",Sr),null!==at&&xe.upload&&xe.upload.addEventListener("progress",kr)),xe.send(at),_e.next({type:Dt.Sent}),()=>{xe.removeEventListener("error",an),xe.removeEventListener("abort",an),xe.removeEventListener("load",Nn),xe.removeEventListener("timeout",an),ce.reportProgress&&(xe.removeEventListener("progress",Sr),null!==at&&xe.upload&&xe.upload.removeEventListener("progress",kr)),xe.readyState!==xe.DONE&&xe.abort()}})))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(W.JF))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();const qn=new y.OlP("XSRF_ENABLED"),Et=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Gt=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class cr{}let qt=(()=>{class ye{constructor(ce,Q,K){this.doc=ce,this.platform=Q,this.cookieName=K,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ce=this.doc.cookie||"";return ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,W.Mx)(ce,this.cookieName),this.lastCookieString=ce),this.lastToken}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(W.K0),y.LFG(y.Lbi),y.LFG(Et))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();function Ai(ye,te){const ce=ye.url.toLowerCase();if(!(0,y.f3M)(qn)||"GET"===ye.method||"HEAD"===ye.method||ce.startsWith("http://")||ce.startsWith("https://"))return te(ye);const Q=(0,y.f3M)(cr).getToken(),K=(0,y.f3M)(Gt);return null!=Q&&!ye.headers.has(K)&&(ye=ye.clone({headers:ye.headers.set(K,Q)})),te(ye)}var fr=function(ye){return ye[ye.Interceptors=0]="Interceptors",ye[ye.LegacyInterceptors=1]="LegacyInterceptors",ye[ye.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ye[ye.NoXsrfProtection=3]="NoXsrfProtection",ye[ye.JsonpSupport=4]="JsonpSupport",ye[ye.RequestsMadeViaParent=5]="RequestsMadeViaParent",ye[ye.Fetch=6]="Fetch",ye}(fr||{});function Ar(...ye){const te=[ie,vn,$t,{provide:J,useExisting:$t},{provide:he,useExisting:vn},{provide:yn,useValue:Ai,multi:!0},{provide:qn,useValue:!0},{provide:cr,useClass:qt}];for(const ce of ye)te.push(...ce.\u0275providers);return(0,y.MR2)(te)}const Bi=new y.OlP("LEGACY_INTERCEPTOR_FN");function ai(){return function Cr(ye,te){return{\u0275kind:ye,\u0275providers:te}}(fr.LegacyInterceptors,[{provide:Bi,useFactory:fn},{provide:yn,useExisting:Bi,multi:!0}])}let H=(()=>{class ye{static#e=this.\u0275fac=function(Q){return new(Q||ye)};static#t=this.\u0275mod=y.oAB({type:ye});static#n=this.\u0275inj=y.cJS({providers:[Ar(ai())]})}return ye})()},5879:(_t,Ne,O)=>{O.d(Ne,{$8M:()=>Js,$WT:()=>Rs,$Z:()=>mp,AFp:()=>Td,ALo:()=>Y0,AaK:()=>he,CHM:()=>Pl,CRH:()=>hw,EJc:()=>NC,EpF:()=>Gm,F4k:()=>jy,FYo:()=>Jf,FiY:()=>tc,GfV:()=>Xf,Gpc:()=>tt,HDt:()=>Ow,JOm:()=>jc,KtG:()=>nu,LFG:()=>Ot,Lbi:()=>Ah,Lck:()=>mD,MMx:()=>V0,MR2:()=>Vg,NdJ:()=>qp,Ojb:()=>jv,OlP:()=>Et,Oqu:()=>tg,P3R:()=>Jc,PXZ:()=>uA,Q6J:()=>Oy,QGY:()=>Wm,Qsj:()=>Gv,R0b:()=>Li,RDi:()=>D_,Rgc:()=>f_,SBq:()=>Ph,Sil:()=>LC,Suo:()=>dw,TTD:()=>rn,TgZ:()=>Po,VuI:()=>zA,X6Q:()=>mA,XFs:()=>bt,Xpm:()=>co,Xq5:()=>by,Xts:()=>wh,Y36:()=>Md,YKP:()=>L0,YNc:()=>$m,Yjl:()=>Fo,Yz7:()=>jt,Z0I:()=>$t,ZZ4:()=>NI,_Bn:()=>k0,_UZ:()=>Ua,_c5:()=>xA,_uU:()=>uv,aQg:()=>OI,c2e:()=>Nw,cJS:()=>Dn,cg1:()=>eI,dDg:()=>iA,dqk:()=>vn,eFA:()=>zw,eJc:()=>_I,ekj:()=>qd,eoX:()=>Bw,f3M:()=>Ct,g9A:()=>Uf,h0i:()=>Yh,hGG:()=>NA,hij:()=>ng,iGM:()=>lw,ifc:()=>xe,ip1:()=>xw,jDz:()=>U0,kL8:()=>a0,lG2:()=>gs,lcZ:()=>J0,lqb:()=>La,lri:()=>Vw,n5z:()=>lu,oAB:()=>$s,oxw:()=>zy,q4F:()=>ul,qFp:()=>WA,qLn:()=>oo,qOj:()=>Vd,qZA:()=>_c,rWj:()=>Uw,rg0:()=>Pe,s9C:()=>Gy,sBO:()=>_A,s_b:()=>Iv,soG:()=>Tv,tb:()=>SI,tp0:()=>fu,uIk:()=>Mu,vHH:()=>pe,vpe:()=>Fa,wAp:()=>sg,xp6:()=>cy,z2F:()=>cg,zSh:()=>$g,zs3:()=>so});var y=O(8645),ne=O(7394),z=O(5592),fe=O(3019),le=O(5619),ae=O(2096),me=O(3020),Le=O(4664),De=O(3997);function W(t){for(let r in t)if(t[r]===W)return r;throw Error("Could not find renamed property on target object.")}function J(t,r){for(const o in r)r.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=r[o])}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ue(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const je=W({__forward_ref__:W});function tt(t){return t.__forward_ref__=tt,t.toString=function(){return he(this())},t}function qe(t){return st(t)?t():t}function st(t){return"function"==typeof t&&t.hasOwnProperty(je)&&t.__forward_ref__===tt}function Xe(t){return t&&!!t.\u0275providers}const ht="https://g.co/ng/security#xss";class pe extends Error{constructor(r,o){super(function Ve(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,o)),this.code=r}}function ve(t){return"string"==typeof t?t:null==t?"":String(t)}function xt(t,r){throw new pe(-201,!1)}function ot(t,r){null==t&&function Je(t,r,o,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function jt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function fn(t){return St(t,mn)||St(t,ii)}function $t(t){return null!==fn(t)}function St(t,r){return t.hasOwnProperty(r)?t[r]:null}function ur(t){return t&&(t.hasOwnProperty(ri)||t.hasOwnProperty(Qn))?t[ri]:null}const mn=W({\u0275prov:W}),ri=W({\u0275inj:W}),ii=W({ngInjectableDef:W}),Qn=W({ngInjectorDef:W});var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(bt||{});let Yt;function Hn(t){const r=Yt;return Yt=t,r}function Kr(t,r,o){const a=fn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&bt.Optional?null:void 0!==r?r:void xt(he(t))}const vn=globalThis;class Et{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=jt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ai={},ui="__NG_DI_FLAG__",Mi="ngTempTokenPath",j=/\n/gm,B="__source";let H;function $e(t){const r=H;return H=t,r}function it(t,r=bt.Default){if(void 0===H)throw new pe(-203,!1);return null===H?Kr(t,void 0,r):H.get(t,r&bt.Optional?null:void 0,r)}function Ot(t,r=bt.Default){return(function Nt(){return Yt}()||it)(qe(t),r)}function Ct(t,r=bt.Default){return Ot(t,Vt(r))}function Vt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yn(t){const r=[];for(let o=0;o<t.length;o++){const a=qe(t[o]);if(Array.isArray(a)){if(0===a.length)throw new pe(900,!1);let c,h=bt.Default;for(let m=0;m<a.length;m++){const I=a[m],A=te(I);"number"==typeof A?-1===A?c=I.token:h|=A:c=I}r.push(Ot(c,h))}else r.push(Ot(a))}return r}function ye(t,r){return t[ui]=r,t.prototype[ui]=r,t}function te(t){return t[ui]}function K(t){return{toString:t}.toString()}var _e=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_e||{}),xe=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xe||{});const at={},Ze=[],Ut=W({\u0275cmp:W}),Nn=W({\u0275dir:W}),an=W({\u0275pipe:W}),Kn=W({\u0275mod:W}),Sr=W({\u0275fac:W}),kr=W({__NG_ELEMENT_ID__:W}),Pn=W({__NG_ENV_ID__:W});function Vn(t,r,o){let a=t.length;for(;;){const c=t.indexOf(r,o);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const h=r.length;if(c+h===a||t.charCodeAt(c+h)<=32)return c}o=c+1}}function ci(t,r,o){let a=0;for(;a<o.length;){const c=o[a];if("number"==typeof c){if(0!==c)break;a++;const h=o[a++],m=o[a++],I=o[a++];t.setAttribute(r,m,I,h)}else{const h=c,m=o[++a];yr(h)?t.setProperty(r,h,m):t.setAttribute(r,h,m),a++}}return a}function Bs(t){return 3===t||4===t||6===t}function yr(t){return 64===t.charCodeAt(0)}function pn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?o=c:0===o||Xi(t,o,c,null,-1===o||2===o?r[++a]:null)}}return t}function Xi(t,r,o,a,c){let h=0,m=t.length;if(-1===r)m=-1;else for(;h<t.length;){const I=t[h++];if("number"==typeof I){if(I===r){m=-1;break}if(I>r){m=h-1;break}}}for(;h<t.length;){const I=t[h];if("number"==typeof I)break;if(I===o){if(null===a)return void(null!==c&&(t[h+1]=c));if(a===t[h+1])return void(t[h+2]=c)}h++,null!==a&&h++,null!==c&&h++}-1!==m&&(t.splice(m,0,r),h=m+1),t.splice(h++,0,o),null!==a&&t.splice(h++,0,a),null!==c&&t.splice(h++,0,c)}const _i="ng-template";function Lu(t,r,o){let a=0,c=!0;for(;a<t.length;){let h=t[a++];if("string"==typeof h&&c){const m=t[a++];if(o&&"class"===h&&-1!==Vn(m.toLowerCase(),r,0))return!0}else{if(1===h){for(;a<t.length&&"string"==typeof(h=t[a++]);)if(h.toLowerCase()===r)return!0;return!1}"number"==typeof h&&(c=!1)}}return!1}function ji(t){return 4===t.type&&t.value!==_i}function $a(t,r,o){return r===(4!==t.type||o?t.value:_i)}function Oo(t,r,o){let a=4;const c=t.attrs||[],h=function di(t){for(let r=0;r<t.length;r++)if(Bs(t[r]))return r;return t.length}(c);let m=!1;for(let I=0;I<r.length;I++){const A=r[I];if("number"!=typeof A){if(!m)if(4&a){if(a=2|1&a,""!==A&&!$a(t,A,o)||""===A&&1===r.length){if(li(a))return!1;m=!0}}else{const M=8&a?A:r[++I];if(8&a&&null!==t.attrs){if(!Lu(t.attrs,M,o)){if(li(a))return!1;m=!0}continue}const q=ps(8&a?"class":A,c,ji(t),o);if(-1===q){if(li(a))return!1;m=!0;continue}if(""!==M){let de;de=q>h?"":c[q+1].toLowerCase();const we=8&a?de:null;if(we&&-1!==Vn(we,M,0)||2&a&&M!==de){if(li(a))return!1;m=!0}}}}else{if(!m&&!li(a)&&!li(A))return!1;if(m&&li(A))continue;m=!1,a=A|1&a}}return li(a)||m}function li(t){return 0==(1&t)}function ps(t,r,o,a){if(null===r)return-1;let c=0;if(a||!o){let h=!1;for(;c<r.length;){const m=r[c];if(m===t)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let I=r[++c];for(;"string"==typeof I;)I=r[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function ko(t,r){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const a=t[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,t)}function $i(t,r,o=!1){for(let a=0;a<r.length;a++)if(Oo(t,r[a],o))return!0;return!1}function yi(t,r){return t?":not("+r.trim()+")":r}function oa(t){let r=t[0],o=1,a=2,c="",h=!1;for(;o<t.length;){let m=t[o];if("string"==typeof m)if(2&a){const I=t[++o];c+="["+m+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?c+="."+m:4&a&&(c+=" "+m);else""!==c&&!li(m)&&(r+=yi(h,c),c=""),a=m,h=h||!li(a);o++}return""!==c&&(r+=yi(h,c)),r}function co(t){return K(()=>{const r=lo(t),o={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_e.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xe.Emulated,styles:t.styles||Ze,_:null,schemas:t.schemas||null,tView:null,id:""};Hi(o);const a=t.dependencies;return o.directiveDefs=Hs(a,!1),o.pipeDefs=Hs(a,!0),o.id=function Gi(t){let r=0;const o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of o)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(o),o})}function Qr(t){return ln(t)||lr(t)}function za(t){return null!==t}function $s(t){return K(()=>({type:t.type,bootstrap:t.bootstrap||Ze,declarations:t.declarations||Ze,imports:t.imports||Ze,exports:t.exports||Ze,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ga(t,r){if(null==t)return at;const o={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=a,r&&(r[c]=h)}return o}function gs(t){return K(()=>{const r=lo(t);return Hi(r),r})}function Fo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ln(t){return t[Ut]||null}function lr(t){return t[Nn]||null}function Lr(t){return t[an]||null}function Rs(t){const r=ln(t)||lr(t)||Lr(t);return null!==r&&r.standalone}function vr(t,r){const o=t[Kn]||null;if(!o&&!0===r)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return o}function lo(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||at,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ze,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ga(t.inputs,r),outputs:Ga(t.outputs)}}function Hi(t){t.features?.forEach(r=>r(t))}function Hs(t,r){if(!t)return null;const o=r?Lr:Qr;return()=>("function"==typeof t?t():t).map(a=>o(a)).filter(za)}const zn=0,mt=1,Kt=2,Mn=3,Hr=4,ua=5,tr=6,Ps=7,Fn=8,Si=9,Yr=10,Ht=11,Ms=12,ho=13,zr=14,nr=15,ca=16,Jn=17,Fr=18,es=19,fo=20,xi=21,Cn=22,Ni=23,ms=24,tn=25,_s=1,la=2,ys=7,Vo=9,On=11;function pr(t){return Array.isArray(t)&&"object"==typeof t[_s]}function Gn(t){return Array.isArray(t)&&!0===t[_s]}function vs(t){return 0!=(4&t.flags)}function Wi(t){return t.componentOffset>-1}function Uu(t){return 1==(1&t.flags)}function Gr(t){return!!t.template}function Wa(t){return 0!=(512&t[Kt])}function Es(t,r){return t.hasOwnProperty(Sr)?t[Sr]:null}let Er=null,yo=!1;function rr(t){const r=Er;return Er=t,r}const Hu={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Gs(t){if(!qi(t)||t.dirty){if(!t.producerMustRecompute(t)&&!zu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function rs(t){t.dirty=!0,function ns(t){if(void 0===t.liveConsumerNode)return;const r=yo;yo=!0;try{for(const o of t.liveConsumerNode)o.dirty||rs(o)}finally{yo=r}}(t),t.consumerMarkedDirty?.(t)}function Ws(t){return t&&(t.nextProducerIndex=0),rr(t)}function qs(t,r){if(rr(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(qi(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)Eo(t.producerNode[o],t.producerIndexOfThis[o]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zu(t){ws(t);for(let r=0;r<t.producerNode.length;r++){const o=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==o.version||(Gs(o),a!==o.version))return!0}return!1}function vo(t){if(ws(t),qi(t))for(let r=0;r<t.producerNode.length;r++)Eo(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Eo(t,r){if(function ga(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),ws(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Eo(t.producerNode[a],t.producerIndexOfThis[a]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];ws(c),c.producerIndexOfThis[a]=r}}function qi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ws(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Ks=null;function Pe(t){const r=rr(null);try{return t()}finally{rr(r)}}const At=()=>{},kn=(()=>({...Hu,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:At}))();class An{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function rn(){return Bn}function Bn(t){return t.type.prototype.ngOnChanges&&(t.setInput=gr),Ln}function Ln(){const t=hr(this),r=t?.current;if(r){const o=t.previous;if(o===at)t.previous=r;else for(let a in r)o[a]=r[a];t.current=null,this.ngOnChanges(r)}}function gr(t,r,o,a){const c=this.declaredInputs[o],h=hr(t)||function mr(t,r){return t[dr]=r}(t,{previous:at,current:null}),m=h.current||(h.current={}),I=h.previous,A=I[c];m[c]=new An(A&&A.currentValue,r,I===at),t[a]=r}rn.ngInherit=!0;const dr="__ngSimpleChanges__";function hr(t){return t[dr]||null}const br=function(t,r,o){};function jn(t){for(;Array.isArray(t);)t=t[zn];return t}function Go(t,r){return jn(r[t])}function Ei(t,r){return jn(r[t.index])}function Yd(t,r){return t.data[r]}function Rr(t,r){const o=r[t];return pr(o)?o:o[zn]}function Ri(t,r){return null==r?null:t[r]}function Zs(t){t[Jn]=0}function Mr(t){1024&t[Kt]||(t[Kt]|=1024,wo(t,1))}function va(t){1024&t[Kt]&&(t[Kt]&=-1025,wo(t,-1))}function wo(t,r){let o=t[Mn];if(null===o)return;o[ua]+=r;let a=o;for(o=o[Mn];null!==o&&(1===r&&1===a[ua]||-1===r&&0===a[ua]);)o[ua]+=r,a=o,o=o[Mn]}const Me={lFrame:U(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Rl(){return Me.bindingsEnabled}function Ke(){return Me.lFrame.lView}function Sn(){return Me.lFrame.tView}function Pl(t){return Me.lFrame.contextLView=t,t[Fn]}function nu(t){return Me.lFrame.contextLView=null,t}function fi(){let t=Br();for(;null!==t&&64===t.type;)t=t.parent;return t}function Br(){return Me.lFrame.currentTNode}function Ts(t,r){const o=Me.lFrame;o.currentTNode=t,o.isParent=r}function ru(){return Me.lFrame.isParent}function Ns(){return Me.lFrame.bindingIndex++}function Ac(t,r){const o=Me.lFrame;o.bindingIndex=o.bindingRootIndex=t,Ml(r)}function Ml(t){Me.lFrame.currentDirectiveIndex=t}function xl(){return Me.lFrame.currentQueryIndex}function E(t){Me.lFrame.currentQueryIndex=t}function C(t){const r=t[mt];return 2===r.type?r.declTNode:1===r.type?t[tr]:null}function v(t,r,o){if(o&bt.SkipSelf){let c=r,h=t;for(;!(c=c.parent,null!==c||o&bt.Host||(c=C(h),null===c||(h=h[zr],10&c.type))););if(null===c)return!1;r=c,t=h}const a=Me.lFrame=P();return a.currentTNode=r,a.lView=t,!0}function D(t){const r=P(),o=t[mt];Me.lFrame=r,r.currentTNode=o.firstChild,r.lView=t,r.tView=o,r.contextLView=t,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function P(){const t=Me.lFrame,r=null===t?null:t.child;return null===r?U(t):r}function U(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Y(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Re=Y;function Se(){const t=Y();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zt(){return Me.lFrame.selectedIndex}function gn(t){Me.lFrame.selectedIndex=t}function In(){const t=Me.lFrame;return Yd(t.tView,t.selectedIndex)}let ef=!0;function Nl(){return ef}function Xr(t){ef=t}function Ia(t,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const h=t.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:I,ngAfterViewInit:A,ngAfterViewChecked:M,ngOnDestroy:V}=h;m&&(t.contentHooks??=[]).push(-o,m),I&&((t.contentHooks??=[]).push(o,I),(t.contentCheckHooks??=[]).push(o,I)),A&&(t.viewHooks??=[]).push(-o,A),M&&((t.viewHooks??=[]).push(o,M),(t.viewCheckHooks??=[]).push(o,M)),null!=V&&(t.destroyHooks??=[]).push(o,V)}}function au(t,r,o){eh(t,r,3,o)}function pi(t,r,o,a){(3&t[Kt])===o&&eh(t,r,o,a)}function Sc(t,r){let o=t[Kt];(3&o)===r&&(o&=8191,o+=1,t[Kt]=o)}function eh(t,r,o,a){const h=a??-1,m=r.length-1;let I=0;for(let A=void 0!==a?65535&t[Jn]:0;A<m;A++)if("number"==typeof r[A+1]){if(I=r[A],null!=a&&I>=a)break}else r[A]<0&&(t[Jn]+=65536),(I<h||-1==h)&&(bc(t,o,r,A),t[Jn]=(4294901760&t[Jn])+A+2),A++}function Ds(t,r){br(4,t,r);const o=rr(null);try{r.call(t)}finally{rr(o),br(5,t,r)}}function bc(t,r,o,a){const c=o[a]<0,h=o[a+1],I=t[c?-o[a]:o[a]];c?t[Kt]>>13<t[Jn]>>16&&(3&t[Kt])===r&&(t[Kt]+=8192,Ds(I,h)):Ds(I,h)}const Ys=-1;class qu{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function kl(t){return t!==Ys}function Rc(t){return 32767&t}function uu(t,r){let o=function fg(t){return t>>16}(t),a=r;for(;o>0;)a=a[zr],o--;return a}let nh=!0;function Ku(t){const r=nh;return nh=t,r}const Pc=255,Ll=5;let rf=0;const Zi={};function Zu(t,r){const o=Mc(t,r);if(-1!==o)return o;const a=r[mt];a.firstCreatePass&&(t.injectorIndex=r.length,jr(a.data,t),jr(r,null),jr(a.blueprint,null));const c=Cs(t,r),h=t.injectorIndex;if(kl(c)){const m=Rc(c),I=uu(c,r),A=I[mt].data;for(let M=0;M<8;M++)r[h+M]=I[m+M]|A[m+M]}return r[h+8]=c,h}function jr(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Mc(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Cs(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,a=null,c=r;for(;null!==c;){if(a=Zo(c),null===a)return Ys;if(o++,c=c[zr],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return Ys}function Fl(t,r,o){!function pg(t,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(kr)&&(a=o[kr]),null==a&&(a=o[kr]=rf++);const c=a&Pc;r.data[t+(c>>Ll)]|=1<<c}(t,r,o)}function Qu(t,r,o){if(o&bt.Optional||void 0!==t)return t;xt()}function gi(t,r,o,a){if(o&bt.Optional&&void 0===a&&(a=null),!(o&(bt.Self|bt.Host))){const c=t[Si],h=Hn(void 0);try{return c?c.get(r,a,o&bt.Optional):Kr(r,a,o&bt.Optional)}finally{Hn(h)}}return Qu(a,0,o)}function er(t,r,o,a=bt.Default,c){if(null!==t){if(2048&r[Kt]&&!(a&bt.Self)){const m=function sh(t,r,o,a,c){let h=t,m=r;for(;null!==h&&null!==m&&2048&m[Kt]&&!(512&m[Kt]);){const I=rh(h,m,o,a|bt.Self,Zi);if(I!==Zi)return I;let A=h.parent;if(!A){const M=m[fo];if(M){const V=M.get(o,Zi,a);if(V!==Zi)return V}A=Zo(m),m=m[zr]}h=A}return c}(t,r,o,a,Zi);if(m!==Zi)return m}const h=rh(t,r,o,a,Zi);if(h!==Zi)return h}return gi(r,o,a,c)}function rh(t,r,o,a,c){const h=function ih(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(kr)?t[kr]:void 0;return"number"==typeof r?r>=0?r&Pc:cu:r}(o);if("function"==typeof h){if(!v(r,t,a))return a&bt.Host?Qu(c,0,a):gi(r,o,a,c);try{let m;if(m=h(a),null!=m||a&bt.Optional)return m;xt()}finally{Re()}}else if("number"==typeof h){let m=null,I=Mc(t,r),A=Ys,M=a&bt.Host?r[nr][tr]:null;for((-1===I||a&bt.SkipSelf)&&(A=-1===I?Cs(t,r):r[I+8],A!==Ys&&sf(a,!1)?(m=r[mt],I=Rc(A),r=uu(A,r)):I=-1);-1!==I;){const V=r[mt];if(ei(h,I,V.data)){const q=wa(I,r,o,m,a,M);if(q!==Zi)return q}A=r[I+8],A!==Ys&&sf(a,r[mt].data[I+8]===M)&&ei(h,I,r)?(m=V,I=Rc(A),r=uu(A,r)):I=-1}}return c}function wa(t,r,o,a,c,h){const m=r[mt],I=m.data[t+8],V=Pi(I,m,o,null==a?Wi(I)&&nh:a!=m&&0!=(3&I.type),c&bt.Host&&h===I);return null!==V?Ta(r,m,V,I):Zi}function Pi(t,r,o,a,c){const h=t.providerIndexes,m=r.data,I=1048575&h,A=t.directiveStart,V=h>>20,de=c?I+V:t.directiveEnd;for(let we=a?I:I+V;we<de;we++){const Ge=m[we];if(we<A&&o===Ge||we>=A&&Ge.type===o)return we}if(c){const we=m[A];if(we&&Gr(we)&&we.type===o)return A}return null}function Ta(t,r,o,a){let c=t[o];const h=r.data;if(function th(t){return t instanceof qu}(c)){const m=c;m.resolving&&function We(t,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new pe(-200,`Circular dependency in DI detected for ${t}${o}`)}(function He(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ve(t)}(h[o]));const I=Ku(m.canSeeViewProviders);m.resolving=!0;const M=m.injectImpl?Hn(m.injectImpl):null;v(t,a,bt.Default);try{c=t[o]=m.factory(void 0,h,t,a),r.firstCreatePass&&o>=a.directiveStart&&function ou(t,r,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:h}=r.type.prototype;if(a){const m=Bn(r);(o.preOrderHooks??=[]).push(t,m),(o.preOrderCheckHooks??=[]).push(t,m)}c&&(o.preOrderHooks??=[]).push(0-t,c),h&&((o.preOrderHooks??=[]).push(t,h),(o.preOrderCheckHooks??=[]).push(t,h))}(o,h[o],r)}finally{null!==M&&Hn(M),Ku(I),m.resolving=!1,Re()}}return c}function ei(t,r,o){return!!(o[r+(t>>Ll)]&1<<t)}function sf(t,r){return!(t&bt.Self||t&bt.Host&&r)}class Ir{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return er(this._tNode,this._lView,r,Vt(a),o)}}function cu(){return new Ir(fi(),Ke())}function lu(t){return K(()=>{const r=t.prototype.constructor,o=r[Sr]||Da(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const h=c[Sr]||Da(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Da(t){return st(t)?()=>{const r=Da(qe(t));return r&&r()}:Es(t)}function Zo(t){const r=t[mt],o=r.type;return 2===o?r.declTNode:1===o?t[tr]:null}function Js(t){return function sr(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const o=t.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const h=o[c];if(Bs(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(h===r)return o[c+1];c+=2}}}return null}(fi(),t)}const as="__parameters__";function hu(t,r,o){return K(()=>{const a=function ks(t){return function(...o){if(t){const a=t(...o);for(const c in a)this[c]=a[c]}}}(r);function c(...h){if(this instanceof c)return a.apply(this,h),this;const m=new c(...h);return I.annotation=m,I;function I(A,M,V){const q=A.hasOwnProperty(as)?A[as]:Object.defineProperty(A,as,{value:[]})[as];for(;q.length<=V;)q.push(null);return(q[V]=q[V]||[]).push(m),A}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function Yo(t,r){t.forEach(o=>Array.isArray(o)?Yo(o,r):r(o))}function _r(t,r,o){r>=t.length?t.push(o):t.splice(r,0,o)}function Xs(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Xt(t,r,o){let a=eo(t,r);return a>=0?t[1|a]=o:(a=~a,function df(t,r,o,a){let c=t.length;if(c==r)t.push(o,a);else if(1===c)t.push(a,t[0]),t[0]=o;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=o,t[r+1]=a}}(t,a,r,o)),a}function Wn(t,r){const o=eo(t,r);if(o>=0)return t[1|o]}function eo(t,r){return function ec(t,r,o){let a=0,c=t.length>>o;for(;c!==a;){const h=a+(c-a>>1),m=t[h<<o];if(r===m)return h<<o;m>r?c=h:a=h+1}return~(c<<o)}(t,r,1)}const tc=ye(hu("Optional"),8),fu=ye(hu("SkipSelf"),4);function Ql(t){return 128==(128&t.flags)}var jc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(jc||{});const Yl=new Map;let vu=0;const $c="__ngContext__";function ki(t,r){pr(r)?(t[$c]=r[es],function Xl(t){Yl.set(t[es],t)}(r)):t[$c]=r}let Di;function Tu(t,r){return Di(t,r)}function Hc(t){const r=t[Mn];return Gn(r)?r[Mn]:r}function rd(t){return zc(t[Ms])}function id(t){return zc(t[Hr])}function zc(t){for(;null!==t&&!Gn(t);)t=t[Hr];return t}function ea(t,r,o,a,c){if(null!=a){let h,m=!1;Gn(a)?h=a:pr(a)&&(m=!0,a=a[zn]);const I=jn(a);0===t&&null!==o?null==c?Ma(r,o,I):Fs(r,o,I,c||null,!0):1===t&&null!==o?Fs(r,o,I,c||null,!0):2===t?function Tf(t,r,o){const a=xa(t,r);a&&function If(t,r,o,a){t.removeChild(r,o,a)}(t,a,r,o)}(r,I,m):3===t&&r.destroyNode(I),null!=h&&function bg(t,r,o,a,c){const h=o[ys];h!==jn(o)&&ea(r,t,a,h,c);for(let I=On;I<o.length;I++){const A=o[I];Kc(A[mt],A,t,r,a,h)}}(r,t,h,o,c)}}function oc(t,r,o){return t.createElement(r,o)}function ee(t,r){const o=t[Vo],a=o.indexOf(r);va(r),o.splice(a,1)}function Ie(t,r){if(t.length<=On)return;const o=On+r,a=t[o];if(a){const c=a[ca];null!==c&&c!==t&&ee(c,a),r>0&&(t[o-1][Hr]=a[Hr]);const h=Xs(t,On+r);!function g(t,r){Kc(t,r,r[Ht],2,null,null),r[zn]=null,r[tr]=null}(a[mt],a);const m=h[Fr];null!==m&&m.detachView(h[mt]),a[Mn]=null,a[Hr]=null,a[Kt]&=-129}return a}function ze(t,r){if(!(256&r[Kt])){const o=r[Ht];r[Ni]&&vo(r[Ni]),r[ms]&&vo(r[ms]),o.destroyNode&&Kc(t,r,o,3,null,null),function _(t){let r=t[Ms];if(!r)return pt(t[mt],t);for(;r;){let o=null;if(pr(r))o=r[Ms];else{const a=r[On];a&&(o=a)}if(!o){for(;r&&!r[Hr]&&r!==t;)pr(r)&&pt(r[mt],r),r=r[Mn];null===r&&(r=t),pr(r)&&pt(r[mt],r),o=r&&r[Hr]}r=o}}(r)}}function pt(t,r){if(!(256&r[Kt])){r[Kt]&=-129,r[Kt]|=256,function Pt(t,r){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let a=0;a<o.length;a+=2){const c=r[o[a]];if(!(c instanceof qu)){const h=o[a+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const I=c[h[m]],A=h[m+1];br(4,I,A);try{A.call(I)}finally{br(5,I,A)}}else{br(4,c,h);try{h.call(c)}finally{br(5,c,h)}}}}}(t,r),function Rt(t,r){const o=t.cleanup,a=r[Ps];if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+3];m>=0?a[m]():a[-m].unsubscribe(),h+=2}else o[h].call(a[o[h+1]]);null!==a&&(r[Ps]=null);const c=r[xi];if(null!==c){r[xi]=null;for(let h=0;h<c.length;h++)(0,c[h])()}}(t,r),1===r[mt].type&&r[Ht].destroy();const o=r[ca];if(null!==o&&Gn(r[Mn])){o!==r[Mn]&&ee(o,r);const a=r[Fr];null!==a&&a.detachView(t)}!function Cg(t){Yl.delete(t[es])}(r)}}function wr(t,r,o){return function Ls(t,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[zn];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:h}=t.data[a.directiveStart+c];if(h===xe.None||h===xe.Emulated)return null}return Ei(a,o)}}(t,r.parent,o)}function Fs(t,r,o,a,c){t.insertBefore(r,o,a,c)}function Ma(t,r,o){t.appendChild(r,o)}function Gc(t,r,o,a,c){null!==a?Fs(t,r,o,a,c):Ma(t,r,o)}function xa(t,r){return t.parentNode(r)}let cd,ta,vh,Vs=function Na(t,r,o){return 40&t.type?Ei(t,o):null};function ac(t,r,o,a){const c=wr(t,a,r),h=r[Ht],I=function ud(t,r,o){return Vs(t,r,o)}(a.parent||r[tr],a,r);if(null!=c)if(Array.isArray(o))for(let A=0;A<o.length;A++)Gc(h,c,o[A],I,!1);else Gc(h,c,o,I,!1);void 0!==cd&&cd(h,a,r,o,c)}function ld(t,r){if(null!==r){const o=r.type;if(3&o)return Ei(r,t);if(4&o)return wf(-1,t[r.index]);if(8&o){const a=r.child;if(null!==a)return ld(t,a);{const c=t[r.index];return Gn(c)?wf(-1,c):jn(c)}}if(32&o)return Tu(r,t)()||jn(t[r.index]);{const a=Ag(t,r);return null!==a?Array.isArray(a)?a[0]:ld(Hc(t[nr]),a):ld(t,r.next)}}return null}function Ag(t,r){return null!==r?t[nr][tr].projection[r.projection]:null}function wf(t,r){const o=On+t+1;if(o<r.length){const a=r[o],c=a[mt].firstChild;if(null!==c)return ld(a,c)}return r[ys]}function qc(t,r,o,a,c,h,m){for(;null!=o;){const I=a[o.index],A=o.type;if(m&&0===r&&(I&&ki(jn(I),a),o.flags|=2),32!=(32&o.flags))if(8&A)qc(t,r,o.child,a,c,h,!1),ea(r,t,c,I,h);else if(32&A){const M=Tu(o,a);let V;for(;V=M();)ea(r,t,c,V,h);ea(r,t,c,I,h)}else 16&A?Sg(t,r,a,o,c,h):ea(r,t,c,I,h);o=m?o.projectionNext:o.next}}function Kc(t,r,o,a,c,h){qc(o,a,t.firstChild,r,c,h,!1)}function Sg(t,r,o,a,c,h){const m=o[nr],A=m[tr].projection[a.projection];if(Array.isArray(A))for(let M=0;M<A.length;M++)ea(r,t,c,A[M],h);else{let M=A;const V=m[Mn];Ql(a)&&(M.flags|=128),qc(t,r,M,V,c,h,!0)}}function Rg(t,r,o){""===o?t.removeAttribute(r,"class"):t.setAttribute(r,"class",o)}function I_(t,r,o){const{mergedAttrs:a,classes:c,styles:h}=o;null!==a&&ci(t,r,a),null!==c&&Rg(t,r,c),null!==h&&function Pv(t,r,o){t.setAttribute(r,"style",o)}(t,r,h)}function D_(t){ta=t}function lc(t){return function fd(){if(void 0===vh&&(vh=null,vn.trustedTypes))try{vh=vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vh}()?.createScriptURL(t)||t}class pd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function dc(t){return t instanceof pd?t.changingThisBreaksApplicationSecurity:t}function gd(t,r){const o=function b_(t){return t instanceof pd&&t.getTypeName()||null}(t);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${ht})`)}return o===r}const Zc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Qc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Qc||{});function Lg(t){const r=Id();return r?r.sanitize(Qc.URL,t)||"":gd(t,"URL")?dc(t):function Oa(t){return(t=String(t)).match(Zc)?t:"unsafe:"+t}(ve(t))}function Cu(t){const r=Id();if(r)return lc(r.sanitize(Qc.RESOURCE_URL,t)||"");if(gd(t,"ResourceURL"))return lc(dc(t));throw new pe(904,!1)}function Jc(t,r,o){return function Lv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Cu:Lg}(r,o)(t)}function Id(){const t=Ke();return t&&t[Yr].sanitizer}const wh=new Et("ENVIRONMENT_INITIALIZER"),Fg=new Et("INJECTOR",-1),L_=new Et("INJECTOR_DEF_TYPES");class Nf{get(r,o=ai){if(o===ai){const a=new Error(`NullInjectorError: No provider for ${he(r)}!`);throw a.name="NullInjectorError",a}return o}}function Vg(t){return{\u0275providers:t}}function Of(...t){return{\u0275providers:Ug(0,t),\u0275fromNgModule:!0}}function Ug(t,...r){const o=[],a=new Set;let c;const h=m=>{o.push(m)};return Yo(r,m=>{const I=m;Th(I,h,[],a)&&(c||=[],c.push(I))}),void 0!==c&&F_(c,h),o}function F_(t,r){for(let o=0;o<t.length;o++){const{ngModule:a,providers:c}=t[o];kf(c,h=>{r(h,a)})}}function Th(t,r,o,a){if(!(t=qe(t)))return!1;let c=null,h=ur(t);const m=!h&&ln(t);if(h||m){if(m&&!m.standalone)return!1;c=t}else{const A=t.ngModule;if(h=ur(A),!h)return!1;c=A}const I=a.has(c);if(m){if(I)return!1;if(a.add(c),m.dependencies){const A="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const M of A)Th(M,r,o,a)}}else{if(!h)return!1;{if(null!=h.imports&&!I){let M;a.add(c);try{Yo(h.imports,V=>{Th(V,r,o,a)&&(M||=[],M.push(V))})}finally{}void 0!==M&&F_(M,r)}if(!I){const M=Es(c)||(()=>new c);r({provide:c,useFactory:M,deps:Ze},c),r({provide:L_,useValue:c,multi:!0},c),r({provide:wh,useValue:()=>Ot(c),multi:!0},c)}const A=h.providers;if(null!=A&&!I){const M=t;kf(A,V=>{r(V,M)})}}}return c!==t&&void 0!==t.providers}function kf(t,r){for(let o of t)Xe(o)&&(o=o.\u0275providers),Array.isArray(o)?kf(o,r):r(o)}const el=W({provide:String,useValue:W});function tl(t){return null!==t&&"object"==typeof t&&el in t}function nl(t){return"function"==typeof t}const $g=new Et("Set Injector scope."),Lf={},Hg={};let Ci;function Ff(){return void 0===Ci&&(Ci=new Nf),Ci}class La{}class wd extends La{get destroyed(){return this._destroyed}constructor(r,o,a,c){super(),this.parent=o,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ch(r,m=>this.processProvider(m)),this.records.set(Fg,Au(void 0,this)),c.has("environment")&&this.records.set(La,Au(void 0,this));const h=this.records.get($g);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(L_.multi,Ze,bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const o=$e(this),a=Hn(void 0);try{return r()}finally{$e(o),Hn(a)}}get(r,o=ai,a=bt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Pn))return r[Pn](this);a=Vt(a);const h=$e(this),m=Hn(void 0);try{if(!(a&bt.SkipSelf)){let A=this.records.get(r);if(void 0===A){const M=function Wg(t){return"function"==typeof t||"object"==typeof t&&t instanceof Et}(r)&&fn(r);A=M&&this.injectableDefInScope(M)?Au(zg(r),Lf):null,this.records.set(r,A)}if(null!=A)return this.hydrate(r,A)}return(a&bt.Self?Ff():this.parent).get(r,o=a&bt.Optional&&o===ai?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[Mi]=I[Mi]||[]).unshift(he(r)),h)throw I;return function ce(t,r,o,a){const c=t[Mi];throw r[B]&&c.unshift(r[B]),t.message=function Q(t,r,o,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=he(r);if(Array.isArray(r))c=r.map(he).join(" -> ");else if("object"==typeof r){let h=[];for(let m in r)if(r.hasOwnProperty(m)){let I=r[m];h.push(m+":"+("string"==typeof I?JSON.stringify(I):he(I)))}c=`{${h.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${t.replace(j,"\n  ")}`}("\n"+t.message,c,o,a),t.ngTokenPath=c,t[Mi]=null,t}(I,r,"R3InjectorError",this.source)}throw I}finally{Hn(m),$e(h)}}resolveInjectorInitializers(){const r=$e(this),o=Hn(void 0);try{const c=this.get(wh.multi,Ze,bt.Self);for(const h of c)h()}finally{$e(r),Hn(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(he(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(r){let o=nl(r=qe(r))?r:qe(r&&r.provide);const a=function Vv(t){return tl(t)?Au(void 0,t.useValue):Au(Dh(t),Lf)}(r);if(nl(r)||!0!==r.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Au(void 0,Lf,!0),c.factory=()=>Yn(c.multi),this.records.set(o,c)),o=r,c.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===Lf&&(o.value=Hg,o.value=o.factory()),"object"==typeof o.value&&o.value&&function U_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=qe(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(r){const o=this._onDestroyHooks.indexOf(r);-1!==o&&this._onDestroyHooks.splice(o,1)}}function zg(t){const r=fn(t),o=null!==r?r.factory:Es(t);if(null!==o)return o;if(t instanceof Et)throw new pe(204,!1);if(t instanceof Function)return function Gg(t){const r=t.length;if(r>0)throw function Xu(t,r){const o=[];for(let a=0;a<t;a++)o.push(r);return o}(r,"?"),new pe(204,!1);const o=function en(t){return t&&(t[mn]||t[ii])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new pe(204,!1)}function Dh(t,r,o){let a;if(nl(t)){const c=qe(t);return Es(c)||zg(c)}if(tl(t))a=()=>qe(t.useValue);else if(function jg(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Yn(t.deps||[]));else if(function Bg(t){return!(!t||!t.useExisting)}(t))a=()=>Ot(qe(t.useExisting));else{const c=qe(t&&(t.useClass||t.provide));if(!function Uv(t){return!!t.deps}(t))return Es(c)||zg(c);a=()=>new c(...Yn(t.deps))}return a}function Au(t,r,o=!1){return{factory:t,value:r,multi:o?[]:void 0}}function Ch(t,r){for(const o of t)Array.isArray(o)?Ch(o,r):o&&Xe(o)?Ch(o.\u0275providers,r):r(o)}const Td=new Et("AppId",{providedIn:"root",factory:()=>Vf}),Vf="ng",Uf=new Et("Platform Initializer"),Ah=new Et("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jv=new Et("CSP nonce",{providedIn:"root",factory:()=>function hd(){if(void 0!==ta)return ta;if(typeof document<"u")return document;throw new pe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Zg=(t,r,o)=>null;function al(t,r,o=!1){return Zg(t,r,o)}class ls{}class q_{}class em{resolveComponentFactory(r){throw function K_(t){const r=Error(`No component factory found for ${he(t)}.`);return r.ngComponent=t,r}(r)}}let Rh=(()=>{class t{static#e=this.NULL=new em}return t})();function Hv(){return Cd(fi(),Ke())}function Cd(t,r){return new Ph(Ei(t,r))}let Ph=(()=>{class t{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=Hv}return t})();function zv(t){return t instanceof Ph?t.nativeElement:t}class Jf{}let Gv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Wv(){const t=Ke(),o=Rr(fi().index,t);return(pr(o)?o:t)[Ht]}()}return t})(),Mh=(()=>{class t{static#e=this.\u0275prov=jt({token:t,providedIn:"root",factory:()=>null})}return t})();class Xf{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const ul=new Xf("16.2.12"),xh={};function np(t,r=null,o=null,a){const c=Q_(t,r,o,a);return c.resolveInjectorInitializers(),c}function Q_(t,r=null,o=null,a,c=new Set){const h=[o||Ze,Of(t)];return a=a||("object"==typeof t?void 0:he(t)),new wd(h,r||Ff(),a||null,c)}let so=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ai;static#t=this.NULL=new Nf;static create(o,a){if(Array.isArray(o))return np({name:""},a,o,"");{const c=o.name??"";return np({name:c},o.parent,o.providers,c)}}static#n=this.\u0275prov=jt({token:t,providedIn:"any",factory:()=>Ot(Fg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function rp(t){return t.ngOriginalError}class oo{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&rp(r);for(;o&&rp(o);)o=rp(o);return o||null}}function ip(t){return r=>{setTimeout(t,void 0,r)}}const Fa=class J_ extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let c=r,h=o||(()=>null),m=a;if(r&&"object"==typeof r){const A=r;c=A.next?.bind(A),h=A.error?.bind(A),m=A.complete?.bind(A)}this.__isAsync&&(h=ip(h),c&&(c=ip(c)),m&&(m=ip(m)));const I=super.subscribe({next:c,error:h,complete:m});return r instanceof ne.w0&&r.add(I),I}};function sp(...t){}class Li{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fa(!1),this.onMicrotaskEmpty=new Fa(!1),this.onStable=new Fa(!1),this.onError=new Fa(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Zv(){const t="function"==typeof vn.requestAnimationFrame;let r=vn[t?"requestAnimationFrame":"setTimeout"],o=vn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&o){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ey(t){const r=()=>{!function am(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,kh(t),t.isCheckStableRunning=!0,om(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),kh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,h,m,I)=>{if(function Sd(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(I))return o.invokeTask(c,h,m,I);try{return op(t),o.invokeTask(c,h,m,I)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&r(),ap(t)}},onInvoke:(o,a,c,h,m,I,A)=>{try{return op(t),o.invoke(c,h,m,I,A)}finally{t.shouldCoalesceRunChangeDetection&&r(),ap(t)}},onHasTask:(o,a,c,h)=>{o.hasTask(c,h),a===c&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,kh(t),om(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,a,c,h)=>(o.handleError(c,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new pe(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,r,sm,sp,sp);try{return h.runTask(m,o,a)}finally{h.cancelTask(m)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const sm={};function om(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function op(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ap(t){t._nesting--,om(t)}class Ad{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fa,this.onMicrotaskEmpty=new Fa,this.onStable=new Fa,this.onError=new Fa}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,c){return r.apply(o,a)}}const Su=new Et("",{providedIn:"root",factory:up});function up(){const t=Ct(Li);let r=!0;const o=new z.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new z.y(c=>{let h;t.runOutsideAngular(()=>{h=t.onStable.subscribe(()=>{Li.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const m=t.onUnstable.subscribe(()=>{Li.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});return(0,fe.T)(o,a.pipe((0,me.B)()))}function bu(t){return t instanceof Function?t():t}let lm=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=jt({token:t,providedIn:"root",factory:()=>new t})}return t})();function dl(t){for(;t;){t[Kt]|=64;const r=Hc(t);if(Wa(t)&&!r)return t;t=r}return null}const dm=new Et("",{providedIn:"root",factory:()=>!1});let hp=null;function fp(t,r){return t[r]??pp()}function uy(t,r){const o=pp();o.producerNode?.length&&(t[r]=hp,o.lView=t,hp=pm())}const fm={...Hu,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{dl(t.lView)},lView:null};function pm(){return Object.create(fm)}function pp(){return hp??=pm(),hp}const dn={};function cy(t){gp(Sn(),Ke(),zt()+t,!1)}function gp(t,r,o,a){if(!a)if(3==(3&r[Kt])){const h=t.preOrderCheckHooks;null!==h&&au(r,h,o)}else{const h=t.preOrderHooks;null!==h&&pi(r,h,0,o)}gn(o)}function Md(t,r=bt.Default){const o=Ke();return null===o?Ot(t,r):er(fi(),o,qe(t),r)}function mp(){throw new Error("invalid")}function xd(t,r,o,a,c,h,m,I,A,M,V){const q=r.blueprint.slice();return q[zn]=c,q[Kt]=140|a,(null!==M||t&&2048&t[Kt])&&(q[Kt]|=2048),Zs(q),q[Mn]=q[zr]=t,q[Fn]=o,q[Yr]=m||t&&t[Yr],q[Ht]=I||t&&t[Ht],q[Si]=A||t&&t[Si]||null,q[tr]=h,q[es]=function Jl(){return vu++}(),q[Cn]=V,q[fo]=M,q[nr]=2==r.type?t[nr]:q,q}function Nd(t,r,o,a,c){let h=t.data[r];if(null===h)h=function Lh(t,r,o,a,c){const h=Br(),m=ru(),A=t.data[r]=function nE(t,r,o,a,c,h){let m=r?r.injectorIndex:-1,I=0;return function ut(){return null!==Me.skipHydrationRootTNode}()&&(I|=128),{type:o,index:a,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,r,a,c);return null===t.firstChild&&(t.firstChild=A),null!==h&&(m?null==h.child&&null!==A.parent&&(h.child=A):null===h.next&&(h.next=A,A.prev=h)),A}(t,r,o,a,c),function ft(){return Me.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=a,h.attrs=c;const m=function Wu(){const t=Me.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Ts(h,!0),h}function hl(t,r,o,a){if(0===o)return-1;const c=r.length;for(let h=0;h<o;h++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function _p(t,r,o,a,c){const h=fp(r,Ni),m=zt(),I=2&a;try{gn(-1),I&&r.length>tn&&gp(t,r,tn,!1),br(I?2:0,c);const M=I?h:null,V=Ws(M);try{null!==M&&(M.dirty=!1),o(a,c)}finally{qs(M,V)}}finally{I&&null===r[Ni]&&uy(r,Ni),gn(m),br(I?3:1,c)}}function mc(t,r,o){if(vs(r)){const a=rr(null);try{const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const I=t.data[m];I.contentQueries&&I.contentQueries(1,o[m],m)}}finally{rr(a)}}}function yp(t,r,o){Rl()&&(function Im(t,r,o,a){const c=o.directiveStart,h=o.directiveEnd;Wi(o)&&function gy(t,r,o){const a=Ei(r,t),c=ly(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const I=kd(t,xd(t,c,null,m,a,r,null,t[Yr].rendererFactory.createRenderer(a,o),null,null,null));t[r.index]=I}(r,o,t.data[c+o.componentOffset]),t.firstCreatePass||Zu(o,r),ki(a,r);const m=o.initialInputs;for(let I=c;I<h;I++){const A=t.data[I],M=Ta(r,t,I,o);ki(M,r),null!==m&&uE(0,I-c,M,A,0,m),Gr(A)&&(Rr(o.index,r)[Fn]=Ta(r,t,I,o))}}(t,r,o,Ei(o,r)),64==(64&o.flags)&&Ip(t,r,o))}function Fh(t,r,o=Ei){const a=r.localNames;if(null!==a){let c=r.index+1;for(let h=0;h<a.length;h+=2){const m=a[h+1],I=-1===m?o(r,t):t[m];t[c++]=I}}}function ly(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Vh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Vh(t,r,o,a,c,h,m,I,A,M,V){const q=tn+a,de=q+c,we=function Ru(t,r){const o=[];for(let a=0;a<r;a++)o.push(a<t?null:dn);return o}(q,de),Ge="function"==typeof M?M():M;return we[mt]={type:t,blueprint:we,template:o,queries:null,viewQuery:I,declTNode:r,data:we.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:de,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:A,consts:Ge,incompleteFirstPass:!1,ssrId:V}}let vp=t=>null;function Ep(t,r,o,a){for(let c in t)if(t.hasOwnProperty(c)){o=null===o?{}:o;const h=t[c];null===a?dy(o,r,c,h):a.hasOwnProperty(c)&&dy(o,r,a[c],h)}return o}function dy(t,r,o,a){t.hasOwnProperty(o)?t[o].push(r,a):t[o]=[r,a]}function Ss(t,r,o,a,c,h,m,I){const A=Ei(r,o);let V,M=r.inputs;!I&&null!=M&&(V=M[a])?(Ap(t,o,V,a,c),Wi(r)&&function hy(t,r){const o=Rr(r,t);16&o[Kt]||(o[Kt]|=64)}(o,r.index)):3&r.type&&(a=function rE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=m?m(c,r.value||"",a):c,h.setProperty(A,a,c))}function vm(t,r,o,a){if(Rl()){const c=null===a?null:{"":-1},h=function oE(t,r){const o=t.directiveRegistry;let a=null,c=null;if(o)for(let h=0;h<o.length;h++){const m=o[h];if($i(r,m.selectors,!1))if(a||(a=[]),Gr(m))if(null!==m.findHostDirectiveDefs){const I=[];c=c||new Map,m.findHostDirectiveDefs(m,I,c),a.unshift(...I,m),fl(t,r,I.length)}else a.unshift(m),fl(t,r,0);else c=c||new Map,m.findHostDirectiveDefs?.(m,a,c),a.push(m)}return null===a?null:[a,c]}(t,o);let m,I;null===h?m=I=null:[m,I]=h,null!==m&&fy(t,r,o,m,c,I),c&&function aE(t,r,o){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const h=o[r[c+1]];if(null==h)throw new pe(-301,!1);a.push(r[c],h)}}}(o,a,c)}o.mergedAttrs=pn(o.mergedAttrs,o.attrs)}function fy(t,r,o,a,c,h){for(let M=0;M<a.length;M++)Fl(Zu(o,r),t,a[M].type);!function py(t,r,o){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+o,t.providerIndexes=r}(o,t.data.length,a.length);for(let M=0;M<a.length;M++){const V=a[M];V.providersResolver&&V.providersResolver(V)}let m=!1,I=!1,A=hl(t,r,a.length,null);for(let M=0;M<a.length;M++){const V=a[M];o.mergedAttrs=pn(o.mergedAttrs,V.hostAttrs),Od(t,o,r,A,V),Tm(A,V,c),null!==V.contentQueries&&(o.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(o.flags|=64);const q=V.type.prototype;!m&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),m=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),I=!0),A++}!function _m(t,r,o){const c=r.directiveEnd,h=t.data,m=r.attrs,I=[];let A=null,M=null;for(let V=r.directiveStart;V<c;V++){const q=h[V],de=o?o.get(q):null,Ge=de?de.outputs:null;A=Ep(q.inputs,V,A,de?de.inputs:null),M=Ep(q.outputs,V,M,Ge);const nt=null===A||null===m||ji(r)?null:cE(A,V,m);I.push(nt)}null!==A&&(A.hasOwnProperty("class")&&(r.flags|=8),A.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=I,r.inputs=A,r.outputs=M}(t,o,h)}function Ip(t,r,o){const a=o.directiveStart,c=o.directiveEnd,h=o.index,m=function Do(){return Me.lFrame.currentDirectiveIndex}();try{gn(h);for(let I=a;I<c;I++){const A=t.data[I],M=r[I];Ml(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&wm(A,M)}}finally{gn(-1),Ml(m)}}function wm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function fl(t,r,o){r.componentOffset=o,(t.components??=[]).push(r.index)}function Tm(t,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=t;Gr(r)&&(o[""]=t)}}function Od(t,r,o,a,c){t.data[a]=c;const h=c.factory||(c.factory=Es(c.type)),m=new qu(h,Gr(c),Md);t.blueprint[a]=m,o[a]=m,function Em(t,r,o,a,c){const h=c.hostBindings;if(h){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const I=~r.index;(function sE(t){let r=t.length;for(;r>0;){const o=t[--r];if("number"==typeof o&&o<0)return o}return 0})(m)!=I&&m.push(I),m.push(o,a,h)}}(t,r,a,hl(t,o,c.hostVars,dn),c)}function ao(t,r,o,a,c,h){const m=Ei(t,r);!function Dm(t,r,o,a,c,h,m){if(null==h)t.removeAttribute(r,c,o);else{const I=null==m?ve(h):m(h,a||"",c);t.setAttribute(r,c,I,o)}}(r[Ht],m,h,t.value,o,a,c)}function uE(t,r,o,a,c,h){const m=h[r];if(null!==m)for(let I=0;I<m.length;)my(a,o,m[I++],m[I++],m[I++])}function my(t,r,o,a,c){const h=rr(null);try{const m=t.inputTransforms;null!==m&&m.hasOwnProperty(a)&&(c=m[a].call(r,c)),null!==t.setInput?t.setInput(r,c,o,a):r[a]=c}finally{rr(h)}}function cE(t,r,o){let a=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===a&&(a=[]);const m=t[h];for(let I=0;I<m.length;I+=2)if(m[I]===r){a.push(h,m[I+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function Uh(t,r,o,a){return[t,!0,!1,r,null,0,a,o,null,null,null]}function wp(t,r){const o=t.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a+1];if(-1!==h){const m=t.data[h];E(o[a]),m.contentQueries(2,r[h],h)}}}function kd(t,r){return t[Ms]?t[ho][Hr]=r:t[Ms]=r,t[ho]=r,r}function Bh(t,r,o){E(0);const a=rr(null);try{r(t,o)}finally{rr(a)}}function Tp(t){return t[Ps]||(t[Ps]=[])}function Dp(t){return t.cleanup||(t.cleanup=[])}function Cp(t,r){const o=t[Si],a=o?o.get(oo,null):null;a&&a.handleError(r)}function Ap(t,r,o,a,c){for(let h=0;h<o.length;){const m=o[h++],I=o[h++];my(t.data[m],r[m],a,I,c)}}function _y(t,r){const o=Rr(r,t),a=o[mt];!function Cm(t,r){for(let o=r.length;o<t.blueprint.length;o++)r.push(t.blueprint[o])}(a,o);const c=o[zn];null!==c&&null===o[Cn]&&(o[Cn]=al(c,o[Si])),Sp(a,o,o[Fn])}function Sp(t,r,o){D(r);try{const a=t.viewQuery;null!==a&&Bh(1,a,o);const c=t.template;null!==c&&_p(t,r,c,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wp(t,r),t.staticViewQueries&&Bh(2,t.viewQuery,o);const h=t.components;null!==h&&function Ld(t,r){for(let o=0;o<r.length;o++)_y(t,r[o])}(r,h)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[Kt]&=-5,Se()}}let bp=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(o,a,c){const h=typeof Zone>"u"?null:Zone.current,m=function Oe(t,r,o){const a=Object.create(kn);o&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=m=>{a.cleanupFn=m};return a.ref={notify:()=>rs(a),run:()=>{if(a.dirty=!1,a.hasRun&&!zu(a))return;a.hasRun=!0;const m=Ws(a);try{a.cleanupFn(),a.cleanupFn=At,a.fn(c)}finally{qs(a,m)}},cleanup:()=>a.cleanupFn()},a.ref}(o,M=>{this.all.has(M)&&this.queue.set(M,h)},c);let I;this.all.add(m),m.notify();const A=()=>{m.cleanup(),I?.(),this.all.delete(m),this.queue.delete(m)};return I=a?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[o,a]of this.queue)this.queue.delete(o),a?a.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=jt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Rp(t,r,o){let a=o?t.styles:null,c=o?t.classes:null,h=0;if(null!==r)for(let m=0;m<r.length;m++){const I=r[m];"number"==typeof I?h=I:1==h?c=Ue(c,I):2==h&&(a=Ue(a,I+": "+r[++m]+";"))}o?t.styles=a:t.stylesWithoutHost=a,o?t.classes=c:t.classesWithoutHost=c}function $h(t,r,o,a,c=!1){for(;null!==o;){const h=r[o.index];null!==h&&a.push(jn(h)),Gn(h)&&Am(h,a);const m=o.type;if(8&m)$h(t,r,o.child,a);else if(32&m){const I=Tu(o,r);let A;for(;A=I();)a.push(A)}else if(16&m){const I=Ag(r,o);if(Array.isArray(I))a.push(...I);else{const A=Hc(r[nr]);$h(A[mt],A,I,a,!0)}}o=c?o.projectionNext:o.next}return a}function Am(t,r){for(let o=On;o<t.length;o++){const a=t[o],c=a[mt].firstChild;null!==c&&$h(a[mt],a,c,r)}t[ys]!==t[zn]&&r.push(t[ys])}function Pp(t,r,o,a=!0){const c=r[Yr],h=c.rendererFactory,m=c.afterRenderEventManager;h.begin?.(),m?.begin();try{yy(t,r,t.template,o)}catch(A){throw a&&Cp(r,A),A}finally{h.end?.(),c.effectManager?.flush(),m?.end()}}function yy(t,r,o,a){const c=r[Kt];if(256!=(256&c)){r[Yr].effectManager?.flush(),D(r);try{Zs(r),function _n(t){return Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&_p(t,r,o,2,a);const m=3==(3&c);if(m){const M=t.preOrderCheckHooks;null!==M&&au(r,M,null)}else{const M=t.preOrderHooks;null!==M&&pi(r,M,0,null),Sc(r,0)}if(function pE(t){for(let r=rd(t);null!==r;r=id(r)){if(!r[la])continue;const o=r[Vo];for(let a=0;a<o.length;a++){Mr(o[a])}}}(r),vy(r,2),null!==t.contentQueries&&wp(t,r),m){const M=t.contentCheckHooks;null!==M&&au(r,M)}else{const M=t.contentHooks;null!==M&&pi(r,M,1),Sc(r,1)}!function Jv(t,r){const o=t.hostBindingOpCodes;if(null===o)return;const a=fp(r,ms);try{for(let c=0;c<o.length;c++){const h=o[c];if(h<0)gn(~h);else{const m=h,I=o[++c],A=o[++c];Ac(I,m),a.dirty=!1;const M=Ws(a);try{A(2,r[m])}finally{qs(a,M)}}}}finally{null===r[ms]&&uy(r,ms),gn(-1)}}(t,r);const I=t.components;null!==I&&Sm(r,I,0);const A=t.viewQuery;if(null!==A&&Bh(2,A,a),m){const M=t.viewCheckHooks;null!==M&&au(r,M)}else{const M=t.viewHooks;null!==M&&pi(r,M,2),Sc(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Kt]&=-73,va(r)}finally{Se()}}}function vy(t,r){for(let o=rd(t);null!==o;o=id(o))for(let a=On;a<o.length;a++)Ey(o[a],r)}function gE(t,r,o){Ey(Rr(r,t),o)}function Ey(t,r){if(!function Jd(t){return 128==(128&t[Kt])}(t))return;const o=t[mt],a=t[Kt];if(80&a&&0===r||1024&a||2===r)yy(o,t,o.template,t[Fn]);else if(t[ua]>0){vy(t,1);const c=o.components;null!==c&&Sm(t,c,1)}}function Sm(t,r,o){for(let a=0;a<r.length;a++)gE(t,r[a],o)}class Fd{get rootNodes(){const r=this._lView,o=r[mt];return $h(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(r){this._lView[Fn]=r}get destroyed(){return 256==(256&this._lView[Kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Mn];if(Gn(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Ie(r,a),Xs(o,a))}this._attachedToViewContainer=!1}ze(this._lView[mt],this._lView)}onDestroy(r){!function Wo(t,r){if(256==(256&t[Kt]))throw new pe(911,!1);null===t[xi]&&(t[xi]=[]),t[xi].push(r)}(this._lView,r)}markForCheck(){dl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Kt]&=-129}reattach(){this._lView[Kt]|=128}detectChanges(){Pp(this._lView[mt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f(t,r){Kc(t,r,r[Ht],2,null,null)}(this._lView[mt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=r}}class bm extends Fd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Pp(r[mt],r,r[Fn],!1)}checkNoChanges(){}get context(){return null}}class Rm extends Rh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=ln(r);return new wn(o,this.ngModule)}}function Pm(t){const r=[];for(let o in t)t.hasOwnProperty(o)&&r.push({propName:t[o],templateName:o});return r}class Mp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){a=Vt(a);const c=this.injector.get(r,xh,a);return c!==xh||o===xh?c:this.parentInjector.get(r,o,a)}}class wn extends q_{get inputs(){const r=this.componentDef,o=r.inputTransforms,a=Pm(r.inputs);if(null!==o)for(const c of a)o.hasOwnProperty(c.propName)&&(c.transform=o[c.propName]);return a}get outputs(){return Pm(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function vi(t){return t.map(oa).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,a,c){let h=(c=c||this.ngModule)instanceof La?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Mp(r,h):r,I=m.get(Jf,null);if(null===I)throw new pe(407,!1);const q={rendererFactory:I,sanitizer:m.get(Mh,null),effectManager:m.get(bp,null),afterRenderEventManager:m.get(lm,null)},de=I.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",Ge=a?function gm(t,r,o,a){const h=a.get(dm,!1)||o===xe.ShadowDom,m=t.selectRootElement(r,h);return function Xv(t){vp(t)}(m),m}(de,a,this.componentDef.encapsulation,m):oc(de,we,function Iy(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(we)),Bt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let et=null;null!==Ge&&(et=al(Ge,m,!0));const hn=Vh(0,null,null,1,0,null,null,null,null,null,null),xn=xd(null,hn,null,Bt,null,null,q,de,m,null,et);let Tr,No;D(xn);try{const Dl=this.componentDef;let lg,LI=null;Dl.findHostDirectiveDefs?(lg=[],LI=new Map,Dl.findHostDirectiveDefs(Dl,lg,LI),lg.push(Dl)):lg=[Dl];const qA=function Ty(t,r){const o=t[mt],a=tn;return t[a]=r,Nd(o,a,2,"#host",null)}(xn,Ge),KA=function Hh(t,r,o,a,c,h,m){const I=c[mt];!function Dy(t,r,o,a){for(const c of t)r.mergedAttrs=pn(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(Rp(r,r.mergedAttrs,!0),null!==o&&I_(a,o,r))}(a,t,r,m);let A=null;null!==r&&(A=al(r,c[Si]));const M=h.rendererFactory.createRenderer(r,o);let V=16;o.signals?V=4096:o.onPush&&(V=64);const q=xd(c,ly(o),null,V,c[t.index],t,h,M,null,null,A);return I.firstCreatePass&&fl(I,t,a.length-1),kd(c,q),c[t.index]=q}(qA,Ge,Dl,lg,xn,q,de);No=Yd(hn,tn),Ge&&function Nr(t,r,o,a){if(a)ci(t,o,["ng-version",ul.full]);else{const{attrs:c,classes:h}=function aa(t){const r=[],o=[];let a=1,c=2;for(;a<t.length;){let h=t[a];if("string"==typeof h)2===c?""!==h&&r.push(h,t[++a]):8===c&&o.push(h);else{if(!li(c))break;c=h}a++}return{attrs:r,classes:o}}(r.selectors[0]);c&&ci(t,o,c),h&&h.length>0&&Rg(t,o,h.join(" "))}}(de,Dl,Ge,a),void 0!==o&&function Va(t,r,o){const a=t.projection=[];for(let c=0;c<r.length;c++){const h=o[c];a.push(null!=h?Array.from(h):null)}}(No,this.ngContentSelectors,o),Tr=function Ji(t,r,o,a,c,h){const m=fi(),I=c[mt],A=Ei(m,c);fy(I,c,m,o,null,a);for(let V=0;V<o.length;V++)ki(Ta(c,I,m.directiveStart+V,m),c);Ip(I,c,m),A&&ki(A,c);const M=Ta(c,I,m.directiveStart+m.componentOffset,m);if(t[Fn]=c[Fn]=M,null!==h)for(const V of h)V(M,r);return mc(I,m,t),M}(KA,Dl,lg,LI,xn,[Cy]),Sp(hn,xn,null)}finally{Se()}return new wy(this.componentType,Tr,Cd(No,xn),xn,No)}}class wy extends ls{constructor(r,o,a,c,h){super(),this.location=a,this._rootLView=c,this._tNode=h,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new bm(c),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),o))return;const h=this._rootLView;Ap(h[mt],h,c,r,o),this.previousInputValues.set(r,o),dl(Rr(this._tNode.index,h))}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Cy(){const t=fi();Ia(Ke()[mt],t)}function Vd(t){let r=function Ay(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const a=[t];for(;r;){let c;if(Gr(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new pe(903,!1);c=r.\u0275dir}if(c){if(o){a.push(c);const m=t;m.inputs=Ud(t.inputs),m.inputTransforms=Ud(t.inputTransforms),m.declaredInputs=Ud(t.declaredInputs),m.outputs=Ud(t.outputs);const I=c.hostBindings;I&&_E(t,I);const A=c.viewQuery,M=c.contentQueries;if(A&&mE(t,A),M&&Mm(t,M),J(t.inputs,c.inputs),J(t.declaredInputs,c.declaredInputs),J(t.outputs,c.outputs),null!==c.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),J(m.inputTransforms,c.inputTransforms)),Gr(c)&&c.data.animation){const V=t.data;V.animation=(V.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const I=h[m];I&&I.ngInherit&&I(t),I===Vd&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Sy(t){let r=0,o=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=pn(c.hostAttrs,o=pn(o,c.hostAttrs))}}(a)}function Ud(t){return t===at?{}:t===Ze?[]:t}function mE(t,r){const o=t.viewQuery;t.viewQuery=o?(a,c)=>{r(a,c),o(a,c)}:r}function Mm(t,r){const o=t.contentQueries;t.contentQueries=o?(a,c,h)=>{r(a,c,h),o(a,c,h)}:r}function _E(t,r){const o=t.hostBindings;t.hostBindings=o?(a,c)=>{r(a,c),o(a,c)}:r}function by(t){const r=t.inputConfig,o={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(o[a]=c[2])}t.inputTransforms=o}function xp(t){return!!Om(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Om(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ds(t,r,o){return!Object.is(t[r],o)&&(t[r]=o,!0)}function Mu(t,r,o,a){const c=Ke();return ds(c,Ns(),r)&&(Sn(),ao(In(),c,t,r,o,a)),Mu}function Bd(t,r,o,a){return ds(t,Ns(),o)?r+ve(o)+a:dn}function $m(t,r,o,a,c,h,m,I){const A=Ke(),M=Sn(),V=t+tn,q=M.firstCreatePass?function Ny(t,r,o,a,c,h,m,I,A){const M=r.consts,V=Nd(r,t,4,m||null,Ri(M,I));vm(r,o,V,Ri(M,A)),Ia(r,V);const q=V.tView=Vh(2,V,a,c,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,M,null);return null!==r.queries&&(r.queries.template(r,V),q.queries=r.queries.embeddedTView(V)),V}(V,M,A,r,o,a,c,h,m):M.data[V];Ts(q,!1);const de=Wp(M,A,q,t);Nl()&&ac(M,A,de,q),ki(de,A),kd(A,A[V]=Uh(de,A,de,q)),Uu(q)&&yp(M,A,q),null!=m&&Fh(A,q,I)}let Wp=function qh(t,r,o,a){return Xr(!0),r[Ht].createComment("")};function Oy(t,r,o){const a=Ke();return ds(a,Ns(),r)&&Ss(Sn(),In(),a,t,r,a[Ht],o,!1),Oy}function ky(t,r,o,a,c){const m=c?"class":"style";Ap(t,o,r.inputs[m],m,a)}function Po(t,r,o,a){const c=Ke(),h=Sn(),m=tn+t,I=c[Ht],A=h.firstCreatePass?function El(t,r,o,a,c,h){const m=r.consts,A=Nd(r,t,2,a,Ri(m,c));return vm(r,o,A,Ri(m,h)),null!==A.attrs&&Rp(A,A.attrs,!1),null!==A.mergedAttrs&&Rp(A,A.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,A),A}(m,h,c,r,o,a):h.data[m],M=Ly(h,c,A,I,r,t);c[m]=M;const V=Uu(A);return Ts(A,!0),I_(I,M,A),32!=(32&A.flags)&&Nl()&&ac(h,c,M,A),0===function Ki(){return Me.lFrame.elementDepthCount}()&&ki(M,c),function It(){Me.lFrame.elementDepthCount++}(),V&&(yp(h,c,A),mc(h,A,c)),null!==a&&Fh(c,A),Po}function _c(){let t=fi();ru()?function Wt(){Me.lFrame.isParent=!1}():(t=t.parent,Ts(t,!1));const r=t;(function ke(t){return Me.skipHydrationRootTNode===t})(r)&&function Xh(){Me.skipHydrationRootTNode=null}(),function Mt(){Me.lFrame.elementDepthCount--}();const o=Sn();return o.firstCreatePass&&(Ia(o,t),vs(t)&&o.queries.elementEnd(t)),null!=r.classesWithoutHost&&function dg(t){return 0!=(8&t.flags)}(r)&&ky(o,r,Ke(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function hg(t){return 0!=(16&t.flags)}(r)&&ky(o,r,Ke(),r.stylesWithoutHost,!1),_c}function Ua(t,r,o,a){return Po(t,r,o,a),_c(),Ua}let Ly=(t,r,o,a,c,h)=>(Xr(!0),oc(a,c,function su(){return Me.lFrame.currentNamespace}()));function Gm(){return Ke()}function Wm(t){return!!t&&"function"==typeof t.then}function jy(t){return!!t&&"function"==typeof t.subscribe}function qp(t,r,o,a){const c=Ke(),h=Sn(),m=fi();return function Kp(t,r,o,a,c,h,m){const I=Uu(a),M=t.firstCreatePass&&Dp(t),V=r[Fn],q=Tp(r);let de=!0;if(3&a.type||m){const nt=Ei(a,r),vt=m?m(nt):nt,Bt=q.length,et=m?xn=>m(jn(xn[a.index])):a.index;let hn=null;if(!m&&I&&(hn=function Gd(t,r,o,a){const c=t.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===o&&c[h+1]===a){const I=r[Ps],A=c[h+2];return I.length>A?I[A]:null}"string"==typeof m&&(h+=2)}return null}(t,r,c,a.index)),null!==hn)(hn.__ngLastListenerFn__||hn).__ngNextListenerFn__=h,hn.__ngLastListenerFn__=h,de=!1;else{h=Hy(a,r,V,h,!1);const xn=o.listen(vt,c,h);q.push(h,xn),M&&M.push(c,et,Bt,Bt+1)}}else h=Hy(a,r,V,h,!1);const we=a.outputs;let Ge;if(de&&null!==we&&(Ge=we[c])){const nt=Ge.length;if(nt)for(let vt=0;vt<nt;vt+=2){const Tr=r[Ge[vt]][Ge[vt+1]].subscribe(h),No=q.length;q.push(h,Tr),M&&M.push(c,a.index,No,-(No+1))}}}(h,c,c[Ht],m,t,r,a),qp}function NE(t,r,o,a){try{return br(6,r,o),!1!==o(a)}catch(c){return Cp(t,c),!1}finally{br(7,r,o)}}function Hy(t,r,o,a,c){return function h(m){if(m===Function)return a;dl(t.componentOffset>-1?Rr(t.index,r):r);let A=NE(r,o,a,m),M=h.__ngNextListenerFn__;for(;M;)A=NE(r,o,M,m)&&A,M=M.__ngNextListenerFn__;return c&&!1===A&&m.preventDefault(),A}}function zy(t=1){return function X(t){return(Me.lFrame.contextLView=function Jt(t,r){for(;t>0;)r=r[zr],t--;return r}(t,Me.lFrame.contextLView))[Fn]}(t)}function Gy(t,r,o){return Wy(t,"",r,"",o),Gy}function Wy(t,r,o,a,c){const h=Ke(),m=Bd(h,r,o,a);return m!==dn&&Ss(Sn(),In(),h,t,m,h[Ht],c,!1),Wy}function sa(t,r){return t<<17|r<<2}function vc(t){return t>>17&32767}function Km(t){return 2|t}function Il(t){return(131068&t)>>2}function Zm(t,r){return-131069&t|r<<2}function Yy(t){return 1|t}function GE(t,r,o,a,c){const h=t[o+1],m=null===r;let I=a?vc(h):Il(h),A=!1;for(;0!==I&&(!1===A||m);){const V=t[I+1];r0(t[I],r)&&(A=!0,t[I+1]=a?Yy(V):Km(V)),I=a?vc(V):Il(V)}A&&(t[o+1]=a?Km(h):Yy(h))}function r0(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&eo(t,r)>=0}function qd(t,r){return function ti(t,r,o,a){const c=Ke(),h=Sn(),m=function En(t){const r=Me.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,o}(2);h.firstUpdatePass&&function e_(t,r,o,a){const c=t.data;if(null===c[o+1]){const h=c[zt()],m=function Xm(t,r){return r>=t.expandoStartIndex}(t,o);(function t_(t,r){return 0!=(t.flags&(r?8:16))})(h,a)&&null===r&&!m&&(r=!1),r=function Kh(t,r,o,a){const c=function Os(t){const r=Me.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let h=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(o=ja(o=Qh(null,t,r,o,a),r.attrs,a),h=null);else{const m=r.directiveStylingLast;if(-1===m||t[m]!==c)if(o=Qh(c,t,r,o,a),null===h){let A=function Zh(t,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==Il(a))return t[vc(a)]}(t,r,a);void 0!==A&&Array.isArray(A)&&(A=Qh(null,t,r,A[1],a),A=ja(A,r.attrs,a),function bs(t,r,o,a){t[vc(o?r.classBindings:r.styleBindings)]=a}(t,r,a,A))}else h=function WE(t,r,o){let a;const c=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<c;h++)a=ja(a,t[h].hostAttrs,o);return ja(a,r.attrs,o)}(t,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),o}(c,h,r,a),function zE(t,r,o,a,c,h){let m=h?r.classBindings:r.styleBindings,I=vc(m),A=Il(m);t[a]=o;let V,M=!1;if(Array.isArray(o)?(V=o[1],(null===V||eo(o,V)>0)&&(M=!0)):V=o,c)if(0!==A){const de=vc(t[I+1]);t[a+1]=sa(de,I),0!==de&&(t[de+1]=Zm(t[de+1],a)),t[I+1]=function jE(t,r){return 131071&t|r<<17}(t[I+1],a)}else t[a+1]=sa(I,0),0!==I&&(t[I+1]=Zm(t[I+1],a)),I=a;else t[a+1]=sa(A,0),0===I?I=a:t[A+1]=Zm(t[A+1],a),A=a;M&&(t[a+1]=Km(t[a+1])),GE(t,V,a,!0),GE(t,V,a,!1),function n0(t,r,o,a,c){const h=c?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof r&&eo(h,r)>=0&&(o[a+1]=Yy(o[a+1]))}(r,V,t,a,h),m=sa(I,A),h?r.classBindings=m:r.styleBindings=m}(c,h,r,o,m,a)}}(h,t,m,a),r!==dn&&ds(c,m,r)&&function ov(t,r,o,a,c,h,m,I){if(!(3&r.type))return;const A=t.data,M=A[I+1],V=function $E(t){return 1==(1&t)}(M)?av(A,r,o,c,Il(M),m):void 0;Jp(V)||(Jp(h)||function BE(t){return 2==(2&t)}(M)&&(h=av(A,null,o,c,I,m)),function E_(t,r,o,a,c){if(r)c?t.addClass(o,a):t.removeClass(o,a);else{let h=-1===a.indexOf("-")?void 0:jc.DashCase;null==c?t.removeStyle(o,a,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=jc.Important),t.setStyle(o,a,c,h))}}(a,m,Go(zt(),o),c,h))}(h,h.data[zt()],c,c[Ht],t,c[m+1]=function KE(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=he(dc(t)))),t}(r,o),a,m)}(t,r,null,!0),qd}function Qh(t,r,o,a,c){let h=null;const m=o.directiveEnd;let I=o.directiveStylingLast;for(-1===I?I=o.directiveStart:I++;I<m&&(h=r[I],a=ja(a,h.hostAttrs,c),h!==t);)I++;return null!==t&&(o.directiveStylingLast=I),a}function ja(t,r,o){const a=o?1:2;let c=-1;if(null!==r)for(let h=0;h<r.length;h++){const m=r[h];"number"==typeof m?c=m:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xt(t,m,!!o||r[++h]))}return void 0===t?null:t}function av(t,r,o,a,c,h){const m=null===r;let I;for(;c>0;){const A=t[c],M=Array.isArray(A),V=M?A[1]:A,q=null===V;let de=o[c+1];de===dn&&(de=q?Ze:void 0);let we=q?Wn(de,a):V===a?de:void 0;if(M&&!Jp(we)&&(we=Wn(A,a)),Jp(we)&&(I=we,m))return I;const Ge=t[c+1];c=m?vc(Ge):Il(Ge)}if(null!==r){let A=h?r.residualClasses:r.residualStyles;null!=A&&(I=Wn(A,a))}return I}function Jp(t){return void 0!==t}function uv(t,r=""){const o=Ke(),a=Sn(),c=t+tn,h=a.firstCreatePass?Nd(a,c,1,r,null):a.data[c],m=Xp(a,o,h,r,t);o[c]=m,Nl()&&ac(a,o,m,h),Ts(h,!1)}let Xp=(t,r,o,a,c)=>(Xr(!0),function sd(t,r){return t.createText(r)}(r[Ht],a));function tg(t){return ng("",t,""),tg}function ng(t,r,o){const a=Ke(),c=Bd(a,t,r,o);return c!==dn&&function Us(t,r,o){const a=Go(r,t);!function yh(t,r,o){t.setValue(r,o)}(t[Ht],a,o)}(a,zt(),c),ng}const Vi=void 0;var pv=["en",[["a","p"],["AM","PM"],Vi],[["AM","PM"],Vi,Vi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vi,"{1} 'at' {0}",Vi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XE(t){const o=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let ig={};function eI(t){const r=function _T(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=u0(r);if(o)return o;const a=r.split("-")[0];if(o=u0(a),o)return o;if("en"===a)return pv;throw new pe(701,!1)}function a0(t){return eI(t)[sg.PluralCase]}function u0(t){return t in ig||(ig[t]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[t]),ig[t]}var sg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(sg||{});const og="en-US";let c0=og;function rI(t,r,o,a,c){if(t=qe(t),Array.isArray(t))for(let h=0;h<t.length;h++)rI(t[h],r,o,a,c);else{const h=Sn(),m=Ke(),I=fi();let A=nl(t)?t:qe(t.provide);const M=Dh(t),V=1048575&I.providerIndexes,q=I.directiveStart,de=I.providerIndexes>>20;if(nl(t)||!t.multi){const we=new qu(M,c,Md),Ge=sI(A,r,c?V:V+de,q);-1===Ge?(Fl(Zu(I,m),h,A),iI(h,t,r.length),r.push(A),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),o.push(we),m.push(we)):(o[Ge]=we,m[Ge]=we)}else{const we=sI(A,r,V+de,q),Ge=sI(A,r,V,V+de),vt=Ge>=0&&o[Ge];if(c&&!vt||!c&&!(we>=0&&o[we])){Fl(Zu(I,m),h,A);const Bt=function gD(t,r,o,a,c){const h=new qu(t,o,Md);return h.multi=[],h.index=r,h.componentProviders=0,O0(h,c,a&&!o),h}(c?pD:fD,o.length,c,a,M);!c&&vt&&(o[Ge].providerFactory=Bt),iI(h,t,r.length,0),r.push(A),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),o.push(Bt),m.push(Bt)}else iI(h,t,we>-1?we:Ge,O0(o[c?Ge:we],M,!c&&a));!c&&a&&vt&&o[Ge].componentProviders++}}}function iI(t,r,o,a){const c=nl(r),h=function V_(t){return!!t.useClass}(r);if(c||h){const A=(h?qe(r.useClass):r).prototype.ngOnDestroy;if(A){const M=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const V=M.indexOf(o);-1===V?M.push(o,[a,A]):M[V+1].push(a,A)}else M.push(o,A)}}}function O0(t,r,o){return o&&t.componentProviders++,t.multi.push(r)-1}function sI(t,r,o,a){for(let c=o;c<a;c++)if(r[c]===t)return c;return-1}function fD(t,r,o,a){return oI(this.multi,[])}function pD(t,r,o,a){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,I=Ta(o,o[mt],this.providerFactory.index,a);h=I.slice(0,m),oI(c,h);for(let A=m;A<I.length;A++)h.push(I[A])}else h=[],oI(c,h);return h}function oI(t,r){for(let o=0;o<t.length;o++)r.push((0,t[o])());return r}function k0(t,r=[]){return o=>{o.providersResolver=(a,c)=>function hD(t,r,o){const a=Sn();if(a.firstCreatePass){const c=Gr(t);rI(o,a.data,a.blueprint,c,!0),rI(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}class Yh{}class L0{}function mD(t,r){return new aI(t,r??null,[])}class aI extends Yh{constructor(r,o,a){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rm(this);const c=vr(r);this._bootstrapComponents=bu(c.bootstrap),this._r3Injector=Q_(r,o,[{provide:Yh,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver},...a],he(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class uI extends L0{constructor(r){super(),this.moduleType=r}create(r){return new aI(this.moduleType,r,[])}}class F0 extends Yh{constructor(r){super(),this.componentFactoryResolver=new Rm(this),this.instance=null;const o=new wd([...r.providers,{provide:Yh,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver}],r.parent||Ff(),r.debugName,new Set(["environment"]));this.injector=o,r.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function V0(t,r,o=null){return new F0({providers:t,parent:r,debugName:o,runEnvironmentInitializers:!0}).injector}let yD=(()=>{class t{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const a=Ug(0,o.type),c=a.length>0?V0([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,c)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=jt({token:t,providedIn:"environment",factory:()=>new t(Ot(La))})}return t})();function U0(t){t.getStandaloneInjector=r=>r.get(yD).getOrCreateStandaloneInjector(t)}function W0(t,r,o,a,c,h){const m=r+o;return ds(t,m,c)?function na(t,r,o){return t[r]=o}(t,m+1,h?a.call(h,c):a(c)):function d_(t,r){const o=t[r];return o===dn?void 0:o}(t,m+1)}function Y0(t,r){const o=Sn();let a;const c=t+tn;o.firstCreatePass?(a=function FD(t,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(t===a.name)return a}}(r,o.pipeRegistry),o.data[c]=a,a.onDestroy&&(o.destroyHooks??=[]).push(c,a.onDestroy)):a=o.data[c];const h=a.factory||(a.factory=Es(a.type)),I=Hn(Md);try{const A=Ku(!1),M=h();return Ku(A),function t0(t,r,o,a){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),r[o]=a}(o,Ke(),c,M),M}finally{Hn(I)}}function J0(t,r,o){const a=t+tn,c=Ke(),h=function ya(t,r){return t[r]}(c,a);return function h_(t,r){return t[mt].data[r].pure}(c,a)?W0(c,function yt(){const t=Me.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,h.transform,o,h):h.transform(o)}function $D(){return this._results[Symbol.iterator]()}class lI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Fa)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=lI.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=$D)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const c=function or(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function cf(t,r,o){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],h=r[a];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function zD(t,r,o,a=!0){const c=r[mt];if(function R(t,r,o,a){const c=On+a,h=o.length;a>0&&(o[c-1][Hr]=r),a<h-On?(r[Hr]=o[c],_r(o,On+a,r)):(o.push(r),r[Hr]=null),r[Mn]=o;const m=r[ca];null!==m&&o!==m&&function F(t,r){const o=t[Vo];r[nr]!==r[Mn][Mn][nr]&&(t[la]=!0),null===o?t[Vo]=[r]:o.push(r)}(m,r);const I=r[Fr];null!==I&&I.insertView(t),r[Kt]|=128}(c,r,t,o),a){const h=wf(o,t),m=r[Ht],I=xa(m,t[ys]);null!==I&&function d(t,r,o,a,c,h){a[zn]=c,a[tr]=r,Kc(t,a,o,1,c,h)}(c,t[tr],m,r,I,h)}}let f_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qD}return t})();const GD=f_,WD=class extends GD{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,o){return this.createEmbeddedViewImpl(r,o)}createEmbeddedViewImpl(r,o,a){const c=function HD(t,r,o,a){const c=r.tView,I=xd(t,c,o,4096&t[Kt]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);I[ca]=t[r.index];const M=t[Fr];return null!==M&&(I[Fr]=M.createEmbeddedView(c)),Sp(c,I,o),I}(this._declarationLView,this._declarationTContainer,r,{injector:o,hydrationInfo:a});return new Fd(c)}};function qD(){return vv(fi(),Ke())}function vv(t,r){return 4&t.type?new WD(r,t,Cd(t,r)):null}let Iv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XD}return t})();function XD(){return sw(fi(),Ke())}const eC=Iv,rw=class extends eC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Cd(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){const r=Cs(this._hostTNode,this._hostLView);if(kl(r)){const o=uu(r,this._hostLView),a=Rc(r);return new Ir(o[mt].data[a+8],o)}return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=iw(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-On}createEmbeddedView(r,o,a){let c,h;"number"==typeof a?c=a:null!=a&&(c=a.index,h=a.injector);const I=r.createEmbeddedViewImpl(o||{},h,null);return this.insertImpl(I,c,false),I}createComponent(r,o,a,c,h){const m=r&&!function Ju(t){return"function"==typeof t}(r);let I;if(m)I=o;else{const nt=o||{};I=nt.index,a=nt.injector,c=nt.projectableNodes,h=nt.environmentInjector||nt.ngModuleRef}const A=m?r:new wn(ln(r)),M=a||this.parentInjector;if(!h&&null==A.ngModule){const vt=(m?M:this.parentInjector).get(La,null);vt&&(h=vt)}ln(A.componentType??{});const we=A.create(M,c,null,h);return this.insertImpl(we.hostView,I,false),we}insert(r,o){return this.insertImpl(r,o,!1)}insertImpl(r,o,a){const c=r._lView;if(function Sl(t){return Gn(t[Mn])}(c)){const A=this.indexOf(r);if(-1!==A)this.detach(A);else{const M=c[Mn],V=new rw(M,M[tr],M[Mn]);V.detach(V.indexOf(r))}}const m=this._adjustIndex(o),I=this._lContainer;return zD(I,c,m,!a),r.attachToViewContainerRef(),_r(dI(I),m,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=iw(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Ie(this._lContainer,o);a&&(Xs(dI(this._lContainer),o),ze(a[mt],a))}detach(r){const o=this._adjustIndex(r,-1),a=Ie(this._lContainer,o);return a&&null!=Xs(dI(this._lContainer),o)?new Fd(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function iw(t){return t[8]}function dI(t){return t[8]||(t[8]=[])}function sw(t,r){let o;const a=r[t.index];return Gn(a)?o=a:(o=Uh(a,r,null,t),r[t.index]=o,kd(r,o)),ow(o,r,t,a),new rw(o,t,r)}let ow=function aw(t,r,o,a){if(t[ys])return;let c;c=8&o.type?jn(a):function tC(t,r){const o=t[Ht],a=o.createComment(""),c=Ei(r,t);return Fs(o,xa(o,c),a,function ad(t,r){return t.nextSibling(r)}(o,c),!1),a}(r,o),t[ys]=c};class hI{constructor(r){this.queryList=r,this.matches=null}clone(){return new hI(this.queryList)}setDirty(){this.queryList.setDirty()}}class fI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let h=0;h<a;h++){const m=o.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new fI(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==gw(r,o).matches&&this.queries[o].setDirty()}}class uw{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class pI{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,h=this.getByIndex(a).embeddedTView(r,c);h&&(h.indexInDeclarationView=a,null!==o?o.push(h):o=[h])}return null!==o?new pI(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class gI{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new gI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const h=a[c];this.matchTNodeWithReadOption(r,o,iC(o,h)),this.matchTNodeWithReadOption(r,o,Pi(o,r,h,!1,!1))}else a===f_?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Pi(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Ph||c===Iv||c===f_&&4&o.type)this.addMatch(o.index,-2);else{const h=Pi(o,r,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function iC(t,r){const o=t.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function oC(t,r,o,a){return-1===o?function sC(t,r){return 11&t.type?Cd(t,r):4&t.type?vv(t,r):null}(r,t):-2===o?function aC(t,r,o){return o===Ph?Cd(r,t):o===f_?vv(r,t):o===Iv?sw(r,t):void 0}(t,r,a):Ta(t,t[mt],o,r)}function cw(t,r,o,a){const c=r[Fr].queries[a];if(null===c.matches){const h=t.data,m=o.matches,I=[];for(let A=0;A<m.length;A+=2){const M=m[A];I.push(M<0?null:oC(r,h[M],m[A+1],o.metadata.read))}c.matches=I}return c.matches}function mI(t,r,o,a){const c=t.queries.getByIndex(o),h=c.matches;if(null!==h){const m=cw(t,r,c,o);for(let I=0;I<h.length;I+=2){const A=h[I];if(A>0)a.push(m[I/2]);else{const M=h[I+1],V=r[-A];for(let q=On;q<V.length;q++){const de=V[q];de[ca]===de[Mn]&&mI(de[mt],de,M,a)}if(null!==V[Vo]){const q=V[Vo];for(let de=0;de<q.length;de++){const we=q[de];mI(we[mt],we,M,a)}}}}}return a}function lw(t){const r=Ke(),o=Sn(),a=xl();E(a+1);const c=gw(o,a);if(t.dirty&&function Cc(t){return 4==(4&t[Kt])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const h=c.crossesNgTemplate?mI(o,r,a,[]):cw(o,r,c,a);t.reset(h,zv),t.notifyOnChanges()}return!0}return!1}function dw(t,r,o,a){const c=Sn();if(c.firstCreatePass){const h=fi();(function pw(t,r,o){null===t.queries&&(t.queries=new pI),t.queries.track(new gI(r,o))})(c,new uw(r,o,a),h.index),function lC(t,r){const o=t.contentQueries||(t.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,r)}(c,t),2==(2&o)&&(c.staticContentQueries=!0)}!function fw(t,r,o){const a=new lI(4==(4&o));(function mm(t,r,o,a){const c=Tp(r);c.push(o),t.firstCreatePass&&Dp(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[Fr]&&(r[Fr]=new fI),r[Fr].queries.push(new hI(a))}(c,Ke(),o)}function hw(){return function cC(t,r){return t[Fr].queries[r].queryList}(Ke(),xl())}function gw(t,r){return t.queries.getByIndex(r)}function _I(t){return!!vr(t)}const xw=new Et("Application Initializer");let wI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,a)=>{this.resolve=o,this.reject=a}),this.appInits=Ct(xw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const c of this.appInits){const h=c();if(Wm(h))o.push(h);else if(jy(h)){const m=new Promise((I,A)=>{h.subscribe({complete:I,error:A})});o.push(m)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nw=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Tv=new Et("LocaleId",{providedIn:"root",factory:()=>Ct(Tv,bt.Optional|bt.SkipSelf)||function xC(){return typeof $localize<"u"&&$localize.locale||og}()}),NC=new Et("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Ow=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le.X(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kC{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let LC=(()=>{class t{compileModuleSync(o){return new uI(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),h=bu(vr(o).declarations).reduce((m,I)=>{const A=ln(I);return A&&m.push(new wn(A)),m},[]);return new kC(a,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Vw=new Et(""),Uw=new Et("");let CI,iA=(()=>{class t{constructor(o,a,c){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CI||(function sA(t){CI=t}(c),c.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(Li),Ot(Bw),Ot(Uw))};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac})}return t})(),Bw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return CI?.findTestabilityInTree(this,o,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Kd=null;const jw=new Et("AllowMultipleToken"),AI=new Et("PlatformDestroyListeners"),SI=new Et("appBootstrapListener");class uA{constructor(r,o){this.name=r,this.token=o}}function zw(t,r,o=[]){const a=`Platform: ${r}`,c=new Et(a);return(h=[])=>{let m=bI();if(!m||m.injector.get(jw,!1)){const I=[...o,...h,{provide:c,useValue:!0}];t?t(I):function cA(t){if(Kd&&!Kd.get(jw,!1))throw new pe(400,!1);(function $w(){!function Dc(t){Ks=t}(()=>{throw new pe(600,!1)})})(),Kd=t;const r=t.get(Ww);(function Hw(t){t.get(Uf,null)?.forEach(o=>o())})(t)}(function Gw(t=[],r){return so.create({name:r,providers:[{provide:$g,useValue:"platform"},{provide:AI,useValue:new Set([()=>Kd=null])},...t]})}(I,a))}return function dA(t){const r=bI();if(!r)throw new pe(401,!1);return r}()}}function bI(){return Kd?.get(Ww)??null}let Ww=(()=>{class t{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const c=function hA(t="zone.js",r){return"noop"===t?new Ad:"zone.js"===t?new Li(r):t}(a?.ngZone,function qw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const h=function _D(t,r,o){return new aI(t,r,o)}(o.moduleType,this.injector,function Jw(t){return[{provide:Li,useFactory:t},{provide:wh,multi:!0,useFactory:()=>{const r=Ct(pA,{optional:!0});return()=>r.initialize()}},{provide:Yw,useFactory:fA},{provide:Su,useFactory:up}]}(()=>c)),m=h.injector.get(oo,null);return c.runOutsideAngular(()=>{const I=c.onError.subscribe({next:A=>{m.handleError(A)}});h.onDestroy(()=>{Cv(this._modules,h),I.unsubscribe()})}),function Kw(t,r,o){try{const a=o();return Wm(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(m,c,()=>{const I=h.injector.get(wI);return I.runInitializers(),I.donePromise.then(()=>(function l0(t){ot(t,"Expected localeId to be defined"),"string"==typeof t&&(c0=t.toLowerCase().replace(/_/g,"-"))}(h.injector.get(Tv,og)||og),this._moduleDoBootstrap(h),h))})})}bootstrapModule(o,a=[]){const c=Zw({},a);return function oA(t,r,o){const a=new uI(o);return Promise.resolve(a)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const a=o.injector.get(cg);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new pe(-403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(AI,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(so))};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Zw(t,r){return Array.isArray(r)?r.reduce(Zw,t):{...t,...r}}let cg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ct(Yw),this.zoneIsStable=Ct(Su),this.componentTypes=[],this.components=[],this.isStable=Ct(Ow).hasPendingTasks.pipe((0,Le.w)(o=>o?(0,ae.of)(!1):this.zoneIsStable),(0,De.x)(),(0,me.B)()),this._injector=Ct(La)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,a){const c=o instanceof q_;if(!this._injector.get(wI).done)throw!c&&Rs(o),new pe(405,!1);let m;m=c?o:this._injector.get(Rh).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const I=function aA(t){return t.isBoundToModule}(m)?void 0:this._injector.get(Yh),M=m.create(so.NULL,[],a||m.selector,I),V=M.location.nativeElement,q=M.injector.get(Vw,null);return q?.registerApplication(V),M.onDestroy(()=>{this.detachView(M.hostView),Cv(this.components,M),q?.unregisterApplication(V)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;Cv(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const a=this._injector.get(SI,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Cv(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new pe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cv(t,r){const o=t.indexOf(r);o>-1&&t.splice(o,1)}const Yw=new Et("",{providedIn:"root",factory:()=>Ct(oo).handleError.bind(void 0)});function fA(){const t=Ct(Li),r=Ct(oo);return o=>t.runOutsideAngular(()=>r.handleError(o))}let pA=(()=>{class t{constructor(){this.zone=Ct(Li),this.applicationRef=Ct(cg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=jt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,o){if(Wi(t)&&!o){const a=Rr(t.index,r);return new Fd(a,a)}return 47&t.type?new Fd(r[nr],r):null}(fi(),Ke(),16==(16&t))}class nT{constructor(){}supports(r){return xp(r)}create(r){return new CA(r)}}const DA=(t,r)=>r;class CA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DA}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,c=0,h=null;for(;o||a;){const m=!a||o&&o.currentIndex<iT(a,c,h)?o:a,I=iT(m,c,h),A=m.currentIndex;if(m===a)c--,a=a._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const M=I-c,V=A-c;if(M!=V){for(let de=0;de<M;de++){const we=de<h.length?h[de]:h[de]=0,Ge=we+de;V<=Ge&&Ge<M&&(h[de]=we+1)}h[m.previousIndex]=V-M}}I!==A&&r(m,I,A)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!xp(r))throw new pe(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,h,m,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)h=r[I],m=this._trackByFn(I,h),null!==o&&Object.is(o.trackById,m)?(a&&(o=this._verifyReinsertion(o,h,m,I)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,I),a=!0),o=o._next}else c=0,function YI(t,r){if(Array.isArray(t))for(let o=0;o<t.length;o++)r(t[o]);else{const o=t[Symbol.iterator]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,I=>{m=this._trackByFn(c,I),null!==o&&Object.is(o.trackById,m)?(a&&(o=this._verifyReinsertion(o,I,m,c)),Object.is(o.item,I)||this._addIdentityChange(o,I)):(o=this._mismatch(o,I,m,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,c){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,c)):r=this._addAfter(new AA(o,a),h,c),r}_verifyReinsertion(r,o,a,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,h=r._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const c=null===o?this._itHead:o._next;return r._next=c,r._prev=o,null===c?this._itTail=r:c._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new rT),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class rT{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new SA,this.map.set(o,a)),a.add(r)}get(r,o){const c=this.map.get(r);return c?c.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iT(t,r,o){const a=t.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+r+c}class sT{constructor(){}supports(r){return r instanceof Map||Om(r)}create(){return new bA}}class bA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Om(r)))throw new pe(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const a=new RA(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oT(){return new NI([new nT])}let NI=(()=>{class t{static#e=this.\u0275prov=jt({token:t,providedIn:"root",factory:oT});constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new t(o)}static extend(o){return{provide:t,useFactory:a=>t.create(o,a||oT()),deps:[[t,new fu,new tc]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new pe(901,!1)}}return t})();function aT(){return new OI([new sT])}let OI=(()=>{class t{static#e=this.\u0275prov=jt({token:t,providedIn:"root",factory:aT});constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new t(o)}static extend(o){return{provide:t,useFactory:a=>t.create(o,a||aT()),deps:[[t,new fu,new tc]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new pe(901,!1)}}return t})();const xA=zw(null,"core",[]);let NA=(()=>{class t{constructor(o){}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(cg))};static#t=this.\u0275mod=$s({type:t});static#n=this.\u0275inj=Dn({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WA(t){const r=ln(t);if(!r)return null;const o=new wn(r);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(_t,Ne,O)=>{O.d(Ne,{zQ:()=>on,ww:()=>Qe,rT:()=>xt,f7:()=>Dt,L6:()=>se,_Q:()=>Te,lh:()=>Tt,Qv:()=>We,nw:()=>Qt}),O(999);var ne=O(6814),z=O(5879),fe=O(8326),le=O(7217),ae=O(8645),me=O(2096),Le=O(5592),De=O(2459),W=O(3019),J=O(3093),he=O(4664),Ue=O(7398),je=O(4552);class tt extends ae.x{constructor(Be=1/0,ie=1/0,ue=je.l){super(),this._bufferSize=Be,this._windowTime=ie,this._timestampProvider=ue,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ie===1/0,this._bufferSize=Math.max(1,Be),this._windowTime=Math.max(1,ie)}next(Be){const{isStopped:ie,_buffer:ue,_infiniteTimeWindow:Ce,_timestampProvider:Ee,_windowTime:Ae}=this;ie||(ue.push(Be),!Ce&&ue.push(Ee.now()+Ae)),this._trimBuffer(),super.next(Be)}_subscribe(Be){this._throwIfClosed(),this._trimBuffer();const ie=this._innerSubscribe(Be),{_infiniteTimeWindow:ue,_buffer:Ce}=this,Ee=Ce.slice();for(let Ae=0;Ae<Ee.length&&!Be.closed;Ae+=ue?1:2)Be.next(Ee[Ae]);return this._checkFinalizedStatuses(Be),ie}_trimBuffer(){const{_bufferSize:Be,_timestampProvider:ie,_buffer:ue,_infiniteTimeWindow:Ce}=this,Ee=(Ce?1:2)*Be;if(Be<1/0&&Ee<ue.length&&ue.splice(0,ue.length-Ee),!Ce){const Ae=ie.now();let Fe=0;for(let ot=1;ot<ue.length&&ue[ot]<=Ae;ot+=2)Fe=ot;Fe&&ue.splice(0,Fe+1)}}}var qe=O(3020);function st(lt,Be,ie){let ue,Ce=!1;return lt&&"object"==typeof lt?({bufferSize:ue=1/0,windowTime:Be=1/0,refCount:Ce=!1,scheduler:ie}=lt):ue=lt??1/0,(0,qe.B)({connector:()=>new tt(ue,Be,ie),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ce})}var Xe=O(1374),wt=O(4674);function ht(lt,Be){return(0,wt.m)(Be)?(0,he.w)(()=>lt,Be):(0,he.w)(()=>lt)}var pe=O(5137),Ve=O(2181),ve=O(7142);const We=new z.OlP("angularfire2.auth.use-emulator"),se=new z.OlP("angularfire2.auth.settings"),Te=new z.OlP("angularfire2.auth.tenant-id"),xt=new z.OlP("angularfire2.auth.langugage-code"),Tt=new z.OlP("angularfire2.auth.use-device-language"),Dt=new z.OlP("angularfire.auth.persistence"),Qt=(lt,Be,ie,ue,Ce,Ee,Ae,Fe)=>(0,le.cc)(`${lt.name}.auth`,"AngularFireAuth",lt.name,()=>{const ot=Be.runOutsideAngular(()=>lt.auth());if(ie&&ot.useEmulator(...ie),ue&&(ot.tenantId=ue),ot.languageCode=Ce,Ee&&ot.useDeviceLanguage(),Ae)for(const[Je,Rn]of Object.entries(Ae))ot.settings[Je]=Rn;return Fe&&ot.setPersistence(Fe),ot},[ie,ue,Ce,Ee,Ae,Fe]);let on=(()=>{class lt{authState;idToken;user;idTokenResult;credential;constructor(ie,ue,Ce,Ee,Ae,Fe,ot,Je,Rn,dt,Zt,jt){const yn=new ae.x,Dn=(0,me.of)(void 0).pipe((0,J.Q)(Ae.outsideAngular),(0,he.w)(()=>Ee.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,999)))),(0,Ue.U)(()=>(0,le.on)(ie,Ee,ue)),(0,Ue.U)(fn=>Qt(fn,Ee,Fe,Je,Rn,dt,ot,Zt)),st({bufferSize:1,refCount:!1}));if((0,ne.PM)(Ce))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,me.of)(null);else{Dn.pipe((0,Xe.P)()).subscribe();const fn=Dn.pipe((0,he.w)(en=>en.getRedirectResult().then(ur=>ur,()=>null)),fe.iC,st({bufferSize:1,refCount:!1})),$t=Dn.pipe((0,he.w)(en=>new Le.y(ur=>({unsubscribe:Ee.runOutsideAngular(()=>en.onAuthStateChanged(mn=>ur.next(mn),mn=>ur.error(mn),()=>ur.complete()))})))),St=Dn.pipe((0,he.w)(en=>new Le.y(ur=>({unsubscribe:Ee.runOutsideAngular(()=>en.onIdTokenChanged(mn=>ur.next(mn),mn=>ur.error(mn),()=>ur.complete()))}))));this.authState=fn.pipe(ht($t),(0,pe.R)(Ae.outsideAngular),(0,J.Q)(Ae.insideAngular)),this.user=fn.pipe(ht(St),(0,pe.R)(Ae.outsideAngular),(0,J.Q)(Ae.insideAngular)),this.idToken=this.user.pipe((0,he.w)(en=>en?(0,De.D)(en.getIdToken()):(0,me.of)(null))),this.idTokenResult=this.user.pipe((0,he.w)(en=>en?(0,De.D)(en.getIdTokenResult()):(0,me.of)(null))),this.credential=(0,W.T)(fn,yn,this.authState.pipe((0,Ve.h)(en=>!en))).pipe((0,Ue.U)(en=>en?.user?en:null),(0,pe.R)(Ae.outsideAngular),(0,J.Q)(Ae.insideAngular))}return(0,le.pX)(this,Dn,Ee,{spy:{apply:(fn,$t,St)=>{(fn.startsWith("signIn")||fn.startsWith("createUser"))&&St.then(en=>yn.next(en))}}})}static \u0275fac=function(ue){return new(ue||lt)(z.LFG(le.Dh),z.LFG(le.xv,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(fe.HU),z.LFG(We,8),z.LFG(se,8),z.LFG(Te,8),z.LFG(xt,8),z.LFG(Tt,8),z.LFG(Dt,8),z.LFG(fe.Rf,8))};static \u0275prov=z.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"any"})}return lt})(),Qe=(()=>{class lt{constructor(){ve.Z.registerVersion("angularfire",fe.q4.full,"auth-compat")}static \u0275fac=function(ue){return new(ue||lt)};static \u0275mod=z.oAB({type:lt});static \u0275inj=z.cJS({providers:[on]})}return lt})()},7217:(_t,Ne,O)=>{O.d(Ne,{Dh:()=>Le,GT:()=>ae,cc:()=>je,hO:()=>Ue,on:()=>W,pX:()=>le,xv:()=>De});var y=O(5879),ne=O(8326),z=O(7142);const fe=["ngOnDestroy"],le=(Xe,wt,ht,pe={})=>new Proxy(Xe,{get:(Ve,ve)=>ht.runOutsideAngular(()=>{if(Xe[ve])return pe?.spy?.get&&pe.spy.get(ve,Xe[ve]),Xe[ve];if(fe.indexOf(ve)>-1)return()=>{};const He=wt.toPromise().then(We=>{const se=We?.[ve];return"function"==typeof se?se.bind(We):se?.then?se.then(Te=>ht.run(()=>Te)):ht.run(()=>se)});return new Proxy(()=>{},{get:(We,se)=>He[se],apply:(We,se,Te)=>He.then(xt=>{const Tt=xt?.(...Te);return pe?.spy?.apply&&pe.spy.apply(ve,Te,Tt),Tt})})})}),ae=(Xe,wt)=>{wt.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(pe=>{Object.defineProperty(Xe.prototype,pe,Object.getOwnPropertyDescriptor(ht.prototype||ht,pe))})})};class me{constructor(wt){return wt}}const Le=new y.OlP("angularfire2.app.options"),De=new y.OlP("angularfire2.app.name");function W(Xe,wt,ht){const Ve="object"==typeof ht&&ht||{};Ve.name=Ve.name||"string"==typeof ht&&ht||"[DEFAULT]";const He=z.Z.apps.filter(We=>We&&We.name===Ve.name)[0]||wt.runOutsideAngular(()=>z.Z.initializeApp(Xe,Ve));try{if(JSON.stringify(Xe)!==JSON.stringify(He.options)){const We=!!module.hot;J("error",`${He.name} Firebase App already initialized with different options${We?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new me(He)}const J=(Xe,...wt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Xe](...wt)},he={provide:me,useFactory:W,deps:[Le,y.R0b,[new y.FiY,De]]};let Ue=(()=>{class Xe{static initializeApp(ht,pe){return{ngModule:Xe,providers:[{provide:Le,useValue:ht},{provide:De,useValue:pe}]}}constructor(ht){z.Z.registerVersion("angularfire",ne.q4.full,"core"),z.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),z.Z.registerVersion("angular",y.q4F.full,ht.toString())}static \u0275fac=function(pe){return new(pe||Xe)(y.LFG(y.Lbi))};static \u0275mod=y.oAB({type:Xe});static \u0275inj=y.cJS({providers:[he]})}return Xe})();function je(Xe,wt,ht,pe,Ve){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===Xe)||[];if(ve)return function tt(Xe,wt){try{return Xe.toString()===wt.toString()}catch{return Xe===wt}}(Ve,He)||(st("error",`${wt} was already initialized on the ${ht} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),st("warn",{is:Ve,was:He})),ve;{const We=pe();return globalThis.\u0275AngularfireInstanceCache.push([Xe,We,Ve]),We}}const qe=typeof module<"u"&&!!module.hot,st=(Xe,...wt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Xe](...wt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(_t,Ne,O)=>{O.d(Ne,{q4:()=>tt,iC:()=>Dt,HU:()=>He,Rf:()=>wt});var y=O(5879),ne=O(534);(0,ne.registerVersion)("firebase","10.8.0","app");var le=O(1954),me=O(2631);const De=new class Le extends me.v{}(class ae extends le.o{constructor(Be,ie){super(Be,ie),this.scheduler=Be,this.work=ie}schedule(Be,ie=0){return ie>0?super.schedule(Be,ie):(this.delay=ie,this.state=Be,this.scheduler.flush(this),this)}execute(Be,ie){return ie>0||this.closed?super.execute(Be,ie):this._execute(Be,ie)}requestAsyncId(Be,ie,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId(Be,ie,ue):(Be.flush(this),0)}});var J=O(6321),he=O(9397),Ue=O(5137),je=O(3093);const tt=new y.GfV("ANGULARFIRE2_VERSION");class wt{constructor(){return((lt,Be)=>{const ie=(0,ne.getApps)(),ue=[];return ie.forEach(Ce=>{Ce.container.getProvider(lt).instances.forEach(Ae=>{ue.includes(Ae)||ue.push(Ae)})}),ue})(ht)}}const ht="app-check";function pe(){}class Ve{zone;delegate;constructor(Be,ie=De){this.zone=Be,this.delegate=ie}now(){return this.delegate.now()}schedule(Be,ie,ue){const Ce=this.zone;return this.delegate.schedule(function(Ae){Ce.runGuarded(()=>{Be.apply(this,[Ae])})},ie,ue)}}class ve{zone;task=null;constructor(Be){this.zone=Be}call(Be,ie){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pe,{},pe,pe)),ie.pipe((0,he.b)({next:ue,complete:ue,error:ue})).subscribe(Be).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let He=(()=>{class lt{ngZone;outsideAngular;insideAngular;constructor(ie){this.ngZone=ie,this.outsideAngular=ie.runOutsideAngular(()=>new Ve(Zone.current)),this.insideAngular=ie.run(()=>new Ve(Zone.current,J.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(ue){return new(ue||lt)(y.LFG(y.R0b))};static \u0275prov=y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"})}return lt})();function Dt(lt){return function Qt(lt){return function(ie){return(ie=ie.lift(new ve(lt.ngZone))).pipe((0,Ue.R)(lt.outsideAngular),(0,je.Q)(lt.insideAngular))}}(function We(){const lt=globalThis.\u0275AngularFireScheduler;if(!lt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return lt}())(lt)}},6593:(_t,Ne,O)=>{O.d(Ne,{Dx:()=>ri,b2:()=>$t,q6:()=>jt});var y=O(5879),ne=O(6814);class z extends ne.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends z{static makeCurrent(){(0,ne.HT)(new fe)}onAndCancel($,B,H){return $.addEventListener(B,H),()=>{$.removeEventListener(B,H)}}dispatchEvent($,B){$.dispatchEvent(B)}remove($){$.parentNode&&$.parentNode.removeChild($)}createElement($,B){return(B=B||this.getDefaultDocument()).createElement($)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($){return $.nodeType===Node.ELEMENT_NODE}isShadowRoot($){return $ instanceof DocumentFragment}getGlobalEventTarget($,B){return"window"===B?window:"document"===B?$:"body"===B?$.body:null}getBaseHref($){const B=function ae(){return le=le||document.querySelector("base"),le?le.getAttribute("href"):null}();return null==B?null:function Le(j){me=me||document.createElement("a"),me.setAttribute("href",j);const $=me.pathname;return"/"===$.charAt(0)?$:`/${$}`}(B)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie($){return(0,ne.Mx)(document.cookie,$)}}let me,le=null,W=(()=>{class j{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(H){return new(H||j)};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const J=new y.OlP("EventManagerPlugins");let he=(()=>{class j{constructor(B,H){this._zone=H,this._eventNameToPlugin=new Map,B.forEach(ge=>{ge.manager=this}),this._plugins=B.slice().reverse()}addEventListener(B,H,ge){return this._findPluginFor(H).addEventListener(B,H,ge)}getZone(){return this._zone}_findPluginFor(B){let H=this._eventNameToPlugin.get(B);if(H)return H;if(H=this._plugins.find($e=>$e.supports(B)),!H)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(B,H),H}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(J),y.LFG(y.R0b))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();class Ue{constructor($){this._doc=$}}const je="ng-app-id";let tt=(()=>{class j{constructor(B,H,ge,$e={}){this.doc=B,this.appId=H,this.nonce=ge,this.platformId=$e,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ne.PM)($e),this.resetHostNodes()}addStyles(B){for(const H of B)1===this.changeUsageCount(H,1)&&this.onStyleAdded(H)}removeStyles(B){for(const H of B)this.changeUsageCount(H,-1)<=0&&this.onStyleRemoved(H)}ngOnDestroy(){const B=this.styleNodesInDOM;B&&(B.forEach(H=>H.remove()),B.clear());for(const H of this.getAllStyles())this.onStyleRemoved(H);this.resetHostNodes()}addHost(B){this.hostNodes.add(B);for(const H of this.getAllStyles())this.addStyleToHost(B,H)}removeHost(B){this.hostNodes.delete(B)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(B){for(const H of this.hostNodes)this.addStyleToHost(H,B)}onStyleRemoved(B){const H=this.styleRef;H.get(B)?.elements?.forEach(ge=>ge.remove()),H.delete(B)}collectServerRenderedStyles(){const B=this.doc.head?.querySelectorAll(`style[${je}="${this.appId}"]`);if(B?.length){const H=new Map;return B.forEach(ge=>{null!=ge.textContent&&H.set(ge.textContent,ge)}),H}return null}changeUsageCount(B,H){const ge=this.styleRef;if(ge.has(B)){const $e=ge.get(B);return $e.usage+=H,$e.usage}return ge.set(B,{usage:H,elements:[]}),H}getStyleElement(B,H){const ge=this.styleNodesInDOM,$e=ge?.get(H);if($e?.parentNode===B)return ge.delete(H),$e.removeAttribute(je),$e;{const it=this.doc.createElement("style");return this.nonce&&it.setAttribute("nonce",this.nonce),it.textContent=H,this.platformIsServer&&it.setAttribute(je,this.appId),it}}addStyleToHost(B,H){const ge=this.getStyleElement(B,H);B.appendChild(ge);const $e=this.styleRef,it=$e.get(H)?.elements;it?it.push(ge):$e.set(H,{elements:[ge],usage:1})}resetHostNodes(){const B=this.hostNodes;B.clear(),B.add(this.doc.head)}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(ne.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const qe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},st=/%COMP%/g,Ve=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function We(j,$){return $.map(B=>B.replace(st,j))}let se=(()=>{class j{constructor(B,H,ge,$e,it,Ot,kt,Ct=null){this.eventManager=B,this.sharedStylesHost=H,this.appId=ge,this.removeStylesOnCompDestroy=$e,this.doc=it,this.platformId=Ot,this.ngZone=kt,this.nonce=Ct,this.rendererByCompId=new Map,this.platformIsServer=(0,ne.PM)(Ot),this.defaultRenderer=new Te(B,it,kt,this.platformIsServer)}createRenderer(B,H){if(!B||!H)return this.defaultRenderer;this.platformIsServer&&H.encapsulation===y.ifc.ShadowDom&&(H={...H,encapsulation:y.ifc.Emulated});const ge=this.getOrCreateRenderer(B,H);return ge instanceof Qe?ge.applyToHost(B):ge instanceof on&&ge.applyStyles(),ge}getOrCreateRenderer(B,H){const ge=this.rendererByCompId;let $e=ge.get(H.id);if(!$e){const it=this.doc,Ot=this.ngZone,kt=this.eventManager,Ct=this.sharedStylesHost,Vt=this.removeStylesOnCompDestroy,Yn=this.platformIsServer;switch(H.encapsulation){case y.ifc.Emulated:$e=new Qe(kt,Ct,H,this.appId,Vt,it,Ot,Yn);break;case y.ifc.ShadowDom:return new Qt(kt,Ct,B,H,it,Ot,this.nonce,Yn);default:$e=new on(kt,Ct,H,Vt,it,Ot,Yn)}ge.set(H.id,$e)}return $e}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(he),y.LFG(tt),y.LFG(y.AFp),y.LFG(Ve),y.LFG(ne.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();class Te{constructor($,B,H,ge){this.eventManager=$,this.doc=B,this.ngZone=H,this.platformIsServer=ge,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($,B){return B?this.doc.createElementNS(qe[B]||B,$):this.doc.createElement($)}createComment($){return this.doc.createComment($)}createText($){return this.doc.createTextNode($)}appendChild($,B){(Dt($)?$.content:$).appendChild(B)}insertBefore($,B,H){$&&(Dt($)?$.content:$).insertBefore(B,H)}removeChild($,B){$&&$.removeChild(B)}selectRootElement($,B){let H="string"==typeof $?this.doc.querySelector($):$;if(!H)throw new y.vHH(-5104,!1);return B||(H.textContent=""),H}parentNode($){return $.parentNode}nextSibling($){return $.nextSibling}setAttribute($,B,H,ge){if(ge){B=ge+":"+B;const $e=qe[ge];$e?$.setAttributeNS($e,B,H):$.setAttribute(B,H)}else $.setAttribute(B,H)}removeAttribute($,B,H){if(H){const ge=qe[H];ge?$.removeAttributeNS(ge,B):$.removeAttribute(`${H}:${B}`)}else $.removeAttribute(B)}addClass($,B){$.classList.add(B)}removeClass($,B){$.classList.remove(B)}setStyle($,B,H,ge){ge&(y.JOm.DashCase|y.JOm.Important)?$.style.setProperty(B,H,ge&y.JOm.Important?"important":""):$.style[B]=H}removeStyle($,B,H){H&y.JOm.DashCase?$.style.removeProperty(B):$.style[B]=""}setProperty($,B,H){$[B]=H}setValue($,B){$.nodeValue=B}listen($,B,H){if("string"==typeof $&&!($=(0,ne.q)().getGlobalEventTarget(this.doc,$)))throw new Error(`Unsupported event target ${$} for event ${B}`);return this.eventManager.addEventListener($,B,this.decoratePreventDefault(H))}decoratePreventDefault($){return B=>{if("__ngUnwrap__"===B)return $;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$(B)):$(B))&&B.preventDefault()}}}function Dt(j){return"TEMPLATE"===j.tagName&&void 0!==j.content}class Qt extends Te{constructor($,B,H,ge,$e,it,Ot,kt){super($,$e,it,kt),this.sharedStylesHost=B,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ct=We(ge.id,ge.styles);for(const Vt of Ct){const Yn=document.createElement("style");Ot&&Yn.setAttribute("nonce",Ot),Yn.textContent=Vt,this.shadowRoot.appendChild(Yn)}}nodeOrShadowRoot($){return $===this.hostEl?this.shadowRoot:$}appendChild($,B){return super.appendChild(this.nodeOrShadowRoot($),B)}insertBefore($,B,H){return super.insertBefore(this.nodeOrShadowRoot($),B,H)}removeChild($,B){return super.removeChild(this.nodeOrShadowRoot($),B)}parentNode($){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class on extends Te{constructor($,B,H,ge,$e,it,Ot,kt){super($,$e,it,Ot),this.sharedStylesHost=B,this.removeStylesOnCompDestroy=ge,this.styles=kt?We(kt,H.styles):H.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Qe extends on{constructor($,B,H,ge,$e,it,Ot,kt){const Ct=ge+"-"+H.id;super($,B,H,$e,it,Ot,kt,Ct),this.contentAttr=function ve(j){return"_ngcontent-%COMP%".replace(st,j)}(Ct),this.hostAttr=function He(j){return"_nghost-%COMP%".replace(st,j)}(Ct)}applyToHost($){this.applyStyles(),this.setAttribute($,this.hostAttr,"")}createElement($,B){const H=super.createElement($,B);return super.setAttribute(H,this.contentAttr,""),H}}let lt=(()=>{class j extends Ue{constructor(B){super(B)}supports(B){return!0}addEventListener(B,H,ge){return B.addEventListener(H,ge,!1),()=>this.removeEventListener(B,H,ge)}removeEventListener(B,H,ge){return B.removeEventListener(H,ge)}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(ne.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const Be=["alt","control","meta","shift"],ie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ue={alt:j=>j.altKey,control:j=>j.ctrlKey,meta:j=>j.metaKey,shift:j=>j.shiftKey};let Ce=(()=>{class j extends Ue{constructor(B){super(B)}supports(B){return null!=j.parseEventName(B)}addEventListener(B,H,ge){const $e=j.parseEventName(H),it=j.eventCallback($e.fullKey,ge,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ne.q)().onAndCancel(B,$e.domEventName,it))}static parseEventName(B){const H=B.toLowerCase().split("."),ge=H.shift();if(0===H.length||"keydown"!==ge&&"keyup"!==ge)return null;const $e=j._normalizeKey(H.pop());let it="",Ot=H.indexOf("code");if(Ot>-1&&(H.splice(Ot,1),it="code."),Be.forEach(Ct=>{const Vt=H.indexOf(Ct);Vt>-1&&(H.splice(Vt,1),it+=Ct+".")}),it+=$e,0!=H.length||0===$e.length)return null;const kt={};return kt.domEventName=ge,kt.fullKey=it,kt}static matchEventFullKeyCode(B,H){let ge=ie[B.key]||B.key,$e="";return H.indexOf("code.")>-1&&(ge=B.code,$e="code."),!(null==ge||!ge)&&(ge=ge.toLowerCase()," "===ge?ge="space":"."===ge&&(ge="dot"),Be.forEach(it=>{it!==ge&&(0,ue[it])(B)&&($e+=it+".")}),$e+=ge,$e===H)}static eventCallback(B,H,ge){return $e=>{j.matchEventFullKeyCode($e,B)&&ge.runGuarded(()=>H($e))}}static _normalizeKey(B){return"esc"===B?"escape":B}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(ne.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const jt=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:ne.bD},{provide:y.g9A,useValue:function Je(){fe.makeCurrent()},multi:!0},{provide:ne.K0,useFactory:function dt(){return(0,y.RDi)(document),document},deps:[]}]),yn=new y.OlP(""),Dn=[{provide:y.rWj,useClass:class De{addToWindow($){y.dqk.getAngularTestability=(H,ge=!0)=>{const $e=$.findTestabilityInTree(H,ge);if(null==$e)throw new y.vHH(5103,!1);return $e},y.dqk.getAllAngularTestabilities=()=>$.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>$.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(H=>{const ge=y.dqk.getAllAngularTestabilities();let $e=ge.length,it=!1;const Ot=function(kt){it=it||kt,$e--,0==$e&&H(it)};ge.forEach(kt=>{kt.whenStable(Ot)})})}findTestabilityInTree($,B,H){return null==B?null:$.getTestability(B)??(H?(0,ne.q)().isShadowRoot(B)?this.findTestabilityInTree($,B.host,!0):this.findTestabilityInTree($,B.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],fn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Rn(){return new y.qLn},deps:[]},{provide:J,useClass:lt,multi:!0,deps:[ne.K0,y.R0b,y.Lbi]},{provide:J,useClass:Ce,multi:!0,deps:[ne.K0]},se,tt,he,{provide:y.FYo,useExisting:se},{provide:ne.JF,useClass:W,deps:[]},[]];let $t=(()=>{class j{constructor(B){}static withServerTransition(B){return{ngModule:j,providers:[{provide:y.AFp,useValue:B.appId}]}}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(yn,12))};static#t=this.\u0275mod=y.oAB({type:j});static#n=this.\u0275inj=y.cJS({providers:[...fn,...Dn],imports:[ne.ez,y.hGG]})}return j})(),ri=(()=>{class j{constructor(B){this._doc=B}getTitle(){return this._doc.title}setTitle(B){this._doc.title=B||""}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(ne.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:function(H){let ge=null;return ge=H?new H:function mn(){return new ri((0,y.LFG)(ne.K0))}(),ge},providedIn:"root"})}return j})();typeof window<"u"&&window},3781:(_t,Ne,O)=>{O.d(Ne,{Bz:()=>Xd,lC:()=>Ms});var y=O(5879),ne=O(5592),z=O(4674),le=O(2459),ae=O(2096),me=O(5619),Le=O(7453),De=O(2737),W=O(7400),J=O(4564),he=O(2714),Ue=O(8251),je=O(7103);function tt(...E){const C=(0,J.yG)(E),v=(0,J.jO)(E),{args:D,keys:P}=(0,Le.D)(E);if(0===D.length)return(0,le.D)([],C);const U=new ne.y(function qe(E,C,v=De.y){return D=>{st(C,()=>{const{length:P}=E,U=new Array(P);let Y=P,Re=P;for(let Se=0;Se<P;Se++)st(C,()=>{const X=(0,le.D)(E[Se],C);let Jt=!1;X.subscribe((0,Ue.x)(D,zt=>{U[Se]=zt,Jt||(Jt=!0,Re--),Re||D.next(v(U.slice()))},()=>{--Y||D.complete()}))},D)},D)}}(D,C,P?Y=>(0,he.n)(P,Y):De.y));return v?U.pipe((0,W.Z)(v)):U}function st(E,C,v){E?(0,je.f)(v,E,C):C()}var Xe=O(6973),wt=O(5211),ht=O(4829);function pe(E){return new ne.y(C=>{(0,ht.Xf)(E()).subscribe(C)})}var Ve=O(8407);function ve(E,C){const v=(0,z.m)(E)?E:()=>E,D=P=>P.error(v());return new ne.y(C?P=>C.schedule(D,0,P):D)}var He=O(6232),We=O(7394),se=O(9360);function Te(){return(0,se.e)((E,C)=>{let v=null;E._refCount++;const D=(0,Ue.x)(C,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(v=null);const P=E._connection,U=v;v=null,P&&(!U||P===U)&&P.unsubscribe(),C.unsubscribe()});E.subscribe(D),D.closed||(v=E.connect())})}class xt extends ne.y{constructor(C,v){super(),this.source=C,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,se.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new We.w0;const v=this.getSubject();C.add(this.source.subscribe((0,Ue.x)(v,void 0,()=>{this._teardown(),v.complete()},D=>{this._teardown(),v.error(D)},()=>this._teardown()))),C.closed&&(this._connection=null,C=We.w0.EMPTY)}return C}refCount(){return Te()(this)}}var Tt=O(8645),Dt=O(6814),Qt=O(7398),on=O(4664),Qe=O(8180),lt=O(7921),Be=O(2181),ie=O(1631),ue=O(1374),Ce=O(6328),Ee=O(9397);function Ae(E){return(0,se.e)((C,v)=>{let U,D=null,P=!1;D=C.subscribe((0,Ue.x)(v,void 0,void 0,Y=>{U=(0,ht.Xf)(E(Y,Ae(E)(C))),D?(D.unsubscribe(),D=null,U.subscribe(v)):P=!0})),P&&(D.unsubscribe(),D=null,U.subscribe(v))})}var Fe=O(6699),ot=O(3572);function Je(E){return E<=0?()=>He.E:(0,se.e)((C,v)=>{let D=[];C.subscribe((0,Ue.x)(v,P=>{D.push(P),E<D.length&&D.shift()},()=>{for(const P of D)v.next(P);v.complete()},void 0,()=>{D=null}))})}var Rn=O(3026),jt=O(4716),yn=O(2420),fn=O(7537),$t=O(6593);const St="primary",en=Symbol("RouteTitle");class ur{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v[0]:v}return null}getAll(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function mn(E){return new ur(E)}function ri(E,C,v){const D=v.path.split("/");if(D.length>E.length||"full"===v.pathMatch&&(C.hasChildren()||D.length<E.length))return null;const P={};for(let U=0;U<D.length;U++){const Y=D[U],Re=E[U];if(Y.startsWith(":"))P[Y.substring(1)]=Re;else if(Y!==Re.path)return null}return{consumed:E.slice(0,D.length),posParams:P}}function Qn(E,C){const v=E?Object.keys(E):void 0,D=C?Object.keys(C):void 0;if(!v||!D||v.length!=D.length)return!1;let P;for(let U=0;U<v.length;U++)if(P=v[U],!bt(E[P],C[P]))return!1;return!0}function bt(E,C){if(Array.isArray(E)&&Array.isArray(C)){if(E.length!==C.length)return!1;const v=[...E].sort(),D=[...C].sort();return v.every((P,U)=>D[U]===P)}return E===C}function Yt(E){return E.length>0?E[E.length-1]:null}function Nt(E){return function fe(E){return!!E&&(E instanceof ne.y||(0,z.m)(E.lift)&&(0,z.m)(E.subscribe))}(E)?E:(0,y.QGY)(E)?(0,le.D)(Promise.resolve(E)):(0,ae.of)(E)}const Hn={exact:function qn(E,C,v){if(!fr(E.segments,C.segments)||!Gt(E.segments,C.segments,v)||E.numberOfChildren!==C.numberOfChildren)return!1;for(const D in C.children)if(!E.children[D]||!qn(E.children[D],C.children[D],v))return!1;return!0},subset:Et},Kr={exact:function vn(E,C){return Qn(E,C)},subset:function Ui(E,C){return Object.keys(C).length<=Object.keys(E).length&&Object.keys(C).every(v=>bt(E[v],C[v]))},ignored:()=>!0};function Dr(E,C,v){return Hn[v.paths](E.root,C.root,v.matrixParams)&&Kr[v.queryParams](E.queryParams,C.queryParams)&&!("exact"===v.fragment&&E.fragment!==C.fragment)}function Et(E,C,v){return si(E,C,C.segments,v)}function si(E,C,v,D){if(E.segments.length>v.length){const P=E.segments.slice(0,v.length);return!(!fr(P,v)||C.hasChildren()||!Gt(P,v,D))}if(E.segments.length===v.length){if(!fr(E.segments,v)||!Gt(E.segments,v,D))return!1;for(const P in C.children)if(!E.children[P]||!Et(E.children[P],C.children[P],D))return!1;return!0}{const P=v.slice(0,E.segments.length),U=v.slice(E.segments.length);return!!(fr(E.segments,P)&&Gt(E.segments,P,D)&&E.children[St])&&si(E.children[St],C,U,D)}}function Gt(E,C,v){return C.every((D,P)=>Kr[v](E[P].parameters,D.parameters))}class cr{constructor(C=new qt([],{}),v={},D=null){this.root=C,this.queryParams=v,this.fragment=D}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mn(this.queryParams)),this._queryParamMap}toString(){return Bi.serialize(this)}}class qt{constructor(C,v){this.segments=C,this.children=v,this.parent=null,Object.values(v).forEach(D=>D.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ai(this)}}class Ai{constructor(C,v){this.path=C,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=mn(this.parameters)),this._parameterMap}toString(){return ge(this)}}function fr(E,C){return E.length===C.length&&E.every((v,D)=>v.path===C[D].path)}let Ar=(()=>{class E{static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:function(){return new Zr},providedIn:"root"})}return E})();class Zr{parse(C){const v=new Q(C);return new cr(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(C){const v=`/${ui(C.root,!0)}`,D=function it(E){const C=Object.keys(E).map(v=>{const D=E[v];return Array.isArray(D)?D.map(P=>`${re(v)}=${re(P)}`).join("&"):`${re(v)}=${re(D)}`}).filter(v=>!!v);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${v}${D}${"string"==typeof C.fragment?`#${function j(E){return encodeURI(E)}(C.fragment)}`:""}`}}const Bi=new Zr;function ai(E){return E.segments.map(C=>ge(C)).join("/")}function ui(E,C){if(!E.hasChildren())return ai(E);if(C){const v=E.children[St]?ui(E.children[St],!1):"",D=[];return Object.entries(E.children).forEach(([P,U])=>{P!==St&&D.push(`${P}:${ui(U,!1)}`)}),D.length>0?`${v}(${D.join("//")})`:v}{const v=function Cr(E,C){let v=[];return Object.entries(E.children).forEach(([D,P])=>{D===St&&(v=v.concat(C(P,D)))}),Object.entries(E.children).forEach(([D,P])=>{D!==St&&(v=v.concat(C(P,D)))}),v}(E,(D,P)=>P===St?[ui(E.children[St],!1)]:[`${P}:${ui(D,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[St]?`${ai(E)}/${v[0]}`:`${ai(E)}/(${v.join("//")})`}}function Mi(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function re(E){return Mi(E).replace(/%3B/gi,";")}function $(E){return Mi(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function B(E){return decodeURIComponent(E)}function H(E){return B(E.replace(/\+/g,"%20"))}function ge(E){return`${$(E.path)}${function $e(E){return Object.keys(E).map(C=>`;${$(C)}=${$(E[C])}`).join("")}(E.parameters)}`}const Ot=/^[^\/()?;#]+/;function kt(E){const C=E.match(Ot);return C?C[0]:""}const Ct=/^[^\/()?;=#]+/,Yn=/^[^=?&#]+/,te=/^[^&#]+/;class Q{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let D={};return this.peekStartsWith("(")&&(D=this.parseParens(!1)),(C.length>0||Object.keys(v).length>0)&&(D[St]=new qt(C,v)),D}parseSegment(){const C=kt(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(C),new Ai(B(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const v=function Vt(E){const C=E.match(Ct);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let D="";if(this.consumeOptional("=")){const P=kt(this.remaining);P&&(D=P,this.capture(D))}C[B(v)]=B(D)}parseQueryParam(C){const v=function ye(E){const C=E.match(Yn);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let D="";if(this.consumeOptional("=")){const Y=function ce(E){const C=E.match(te);return C?C[0]:""}(this.remaining);Y&&(D=Y,this.capture(D))}const P=H(v),U=H(D);if(C.hasOwnProperty(P)){let Y=C[P];Array.isArray(Y)||(Y=[Y],C[P]=Y),Y.push(U)}else C[P]=U}parseParens(C){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const D=kt(this.remaining),P=this.remaining[D.length];if("/"!==P&&")"!==P&&";"!==P)throw new y.vHH(4010,!1);let U;D.indexOf(":")>-1?(U=D.slice(0,D.indexOf(":")),this.capture(U),this.capture(":")):C&&(U=St);const Y=this.parseChildren();v[U]=1===Object.keys(Y).length?Y[St]:new qt([],Y),this.consumeOptional("//")}return v}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new y.vHH(4011,!1)}}function K(E){return E.segments.length>0?new qt([],{[St]:E}):E}function _e(E){const C={};for(const D of Object.keys(E.children)){const U=_e(E.children[D]);if(D===St&&0===U.segments.length&&U.hasChildren())for(const[Y,Re]of Object.entries(U.children))C[Y]=Re;else(U.segments.length>0||U.hasChildren())&&(C[D]=U)}return function xe(E){if(1===E.numberOfChildren&&E.children[St]){const C=E.children[St];return new qt(E.segments.concat(C.segments),C.children)}return E}(new qt(E.segments,C))}function at(E){return E instanceof cr}function Ut(E){let C;const P=K(function v(U){const Y={};for(const Se of U.children){const X=v(Se);Y[Se.outlet]=X}const Re=new qt(U.url,Y);return U===E&&(C=Re),Re}(E.root));return C??P}function Nn(E,C,v,D){let P=E;for(;P.parent;)P=P.parent;if(0===C.length)return Sr(P,P,P,v,D);const U=function Vn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Pn(!0,0,E);let C=0,v=!1;const D=E.reduce((P,U,Y)=>{if("object"==typeof U&&null!=U){if(U.outlets){const Re={};return Object.entries(U.outlets).forEach(([Se,X])=>{Re[Se]="string"==typeof X?X.split("/"):X}),[...P,{outlets:Re}]}if(U.segmentPath)return[...P,U.segmentPath]}return"string"!=typeof U?[...P,U]:0===Y?(U.split("/").forEach((Re,Se)=>{0==Se&&"."===Re||(0==Se&&""===Re?v=!0:".."===Re?C++:""!=Re&&P.push(Re))}),P):[...P,U]},[]);return new Pn(v,C,D)}(C);if(U.toRoot())return Sr(P,P,new qt([],{}),v,D);const Y=function Bs(E,C,v){if(E.isAbsolute)return new ci(C,!0,0);if(!v)return new ci(C,!1,NaN);if(null===v.parent)return new ci(v,!0,0);const D=an(E.commands[0])?0:1;return function yr(E,C,v){let D=E,P=C,U=v;for(;U>P;){if(U-=P,D=D.parent,!D)throw new y.vHH(4005,!1);P=D.segments.length}return new ci(D,!1,P-U)}(v,v.segments.length-1+D,E.numberOfDoubleDots)}(U,P,E),Re=Y.processChildren?_i(Y.segmentGroup,Y.index,U.commands):Xi(Y.segmentGroup,Y.index,U.commands);return Sr(P,Y.segmentGroup,Re,v,D)}function an(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function Kn(E){return"object"==typeof E&&null!=E&&E.outlets}function Sr(E,C,v,D,P){let Y,U={};D&&Object.entries(D).forEach(([Se,X])=>{U[Se]=Array.isArray(X)?X.map(Jt=>`${Jt}`):`${X}`}),Y=E===C?v:kr(E,C,v);const Re=K(_e(Y));return new cr(Re,U,P)}function kr(E,C,v){const D={};return Object.entries(E.children).forEach(([P,U])=>{D[P]=U===C?v:kr(U,C,v)}),new qt(E.segments,D)}class Pn{constructor(C,v,D){if(this.isAbsolute=C,this.numberOfDoubleDots=v,this.commands=D,C&&D.length>0&&an(D[0]))throw new y.vHH(4003,!1);const P=D.find(Kn);if(P&&P!==Yt(D))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ci{constructor(C,v,D){this.segmentGroup=C,this.processChildren=v,this.index=D}}function Xi(E,C,v){if(E||(E=new qt([],{})),0===E.segments.length&&E.hasChildren())return _i(E,C,v);const D=function Lu(E,C,v){let D=0,P=C;const U={match:!1,pathIndex:0,commandIndex:0};for(;P<E.segments.length;){if(D>=v.length)return U;const Y=E.segments[P],Re=v[D];if(Kn(Re))break;const Se=`${Re}`,X=D<v.length-1?v[D+1]:null;if(P>0&&void 0===Se)break;if(Se&&X&&"object"==typeof X&&void 0===X.outlets){if(!li(Se,X,Y))return U;D+=2}else{if(!li(Se,{},Y))return U;D++}P++}return{match:!0,pathIndex:P,commandIndex:D}}(E,C,v),P=v.slice(D.commandIndex);if(D.match&&D.pathIndex<E.segments.length){const U=new qt(E.segments.slice(0,D.pathIndex),{});return U.children[St]=new qt(E.segments.slice(D.pathIndex),E.children),_i(U,0,P)}return D.match&&0===P.length?new qt(E.segments,{}):D.match&&!E.hasChildren()?ji(E,C,v):D.match?_i(E,0,P):ji(E,C,v)}function _i(E,C,v){if(0===v.length)return new qt(E.segments,{});{const D=function pn(E){return Kn(E[0])?E[0].outlets:{[St]:E}}(v),P={};if(Object.keys(D).some(U=>U!==St)&&E.children[St]&&1===E.numberOfChildren&&0===E.children[St].segments.length){const U=_i(E.children[St],C,v);return new qt(E.segments,U.children)}return Object.entries(D).forEach(([U,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(P[U]=Xi(E.children[U],C,Y))}),Object.entries(E.children).forEach(([U,Y])=>{void 0===D[U]&&(P[U]=Y)}),new qt(E.segments,P)}}function ji(E,C,v){const D=E.segments.slice(0,C);let P=0;for(;P<v.length;){const U=v[P];if(Kn(U)){const Se=$a(U.outlets);return new qt(D,Se)}if(0===P&&an(v[0])){D.push(new Ai(E.segments[C].path,Oo(v[0]))),P++;continue}const Y=Kn(U)?U.outlets[St]:`${U}`,Re=P<v.length-1?v[P+1]:null;Y&&Re&&an(Re)?(D.push(new Ai(Y,Oo(Re))),P+=2):(D.push(new Ai(Y,{})),P++)}return new qt(D,{})}function $a(E){const C={};return Object.entries(E).forEach(([v,D])=>{"string"==typeof D&&(D=[D]),null!==D&&(C[v]=ji(new qt([],{}),0,D))}),C}function Oo(E){const C={};return Object.entries(E).forEach(([v,D])=>C[v]=`${D}`),C}function li(E,C,v){return E==v.path&&Qn(C,v.parameters)}const ps="imperative";class $i{constructor(C,v){this.id=C,this.url=v}}class Ha extends $i{constructor(C,v,D="imperative",P=null){super(C,v),this.type=0,this.navigationTrigger=D,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class di extends $i{constructor(C,v,D){super(C,v),this.urlAfterRedirects=D,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ko extends $i{constructor(C,v,D,P){super(C,v),this.reason=D,this.code=P,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class js extends $i{constructor(C,v,D,P){super(C,v),this.reason=D,this.code=P,this.type=16}}class yi extends $i{constructor(C,v,D,P){super(C,v),this.error=D,this.target=P,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oa extends $i{constructor(C,v,D,P){super(C,v),this.urlAfterRedirects=D,this.state=P,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vi extends $i{constructor(C,v,D,P){super(C,v),this.urlAfterRedirects=D,this.state=P,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aa extends $i{constructor(C,v,D,P,U){super(C,v),this.urlAfterRedirects=D,this.state=P,this.shouldActivate=U,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class co extends $i{constructor(C,v,D,P){super(C,v),this.urlAfterRedirects=D,this.state=P,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fu extends $i{constructor(C,v,D,P){super(C,v),this.urlAfterRedirects=D,this.state=P,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qr{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class za{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $s{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ga{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fo{constructor(C,v,D){this.routerEvent=C,this.position=v,this.anchor=D,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ln{}class lr{constructor(C){this.url=C}}class Rs{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vr,this.attachRef=null}}let vr=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(v,D){const P=this.getOrCreateContext(v);P.outlet=D,this.contexts.set(v,P)}onChildOutletDestroyed(v){const D=this.getContext(v);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let D=this.getContext(v);return D||(D=new Rs,this.contexts.set(v,D)),D}getContext(v){return this.contexts.get(v)||null}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class lo{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const v=this.pathFromRoot(C);return v.length>1?v[v.length-2]:null}children(C){const v=Hi(C,this._root);return v?v.children.map(D=>D.value):[]}firstChild(C){const v=Hi(C,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(C){const v=Hs(C,this._root);return v.length<2?[]:v[v.length-2].children.map(P=>P.value).filter(P=>P!==C)}pathFromRoot(C){return Hs(C,this._root).map(v=>v.value)}}function Hi(E,C){if(E===C.value)return C;for(const v of C.children){const D=Hi(E,v);if(D)return D}return null}function Hs(E,C){if(E===C.value)return[C];for(const v of C.children){const D=Hs(E,v);if(D.length)return D.unshift(C),D}return[]}class zi{constructor(C,v){this.value=C,this.children=v}toString(){return`TreeNode(${this.value})`}}function Gi(E){const C={};return E&&E.children.forEach(v=>C[v.value.outlet]=v),C}class zn extends lo{constructor(C,v){super(C),this.snapshot=v,Fn(this,C)}toString(){return this.snapshot.toString()}}function mt(E,C){const v=function Kt(E,C){const Y=new tr([],{},{},"",{},St,C,null,{});return new Ps("",new zi(Y,[]))}(0,C),D=new me.X([new Ai("",{})]),P=new me.X({}),U=new me.X({}),Y=new me.X({}),Re=new me.X(""),Se=new Mn(D,P,Y,Re,U,St,C,v.root);return Se.snapshot=v.root,new zn(new zi(Se,[]),v)}class Mn{constructor(C,v,D,P,U,Y,Re,Se){this.urlSubject=C,this.paramsSubject=v,this.queryParamsSubject=D,this.fragmentSubject=P,this.dataSubject=U,this.outlet=Y,this.component=Re,this._futureSnapshot=Se,this.title=this.dataSubject?.pipe((0,Qt.U)(X=>X[en]))??(0,ae.of)(void 0),this.url=C,this.params=v,this.queryParams=D,this.fragment=P,this.data=U}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qt.U)(C=>mn(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qt.U)(C=>mn(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hr(E,C="emptyOnly"){const v=E.pathFromRoot;let D=0;if("always"!==C)for(D=v.length-1;D>=1;){const P=v[D],U=v[D-1];if(P.routeConfig&&""===P.routeConfig.path)D--;else{if(U.component)break;D--}}return function ua(E){return E.reduce((C,v)=>({params:{...C.params,...v.params},data:{...C.data,...v.data},resolve:{...v.data,...C.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(D))}class tr{get title(){return this.data?.[en]}constructor(C,v,D,P,U,Y,Re,Se,X){this.url=C,this.params=v,this.queryParams=D,this.fragment=P,this.data=U,this.outlet=Y,this.component=Re,this.routeConfig=Se,this._resolve=X}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(D=>D.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ps extends lo{constructor(C,v){super(v),this.url=C,Fn(this,v)}toString(){return Si(this._root)}}function Fn(E,C){C.value._routerState=E,C.children.forEach(v=>Fn(E,v))}function Si(E){const C=E.children.length>0?` { ${E.children.map(Si).join(", ")} } `:"";return`${E.value}${C}`}function Yr(E){if(E.snapshot){const C=E.snapshot,v=E._futureSnapshot;E.snapshot=v,Qn(C.queryParams,v.queryParams)||E.queryParamsSubject.next(v.queryParams),C.fragment!==v.fragment&&E.fragmentSubject.next(v.fragment),Qn(C.params,v.params)||E.paramsSubject.next(v.params),function ii(E,C){if(E.length!==C.length)return!1;for(let v=0;v<E.length;++v)if(!Qn(E[v],C[v]))return!1;return!0}(C.url,v.url)||E.urlSubject.next(v.url),Qn(C.data,v.data)||E.dataSubject.next(v.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function Ht(E,C){const v=Qn(E.params,C.params)&&function oi(E,C){return fr(E,C)&&E.every((v,D)=>Qn(v.parameters,C[D].parameters))}(E.url,C.url);return v&&!(!E.parent!=!C.parent)&&(!E.parent||Ht(E.parent,C.parent))}let Ms=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(vr),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(zr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:D,previousValue:P}=v.name;if(D)return;this.isTrackedInParentContexts(P)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(P)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,D){this.activated=v,this._activatedRoute=D,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,D){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=v;const P=this.location,Y=v.snapshot.component,Re=this.parentContexts.getOrCreateContext(this.name).children,Se=new ho(v,Re,P.injector);this.activated=P.createComponent(Y,{index:P.length,injector:Se,environmentInjector:D??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275dir=y.lG2({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]})}return E})();class ho{constructor(C,v,D){this.route=C,this.childContexts=v,this.parent=D}get(C,v){return C===Mn?this.route:C===vr?this.childContexts:this.parent.get(C,v)}}const zr=new y.OlP("");let nr=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:D}=v,P=tt([D.queryParams,D.params,D.data]).pipe((0,on.w)(([U,Y,Re],Se)=>(Re={...U,...Y,...Re},0===Se?(0,ae.of)(Re):Promise.resolve(Re)))).subscribe(U=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==D||null===D.component)return void this.unsubscribeFromRouteData(v);const Y=(0,y.qFp)(D.component);if(Y)for(const{templateName:Re}of Y.inputs)v.activatedComponentRef.setInput(Re,U[Re]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,P)}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac})}return E})();function Jn(E,C,v){if(v&&E.shouldReuseRoute(C.value,v.value.snapshot)){const D=v.value;D._futureSnapshot=C.value;const P=function Fr(E,C,v){return C.children.map(D=>{for(const P of v.children)if(E.shouldReuseRoute(D.value,P.value.snapshot))return Jn(E,D,P);return Jn(E,D)})}(E,C,v);return new zi(D,P)}{if(E.shouldAttach(C.value)){const U=E.retrieve(C.value);if(null!==U){const Y=U.route;return Y.value._futureSnapshot=C.value,Y.children=C.children.map(Re=>Jn(E,Re)),Y}}const D=function es(E){return new Mn(new me.X(E.url),new me.X(E.params),new me.X(E.queryParams),new me.X(E.fragment),new me.X(E.data),E.outlet,E.component,E)}(C.value),P=C.children.map(U=>Jn(E,U));return new zi(D,P)}}const fo="ngNavigationCancelingError";function xi(E,C){const{redirectTo:v,navigationBehaviorOptions:D}=at(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,P=Cn(!1,0,C);return P.url=v,P.navigationBehaviorOptions=D,P}function Cn(E,C,v){const D=new Error("NavigationCancelingError: "+(E||""));return D[fo]=!0,D.cancellationCode=C,v&&(D.url=v),D}function ms(E){return E&&E[fo]}let tn=(()=>{class E{static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275cmp=y.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(D,P){1&D&&y._UZ(0,"router-outlet")},dependencies:[Ms],encapsulation:2})}return E})();function pr(E){const C=E.children&&E.children.map(pr),v=C?{...E,children:C}:{...E};return!v.component&&!v.loadComponent&&(C||v.loadChildren)&&v.outlet&&v.outlet!==St&&(v.component=tn),v}function Gn(E){return E.outlet||St}function Wi(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let C=E.parent;C;C=C.parent){const v=C.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Wa{constructor(C,v,D,P,U){this.routeReuseStrategy=C,this.futureState=v,this.currState=D,this.forwardEvent=P,this.inputBindingEnabled=U}activate(C){const v=this.futureState._root,D=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,D,C),Yr(this.futureState.root),this.activateChildRoutes(v,D,C)}deactivateChildRoutes(C,v,D){const P=Gi(v);C.children.forEach(U=>{const Y=U.value.outlet;this.deactivateRoutes(U,P[Y],D),delete P[Y]}),Object.values(P).forEach(U=>{this.deactivateRouteAndItsChildren(U,D)})}deactivateRoutes(C,v,D){const P=C.value,U=v?v.value:null;if(P===U)if(P.component){const Y=D.getContext(P.outlet);Y&&this.deactivateChildRoutes(C,v,Y.children)}else this.deactivateChildRoutes(C,v,D);else U&&this.deactivateRouteAndItsChildren(v,D)}deactivateRouteAndItsChildren(C,v){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,v):this.deactivateRouteAndOutlet(C,v)}detachAndStoreRouteSubtree(C,v){const D=v.getContext(C.value.outlet),P=D&&C.value.component?D.children:v,U=Gi(C);for(const Y of Object.keys(U))this.deactivateRouteAndItsChildren(U[Y],P);if(D&&D.outlet){const Y=D.outlet.detach(),Re=D.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:Y,route:C,contexts:Re})}}deactivateRouteAndOutlet(C,v){const D=v.getContext(C.value.outlet),P=D&&C.value.component?D.children:v,U=Gi(C);for(const Y of Object.keys(U))this.deactivateRouteAndItsChildren(U[Y],P);D&&(D.outlet&&(D.outlet.deactivate(),D.children.onOutletDeactivated()),D.attachRef=null,D.route=null)}activateChildRoutes(C,v,D){const P=Gi(v);C.children.forEach(U=>{this.activateRoutes(U,P[U.value.outlet],D),this.forwardEvent(new gs(U.value.snapshot))}),C.children.length&&this.forwardEvent(new Lo(C.value.snapshot))}activateRoutes(C,v,D){const P=C.value,U=v?v.value:null;if(Yr(P),P===U)if(P.component){const Y=D.getOrCreateContext(P.outlet);this.activateChildRoutes(C,v,Y.children)}else this.activateChildRoutes(C,v,D);else if(P.component){const Y=D.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const Re=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),Y.children.onOutletReAttached(Re.contexts),Y.attachRef=Re.componentRef,Y.route=Re.route.value,Y.outlet&&Y.outlet.attach(Re.componentRef,Re.route.value),Yr(Re.route.value),this.activateChildRoutes(C,null,Y.children)}else{const Re=Wi(P.snapshot);Y.attachRef=null,Y.route=P,Y.injector=Re,Y.outlet&&Y.outlet.activateWith(P,Y.injector),this.activateChildRoutes(C,null,Y.children)}}else this.activateChildRoutes(C,null,D)}}class go{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Bo{constructor(C,v){this.component=C,this.route=v}}function Bu(E,C,v){const D=E._root;return mo(D,C?C._root:null,v,[D.value])}function Vr(E,C){const v=Symbol(),D=C.get(E,v);return D===v?"function"!=typeof E||(0,y.Z0I)(E)?C.get(E):E:D}function mo(E,C,v,D,P={canDeactivateChecks:[],canActivateChecks:[]}){const U=Gi(C);return E.children.forEach(Y=>{(function Zd(E,C,v,D,P={canDeactivateChecks:[],canActivateChecks:[]}){const U=E.value,Y=C?C.value:null,Re=v?v.getContext(E.value.outlet):null;if(Y&&U.routeConfig===Y.routeConfig){const Se=function Ic(E,C,v){if("function"==typeof v)return v(E,C);switch(v){case"pathParamsChange":return!fr(E.url,C.url);case"pathParamsOrQueryParamsChange":return!fr(E.url,C.url)||!Qn(E.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ht(E,C)||!Qn(E.queryParams,C.queryParams);default:return!Ht(E,C)}}(Y,U,U.routeConfig.runGuardsAndResolvers);Se?P.canActivateChecks.push(new go(D)):(U.data=Y.data,U._resolvedData=Y._resolvedData),mo(E,C,U.component?Re?Re.children:null:v,D,P),Se&&Re&&Re.outlet&&Re.outlet.isActivated&&P.canDeactivateChecks.push(new Bo(Re.outlet.component,Y))}else Y&&Un(C,Re,P),P.canActivateChecks.push(new go(D)),mo(E,null,U.component?Re?Re.children:null:v,D,P)})(Y,U[Y.value.outlet],v,D.concat([Y.value]),P),delete U[Y.value.outlet]}),Object.entries(U).forEach(([Y,Re])=>Un(Re,v.getContext(Y),P)),P}function Un(E,C,v){const D=Gi(E),P=E.value;Object.entries(D).forEach(([U,Y])=>{Un(Y,P.component?C?C.children.getContext(U):null:C,v)}),v.canDeactivateChecks.push(new Bo(P.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,P))}function da(E){return"function"==typeof E}function Xn(E){return E instanceof Xe.K||"EmptyError"===E?.name}const fa=Symbol("INITIAL_VALUE");function xs(){return(0,on.w)(E=>tt(E.map(C=>C.pipe((0,Qe.q)(1),(0,lt.O)(fa)))).pipe((0,Qt.U)(C=>{for(const v of C)if(!0!==v){if(v===fa)return fa;if(!1===v||v instanceof cr)return v}return!0}),(0,Be.h)(C=>C!==fa),(0,Qe.q)(1)))}function pa(E){return(0,Ve.z)((0,Ee.b)(C=>{if(at(C))throw xi(0,C)}),(0,Qt.U)(C=>!0===C))}class ns{constructor(C){this.segmentGroup=C||null}}class Is{constructor(C){this.urlTree=C}}function rs(E){return ve(new ns(E))}function Ws(E){return ve(new Is(E))}class vo{constructor(C,v){this.urlSerializer=C,this.urlTree=v}noMatchError(C){return new y.vHH(4002,!1)}lineralizeSegments(C,v){let D=[],P=v.root;for(;;){if(D=D.concat(P.segments),0===P.numberOfChildren)return(0,ae.of)(D);if(P.numberOfChildren>1||!P.children[St])return ve(new y.vHH(4e3,!1));P=P.children[St]}}applyRedirectCommands(C,v,D){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),C,D)}applyRedirectCreateUrlTree(C,v,D,P){const U=this.createSegmentGroup(C,v.root,D,P);return new cr(U,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(C,v){const D={};return Object.entries(C).forEach(([P,U])=>{if("string"==typeof U&&U.startsWith(":")){const Re=U.substring(1);D[P]=v[Re]}else D[P]=U}),D}createSegmentGroup(C,v,D,P){const U=this.createSegments(C,v.segments,D,P);let Y={};return Object.entries(v.children).forEach(([Re,Se])=>{Y[Re]=this.createSegmentGroup(C,Se,D,P)}),new qt(U,Y)}createSegments(C,v,D,P){return v.map(U=>U.path.startsWith(":")?this.findPosParam(C,U,P):this.findOrReturn(U,D))}findPosParam(C,v,D){const P=D[v.path.substring(1)];if(!P)throw new y.vHH(4001,!1);return P}findOrReturn(C,v){let D=0;for(const P of v){if(P.path===C.path)return v.splice(D),P;D++}return C}}const Ya={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Eo(E,C,v,D,P){const U=qi(E,C,v);return U.matched?(D=function Vu(E,C){return E.providers&&!E._injector&&(E._injector=(0,y.MMx)(E.providers,C,`Route: ${E.path}`)),E._injector??C}(C,D),function Gs(E,C,v,D){const P=C.canMatch;if(!P||0===P.length)return(0,ae.of)(!0);const U=P.map(Y=>{const Re=Vr(Y,E);return Nt(function _o(E){return E&&da(E.canMatch)}(Re)?Re.canMatch(C,v):E.runInContext(()=>Re(C,v)))});return(0,ae.of)(U).pipe(xs(),pa())}(D,C,v).pipe((0,Qt.U)(Y=>!0===Y?U:{...Ya}))):(0,ae.of)(U)}function qi(E,C,v){if(""===C.path)return"full"===C.pathMatch&&(E.hasChildren()||v.length>0)?{...Ya}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const P=(C.matcher||ri)(v,E,C);if(!P)return{...Ya};const U={};Object.entries(P.posParams??{}).forEach(([Re,Se])=>{U[Re]=Se.path});const Y=P.consumed.length>0?{...U,...P.consumed[P.consumed.length-1].parameters}:U;return{matched:!0,consumedSegments:P.consumed,remainingSegments:v.slice(P.consumed.length),parameters:Y,positionalParamSegments:P.posParams??{}}}function ws(E,C,v,D){return v.length>0&&function Tc(E,C,v){return v.some(D=>Io(E,C,D)&&Gn(D)!==St)}(E,v,D)?{segmentGroup:new qt(C,ma(D,new qt(v,E.children))),slicedSegments:[]}:0===v.length&&function Gu(E,C,v){return v.some(D=>Io(E,C,D))}(E,v,D)?{segmentGroup:new qt(E.segments,ga(E,0,v,D,E.children)),slicedSegments:v}:{segmentGroup:new qt(E.segments,E.children),slicedSegments:v}}function ga(E,C,v,D,P){const U={};for(const Y of D)if(Io(E,v,Y)&&!P[Gn(Y)]){const Re=new qt([],{});U[Gn(Y)]=Re}return{...P,...U}}function ma(E,C){const v={};v[St]=C;for(const D of E)if(""===D.path&&Gn(D)!==St){const P=new qt([],{});v[Gn(D)]=P}return v}function Io(E,C,v){return(!(E.hasChildren()||C.length>0)||"full"!==v.pathMatch)&&""===v.path}class Ho{constructor(C,v,D,P,U,Y,Re){this.injector=C,this.configLoader=v,this.rootComponentType=D,this.config=P,this.urlTree=U,this.paramsInheritanceStrategy=Y,this.urlSerializer=Re,this.allowRedirects=!0,this.applyRedirects=new vo(this.urlSerializer,this.urlTree)}noMatchError(C){return new y.vHH(4002,!1)}recognize(){const C=ws(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,St).pipe(Ae(v=>{if(v instanceof Is)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof ns?this.noMatchError(v):v}),(0,Qt.U)(v=>{const D=new tr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),P=new zi(D,v),U=new Ps("",P),Y=function Ze(E,C,v=null,D=null){return Nn(Ut(E),C,v,D)}(D,[],this.urlTree.queryParams,this.urlTree.fragment);return Y.queryParams=this.urlTree.queryParams,U.url=this.urlSerializer.serialize(Y),this.inheritParamsAndData(U._root),{state:U,tree:Y}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C.root,St).pipe(Ae(D=>{throw D instanceof ns?this.noMatchError(D):D}))}inheritParamsAndData(C){const v=C.value,D=Hr(v,this.paramsInheritanceStrategy);v.params=Object.freeze(D.params),v.data=Object.freeze(D.data),C.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(C,v,D,P){return 0===D.segments.length&&D.hasChildren()?this.processChildren(C,v,D):this.processSegment(C,v,D,D.segments,P,!0)}processChildren(C,v,D){const P=[];for(const U of Object.keys(D.children))"primary"===U?P.unshift(U):P.push(U);return(0,le.D)(P).pipe((0,Ce.b)(U=>{const Y=D.children[U],Re=function vs(E,C){const v=E.filter(D=>Gn(D)===C);return v.push(...E.filter(D=>Gn(D)!==C)),v}(v,U);return this.processSegmentGroup(C,Re,Y,U)}),(0,Fe.R)((U,Y)=>(U.push(...Y),U)),(0,ot.d)(null),function dt(E,C){const v=arguments.length>=2;return D=>D.pipe(E?(0,Be.h)((P,U)=>E(P,U,D)):De.y,Je(1),v?(0,ot.d)(C):(0,Rn.T)(()=>new Xe.K))}(),(0,ie.z)(U=>{if(null===U)return rs(D);const Y=eu(U);return function Dc(E){E.sort((C,v)=>C.value.outlet===St?-1:v.value.outlet===St?1:C.value.outlet.localeCompare(v.value.outlet))}(Y),(0,ae.of)(Y)}))}processSegment(C,v,D,P,U,Y){return(0,le.D)(v).pipe((0,Ce.b)(Re=>this.processSegmentAgainstRoute(Re._injector??C,v,Re,D,P,U,Y).pipe(Ae(Se=>{if(Se instanceof ns)return(0,ae.of)(null);throw Se}))),(0,ue.P)(Re=>!!Re),Ae(Re=>{if(Xn(Re))return function Cl(E,C,v){return 0===C.length&&!E.children[v]}(D,P,U)?(0,ae.of)([]):rs(D);throw Re}))}processSegmentAgainstRoute(C,v,D,P,U,Y,Re){return function Ja(E,C,v,D){return!!(Gn(E)===D||D!==St&&Io(C,v,E))&&("**"===E.path||qi(C,E,v).matched)}(D,P,U,Y)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(C,P,D,U,Y,Re):Re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,P,v,D,U,Y):rs(P):rs(P)}expandSegmentAgainstRouteUsingRedirect(C,v,D,P,U,Y){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,D,P,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(C,v,D,P,U,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,v,D,P){const U=this.applyRedirects.applyRedirectCommands([],D.redirectTo,{});return D.redirectTo.startsWith("/")?Ws(U):this.applyRedirects.lineralizeSegments(D,U).pipe((0,ie.z)(Y=>{const Re=new qt(Y,{});return this.processSegment(C,v,Re,Y,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,v,D,P,U,Y){const{matched:Re,consumedSegments:Se,remainingSegments:X,positionalParamSegments:Jt}=qi(v,P,U);if(!Re)return rs(v);const zt=this.applyRedirects.applyRedirectCommands(Se,P.redirectTo,Jt);return P.redirectTo.startsWith("/")?Ws(zt):this.applyRedirects.lineralizeSegments(P,zt).pipe((0,ie.z)(gn=>this.processSegment(C,D,v,gn.concat(X),Y,!1)))}matchSegmentAgainstRoute(C,v,D,P,U,Y){let Re;if("**"===D.path){const Se=P.length>0?Yt(P).parameters:{},X=new tr(P,Se,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hi(D),Gn(D),D.component??D._loadedComponent??null,D,w(D));Re=(0,ae.of)({snapshot:X,consumedSegments:[],remainingSegments:[]}),v.children={}}else Re=Eo(v,D,P,C).pipe((0,Qt.U)(({matched:Se,consumedSegments:X,remainingSegments:Jt,parameters:zt})=>Se?{snapshot:new tr(X,zt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hi(D),Gn(D),D.component??D._loadedComponent??null,D,w(D)),consumedSegments:X,remainingSegments:Jt}:null));return Re.pipe((0,on.w)(Se=>null===Se?rs(v):this.getChildConfig(C=D._injector??C,D,P).pipe((0,on.w)(({routes:X})=>{const Jt=D._loadedInjector??C,{snapshot:zt,consumedSegments:gn,remainingSegments:In}=Se,{segmentGroup:ss,slicedSegments:iu}=ws(v,gn,In,X);if(0===iu.length&&ss.hasChildren())return this.processChildren(Jt,X,ss).pipe((0,Qt.U)(qo=>null===qo?null:[new zi(zt,qo)]));if(0===X.length&&0===iu.length)return(0,ae.of)([new zi(zt,[])]);const Qs=Gn(D)===U;return this.processSegment(Jt,X,ss,iu,Qs?St:U,!0).pipe((0,Qt.U)(qo=>[new zi(zt,qo)]))}))))}getChildConfig(C,v,D){return v.children?(0,ae.of)({routes:v.children,injector:C}):v.loadChildren?void 0!==v._loadedRoutes?(0,ae.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Hu(E,C,v,D){const P=C.canLoad;if(void 0===P||0===P.length)return(0,ae.of)(!0);const U=P.map(Y=>{const Re=Vr(Y,E);return Nt(function Ka(E){return E&&da(E.canLoad)}(Re)?Re.canLoad(C,v):E.runInContext(()=>Re(C,v)))});return(0,ae.of)(U).pipe(xs(),pa())}(C,v,D).pipe((0,ie.z)(P=>P?this.configLoader.loadChildren(C,v).pipe((0,Ee.b)(U=>{v._loadedRoutes=U.routes,v._loadedInjector=U.injector})):function zu(E){return ve(Cn(!1,3))}())):(0,ae.of)({routes:[],injector:C})}}function Xa(E){const C=E.value.routeConfig;return C&&""===C.path}function eu(E){const C=[],v=new Set;for(const D of E){if(!Xa(D)){C.push(D);continue}const P=C.find(U=>D.value.routeConfig===U.value.routeConfig);void 0!==P?(P.children.push(...D.children),v.add(P)):C.push(D)}for(const D of v){const P=eu(D.children);C.push(new zi(D.value,P))}return C.filter(D=>!v.has(D))}function hi(E){return E.data||{}}function w(E){return E.resolve||{}}function At(E){return"string"==typeof E.title||null===E.title}function kn(E){return(0,on.w)(C=>{const v=E(C);return v?(0,le.D)(v).pipe((0,Qt.U)(()=>C)):(0,ae.of)(C)})}const nn=new y.OlP("ROUTES");let An=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,ae.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const D=Nt(v.loadComponent()).pipe((0,Qt.U)(Ln),(0,Ee.b)(U=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=U}),(0,jt.x)(()=>{this.componentLoaders.delete(v)})),P=new xt(D,()=>new Tt.x).pipe(Te());return this.componentLoaders.set(v,P),P}loadChildren(v,D){if(this.childrenLoaders.get(D))return this.childrenLoaders.get(D);if(D._loadedRoutes)return(0,ae.of)({routes:D._loadedRoutes,injector:D._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(D);const U=function rn(E,C,v,D){return Nt(E.loadChildren()).pipe((0,Qt.U)(Ln),(0,ie.z)(P=>P instanceof y.YKP||Array.isArray(P)?(0,ae.of)(P):(0,le.D)(C.compileModuleAsync(P))),(0,Qt.U)(P=>{D&&D(E);let U,Y,Re=!1;return Array.isArray(P)?(Y=P,!0):(U=P.create(v).injector,Y=U.get(nn,[],{optional:!0,self:!0}).flat()),{routes:Y.map(pr),injector:U}}))}(D,this.compiler,v,this.onLoadEndListener).pipe((0,jt.x)(()=>{this.childrenLoaders.delete(D)})),Y=new xt(U,()=>new Tt.x).pipe(Te());return this.childrenLoaders.set(D,Y),Y}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Ln(E){return function Bn(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let gr=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Tt.x,this.transitionAbortSubject=new Tt.x,this.configLoader=(0,y.f3M)(An),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Ar),this.rootContexts=(0,y.f3M)(vr),this.inputBindingEnabled=null!==(0,y.f3M)(zr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ae.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=P=>this.events.next(new za(P)),this.configLoader.onLoadStartListener=P=>this.events.next(new Qr(P))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const D=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:D})}setupNavigations(v,D,P){return this.transitions=new me.X({id:0,currentUrlTree:D,currentRawUrl:D,currentBrowserUrl:D,extractedUrl:v.urlHandlingStrategy.extract(D),urlAfterRedirects:v.urlHandlingStrategy.extract(D),rawUrl:D,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ps,restoredState:null,currentSnapshot:P.snapshot,targetSnapshot:null,currentRouterState:P,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Be.h)(U=>0!==U.id),(0,Qt.U)(U=>({...U,extractedUrl:v.urlHandlingStrategy.extract(U.rawUrl)})),(0,on.w)(U=>{this.currentTransition=U;let Y=!1,Re=!1;return(0,ae.of)(U).pipe((0,Ee.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.rawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,on.w)(Se=>{const X=Se.currentBrowserUrl.toString(),Jt=!v.navigated||Se.extractedUrl.toString()!==X||X!==Se.currentUrlTree.toString();if(!Jt&&"reload"!==(Se.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const gn="";return this.events.next(new js(Se.id,this.urlSerializer.serialize(Se.rawUrl),gn,0)),Se.resolve(null),He.E}if(v.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return(0,ae.of)(Se).pipe((0,on.w)(gn=>{const In=this.transitions?.getValue();return this.events.next(new Ha(gn.id,this.urlSerializer.serialize(gn.extractedUrl),gn.source,gn.restoredState)),In!==this.transitions?.getValue()?He.E:Promise.resolve(gn)}),function k(E,C,v,D,P,U){return(0,ie.z)(Y=>function Ks(E,C,v,D,P,U,Y="emptyOnly"){return new Ho(E,C,v,D,P,Y,U).recognize()}(E,C,v,D,Y.extractedUrl,P,U).pipe((0,Qt.U)(({state:Re,tree:Se})=>({...Y,targetSnapshot:Re,urlAfterRedirects:Se}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Ee.b)(gn=>{U.targetSnapshot=gn.targetSnapshot,U.urlAfterRedirects=gn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:gn.urlAfterRedirects};const In=new oa(gn.id,this.urlSerializer.serialize(gn.extractedUrl),this.urlSerializer.serialize(gn.urlAfterRedirects),gn.targetSnapshot);this.events.next(In)}));if(Jt&&v.urlHandlingStrategy.shouldProcessUrl(Se.currentRawUrl)){const{id:gn,extractedUrl:In,source:ss,restoredState:iu,extras:Qs}=Se,qo=new Ha(gn,this.urlSerializer.serialize(In),ss,iu);this.events.next(qo);const su=mt(0,this.rootComponentType).snapshot;return this.currentTransition=U={...Se,targetSnapshot:su,urlAfterRedirects:In,extras:{...Qs,skipLocationChange:!1,replaceUrl:!1}},(0,ae.of)(U)}{const gn="";return this.events.next(new js(Se.id,this.urlSerializer.serialize(Se.extractedUrl),gn,1)),Se.resolve(null),He.E}}),(0,Ee.b)(Se=>{const X=new vi(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot);this.events.next(X)}),(0,Qt.U)(Se=>(this.currentTransition=U={...Se,guards:Bu(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)},U)),function Qa(E,C){return(0,ie.z)(v=>{const{targetSnapshot:D,currentSnapshot:P,guards:{canActivateChecks:U,canDeactivateChecks:Y}}=v;return 0===Y.length&&0===U.length?(0,ae.of)({...v,guardsResult:!0}):function Es(E,C,v,D){return(0,le.D)(E).pipe((0,ie.z)(P=>function rr(E,C,v,D,P){const U=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,ae.of)(!0);const Y=U.map(Re=>{const Se=Wi(C)??P,X=Vr(Re,Se);return Nt(function ju(E){return E&&da(E.canDeactivate)}(X)?X.canDeactivate(E,C,v,D):Se.runInContext(()=>X(E,C,v,D))).pipe((0,ue.P)())});return(0,ae.of)(Y).pipe(xs())}(P.component,P.route,v,C,D)),(0,ue.P)(P=>!0!==P,!0))}(Y,D,P,E).pipe((0,ie.z)(Re=>Re&&function qa(E){return"boolean"==typeof E}(Re)?function Oi(E,C,v,D){return(0,le.D)(C).pipe((0,Ce.b)(P=>(0,wt.z)(function wc(E,C){return null!==E&&C&&C(new $s(E)),(0,ae.of)(!0)}(P.route.parent,D),function zs(E,C){return null!==E&&C&&C(new Ga(E)),(0,ae.of)(!0)}(P.route,D),function yo(E,C,v){const D=C[C.length-1],U=C.slice(0,C.length-1).reverse().map(Y=>function jo(E){const C=E.routeConfig?E.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:E,guards:C}:null}(Y)).filter(Y=>null!==Y).map(Y=>pe(()=>{const Re=Y.guards.map(Se=>{const X=Wi(Y.node)??v,Jt=Vr(Se,X);return Nt(function Za(E){return E&&da(E.canActivateChild)}(Jt)?Jt.canActivateChild(D,E):X.runInContext(()=>Jt(D,E))).pipe((0,ue.P)())});return(0,ae.of)(Re).pipe(xs())}));return(0,ae.of)(U).pipe(xs())}(E,P.path,v),function Er(E,C,v){const D=C.routeConfig?C.routeConfig.canActivate:null;if(!D||0===D.length)return(0,ae.of)(!0);const P=D.map(U=>pe(()=>{const Y=Wi(C)??v,Re=Vr(U,Y);return Nt(function ha(E){return E&&da(E.canActivate)}(Re)?Re.canActivate(C,E):Y.runInContext(()=>Re(C,E))).pipe((0,ue.P)())}));return(0,ae.of)(P).pipe(xs())}(E,P.route,v))),(0,ue.P)(P=>!0!==P,!0))}(D,U,E,C):(0,ae.of)(Re)),(0,Qt.U)(Re=>({...v,guardsResult:Re})))})}(this.environmentInjector,Se=>this.events.next(Se)),(0,Ee.b)(Se=>{if(U.guardsResult=Se.guardsResult,at(Se.guardsResult))throw xi(0,Se.guardsResult);const X=new aa(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.events.next(X)}),(0,Be.h)(Se=>!!Se.guardsResult||(this.cancelNavigationTransition(Se,"",3),!1)),kn(Se=>{if(Se.guards.canActivateChecks.length)return(0,ae.of)(Se).pipe((0,Ee.b)(X=>{const Jt=new co(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(Jt)}),(0,on.w)(X=>{let Jt=!1;return(0,ae.of)(X).pipe(function b(E,C){return(0,ie.z)(v=>{const{targetSnapshot:D,guards:{canActivateChecks:P}}=v;if(!P.length)return(0,ae.of)(v);let U=0;return(0,le.D)(P).pipe((0,Ce.b)(Y=>function N(E,C,v,D){const P=E.routeConfig,U=E._resolve;return void 0!==P?.title&&!At(P)&&(U[en]=P.title),function Z(E,C,v,D){const P=function Pe(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===P.length)return(0,ae.of)({});const U={};return(0,le.D)(P).pipe((0,ie.z)(Y=>function Oe(E,C,v,D){const P=Wi(C)??D,U=Vr(E,P);return Nt(U.resolve?U.resolve(C,v):P.runInContext(()=>U(C,v)))}(E[Y],C,v,D).pipe((0,ue.P)(),(0,Ee.b)(Re=>{U[Y]=Re}))),Je(1),function Zt(E){return(0,Qt.U)(()=>E)}(U),Ae(Y=>Xn(Y)?He.E:ve(Y)))}(U,E,C,D).pipe((0,Qt.U)(Y=>(E._resolvedData=Y,E.data=Hr(E,v).resolve,P&&At(P)&&(E.data[en]=P.title),null)))}(Y.route,D,E,C)),(0,Ee.b)(()=>U++),Je(1),(0,ie.z)(Y=>U===P.length?(0,ae.of)(v):He.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Ee.b)({next:()=>Jt=!0,complete:()=>{Jt||this.cancelNavigationTransition(X,"",2)}}))}),(0,Ee.b)(X=>{const Jt=new Fu(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(Jt)}))}),kn(Se=>{const X=Jt=>{const zt=[];Jt.routeConfig?.loadComponent&&!Jt.routeConfig._loadedComponent&&zt.push(this.configLoader.loadComponent(Jt.routeConfig).pipe((0,Ee.b)(gn=>{Jt.component=gn}),(0,Qt.U)(()=>{})));for(const gn of Jt.children)zt.push(...X(gn));return zt};return tt(X(Se.targetSnapshot.root)).pipe((0,ot.d)(),(0,Qe.q)(1))}),kn(()=>this.afterPreactivation()),(0,Qt.U)(Se=>{const X=function ca(E,C,v){const D=Jn(E,C._root,v?v._root:void 0);return new zn(D,C)}(v.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return this.currentTransition=U={...Se,targetRouterState:X},U}),(0,Ee.b)(()=>{this.events.next(new ln)}),((E,C,v,D)=>(0,Qt.U)(P=>(new Wa(C,P.targetRouterState,P.currentRouterState,v,D).activate(E),P)))(this.rootContexts,v.routeReuseStrategy,Se=>this.events.next(Se),this.inputBindingEnabled),(0,Qe.q)(1),(0,Ee.b)({next:Se=>{Y=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new di(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects))),v.titleStrategy?.updateTitle(Se.targetRouterState.snapshot),Se.resolve(!0)},complete:()=>{Y=!0}}),function Dn(E){return(0,se.e)((C,v)=>{(0,ht.Xf)(E).subscribe((0,Ue.x)(v,()=>v.complete(),yn.Z)),!v.closed&&C.subscribe(v)})}(this.transitionAbortSubject.pipe((0,Ee.b)(Se=>{throw Se}))),(0,jt.x)(()=>{Y||Re||this.cancelNavigationTransition(U,"",1),this.currentNavigation?.id===U.id&&(this.currentNavigation=null)}),Ae(Se=>{if(Re=!0,ms(Se))this.events.next(new ko(U.id,this.urlSerializer.serialize(U.extractedUrl),Se.message,Se.cancellationCode)),function Ni(E){return ms(E)&&at(E.url)}(Se)?this.events.next(new lr(Se.url)):U.resolve(!1);else{this.events.next(new yi(U.id,this.urlSerializer.serialize(U.extractedUrl),Se,U.targetSnapshot??void 0));try{U.resolve(v.errorHandler(Se))}catch(X){U.reject(X)}}return He.E}))}))}cancelNavigationTransition(v,D,P){const U=new ko(v.id,this.urlSerializer.serialize(v.extractedUrl),D,P);this.events.next(U),v.resolve(!1)}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function dr(E){return E!==ps}let hr=(()=>{class E{buildTitle(v){let D,P=v.root;for(;void 0!==P;)D=this.getResolvedTitleForRoute(P)??D,P=P.children.find(U=>U.outlet===St);return D}getResolvedTitleForRoute(v){return v.data[en]}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:function(){return(0,y.f3M)(mr)},providedIn:"root"})}return E})(),mr=(()=>{class E extends hr{constructor(v){super(),this.title=v}updateTitle(v){const D=this.buildTitle(v);void 0!==D&&this.title.setTitle(D)}static#e=this.\u0275fac=function(D){return new(D||E)(y.LFG($t.Dx))};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Jr=(()=>{class E{static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:function(){return(0,y.f3M)(br)},providedIn:"root"})}return E})();class is{shouldDetach(C){return!1}store(C,v){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,v){return C.routeConfig===v.routeConfig}}let br=(()=>{class E extends is{static#e=this.\u0275fac=function(){let v;return function(P){return(v||(v=y.n5z(E)))(P||E)}}();static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const bi=new y.OlP("",{providedIn:"root",factory:()=>({})});let Al=(()=>{class E{static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:function(){return(0,y.f3M)(jn)},providedIn:"root"})}return E})(),jn=(()=>{class E{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,D){return v}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var _a=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(_a||{});function Go(E,C){E.events.pipe((0,Be.h)(v=>v instanceof di||v instanceof ko||v instanceof yi||v instanceof js),(0,Qt.U)(v=>v instanceof di||v instanceof js?_a.COMPLETE:v instanceof ko&&(0===v.code||1===v.code)?_a.REDIRECTING:_a.FAILED),(0,Be.h)(v=>v!==_a.REDIRECTING),(0,Qe.q)(1)).subscribe(()=>{C()})}function Ei(E){throw E}function Qd(E,C,v){return C.parse("/")}const Yd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ya={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new Tt.x,this.options=(0,y.f3M)(bi,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||Ei,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Qd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(Al),this.routeReuseStrategy=(0,y.f3M)(Jr),this.titleStrategy=(0,y.f3M)(hr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(nn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(gr),this.urlSerializer=(0,y.f3M)(Ar),this.location=(0,y.f3M)(Dt.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(zr,{optional:!0}),this.eventsSubscription=new We.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new cr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(D=>{try{const{currentTransition:P}=this.navigationTransitions;if(null===P)return void(Jd(D)&&this._events.next(D));if(D instanceof Ha)dr(P.source)&&(this.browserUrlTree=P.extractedUrl);else if(D instanceof js)this.rawUrlTree=P.rawUrl;else if(D instanceof oa){if("eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(U,P)}this.browserUrlTree=P.urlAfterRedirects}}else if(D instanceof ln)this.currentUrlTree=P.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl),this.routerState=P.targetRouterState,"deferred"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,P),this.browserUrlTree=P.urlAfterRedirects);else if(D instanceof ko)0!==D.code&&1!==D.code&&(this.navigated=!0),(3===D.code||2===D.code)&&this.restoreHistory(P);else if(D instanceof lr){const U=this.urlHandlingStrategy.merge(D.url,P.currentRawUrl),Y={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||dr(P.source)};this.scheduleNavigation(U,ps,null,Y,{resolve:P.resolve,reject:P.reject,promise:P.promise})}D instanceof yi&&this.restoreHistory(P,!0),D instanceof di&&(this.navigated=!0),Jd(D)&&this._events.next(D)}catch(P){this.navigationTransitions.transitionAbortSubject.next(P)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ps,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const D="popstate"===v.type?"popstate":"hashchange";"popstate"===D&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,D,v.state)},0)}))}navigateToSyncWithBrowser(v,D,P){const U={replaceUrl:!0},Y=P?.navigationId?P:null;if(P){const Se={...P};delete Se.navigationId,delete Se.\u0275routerPageId,0!==Object.keys(Se).length&&(U.state=Se)}const Re=this.parseUrl(v);this.scheduleNavigation(Re,D,Y,U)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(pr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,D={}){const{relativeTo:P,queryParams:U,fragment:Y,queryParamsHandling:Re,preserveFragment:Se}=D,X=Se?this.currentUrlTree.fragment:Y;let zt,Jt=null;switch(Re){case"merge":Jt={...this.currentUrlTree.queryParams,...U};break;case"preserve":Jt=this.currentUrlTree.queryParams;break;default:Jt=U||null}null!==Jt&&(Jt=this.removeEmptyProps(Jt));try{zt=Ut(P?P.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),zt=this.currentUrlTree.root}return Nn(zt,v,Jt,X??null)}navigateByUrl(v,D={skipLocationChange:!1}){const P=at(v)?v:this.parseUrl(v),U=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(U,ps,null,D)}navigate(v,D={skipLocationChange:!1}){return function Cc(E){for(let C=0;C<E.length;C++)if(null==E[C])throw new y.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,D),D)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let D;try{D=this.urlSerializer.parse(v)}catch(P){D=this.malformedUriErrorHandler(P,this.urlSerializer,v)}return D}isActive(v,D){let P;if(P=!0===D?{...Yd}:!1===D?{...ya}:D,at(v))return Dr(this.currentUrlTree,v,P);const U=this.parseUrl(v);return Dr(this.currentUrlTree,U,P)}removeEmptyProps(v){return Object.keys(v).reduce((D,P)=>{const U=v[P];return null!=U&&(D[P]=U),D},{})}scheduleNavigation(v,D,P,U,Y){if(this.disposed)return Promise.resolve(!1);let Re,Se,X;Y?(Re=Y.resolve,Se=Y.reject,X=Y.promise):X=new Promise((zt,gn)=>{Re=zt,Se=gn});const Jt=this.pendingTasks.add();return Go(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Jt))}),this.navigationTransitions.handleNavigationRequest({source:D,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:U,resolve:Re,reject:Se,promise:X,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),X.catch(zt=>Promise.reject(zt))}setBrowserUrl(v,D){const P=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(P)||D.extras.replaceUrl){const Y={...D.extras.state,...this.generateNgRouterState(D.id,this.browserPageId)};this.location.replaceState(P,"",Y)}else{const U={...D.extras.state,...this.generateNgRouterState(D.id,this.browserPageId+1)};this.location.go(P,"",U)}}restoreHistory(v,D=!1){if("computed"===this.canceledNavigationResolution){const U=this.currentPageId-this.browserPageId;0!==U?this.location.historyGo(U):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===U&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(D&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,D){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:D}:{navigationId:v}}static#e=this.\u0275fac=function(D){return new(D||E)};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Jd(E){return!(E instanceof ln||E instanceof lr)}class Mr{}let Wo=(()=>{class E{constructor(v,D,P,U,Y){this.router=v,this.injector=P,this.preloadingStrategy=U,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Be.h)(v=>v instanceof di),(0,Ce.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,D){const P=[];for(const U of D){U.providers&&!U._injector&&(U._injector=(0,y.MMx)(U.providers,v,`Route: ${U.path}`));const Y=U._injector??v,Re=U._loadedInjector??Y;(U.loadChildren&&!U._loadedRoutes&&void 0===U.canLoad||U.loadComponent&&!U._loadedComponent)&&P.push(this.preloadConfig(Y,U)),(U.children||U._loadedRoutes)&&P.push(this.processRoutes(Re,U.children??U._loadedRoutes))}return(0,le.D)(P).pipe((0,fn.J)())}preloadConfig(v,D){return this.preloadingStrategy.preload(D,()=>{let P;P=D.loadChildren&&void 0===D.canLoad?this.loader.loadChildren(v,D):(0,ae.of)(null);const U=P.pipe((0,ie.z)(Y=>null===Y?(0,ae.of)(void 0):(D._loadedRoutes=Y.routes,D._loadedInjector=Y.injector,this.processRoutes(Y.injector??v,Y.routes))));if(D.loadComponent&&!D._loadedComponent){const Y=this.loader.loadComponent(D);return(0,le.D)([U,Y]).pipe((0,fn.J)())}return U})}static#e=this.\u0275fac=function(D){return new(D||E)(y.LFG(Rr),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Mr),y.LFG(An))};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const bl=new y.OlP("");let Me=(()=>{class E{constructor(v,D,P,U,Y={}){this.urlSerializer=v,this.transitions=D,this.viewportScroller=P,this.zone=U,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Ha?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof di?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof js&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Fo&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,D){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fo(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,D))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(D){y.$Z()};static#t=this.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac})}return E})();function Ki(E,C){return{\u0275kind:E,\u0275providers:C}}function ke(){const E=(0,y.f3M)(y.zs3);return C=>{const v=E.get(y.z2F);if(C!==v.components[0])return;const D=E.get(Rr),P=E.get(Ye);1===E.get(Ur)&&D.initialNavigation(),E.get(Sn,null,y.XFs.Optional)?.setUpPreloading(),E.get(bl,null,y.XFs.Optional)?.init(),D.resetRootComponentType(v.componentTypes[0]),P.closed||(P.next(),P.complete(),P.unsubscribe())}}const Ye=new y.OlP("",{factory:()=>new Tt.x}),Ur=new y.OlP("",{providedIn:"root",factory:()=>1}),Sn=new y.OlP("");function Pl(E){return Ki(0,[{provide:Sn,useExisting:Wo},{provide:Mr,useExisting:E}])}const ru=new y.OlP("ROUTER_FORROOT_GUARD"),Wt=[Dt.Ye,{provide:Ar,useClass:Zr},Rr,vr,{provide:Mn,useFactory:function Ii(E){return E.routerState.root},deps:[Rr]},An,[]];function Ea(){return new y.PXZ("Router",Rr)}let Xd=(()=>{class E{constructor(v){}static forRoot(v,D){return{ngModule:E,providers:[Wt,[],{provide:nn,multi:!0,useValue:v},{provide:ru,useFactory:_n,deps:[[Rr,new y.FiY,new y.tp0]]},{provide:bi,useValue:D||{}},D?.useHash?{provide:Dt.S$,useClass:Dt.Do}:{provide:Dt.S$,useClass:Dt.b0},{provide:bl,useFactory:()=>{const E=(0,y.f3M)(Dt.EM),C=(0,y.f3M)(y.R0b),v=(0,y.f3M)(bi),D=(0,y.f3M)(gr),P=(0,y.f3M)(Ar);return v.scrollOffset&&E.setOffset(v.scrollOffset),new Me(P,D,E,C,v)}},D?.preloadingStrategy?Pl(D.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Ea},D?.initialNavigation?Ns(D):[],D?.bindToComponentInputs?Ki(8,[nr,{provide:zr,useExisting:nr}]).\u0275providers:[],[{provide:En,useFactory:ke},{provide:y.tb,multi:!0,useExisting:En}]]}}static forChild(v){return{ngModule:E,providers:[{provide:nn,multi:!0,useValue:v}]}}static#e=this.\u0275fac=function(D){return new(D||E)(y.LFG(ru,8))};static#t=this.\u0275mod=y.oAB({type:E});static#n=this.\u0275inj=y.cJS({})}return E})();function _n(E){return"guarded"}function Ns(E){return["disabled"===E.initialNavigation?Ki(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const C=(0,y.f3M)(Rr);return()=>{C.setUpLocationChangeListener()}}},{provide:Ur,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?Ki(2,[{provide:Ur,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:C=>{const v=C.get(Dt.V_,Promise.resolve());return()=>v.then(()=>new Promise(D=>{const P=C.get(Rr),U=C.get(Ye);Go(P,()=>{D(!0)}),C.get(gr).afterPreactivation=()=>(D(!0),U.closed?(0,ae.of)(void 0):U),P.initialNavigation()}))}}]).\u0275providers:[]]}const En=new y.OlP("")},3106:(_t,Ne,O)=>{O.d(Ne,{Z:()=>tt});var y=O(9058),ne=O(4537),z=O(534),fe=O(7879);class le{constructor(st,Xe){this._delegate=st,this.firebase=Xe,(0,z._addComponent)(st,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=st.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(st){this._delegate.automaticDataCollectionEnabled=st}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(st=>{this._delegate.checkDestroyed(),st()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(st,Xe=z._DEFAULT_ENTRY_NAME){var wt;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(st);return!ht.isInitialized()&&"EXPLICIT"===(null===(wt=ht.getComponent())||void 0===wt?void 0:wt.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:Xe})}_removeServiceInstance(st,Xe=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(st).clearInstance(Xe)}_addComponent(st){(0,z._addComponent)(this._delegate,st)}_addOrOverwriteComponent(st){(0,z._addOrOverwriteComponent)(this._delegate,st)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function De(){const qe=function Le(qe){const st={},Xe={__esModule:!0,initializeApp:function pe(We,se={}){const Te=z.initializeApp(We,se);if((0,y.r3)(st,Te.name))return st[Te.name];const xt=new qe(Te,Xe);return st[Te.name]=xt,xt},app:ht,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function ve(We){const se=We.name,Te=se.replace("-compat","");if(z._registerComponent(We)&&"PUBLIC"===We.type){const xt=(Tt=ht())=>{if("function"!=typeof Tt[Te])throw me.create("invalid-app-argument",{appName:se});return Tt[Te]()};void 0!==We.serviceProps&&(0,y.ZB)(xt,We.serviceProps),Xe[Te]=xt,qe.prototype[Te]=function(...Tt){return this._getService.bind(this,se).apply(this,We.multipleInstances?Tt:[])}}return"PUBLIC"===We.type?Xe[Te]:null},removeApp:function wt(We){delete st[We]},useAsService:function He(We,se){return"serverAuth"===se?null:se},modularAPIs:z}};function ht(We){if(!(0,y.r3)(st,We=We||z._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:We});return st[We]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function Ve(){return Object.keys(st).map(We=>st[We])}}),ht.App=qe,Xe}(le);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function st(Xe){(0,y.ZB)(qe,Xe)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),qe}(),J=new fe.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=W;!function je(qe){(0,z.registerVersion)("@firebase/app-compat","0.2.27",qe)}()},534:(_t,Ne,O)=>{O.r(Ne),O.d(Ne,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>qt,_DEFAULT_ENTRY_NAME:()=>bt,_addComponent:()=>Kr,_addOrOverwriteComponent:()=>Dr,_apps:()=>Nt,_clearComponents:()=>Et,_components:()=>Hn,_getProvider:()=>qn,_registerComponent:()=>vn,_removeServiceInstance:()=>Ui,deleteApp:()=>Cr,getApp:()=>oi,getApps:()=>fr,initializeApp:()=>Ai,onLog:()=>Bi,registerVersion:()=>Zr,setLogLevel:()=>ai});var y=O(5861),ne=O(4537),z=O(7879),fe=O(9058);const le=(Q,K)=>K.some(_e=>Q instanceof _e);let ae,me;const W=new WeakMap,J=new WeakMap,he=new WeakMap,Ue=new WeakMap,je=new WeakMap;let st={get(Q,K,_e){if(Q instanceof IDBTransaction){if("done"===K)return J.get(Q);if("objectStoreNames"===K)return Q.objectStoreNames||he.get(Q);if("store"===K)return _e.objectStoreNames[1]?void 0:_e.objectStore(_e.objectStoreNames[0])}return pe(Q[K])},set:(Q,K,_e)=>(Q[K]=_e,!0),has:(Q,K)=>Q instanceof IDBTransaction&&("done"===K||"store"===K)||K in Q};function ht(Q){return"function"==typeof Q?function wt(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...K){return Q.apply(Ve(this),K),pe(W.get(this))}:function(...K){return pe(Q.apply(Ve(this),K))}:function(K,..._e){const xe=Q.call(Ve(this),K,..._e);return he.set(xe,K.sort?K.sort():[K]),pe(xe)}}(Q):(Q instanceof IDBTransaction&&function qe(Q){if(J.has(Q))return;const K=new Promise((_e,xe)=>{const at=()=>{Q.removeEventListener("complete",Ze),Q.removeEventListener("error",Ut),Q.removeEventListener("abort",Ut)},Ze=()=>{_e(),at()},Ut=()=>{xe(Q.error||new DOMException("AbortError","AbortError")),at()};Q.addEventListener("complete",Ze),Q.addEventListener("error",Ut),Q.addEventListener("abort",Ut)});J.set(Q,K)}(Q),le(Q,function Le(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,st):Q)}function pe(Q){if(Q instanceof IDBRequest)return function tt(Q){const K=new Promise((_e,xe)=>{const at=()=>{Q.removeEventListener("success",Ze),Q.removeEventListener("error",Ut)},Ze=()=>{_e(pe(Q.result)),at()},Ut=()=>{xe(Q.error),at()};Q.addEventListener("success",Ze),Q.addEventListener("error",Ut)});return K.then(_e=>{_e instanceof IDBCursor&&W.set(_e,Q)}).catch(()=>{}),je.set(K,Q),K}(Q);if(Ue.has(Q))return Ue.get(Q);const K=ht(Q);return K!==Q&&(Ue.set(Q,K),je.set(K,Q)),K}const Ve=Q=>je.get(Q),We=["get","getKey","getAll","getAllKeys","count"],se=["put","add","delete","clear"],Te=new Map;function xt(Q,K){if(!(Q instanceof IDBDatabase)||K in Q||"string"!=typeof K)return;if(Te.get(K))return Te.get(K);const _e=K.replace(/FromIndex$/,""),xe=K!==_e,at=se.includes(_e);if(!(_e in(xe?IDBIndex:IDBObjectStore).prototype)||!at&&!We.includes(_e))return;const Ze=function(){var Ut=(0,y.Z)(function*(Nn,...an){const Kn=this.transaction(Nn,at?"readwrite":"readonly");let Sr=Kn.store;return xe&&(Sr=Sr.index(an.shift())),(yield Promise.all([Sr[_e](...an),at&&Kn.done]))[0]});return function(an){return Ut.apply(this,arguments)}}();return Te.set(K,Ze),Ze}!function Xe(Q){st=Q(st)}(Q=>({...Q,get:(K,_e,xe)=>xt(K,_e)||Q.get(K,_e,xe),has:(K,_e)=>!!xt(K,_e)||Q.has(K,_e)}));class Tt{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function Dt(Q){const K=Q.getComponent();return"VERSION"===K?.type}(_e)){const xe=_e.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(_e=>_e).join(" ")}}const Qt="@firebase/app",Qe=new z.Yd("@firebase/app"),bt="[DEFAULT]",Yt={[Qt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nt=new Map,Hn=new Map;function Kr(Q,K){try{Q.container.addComponent(K)}catch(_e){Qe.debug(`Component ${K.name} failed to register with FirebaseApp ${Q.name}`,_e)}}function Dr(Q,K){Q.container.addOrOverwriteComponent(K)}function vn(Q){const K=Q.name;if(Hn.has(K))return Qe.debug(`There were multiple attempts to register component ${K}.`),!1;Hn.set(K,Q);for(const _e of Nt.values())Kr(_e,Q);return!0}function qn(Q,K){const _e=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),Q.container.getProvider(K)}function Ui(Q,K,_e=bt){qn(Q,K).clearInstance(_e)}function Et(){Hn.clear()}const Gt=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cr{constructor(K,_e,xe){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}const qt="10.8.0";function Ai(Q,K={}){let _e=Q;"object"!=typeof K&&(K={name:K});const xe=Object.assign({name:bt,automaticDataCollectionEnabled:!1},K),at=xe.name;if("string"!=typeof at||!at)throw Gt.create("bad-app-name",{appName:String(at)});if(_e||(_e=(0,fe.aH)()),!_e)throw Gt.create("no-options");const Ze=Nt.get(at);if(Ze){if((0,fe.vZ)(_e,Ze.options)&&(0,fe.vZ)(xe,Ze.config))return Ze;throw Gt.create("duplicate-app",{appName:at})}const Ut=new ne.H0(at);for(const an of Hn.values())Ut.addComponent(an);const Nn=new cr(_e,xe,Ut);return Nt.set(at,Nn),Nn}function oi(Q=bt){const K=Nt.get(Q);if(!K&&Q===bt&&(0,fe.aH)())return Ai();if(!K)throw Gt.create("no-app",{appName:Q});return K}function fr(){return Array.from(Nt.values())}function Cr(Q){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,y.Z)(function*(Q){const K=Q.name;Nt.has(K)&&(Nt.delete(K),yield Promise.all(Q.container.getProviders().map(_e=>_e.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function Zr(Q,K,_e){var xe;let at=null!==(xe=Yt[Q])&&void 0!==xe?xe:Q;_e&&(at+=`-${_e}`);const Ze=at.match(/\s|\//),Ut=K.match(/\s|\//);if(Ze||Ut){const Nn=[`Unable to register library "${at}" with version "${K}":`];return Ze&&Nn.push(`library name "${at}" contains illegal characters (whitespace or "/")`),Ze&&Ut&&Nn.push("and"),Ut&&Nn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void Qe.warn(Nn.join(" "))}vn(new ne.wA(`${at}-version`,()=>({library:at,version:K}),"VERSION"))}function Bi(Q,K){if(null!==Q&&"function"!=typeof Q)throw Gt.create("invalid-log-argument");(0,z.Am)(Q,K)}function ai(Q){(0,z.Ub)(Q)}const ui="firebase-heartbeat-database",Mi=1,re="firebase-heartbeat-store";let j=null;function $(){return j||(j=function ve(Q,K,{blocked:_e,upgrade:xe,blocking:at,terminated:Ze}={}){const Ut=indexedDB.open(Q,K),Nn=pe(Ut);return xe&&Ut.addEventListener("upgradeneeded",an=>{xe(pe(Ut.result),an.oldVersion,an.newVersion,pe(Ut.transaction),an)}),_e&&Ut.addEventListener("blocked",an=>_e(an.oldVersion,an.newVersion,an)),Nn.then(an=>{Ze&&an.addEventListener("close",()=>Ze()),at&&an.addEventListener("versionchange",Kn=>at(Kn.oldVersion,Kn.newVersion,Kn))}).catch(()=>{}),Nn}(ui,Mi,{upgrade:(Q,K)=>{if(0===K)try{Q.createObjectStore(re)}catch(_e){console.warn(_e)}}}).catch(Q=>{throw Gt.create("idb-open",{originalErrorMessage:Q.message})})),j}function H(){return(H=(0,y.Z)(function*(Q){try{const _e=(yield $()).transaction(re),xe=yield _e.objectStore(re).get(it(Q));return yield _e.done,xe}catch(K){if(K instanceof fe.ZR)Qe.warn(K.message);else{const _e=Gt.create("idb-get",{originalErrorMessage:K?.message});Qe.warn(_e.message)}}})).apply(this,arguments)}function ge(Q,K){return $e.apply(this,arguments)}function $e(){return($e=(0,y.Z)(function*(Q,K){try{const xe=(yield $()).transaction(re,"readwrite");yield xe.objectStore(re).put(K,it(Q)),yield xe.done}catch(_e){if(_e instanceof fe.ZR)Qe.warn(_e.message);else{const xe=Gt.create("idb-set",{originalErrorMessage:_e?.message});Qe.warn(xe.message)}}})).apply(this,arguments)}function it(Q){return`${Q.name}!${Q.options.appId}`}class Ct{constructor(K){this.container=K,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new ye(_e),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var K=this;return(0,y.Z)(function*(){var _e,xe;const Ze=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=Vt();if((null!=(null===(_e=K._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||(K._heartbeatsCache=yield K._heartbeatsCachePromise,null!=(null===(xe=K._heartbeatsCache)||void 0===xe?void 0:xe.heartbeats)))&&K._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!K._heartbeatsCache.heartbeats.some(Nn=>Nn.date===Ut))return K._heartbeatsCache.heartbeats.push({date:Ut,agent:Ze}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Nn=>{const an=new Date(Nn.date).valueOf();return Date.now()-an<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,y.Z)(function*(){var _e;if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null==(null===(_e=K._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||0===K._heartbeatsCache.heartbeats.length)return"";const xe=Vt(),{heartbeatsToSend:at,unsentEntries:Ze}=function Yn(Q,K=1024){const _e=[];let xe=Q.slice();for(const at of Q){const Ze=_e.find(Ut=>Ut.agent===at.agent);if(Ze){if(Ze.dates.push(at.date),te(_e)>K){Ze.dates.pop();break}}else if(_e.push({agent:at.agent,dates:[at.date]}),te(_e)>K){_e.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:_e,unsentEntries:xe}}(K._heartbeatsCache.heartbeats),Ut=(0,fe.L)(JSON.stringify({version:2,heartbeats:at}));return K._heartbeatsCache.lastSentHeartbeatDate=xe,Ze.length>0?(K._heartbeatsCache.heartbeats=Ze,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Ut})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class ye{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,y.Z)(function*(){if(yield K._canUseIndexedDBPromise){const xe=yield function B(Q){return H.apply(this,arguments)}(K.app);return xe?.heartbeats?xe:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(K){var _e=this;return(0,y.Z)(function*(){var xe;if(yield _e._canUseIndexedDBPromise){const Ze=yield _e.read();return ge(_e.app,{lastSentHeartbeatDate:null!==(xe=K.lastSentHeartbeatDate)&&void 0!==xe?xe:Ze.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var _e=this;return(0,y.Z)(function*(){var xe;if(yield _e._canUseIndexedDBPromise){const Ze=yield _e.read();return ge(_e.app,{lastSentHeartbeatDate:null!==(xe=K.lastSentHeartbeatDate)&&void 0!==xe?xe:Ze.lastSentHeartbeatDate,heartbeats:[...Ze.heartbeats,...K.heartbeats]})}})()}}function te(Q){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Q})).length}!function ce(Q){vn(new ne.wA("platform-logger",K=>new Tt(K),"PRIVATE")),vn(new ne.wA("heartbeat",K=>new Ct(K),"PRIVATE")),Zr(Qt,"0.9.27",Q),Zr(Qt,"0.9.27","esm2017"),Zr("fire-js","")}("")},4537:(_t,Ne,O)=>{O.d(Ne,{H0:()=>Le,wA:()=>z,zt:()=>le});var y=O(5861),ne=O(9058);class z{constructor(W,J,he){this.name=W,this.instanceFactory=J,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const fe="[DEFAULT]";class le{constructor(W,J){this.name=W,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const J=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(J)){const he=new ne.BH;if(this.instancesDeferred.set(J,he),this.isInitialized(J)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:J});Ue&&he.resolve(Ue)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(W){var J;const he=this.normalizeInstanceIdentifier(W?.identifier),Ue=null!==(J=W?.optional)&&void 0!==J&&J;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(je){if(Ue)return null;throw je}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function me(De){return"EAGER"===De.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[J,he]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(J);try{const je=this.getOrInitializeService({instanceIdentifier:Ue});he.resolve(je)}catch{}}}}clearInstance(W=fe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,y.Z)(function*(){const J=Array.from(W.instances.values());yield Promise.all([...J.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...J.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=fe){return this.instances.has(W)}getOptions(W=fe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:J={}}=W,he=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:he,options:J});for(const[je,tt]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(je)&&tt.resolve(Ue);return Ue}onInit(W,J){var he;const Ue=this.normalizeInstanceIdentifier(J),je=null!==(he=this.onInitCallbacks.get(Ue))&&void 0!==he?he:new Set;je.add(W),this.onInitCallbacks.set(Ue,je);const tt=this.instances.get(Ue);return tt&&W(tt,Ue),()=>{je.delete(W)}}invokeOnInitCallbacks(W,J){const he=this.onInitCallbacks.get(J);if(he)for(const Ue of he)try{Ue(W,J)}catch{}}getOrInitializeService({instanceIdentifier:W,options:J={}}){let he=this.instances.get(W);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(De=W,De===fe?void 0:De),options:J}),this.instances.set(W,he),this.instancesOptions.set(W,J),this.invokeOnInitCallbacks(he,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,he)}catch{}var De;return he||null}normalizeInstanceIdentifier(W=fe){return this.component?this.component.multipleInstances?W:fe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const J=this.getProvider(W.name);if(J.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);J.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const J=new le(W,this);return this.providers.set(W,J),J}getProviders(){return Array.from(this.providers.values())}}},7879:(_t,Ne,O)=>{O.d(Ne,{Am:()=>De,Ub:()=>Le,Yd:()=>me,in:()=>ne});const y=[];var ne=function(W){return W[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W}(ne||{});const z={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},fe=ne.INFO,le={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ae=(W,J,...he)=>{if(J<W.logLevel)return;const Ue=(new Date).toISOString(),je=le[J];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[je](`[${Ue}]  ${W.name}:`,...he)};class me{constructor(J){this.name=J,this._logLevel=fe,this._logHandler=ae,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in ne))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?z[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...J),this._logHandler(this,ne.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...J),this._logHandler(this,ne.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...J),this._logHandler(this,ne.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...J),this._logHandler(this,ne.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...J),this._logHandler(this,ne.ERROR,...J)}}function Le(W){y.forEach(J=>{J.setLogLevel(W)})}function De(W,J){for(const he of y){let Ue=null;J&&J.level&&(Ue=z[J.level]),he.userLogHandler=null===W?null:(je,tt,...qe)=>{const st=qe.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");tt>=(Ue??je.logLevel)&&W({level:ne[tt].toLowerCase(),message:st,args:qe,type:je.name})}}}},7142:(_t,Ne,O)=>{O.d(Ne,{Z:()=>y.Z});var y=O(3106);y.Z.registerVersion("firebase","10.8.0","app-compat")},999:(_t,Ne,O)=>{O.r(Ne);var y=O(5861),ne=O(3106),z=O(9058),fe=O(534),le=O(7879),ae=O(7582),me=O(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const tt=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wt=new le.Yd("@firebase/auth");function pe(g,...d){wt.logLevel<=le.in.ERROR&&wt.error(`Auth (${fe.SDK_VERSION}): ${g}`,...d)}function Ve(g,...d){throw se(g,...d)}function ve(g,...d){return se(g,...d)}function He(g,d,f){const _=Object.assign(Object.assign({},qe()),{[d]:f});return new z.LL("auth","Firebase",_).create(d,{appName:g.name})}function We(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Ve(g,"argument-error"),He(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function se(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return st.create(g,...d)}function Te(g,d,...f){if(!g)throw se(d,...f)}function xt(g){const d="INTERNAL ASSERTION FAILED: "+g;throw pe(d),new Error(d)}function Tt(g,d){g||xt(d)}function Dt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Qt(){return"http:"===on()||"https:"===on()}function on(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Be{constructor(d,f){this.shortDelay=d,this.longDelay=f,Tt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Qe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(g,d){Tt(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ue{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ce={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Be(3e4,6e4);function Ae(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Fe(g,d,f,_){return ot.apply(this,arguments)}function ot(){return(ot=(0,y.Z)(function*(g,d,f,_,R={}){return Je(g,R,(0,y.Z)(function*(){let F={},ee={};_&&("GET"===d?ee=_:F={body:JSON.stringify(_)});const Ie=(0,z.xO)(Object.assign({key:g.config.apiKey},ee)).slice(1),ze=yield g._getAdditionalHeaders();return ze["Content-Type"]="application/json",g.languageCode&&(ze["X-Firebase-Locale"]=g.languageCode),ue.fetch()(jt(g,g.config.apiHost,f,Ie),Object.assign({method:d,headers:ze,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Je(g,d,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,y.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ce),d);try{const R=new Dn(g),F=yield Promise.race([f(),R.promise]);R.clearNetworkTimeout();const ee=yield F.json();if("needConfirmation"in ee)throw fn(g,"account-exists-with-different-credential",ee);if(F.ok&&!("errorMessage"in ee))return ee;{const Ie=F.ok?ee.errorMessage:ee.error.message,[ze,pt]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ze)throw fn(g,"credential-already-in-use",ee);if("EMAIL_EXISTS"===ze)throw fn(g,"email-already-in-use",ee);if("USER_DISABLED"===ze)throw fn(g,"user-disabled",ee);const Rt=_[ze]||ze.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw He(g,Rt,pt);Ve(g,Rt)}}catch(R){if(R instanceof z.ZR)throw R;Ve(g,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function dt(g,d,f,_){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,y.Z)(function*(g,d,f,_,R={}){const F=yield Fe(g,d,f,_,R);return"mfaPendingCredential"in F&&Ve(g,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function jt(g,d,f,_){const R=`${d}${f}?${_}`;return g.config.emulator?ie(g.config,R):`${g.config.apiScheme}://${R}`}function yn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const R=ve(g,d,_);return R.customData._tokenResponse=f,R}function $t(g){return void 0!==g&&void 0!==g.getResponse}function St(g){return void 0!==g&&void 0!==g.enterprise}class en{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return yn(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function mn(){return(mn=(0,y.Z)(function*(g){return(yield Fe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ri(g,d){return ii.apply(this,arguments)}function ii(){return(ii=(0,y.Z)(function*(g,d){return Fe(g,"GET","/v2/recaptchaConfig",Ae(g,d))})).apply(this,arguments)}function bt(){return(bt=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Nt(){return(Nt=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Kr(){return(Kr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Dr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Ui(){return(Ui=(0,y.Z)(function*(g,d=!1){const f=(0,z.m9)(g),_=yield f.getIdToken(d),R=si(_);Te(R&&R.exp&&R.auth_time&&R.iat,f.auth,"internal-error");const F="object"==typeof R.firebase?R.firebase:void 0,ee=F?.sign_in_provider;return{claims:R,token:_,authTime:Dr(Et(R.auth_time)),issuedAtTime:Dr(Et(R.iat)),expirationTime:Dr(Et(R.exp)),signInProvider:ee||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(g){return 1e3*Number(g)}function si(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return pe("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,z.tV)(f);return R?JSON.parse(R):(pe("Failed to decode base64 JWT payload"),null)}catch(R){return pe("Caught error parsing JWT payload as JSON",R?.toString()),null}}function cr(g,d){return qt.apply(this,arguments)}function qt(){return(qt=(0,y.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof z.ZR&&function Ai({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class oi{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const R=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,y.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,y.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class fr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(g){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,y.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),R=yield cr(g,function Hn(g,d){return Kr.apply(this,arguments)}(f,{idToken:_}));Te(R?.users.length,f,"internal-error");const F=R.users[0];g._notifyReloadListener(F);const ee=null!==(d=F.providerUserInfo)&&void 0!==d&&d.length?function ui(g){return g.map(d=>{var{providerId:f}=d,_=(0,ae._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(F.providerUserInfo):[],Ie=function ai(g,d){return[...g.filter(_=>!d.some(R=>R.providerId===_.providerId)),...d]}(g.providerData,ee),Rt=!!g.isAnonymous&&!(g.email&&F.passwordHash||Ie?.length),Pt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Ie,metadata:new fr(F.createdAt,F.lastLoginAt),isAnonymous:Rt};Object.assign(g,Pt)}),Ar.apply(this,arguments)}function Bi(){return(Bi=(0,y.Z)(function*(g){const d=(0,z.m9)(g);yield Cr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function re(){return(re=(0,y.Z)(function*(g,d){const f=yield Je(g,{},(0,y.Z)(function*(){const _=(0,z.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:R,apiKey:F}=g.config,ee=jt(g,R,"/v1/token",`key=${F}`),Ie=yield g._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(ee,{method:"POST",headers:Ie,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function $(){return($=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v2/accounts:revokeToken",Ae(g,d))})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Te(d.idToken,"internal-error"),Te(typeof d.idToken<"u","internal-error"),Te(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Gt(g){const d=si(g);return Te(d,"internal-error"),Te(typeof d.exp<"u","internal-error"),Te(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,y.Z)(function*(){return Te(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,y.Z)(function*(){const{accessToken:R,refreshToken:F,expiresIn:ee}=yield function Mi(g,d){return re.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(R,F,Number(ee))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:R,expirationTime:F}=f,ee=new B;return _&&(Te("string"==typeof _,"internal-error",{appName:d}),ee.refreshToken=_),R&&(Te("string"==typeof R,"internal-error",{appName:d}),ee.accessToken=R),F&&(Te("number"==typeof F,"internal-error",{appName:d}),ee.expirationTime=F),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return xt("not implemented")}}function H(g,d){Te("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class ge{constructor(d){var{uid:f,auth:_,stsTokenManager:R}=d,F=(0,ae._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new fr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,y.Z)(function*(){const _=yield cr(f,f.stsTokenManager.getToken(f.auth,d));return Te(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function qn(g){return Ui.apply(this,arguments)}(this,d)}reload(){return function Zr(g){return Bi.apply(this,arguments)}(this)}_assign(d){this!==d&&(Te(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new ge(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,y.Z)(function*(){let R=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),R=!0),f&&(yield Cr(_)),yield _.auth._persistUserIfCurrent(_),R&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,y.Z)(function*(){const f=yield d.getIdToken();return yield cr(d,function Qn(g,d){return bt.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,R,F,ee,Ie,ze,pt,Rt;const Pt=null!==(_=f.displayName)&&void 0!==_?_:void 0,wr=null!==(R=f.email)&&void 0!==R?R:void 0,Ls=null!==(F=f.phoneNumber)&&void 0!==F?F:void 0,Fs=null!==(ee=f.photoURL)&&void 0!==ee?ee:void 0,Ma=null!==(Ie=f.tenantId)&&void 0!==Ie?Ie:void 0,Gc=null!==(ze=f._redirectEventId)&&void 0!==ze?ze:void 0,If=null!==(pt=f.createdAt)&&void 0!==pt?pt:void 0,Wr=null!==(Rt=f.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:xa,emailVerified:ad,isAnonymous:ud,providerData:Na,stsTokenManager:Vs}=f;Te(xa&&Vs,d,"internal-error");const cd=B.fromJSON(this.name,Vs);Te("string"==typeof xa,d,"internal-error"),H(Pt,d.name),H(wr,d.name),Te("boolean"==typeof ad,d,"internal-error"),Te("boolean"==typeof ud,d,"internal-error"),H(Ls,d.name),H(Fs,d.name),H(Ma,d.name),H(Gc,d.name),H(If,d.name),H(Wr,d.name);const Wc=new ge({uid:xa,auth:d,email:wr,emailVerified:ad,displayName:Pt,isAnonymous:ud,photoURL:Fs,phoneNumber:Ls,tenantId:Ma,stsTokenManager:cd,createdAt:If,lastLoginAt:Wr});return Na&&Array.isArray(Na)&&(Wc.providerData=Na.map(ac=>Object.assign({},ac))),Gc&&(Wc._redirectEventId=Gc),Wc}static _fromIdTokenResponse(d,f,_=!1){return(0,y.Z)(function*(){const R=new B;R.updateFromServerResponse(f);const F=new ge({uid:f.localId,auth:d,stsTokenManager:R,isAnonymous:_});return yield Cr(F),F})()}}const $e=new Map;function it(g){Tt(g instanceof Function,"Expected a class definition");let d=$e.get(g);return d?(Tt(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,$e.set(g,d),d)}const kt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(f,_){var R=this;return(0,y.Z)(function*(){R.storage[f]=_})()}_get(f){var _=this;return(0,y.Z)(function*(){const R=_.storage[f];return void 0===R?null:R})()}_remove(f){var _=this;return(0,y.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function Ct(g,d,f){return`firebase:${g}:${d}:${f}`}class Vt{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:R,name:F}=this.auth;this.fullUserKey=Ct(this.userKey,R.apiKey,F),this.fullPersistenceKey=Ct("persistence",R.apiKey,F),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,y.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?ge._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,y.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,y.Z)(function*(){if(!f.length)return new Vt(it(kt),d,_);const R=(yield Promise.all(f.map(function(){var pt=(0,y.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let F=R[0]||it(kt);const ee=Ct(_,d.config.apiKey,d.name);let Ie=null;for(const pt of f)try{const Rt=yield pt._get(ee);if(Rt){const Pt=ge._fromJSON(d,Rt);pt!==F&&(Ie=Pt),F=pt;break}}catch{}const ze=R.filter(pt=>pt._shouldAllowMigration);return F._shouldAllowMigration&&ze.length?(F=ze[0],Ie&&(yield F._set(ee,Ie.toJSON())),yield Promise.all(f.map(function(){var pt=(0,y.Z)(function*(Rt){if(Rt!==F)try{yield Rt._remove(ee)}catch{}});return function(Rt){return pt.apply(this,arguments)}}())),new Vt(F,d,_)):new Vt(F,d,_)})()}}function Yn(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Q(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ye(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_e(d))return"Blackberry";if(xe(d))return"Webos";if(te(d))return"Safari";if((d.includes("chrome/")||ce(d))&&!d.includes("edge/"))return"Chrome";if(K(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ye(g=(0,z.z$)()){return/firefox\//i.test(g)}function te(g=(0,z.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ce(g=(0,z.z$)()){return/crios\//i.test(g)}function Q(g=(0,z.z$)()){return/iemobile/i.test(g)}function K(g=(0,z.z$)()){return/android/i.test(g)}function _e(g=(0,z.z$)()){return/blackberry/i.test(g)}function xe(g=(0,z.z$)()){return/webos/i.test(g)}function at(g=(0,z.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function an(g=(0,z.z$)()){return at(g)||K(g)||xe(g)||_e(g)||/windows phone/i.test(g)||Q(g)}function Sr(g,d=[]){let f;switch(g){case"Browser":f=Yn((0,z.z$)());break;case"Worker":f=`${Yn((0,z.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${fe.SDK_VERSION}/${_}`}class kr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=F=>new Promise((ee,Ie)=>{try{ee(d(F))}catch(ze){Ie(ze)}});_.onAbort=f,this.queue.push(_);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,y.Z)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const R of f.queue)yield R(d),R.onAbort&&_.push(R.onAbort)}catch(R){_.reverse();for(const F of _)try{F()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}function Vn(){return(Vn=(0,y.Z)(function*(g,d={}){return Fe(g,"GET","/v2/passwordPolicy",Ae(g,d))})).apply(this,arguments)}class Bs{constructor(d){var f,_,R,F;const ee=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=ee.minPasswordLength)&&void 0!==f?f:6,ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ee.maxPasswordLength),void 0!==ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ee.containsLowercaseCharacter),void 0!==ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ee.containsUppercaseCharacter),void 0!==ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ee.containsNumericCharacter),void 0!==ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ee.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(R=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==R?R:"",this.forceUpgradeOnSignin=null!==(F=d.forceUpgradeOnSignin)&&void 0!==F&&F,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,_,R,F,ee,Ie;const ze={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,ze),this.validatePasswordCharacterOptions(d,ze),ze.isValid&&(ze.isValid=null===(f=ze.meetsMinPasswordLength)||void 0===f||f),ze.isValid&&(ze.isValid=null===(_=ze.meetsMaxPasswordLength)||void 0===_||_),ze.isValid&&(ze.isValid=null===(R=ze.containsLowercaseLetter)||void 0===R||R),ze.isValid&&(ze.isValid=null===(F=ze.containsUppercaseLetter)||void 0===F||F),ze.isValid&&(ze.isValid=null===(ee=ze.containsNumericCharacter)||void 0===ee||ee),ze.isValid&&(ze.isValid=null===(Ie=ze.containsNonAlphanumericCharacter)||void 0===Ie||Ie),ze}validatePasswordLengthOptions(d,f){const _=this.customStrengthOptions.minPasswordLength,R=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=d.length>=_),R&&(f.meetsMaxPasswordLength=d.length<=R)}validatePasswordCharacterOptions(d,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let R=0;R<d.length;R++)_=d.charAt(R),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,f,_,R,F){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=R)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=F))}}class yr{constructor(d,f,_,R){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.beforeStateQueue=new kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=it(f)),this._initializationPromise=this.queue((0,y.Z)(function*(){var R,F;if(!_._deleted&&(_.persistenceManager=yield Vt.create(_,d),!_._deleted)){if(null!==(R=_._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(F=_.currentUser)||void 0===F?void 0:F.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,y.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,y.Z)(function*(){var _;const R=yield f.assertedPersistence.getCurrentUser();let F=R,ee=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Ie=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,ze=F?._redirectEventId,pt=yield f.tryRedirectSignIn(d);(!Ie||Ie===ze)&&pt?.user&&(F=pt.user,ee=!0)}if(!F)return f.directlySetCurrentUser(null);if(!F._redirectEventId){if(ee)try{yield f.beforeStateQueue.runMiddleware(F)}catch(Ie){F=R,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Ie))}return F?f.reloadAndSetCurrentUserOrClear(F):f.directlySetCurrentUser(null)}return Te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===F._redirectEventId?f.directlySetCurrentUser(F):f.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(d){var f=this;return(0,y.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,y.Z)(function*(){try{yield Cr(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function lt(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,y.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,y.Z)(function*(){const _=d?(0,z.m9)(d):null;return _&&Te(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,y.Z)(function*(){if(!_._deleted)return d&&Te(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,y.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,y.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,y.Z)(function*(){yield f.assertedPersistence.setPersistence(it(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,y.Z)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,y.Z)(function*(){const f=yield function Pn(g){return Vn.apply(this,arguments)}(d),_=new Bs(f);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new z.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,y.Z)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),R={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=f.tenantId&&(R.tenantId=f.tenantId),yield function j(g,d){return $.apply(this,arguments)}(f,R)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,y.Z)(function*(){const R=yield _.getOrInitRedirectPersistenceManager(f);return null===d?R.removeCurrentUser():R.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,y.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&it(d)||f._popupRedirectResolver;Te(_,f,"argument-error"),f.redirectPersistenceManager=yield Vt.create(f,[it(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,y.Z)(function*(){var _,R;return f._isInitialized&&(yield f.queue((0,y.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(R=f.redirectUser)||void 0===R?void 0:R._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,y.Z)(function*(){if(d===f.currentUser)return f.queue((0,y.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,R){if(this._deleted)return()=>{};const F="function"==typeof f?f:f.next.bind(f);let ee=!1;const Ie=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(Ie,this,"internal-error"),Ie.then(()=>{ee||F(this.currentUser)}),"function"==typeof f){const ze=d.addObserver(f,_,R);return()=>{ee=!0,ze()}}{const ze=d.addObserver(f);return()=>{ee=!0,ze()}}}directlySetCurrentUser(d){var f=this;return(0,y.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,y.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const R=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();R&&(_["X-Firebase-Client"]=R);const F=yield d._getAppCheckToken();return F&&(_["X-Firebase-AppCheck"]=F),_})()}_getAppCheckToken(){var d=this;return(0,y.Z)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function ht(g,...d){wt.logLevel<=le.in.WARN&&wt.warn(`Auth (${fe.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function pn(g){return(0,z.m9)(g)}class Xi{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,z.ne)(f=>this.observer=f)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _i={loadJS:()=>(0,y.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ji(g){return _i.loadJS(g)}function ps(g){return`__${g}${Math.floor(1e6*Math.random())}`}class di{constructor(d){this.type="recaptcha-enterprise",this.auth=pn(d)}verify(d="verify",f=!1){var _=this;return(0,y.Z)(function*(){function F(){return F=(0,y.Z)(function*(Ie){if(!f){if(null==Ie.tenantId&&null!=Ie._agentRecaptchaConfig)return Ie._agentRecaptchaConfig.siteKey;if(null!=Ie.tenantId&&void 0!==Ie._tenantRecaptchaConfigs[Ie.tenantId])return Ie._tenantRecaptchaConfigs[Ie.tenantId].siteKey}return new Promise(function(){var ze=(0,y.Z)(function*(pt,Rt){ri(Ie,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Pt=>{if(void 0!==Pt.recaptchaKey){const wr=new en(Pt);return null==Ie.tenantId?Ie._agentRecaptchaConfig=wr:Ie._tenantRecaptchaConfigs[Ie.tenantId]=wr,pt(wr.siteKey)}Rt(new Error("recaptcha Enterprise site key undefined"))}).catch(Pt=>{Rt(Pt)})});return function(pt,Rt){return ze.apply(this,arguments)}}())}),F.apply(this,arguments)}function ee(Ie,ze,pt){const Rt=window.grecaptcha;St(Rt)?Rt.enterprise.ready(()=>{Rt.enterprise.execute(Ie,{action:d}).then(Pt=>{ze(Pt)}).catch(()=>{ze("NO_RECAPTCHA")})}):pt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ie,ze)=>{(function R(Ie){return F.apply(this,arguments)})(_.auth).then(pt=>{if(!f&&St(window.grecaptcha))ee(pt,Ie,ze);else{if(typeof window>"u")return void ze(new Error("RecaptchaVerifier is only supported in browser"));let Rt=function Oo(){return _i.recaptchaEnterpriseScript}();0!==Rt.length&&(Rt+=pt),ji(Rt).then(()=>{ee(pt,Ie,ze)}).catch(Pt=>{ze(Pt)})}}).catch(pt=>{ze(pt)})})})()}}function ko(g,d,f){return js.apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(g,d,f,_=!1){const R=new di(g);let F;try{F=yield R.verify(f)}catch{F=yield R.verify(f,!0)}const ee=Object.assign({},d);return Object.assign(ee,_?{captchaResp:F}:{captchaResponse:F}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}function yi(g,d,f,_){return oa.apply(this,arguments)}function oa(){return oa=(0,y.Z)(function*(g,d,f,_){var R;if(null!==(R=g._getRecaptchaConfig())&&void 0!==R&&R.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const F=yield ko(g,d,f,"getOobCode"===f);return _(g,F)}return _(g,d).catch(function(){var F=(0,y.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ie=yield ko(g,d,f,"getOobCode"===f);return _(g,Ie)}return Promise.reject(ee)});return function(ee){return F.apply(this,arguments)}}())}),oa.apply(this,arguments)}function za(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Lo(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class gs{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return xt("not implemented")}_getIdTokenResponse(d){return xt("not implemented")}_linkToIdToken(d,f){return xt("not implemented")}_getReauthenticationResolver(d){return xt("not implemented")}}function Fo(g,d){return ln.apply(this,arguments)}function ln(){return(ln=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:resetPassword",Ae(g,d))})).apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Rs(g,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",Ae(g,d))})).apply(this,arguments)}function Hs(g,d){return zi.apply(this,arguments)}function zi(){return(zi=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPassword",Ae(g,d))})).apply(this,arguments)}function Gi(g,d){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:sendOobCode",Ae(g,d))})).apply(this,arguments)}function Kt(){return(Kt=(0,y.Z)(function*(g,d){return Gi(g,d)})).apply(this,arguments)}function Mn(g,d){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,y.Z)(function*(g,d){return Gi(g,d)})).apply(this,arguments)}function ua(g,d){return tr.apply(this,arguments)}function tr(){return(tr=(0,y.Z)(function*(g,d){return Gi(g,d)})).apply(this,arguments)}function Fn(){return(Fn=(0,y.Z)(function*(g,d){return Gi(g,d)})).apply(this,arguments)}function Yr(){return(Yr=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}function Ms(){return(Ms=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithEmailLink",Ae(g,d))})).apply(this,arguments)}class ho extends gs{constructor(d,f,_,R=null){super("password",_),this._email=d,this._password=f,this._tenantId=R}static _fromEmailAndPassword(d,f){return new ho(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new ho(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,y.Z)(function*(){switch(f.signInMethod){case"password":return yi(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hs);case"emailLink":return function Si(g,d){return Yr.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Ve(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,y.Z)(function*(){switch(_.signInMethod){case"password":return yi(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rs);case"emailLink":return function Ht(g,d){return Ms.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Ve(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function zr(g,d){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithIdp",Ae(g,d))})).apply(this,arguments)}class Jn extends gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Jn(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Ve("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:R}=f,F=(0,ae._T)(f,["providerId","signInMethod"]);if(!_||!R)return null;const ee=new Jn(_,R);return ee.idToken=F.idToken||void 0,ee.accessToken=F.accessToken||void 0,ee.secret=F.secret,ee.nonce=F.nonce,ee.pendingToken=F.pendingToken||null,ee}_getIdTokenResponse(d){return zr(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,zr(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,zr(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,z.xO)(f)}return d}}function es(){return(es=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:sendVerificationCode",Ae(g,d))})).apply(this,arguments)}function xi(){return(xi=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d))})).apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(g,d){const f=yield dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,d));if(f.temporaryProof)throw fn(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const ms={USER_NOT_FOUND:"user-not-found"};function Vu(){return(Vu=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Ae(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),ms)})).apply(this,arguments)}class _s extends gs{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new _s({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new _s({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function fo(g,d){return xi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Cn(g,d){return Ni.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function tn(g,d){return Vu.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:R}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:R}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:R,temporaryProof:F}=d;return _||f||R||F?new _s({verificationId:f,verificationCode:_,phoneNumber:R,temporaryProof:F}):null}}class po{constructor(d){var f,_,R,F,ee,Ie;const ze=(0,z.zd)((0,z.pd)(d)),pt=null!==(f=ze.apiKey)&&void 0!==f?f:null,Rt=null!==(_=ze.oobCode)&&void 0!==_?_:null,Pt=function la(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=ze.mode)&&void 0!==R?R:null);Te(pt&&Rt&&Pt,"argument-error"),this.apiKey=pt,this.operation=Pt,this.code=Rt,this.continueUrl=null!==(F=ze.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ee=ze.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Ie=ze.tenantId)&&void 0!==Ie?Ie:null}static parseLink(d){const f=function ys(g){const d=(0,z.zd)((0,z.pd)(g)).link,f=d?(0,z.zd)((0,z.pd)(d)).deep_link_id:null,_=(0,z.zd)((0,z.pd)(g)).deep_link_id;return(_?(0,z.zd)((0,z.pd)(_)).link:null)||_||f||d||g}(d);try{return new po(f)}catch{return null}}}let ts=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return ho._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const R=po.parseLink(_);return Te(R,"argument-error"),ho._fromEmailAndCode(f,R.code,R.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class On{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Uo extends On{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class pr extends Uo{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return Te("providerId"in f&&"signInMethod"in f,"argument-error"),Jn._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Te(d.idToken||d.accessToken,"argument-error"),Jn._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return pr.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return pr.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:R,pendingToken:F,nonce:ee,providerId:Ie}=d;if(!_&&!R&&!f&&!F||!Ie)return null;try{return new pr(Ie)._credential({idToken:f,accessToken:_,nonce:ee,pendingToken:F})}catch{return null}}}let Gn=(()=>{class g extends Uo{constructor(){super("facebook.com")}static credential(f){return Jn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),vs=(()=>{class g extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return Jn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:R}=f;if(!_&&!R)return null;try{return g.credential(_,R)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Wi=(()=>{class g extends Uo{constructor(){super("github.com")}static credential(f){return Jn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Gr extends gs{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return zr(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,zr(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,zr(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:R,pendingToken:F}=f;return _&&R&&F&&_===R?new Gr(_,F):null}static _create(d,f){return new Gr(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class go extends On{constructor(d){Te(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return go.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return go.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Gr.fromJSON(d);return Te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Gr._create(_,f)}catch{return null}}}let Bo=(()=>{class g extends Uo{constructor(){super("twitter.com")}static credential(f,_){return Jn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:R}=f;if(!_||!R)return null;try{return g.credential(_,R)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Bu(g,d){return jo.apply(this,arguments)}function jo(){return(jo=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signUp",Ae(g,d))})).apply(this,arguments)}class Vr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,R=!1){return(0,y.Z)(function*(){const F=yield ge._fromIdTokenResponse(d,_,R),ee=mo(_);return new Vr({user:F,providerId:ee,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,y.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const R=mo(_);return new Vr({user:d,providerId:R,_tokenResponse:_,operationType:f})})()}}function mo(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Ic(){return(Ic=(0,y.Z)(function*(g){var d;const f=pn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Vr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield Bu(f,{returnSecureToken:!0}),R=yield Vr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(R.user),R})).apply(this,arguments)}class Un extends z.ZR{constructor(d,f,_,R){var F;super(f.code,f.message),this.operationType=_,this.user=R,Object.setPrototypeOf(this,Un.prototype),this.customData={appName:d.name,tenantId:null!==(F=d.tenantId)&&void 0!==F?F:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,R){return new Un(d,f,_,R)}}function da(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Un._fromErrorAndOperation(g,F,d,_):F})}function qa(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function ha(){return ha=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g);yield _o(!0,f,d);const{providerUserInfo:_}=yield function Yt(g,d){return Nt.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),R=qa(_||[]);return f.providerData=f.providerData.filter(F=>R.has(F.providerId)),R.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ha.apply(this,arguments)}function Za(g,d){return ju.apply(this,arguments)}function ju(){return(ju=(0,y.Z)(function*(g,d,f=!1){const _=yield cr(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return Vr._forOperation(g,"link",_)})).apply(this,arguments)}function _o(g,d,f){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(g,d,f){yield Cr(d);const R=!1===g?"provider-already-linked":"no-such-provider";Te(qa(d.providerData).has(f)===g,d.auth,R)})).apply(this,arguments)}function $u(g,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,y.Z)(function*(g,d,f=!1){const{auth:_}=g,R="reauthenticate";try{const F=yield cr(g,da(_,R,d,g),f);Te(F.idToken,_,"internal-error");const ee=si(F.idToken);Te(ee,_,"internal-error");const{sub:Ie}=ee;return Te(g.uid===Ie,_,"user-mismatch"),Vr._forOperation(g,R,F)}catch(F){throw"auth/user-not-found"===F?.code&&Ve(_,"user-mismatch"),F}})).apply(this,arguments)}function fa(g,d){return xs.apply(this,arguments)}function xs(){return(xs=(0,y.Z)(function*(g,d,f=!1){const _="signIn",R=yield da(g,_,d),F=yield Vr._fromIdTokenResponse(g,_,R);return f||(yield g._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Qa(g,d){return Es.apply(this,arguments)}function Es(){return(Es=(0,y.Z)(function*(g,d){return fa(pn(g),d)})).apply(this,arguments)}function Oi(g,d){return zs.apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g);return yield _o(!1,f,d.providerId),Za(f,d)})).apply(this,arguments)}function wc(g,d){return Er.apply(this,arguments)}function Er(){return(Er=(0,y.Z)(function*(g,d){return $u((0,z.m9)(g),d)})).apply(this,arguments)}function rr(){return(rr=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithCustomToken",Ae(g,d))})).apply(this,arguments)}function pa(){return pa=(0,y.Z)(function*(g,d){const f=pn(g),_=yield function yo(g,d){return rr.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),R=yield Vr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(R.user),R}),pa.apply(this,arguments)}class Gs{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?ns._fromServerResponse(d,f):"totpInfo"in f?Is._fromServerResponse(d,f):Ve(d,"internal-error")}}class ns extends Gs{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new ns(f)}}class Is extends Gs{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new Is(f)}}function rs(g,d,f){var _;Te((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Te(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Te(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(Te(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Ws(g){return qs.apply(this,arguments)}function qs(){return(qs=(0,y.Z)(function*(g){const d=pn(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function vo(){return(vo=(0,y.Z)(function*(g,d,f){const _=pn(g),R={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&rs(_,R,f),yield yi(_,R,"getOobCode",Mn)})).apply(this,arguments)}function Eo(){return Eo=(0,y.Z)(function*(g,d,f){yield Fo((0,z.m9)(g),{oobCode:d,newPassword:f}).catch(function(){var _=(0,y.Z)(function*(R){throw"auth/password-does-not-meet-requirements"===R.code&&Ws(g),R});return function(R){return _.apply(this,arguments)}}())}),Eo.apply(this,arguments)}function ws(){return ws=(0,y.Z)(function*(g,d){yield function lo(g,d){return Hi.apply(this,arguments)}((0,z.m9)(g),{oobCode:d})}),ws.apply(this,arguments)}function ga(g,d){return ma.apply(this,arguments)}function ma(){return(ma=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g),_=yield Fo(f,{oobCode:d}),R=_.requestType;switch(Te(R,f,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(_.mfaInfo,f,"internal-error");default:Te(_.email,f,"internal-error")}let F=null;return _.mfaInfo&&(F=Gs._fromServerResponse(pn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:F},operation:R}})).apply(this,arguments)}function Gu(){return(Gu=(0,y.Z)(function*(g,d){const{data:f}=yield ga((0,z.m9)(g),d);return f.email})).apply(this,arguments)}function Ja(){return(Ja=(0,y.Z)(function*(g,d,f){const _=pn(g),ee=yield yi(_,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bu).catch(ze=>{throw"auth/password-does-not-meet-requirements"===ze.code&&Ws(g),ze}),Ie=yield Vr._fromIdTokenResponse(_,"signIn",ee);return yield _._updateCurrentUser(Ie.user),Ie})).apply(this,arguments)}function Ho(){return(Ho=(0,y.Z)(function*(g,d,f){const _=pn(g),R={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function F(ee,Ie){Te(Ie.handleCodeInApp,_,"argument-error"),Ie&&rs(_,ee,Ie)})(R,f),yield yi(_,R,"getOobCode",ua)})).apply(this,arguments)}function eu(){return(eu=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),R=ts.credentialWithLink(d,f||Dt());return Te(R._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Qa(_,R)})).apply(this,arguments)}function hi(){return(hi=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:createAuthUri",Ae(g,d))})).apply(this,arguments)}function k(){return k=(0,y.Z)(function*(g,d){const _={identifier:d,continueUri:Qt()?Dt():"http://localhost"},{signinMethods:R}=yield function zo(g,d){return hi.apply(this,arguments)}((0,z.m9)(g),_);return R||[]}),k.apply(this,arguments)}function N(){return N=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g),R={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&rs(f.auth,R,d);const{email:F}=yield function mt(g,d){return Kt.apply(this,arguments)}(f.auth,R);F!==g.email&&(yield g.reload())}),N.apply(this,arguments)}function Pe(){return Pe=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&rs(_.auth,F,f);const{email:ee}=yield function Ps(g,d){return Fn.apply(this,arguments)}(_.auth,F);ee!==g.email&&(yield g.reload())}),Pe.apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function nn(){return nn=(0,y.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,z.m9)(g),F={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},ee=yield cr(_,function Oe(g,d){return At.apply(this,arguments)}(_.auth,F));_.displayName=ee.displayName||null,_.photoURL=ee.photoUrl||null;const Ie=_.providerData.find(({providerId:ze})=>"password"===ze);Ie&&(Ie.displayName=_.displayName,Ie.photoURL=_.photoURL),yield _._updateTokensIfNecessary(ee)}),nn.apply(this,arguments)}function Bn(g,d,f){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,y.Z)(function*(g,d,f){const{auth:_}=g,F={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(F.email=d),f&&(F.password=f);const ee=yield cr(g,function lr(g,d){return Lr.apply(this,arguments)}(_,F));yield g._updateTokensIfNecessary(ee,!0)}),Ln.apply(this,arguments)}class dr{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class hr extends dr{constructor(d,f,_,R){super(d,f,_),this.username=R}}class mr extends dr{constructor(d,f){super(d,"facebook.com",f)}}class Jr extends hr{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class is extends dr{constructor(d,f){super(d,"google.com",f)}}class br extends hr{constructor(d,f,_){super(d,"twitter.com",f,_)}}function bi(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function gr(g){var d,f;if(!g)return null;const{providerId:_}=g,R=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},F=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const ee=null===(f=null===(d=si(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(ee)return new dr(F,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!_)return null;switch(_){case"facebook.com":return new mr(F,R);case"github.com":return new Jr(F,R);case"google.com":return new is(F,R);case"twitter.com":return new br(F,R,g.screenName||null);case"custom":case"anonymous":return new dr(F,null);default:return new dr(F,_,R)}}(f)}class Zs{constructor(d,f,_){this.type=d,this.credential=f,this.user=_}static _fromIdtoken(d,f){return new Zs("enroll",d,f)}static _fromMfaPendingCredential(d){return new Zs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Zs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Zs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Mr{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=pn(d),R=f.customData._serverResponse,F=(R.mfaInfo||[]).map(Ie=>Gs._fromServerResponse(_,Ie));Te(R.mfaPendingCredential,_,"internal-error");const ee=Zs._fromMfaPendingCredential(R.mfaPendingCredential);return new Mr(ee,F,function(){var Ie=(0,y.Z)(function*(ze){const pt=yield ze._process(_,ee);delete R.mfaInfo,delete R.mfaPendingCredential;const Rt=Object.assign(Object.assign({},R),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(f.operationType){case"signIn":const Pt=yield Vr._fromIdTokenResponse(_,f.operationType,Rt);return yield _._updateCurrentUser(Pt.user),Pt;case"reauthenticate":return Te(f.user,_,"internal-error"),Vr._forOperation(f.user,f.operationType,Rt);default:Ve(_,"internal-error")}});return function(ze){return Ie.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,y.Z)(function*(){return f.signInResolver(d)})()}}class Ii{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Gs._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Ii(d)}getSession(){var d=this;return(0,y.Z)(function*(){return Zs._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var _=this;return(0,y.Z)(function*(){const R=d,F=yield _.getSession(),ee=yield cr(_.user,R._process(_.user.auth,F,f));return yield _.user._updateTokensIfNecessary(ee),_.user.reload()})()}unenroll(d){var f=this;return(0,y.Z)(function*(){const _="string"==typeof d?d:d.uid,R=yield f.user.getIdToken();try{const F=yield cr(f.user,function xr(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(g,d))}(f.user.auth,{idToken:R,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ee})=>ee!==_),yield f.user._updateTokensIfNecessary(F),yield f.user.reload()}catch(F){throw F}})()}}const Ki=new WeakMap,Mt="__sak";class Rl{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Mt,"1"),this.storage.removeItem(Mt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const tu=(()=>{class g extends Rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ut(){const g=(0,z.z$)();return te(g)||at(g)}()&&function Kn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=an(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const R=this.storage.getItem(_),F=this.localCache[_];R!==F&&f(_,F,R)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((Ie,ze,pt)=>{this.notifyListeners(Ie,pt)});const R=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(R);if(f.newValue!==Ie)null!==f.newValue?this.storage.setItem(R,f.newValue):this.storage.removeItem(R);else if(this.localCache[R]===f.newValue&&!_)return}const F=()=>{const Ie=this.storage.getItem(R);!_&&this.localCache[R]===Ie||this.notifyListeners(R,Ie)},ee=this.storage.getItem(R);!function Nn(){return(0,z.w1)()&&10===document.documentMode}()||ee===f.newValue||f.newValue===f.oldValue?F():setTimeout(F,10)}notifyListeners(f,_){this.localCache[f]=_;const R=this.listeners[f];if(R)for(const F of Array.from(R))F(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var R=()=>super._set,F=this;return(0,y.Z)(function*(){yield R().call(F,f,_),F.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,R=this;return(0,y.Z)(function*(){const F=yield _().call(R,f);return R.localCache[f]=JSON.stringify(F),F})()}_remove(f){var _=()=>super._remove,R=this;return(0,y.Z)(function*(){yield _().call(R,f),delete R.localCache[f]})()}}return g.type="LOCAL",g})(),Ke=(()=>{class g extends Rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Pl=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(F=>F.isListeningto(f));if(_)return _;const R=new g(f);return this.receivers.push(R),R}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,y.Z)(function*(){const R=f,{eventId:F,eventType:ee,data:Ie}=R.data,ze=_.handlersMap[ee];if(!ze?.size)return;R.ports[0].postMessage({status:"ack",eventId:F,eventType:ee});const pt=Array.from(ze).map(function(){var Pt=(0,y.Z)(function*(wr){return wr(R.origin,Ie)});return function(wr){return Pt.apply(this,arguments)}}()),Rt=yield function Sn(g){return Promise.all(g.map(function(){var d=(0,y.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(pt);R.ports[0].postMessage({status:"done",eventId:F,eventType:ee,response:Rt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function nu(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class fi{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var R=this;return(0,y.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ee,Ie;return new Promise((ze,pt)=>{const Rt=nu("",20);F.port1.start();const Pt=setTimeout(()=>{pt(new Error("unsupported_event"))},_);Ie={messageChannel:F,onMessage(wr){const Ls=wr;if(Ls.data.eventId===Rt)switch(Ls.data.status){case"ack":clearTimeout(Pt),ee=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),ze(Ls.data.response);break;default:clearTimeout(Pt),clearTimeout(ee),pt(new Error("invalid_response"))}}},R.handlers.add(Ie),F.port1.addEventListener("message",Ie.onMessage),R.target.postMessage({eventType:d,eventId:Rt,data:f},[F.port2])}).finally(()=>{Ie&&R.removeMessageHandler(Ie)})})()}}function Br(){return window}function Ts(){return typeof Br().WorkerGlobalScope<"u"&&"function"==typeof Br().importScripts}function Wt(){return(Wt=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ir="firebaseLocalStorageDb",wi="firebaseLocalStorage",_n="fbase_key";class Ns{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function En(g,d){return g.transaction([wi],d?"readwrite":"readonly").objectStore(wi)}function To(){const g=indexedDB.open(ir,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(wi,{keyPath:_n})}catch(R){f(R)}}),g.addEventListener("success",(0,y.Z)(function*(){const _=g.result;_.objectStoreNames.contains(wi)?d(_):(_.close(),yield function ft(){const g=indexedDB.deleteDatabase(ir);return new Ns(g).toPromise()}(),d(yield To()))}))})}function Ac(g,d,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,y.Z)(function*(g,d,f){const _=En(g,!0).put({[_n]:d,value:f});return new Ns(_).toPromise()})).apply(this,arguments)}function Os(){return(Os=(0,y.Z)(function*(g,d){const f=En(g,!1).get(d),_=yield new Ns(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function xl(g,d){const f=En(g,!0).delete(d);return new Ns(f).toPromise()}const D=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,y.Z)(function*(){return f.db||(f.db=yield To()),f.db})()}_withRetries(f){var _=this;return(0,y.Z)(function*(){let R=0;for(;;)try{const F=yield _._openDb();return yield f(F)}catch(F){if(R++>3)throw F;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,y.Z)(function*(){return Ts()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,y.Z)(function*(){f.receiver=Pl._getInstance(function Xd(){return Ts()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,y.Z)(function*(R,F){return{keyProcessed:(yield f._poll()).includes(F.key)}});return function(R,F){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,y.Z)(function*(R,F){return["keyChanged"]});return function(R,F){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,y.Z)(function*(){var _,R;if(f.activeServiceWorker=yield function ru(){return Wt.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new fi(f.activeServiceWorker);const F=yield f.sender._send("ping",{},800);F&&null!==(_=F[0])&&void 0!==_&&_.fulfilled&&null!==(R=F[0])&&void 0!==R&&R.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,y.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Ea(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const f=yield To();return yield Ac(f,Mt,"1"),yield xl(f,Mt),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,y.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var R=this;return(0,y.Z)(function*(){return R._withPendingWrite((0,y.Z)(function*(){return yield R._withRetries(F=>Ac(F,f,_)),R.localCache[f]=_,R.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,y.Z)(function*(){const R=yield _._withRetries(F=>function Ml(g,d){return Os.apply(this,arguments)}(F,f));return _.localCache[f]=R,R})()}_remove(f){var _=this;return(0,y.Z)(function*(){return _._withPendingWrite((0,y.Z)(function*(){return yield _._withRetries(R=>xl(R,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,y.Z)(function*(){const _=yield f._withRetries(ee=>{const Ie=En(ee,!1).getAll();return new Ns(Ie).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const R=[],F=new Set;if(0!==_.length)for(const{fbase_key:ee,value:Ie}of _)F.add(ee),JSON.stringify(f.localCache[ee])!==JSON.stringify(Ie)&&(f.notifyListeners(ee,Ie),R.push(ee));for(const ee of Object.keys(f.localCache))f.localCache[ee]&&!F.has(ee)&&(f.notifyListeners(ee,null),R.push(ee));return R})()}notifyListeners(f,_){this.localCache[f]=_;const R=this.listeners[f];if(R)for(const F of Array.from(R))F(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),X=1e12;class Jt{constructor(d){this.auth=d,this.counter=X,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new zt(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||X;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||X))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,y.Z)(function*(){var _;return null===(_=f._widgets.get(d||X))||void 0===_||_.execute(),""})()}}class zt{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof d?document.getElementById(d):d;Te(R,"argument-error",{appName:f}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gn(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=ps("rcb"),ss=new Be(3e4,6e4);class iu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Br().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return Te(function Qs(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&$t(Br().grecaptcha)?Promise.resolve(Br().grecaptcha):new Promise((_,R)=>{const F=Br().setTimeout(()=>{R(ve(d,"network-request-failed"))},ss.get());Br()[In]=()=>{Br().clearTimeout(F),delete Br()[In];const Ie=Br().grecaptcha;if(!Ie||!$t(Ie))return void R(ve(d,"internal-error"));const ze=Ie.render;Ie.render=(pt,Rt)=>{const Pt=ze(pt,Rt);return this.counter++,Pt},this.hostLanguage=f,_(Ie)},ji(`${function $a(){return _i.recaptchaV2Script}()}?${(0,z.xO)({onload:In,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(F),R(ve(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Br().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qo{load(d){return(0,y.Z)(function*(){return new Jt(d)})()}clearedOneInstance(){}}const su="recaptcha",ef={theme:"light",type:"image"};class Nl{constructor(d,f,_=Object.assign({},ef)){this.parameters=_,this.type=su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(d),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof f?document.getElementById(f):f;Te(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qo:new iu,this.validateStartingState()}verify(){var d=this;return(0,y.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(F=>{const ee=Ie=>{Ie&&(d.tokenChangeListeners.delete(ee),F(Ie))};d.tokenChangeListeners.add(ee),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Br()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,y.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,y.Z)(function*(){Te(Qt()&&!Ts(),d.auth,"internal-error"),yield function Xr(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function ur(g){return mn.apply(this,arguments)}(d.auth);Te(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ou{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=_s._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function au(){return(au=(0,y.Z)(function*(g,d,f){const _=pn(g),R=yield bc(_,d,(0,z.m9)(f));return new ou(R,F=>Qa(_,F))})).apply(this,arguments)}function Sc(){return(Sc=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);yield _o(!1,_,"phone");const R=yield bc(_.auth,d,(0,z.m9)(f));return new ou(R,F=>Oi(_,F))})).apply(this,arguments)}function Ds(){return(Ds=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),R=yield bc(_.auth,d,(0,z.m9)(f));return new ou(R,F=>wc(_,F))})).apply(this,arguments)}function bc(g,d,f){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,y.Z)(function*(g,d,f){var _;const R=yield f.verify();try{let F;if(Te("string"==typeof R,g,"argument-error"),Te(f.type===su,g,"argument-error"),F="string"==typeof d?{phoneNumber:d}:d,"session"in F){const ee=F.session;if("phoneNumber"in F)return Te("enroll"===ee.type,g,"internal-error"),(yield function wo(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:start",Ae(g,d))}(g,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{Te("signin"===ee.type,g,"internal-error");const Ie=(null===(_=F.multiFactorHint)||void 0===_?void 0:_.uid)||F.multiFactorUid;return Te(Ie,g,"missing-multi-factor-info"),(yield function P(g,d){return Fe(g,"POST","/v2/accounts/mfaSignIn:start",Ae(g,d))}(g,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Fr(g,d){return es.apply(this,arguments)}(g,{phoneNumber:F.phoneNumber,recaptchaToken:R});return ee}}finally{f._reset()}}),Ys.apply(this,arguments)}function th(){return(th=(0,y.Z)(function*(g,d){yield Za((0,z.m9)(g),d)})).apply(this,arguments)}let Ol=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=pn(f)}verifyPhoneNumber(f,_){return bc(this.auth,f,(0,z.m9)(_))}static credential(f,_){return _s._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:R}=f;return _&&R?_s._fromTokenResponse(_,R):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Ko(g,d){return d?it(d):(Te(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class tf extends gs{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return zr(d,this._buildIdpRequest())}_linkToIdToken(d,f){return zr(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return zr(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function dg(g){return fa(g.auth,new tf(g),g.bypassAuthState)}function hg(g){const{auth:d,user:f}=g;return Te(f,d,"internal-error"),$u(f,new tf(g),g.bypassAuthState)}function m_(g){return nf.apply(this,arguments)}function nf(){return(nf=(0,y.Z)(function*(g){const{auth:d,user:f}=g;return Te(f,d,"internal-error"),Za(f,new tf(g),g.bypassAuthState)})).apply(this,arguments)}class kl{constructor(d,f,_,R,F=!1){this.auth=d,this.resolver=_,this.user=R,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,y.Z)(function*(_,R){d.pendingPromise={resolve:_,reject:R};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(F){d.reject(F)}});return function(_,R){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,y.Z)(function*(){const{urlResponse:_,sessionId:R,postBody:F,tenantId:ee,error:Ie,type:ze}=d;if(Ie)return void f.reject(Ie);const pt={auth:f.auth,requestUri:_,sessionId:R,tenantId:ee||void 0,postBody:F||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ze)(pt))}catch(Rt){f.reject(Rt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return dg;case"linkViaPopup":case"linkViaRedirect":return m_;case"reauthViaPopup":case"reauthViaRedirect":return hg;default:Ve(this.auth,"internal-error")}}resolve(d){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rc=new Be(2e3,1e4);function uu(){return(uu=(0,y.Z)(function*(g,d,f){const _=pn(g);We(g,d,On);const R=Ko(_,f);return new Ll(_,"signInViaPopup",d,R).executeNotNull()})).apply(this,arguments)}function Ku(){return(Ku=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,On);const R=Ko(_.auth,f);return new Ll(_.auth,"reauthViaPopup",d,R,_).executeNotNull()})).apply(this,arguments)}function Pc(){return(Pc=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,On);const R=Ko(_.auth,f);return new Ll(_.auth,"linkViaPopup",d,R,_).executeNotNull()})).apply(this,arguments)}let Ll=(()=>{class g extends kl{constructor(f,_,R,F,ee){super(f,_,F,ee),this.provider=R,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,y.Z)(function*(){const _=yield f.execute();return Te(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,y.Z)(function*(){Tt(1===f.filter.length,"Popup operations only handle one event");const _=nu();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(R=>{f.reject(R)}),f.resolver._isIframeWebStorageSupported(f.auth,R=>{R||f.reject(ve(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,R;this.pollId=null!==(R=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Rc.get())};f()}}return g.currentPopupAction=null,g})();const rf="pendingRedirect",Zi=new Map;class pg extends kl{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,y.Z)(function*(){let _=Zi.get(f.auth._key());if(!_){try{const F=(yield function Zu(g,d){return jr.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(F)}catch(R){_=()=>Promise.reject(R)}Zi.set(f.auth._key(),_)}return f.bypassAuthState||Zi.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,y.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const R=yield _.auth._redirectUserForId(d.eventId);if(R)return _.user=R,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function jr(){return(jr=(0,y.Z)(function*(g,d){const f=gi(d),_=Qu(g);if(!(yield _._isAvailable()))return!1;const R="true"===(yield _._get(f));return yield _._remove(f),R})).apply(this,arguments)}function Mc(g,d){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,y.Z)(function*(g,d){return Qu(g)._set(gi(d),"true")})).apply(this,arguments)}function sr(g,d){Zi.set(g._key(),d)}function Qu(g){return it(g._redirectPersistence)}function gi(g){return Ct(rf,g.config.apiKey,g.name)}function er(g,d,f){return function rh(g,d,f){return wa.apply(this,arguments)}(g,d,f)}function wa(){return(wa=(0,y.Z)(function*(g,d,f){const _=pn(g);We(g,d,On),yield _._initializationPromise;const R=Ko(_,f);return yield Mc(R,_),R._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Pi(g,d,f){return function Ta(g,d,f){return ih.apply(this,arguments)}(g,d,f)}function ih(){return(ih=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,On),yield _.auth._initializationPromise;const R=Ko(_.auth,f);yield Mc(R,_.auth);const F=yield Da(_);return R._openRedirect(_.auth,d,"reauthViaRedirect",F)})).apply(this,arguments)}function ei(g,d,f){return function sf(g,d,f){return os.apply(this,arguments)}(g,d,f)}function os(){return(os=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,On),yield _.auth._initializationPromise;const R=Ko(_.auth,f);yield _o(!1,_,d.providerId),yield Mc(R,_.auth);const F=yield Da(_);return R._openRedirect(_.auth,d,"linkViaRedirect",F)})).apply(this,arguments)}function Ir(){return(Ir=(0,y.Z)(function*(g,d){return yield pn(g)._initializationPromise,cu(g,d,!1)})).apply(this,arguments)}function cu(g,d){return lu.apply(this,arguments)}function lu(){return(lu=(0,y.Z)(function*(g,d,f=!1){const _=pn(g),R=Ko(_,d),ee=yield new pg(_,R,f).execute();return ee&&!f&&(delete ee.user._redirectEventId,yield _._persistUserIfCurrent(ee.user),yield _._setRedirectUser(null,d)),ee})).apply(this,arguments)}function Da(g){return sh.apply(this,arguments)}function sh(){return(sh=(0,y.Z)(function*(g){const d=nu(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Js{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Qi(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return as(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!as(d)){const R=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(ve(this.auth,R))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Co(d))}saveEventToCache(d){this.cachedEventUids.add(Co(d)),this.lastProcessedEventTime=Date.now()}}function Co(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function as({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function du(g){return ks.apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(g,d={}){return Fe(g,"GET","/v1/projects",d)})).apply(this,arguments)}const hu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xc=/^https?/;function Nc(){return(Nc=(0,y.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield du(g);for(const f of d)try{if(Yu(f))return}catch{}Ve(g,"unauthorized-domain")})).apply(this,arguments)}function Yu(g){const d=Dt(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const ee=new URL(g);return""===ee.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&ee.hostname===_}if(!xc.test(f))return!1;if(hu.test(g))return _===g;const R=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(_)}const af=new Be(3e4,6e4);function Oc(){const g=Br().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Vl=null;const kc=new Be(5e3,15e3),uf="__/auth/iframe",mi="emulator/auth/iframe",mg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ju=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cf(g){const d=g.config;Te(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?ie(d,mi):`https://${g.config.authDomain}/${uf}`,_={apiKey:d.apiKey,appName:g.name,v:fe.SDK_VERSION},R=Ju.get(g.config.apiHost);R&&(_.eid=R);const F=g._getFrameworks();return F.length&&(_.fw=F.join(",")),`${f}?${(0,z.xO)(_).slice(1)}`}function Yo(){return Yo=(0,y.Z)(function*(g){const d=yield function Qo(g){return Vl=Vl||function gg(g){return new Promise((d,f)=>{var _,R,F;function ee(){Oc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Oc(),f(ve(g,"network-request-failed"))},timeout:af.get()})}if(null!==(R=null===(_=Br().gapi)||void 0===_?void 0:_.iframes)&&void 0!==R&&R.Iframe)d(gapi.iframes.getContext());else{if(null===(F=Br().gapi)||void 0===F||!F.load){const Ie=ps("iframefcb");return Br()[Ie]=()=>{gapi.load?ee():f(ve(g,"network-request-failed"))},ji(`${function li(){return _i.gapiScript}()}?onload=${Ie}`).catch(ze=>f(ze))}ee()}}).catch(d=>{throw Vl=null,d})}(g),Vl}(g),f=Br().gapi;return Te(f,g,"internal-error"),d.open({where:document.body,url:cf(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mg,dontclear:!0},_=>new Promise(function(){var R=(0,y.Z)(function*(F,ee){yield _.restyle({setHideOnLeave:!1});const Ie=ve(g,"network-request-failed"),ze=Br().setTimeout(()=>{ee(Ie)},kc.get());function pt(){Br().clearTimeout(ze),F(_)}_.ping(pt).then(pt,()=>{ee(Ie)})});return function(F,ee){return R.apply(this,arguments)}}()))}),Yo.apply(this,arguments)}const _r={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class df{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Wn="__/auth/handler",eo="emulator/auth/handler",hf=encodeURIComponent("fac");function ec(g,d,f,_,R,F){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,y.Z)(function*(g,d,f,_,R,F){Te(g.config.authDomain,g,"auth-domain-config-required"),Te(g.config.apiKey,g,"invalid-api-key");const ee={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:fe.SDK_VERSION,eventId:R};if(d instanceof On){d.setDefaultLanguage(g.languageCode),ee.providerId=d.providerId||"",(0,z.xb)(d.getCustomParameters())||(ee.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Rt,Pt]of Object.entries(F||{}))ee[Rt]=Pt}if(d instanceof Uo){const Rt=d.getScopes().filter(Pt=>""!==Pt);Rt.length>0&&(ee.scopes=Rt.join(","))}g.tenantId&&(ee.tid=g.tenantId);const Ie=ee;for(const Rt of Object.keys(Ie))void 0===Ie[Rt]&&delete Ie[Rt];const ze=yield g._getAppCheckToken(),pt=ze?`#${hf}=${encodeURIComponent(ze)}`:"";return`${function ah({config:g}){return g.emulator?ie(g,eo):`https://${g.authDomain}/${Wn}`}(g)}?${(0,z.xO)(Ie).slice(1)}${pt}`})).apply(this,arguments)}const jl="webStorageSupport",uh=class ff{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ke,this._completeRedirectFn=cu,this._overrideRedirectResult=sr}_openPopup(d,f,_,R){var F=this;return(0,y.Z)(function*(){var ee;Tt(null===(ee=F.eventManagers[d._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Ie=yield ec(d,f,_,Dt(),R);return function _g(g,d,f,_=500,R=600){const F=Math.max((window.screen.availHeight-R)/2,0).toString(),ee=Math.max((window.screen.availWidth-_)/2,0).toString();let Ie="";const ze=Object.assign(Object.assign({},_r),{width:_.toString(),height:R.toString(),top:F,left:ee}),pt=(0,z.z$)().toLowerCase();f&&(Ie=ce(pt)?"_blank":f),ye(pt)&&(d=d||"http://localhost",ze.scrollbars="yes");const Rt=Object.entries(ze).reduce((wr,[Ls,Fs])=>`${wr}${Ls}=${Fs},`,"");if(function Ut(g=(0,z.z$)()){var d;return at(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(pt)&&"_self"!==Ie)return function Xt(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",Ie),new df(null);const Pt=window.open(d||"",Ie,Rt);Te(Pt,g,"popup-blocked");try{Pt.focus()}catch{}return new df(Pt)}(d,Ie,nu())})()}_openRedirect(d,f,_,R){var F=this;return(0,y.Z)(function*(){return yield F._originValidation(d),function Wu(g){Br().location.href=g}(yield ec(d,f,_,Dt(),R)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:R,promise:F}=this.eventManagers[f];return R?Promise.resolve(R):(Tt(F,"If manager is not set, promise should be"),F)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,y.Z)(function*(){const _=yield function or(g){return Yo.apply(this,arguments)}(d),R=new Js(d);return _.register("authEvent",F=>(Te(F?.authEvent,d,"invalid-auth-event"),{status:R.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:R},f.iframes[d._key()]=_,R})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(jl,{type:jl},R=>{var F;const ee=null===(F=R?.[0])||void 0===F?void 0:F[jl];void 0!==ee&&f(!!ee),Ve(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function oh(g){return Nc.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return an()||te()||at()}};class yg{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return xt("unexpected MultiFactorSessionType")}}}class Lc extends yg{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Lc(d)}_finalizeEnroll(d,f,_){return function Wo(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function U(g,d){return Fe(g,"POST","/v2/accounts/mfaSignIn:finalize",Ae(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $l=(()=>{class g{constructor(){}static assertion(f){return Lc._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var pf="@firebase/auth";class Fc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,y.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function As(){return window}(0,z.Pz)("authIdTokenMaxAge"),function Lu(g){_i=g}({loadJS:g=>new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=R=>{const F=ve("internal-error");F.customData=R,f(F)},_.type="text/javascript",_.charset="UTF-8",function Eg(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function nc(g){(0,fe._registerComponent)(new me.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),R=d.getProvider("heartbeat"),F=d.getProvider("app-check-internal"),{apiKey:ee,authDomain:Ie}=_.options;Te(ee&&!ee.includes(":"),"invalid-api-key",{appName:_.name});const ze={apiKey:ee,authDomain:Ie,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sr(g)},pt=new yr(_,R,F,ze);return function Fu(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(it);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(pt,f),pt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new me.wA("auth-internal",d=>{const f=pn(d.getProvider("auth").getImmediate());return new Fc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(pf,"1.6.0",function Ao(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,fe.registerVersion)(pf,"1.6.0","esm2017")}("Browser");function Sa(){return Sa=(0,y.Z)(function*(g,d,f){var _;const{BuildInfo:R}=As();Tt(d.sessionId,"AuthEvent did not contain a session ID");const F=yield function Uc(g){return ba.apply(this,arguments)}(d.sessionId),ee={};return at()?ee.ibi=R.packageName:K()?ee.apn=R.packageName:Ve(g,"operation-not-supported-in-this-environment"),R.displayName&&(ee.appDisplayName=R.displayName),ee.sessionId=F,ec(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,ee)}),Sa.apply(this,arguments)}function Gl(){return(Gl=(0,y.Z)(function*(g){const{BuildInfo:d}=As(),f={};at()?f.iosBundleId=d.packageName:K()?f.androidPackageName=d.packageName:Ve(g,"operation-not-supported-in-this-environment"),yield du(g,f)})).apply(this,arguments)}function pu(){return(pu=(0,y.Z)(function*(g,d,f){const{cordova:_}=As();let R=()=>{};try{yield new Promise((F,ee)=>{let Ie=null;function ze(){var Pt;F();const wr=null===(Pt=_.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof wr&&wr(),"function"==typeof f?.close&&f.close()}function pt(){Ie||(Ie=window.setTimeout(()=>{ee(ve(g,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===document?.visibilityState&&pt()}d.addPassiveListener(ze),document.addEventListener("resume",pt,!1),K()&&document.addEventListener("visibilitychange",Rt,!1),R=()=>{d.removePassiveListener(ze),document.removeEventListener("resume",pt,!1),document.removeEventListener("visibilitychange",Rt,!1),Ie&&window.clearTimeout(Ie)}})}finally{R()}})).apply(this,arguments)}function ba(){return(ba=(0,y.Z)(function*(g){const d=function Ig(g){if(Tt(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class wg extends Js{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,y.Z)(function*(){yield d.initPromise})()}}function us(g){return sc.apply(this,arguments)}function sc(){return(sc=(0,y.Z)(function*(g){const d=yield no()._get(hh(g));return d&&(yield no()._remove(hh(g))),d})).apply(this,arguments)}function Tg(){const g=[];for(let f=0;f<20;f++){const _=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return g.join("")}function no(){return it(tu)}function hh(g){return Ct("authEvent",g.config.apiKey,g.name)}function gu(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,z.zd)(f.join("?"))}const Kl=class yf{constructor(){this._redirectPersistence=Ke,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cu,this._overrideRedirectResult=sr}_initialize(d){var f=this;return(0,y.Z)(function*(){const _=d._key();let R=f.eventManagers.get(_);return R||(R=new wg(d),f.eventManagers.set(_,R),f.attachCallbackListeners(d,R)),R})()}_openPopup(d){Ve(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,R){var F=this;return(0,y.Z)(function*(){!function dh(g){var d,f,_,R,F,ee,Ie,ze,pt,Rt;const Pt=As();Te("function"==typeof(null===(d=Pt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(typeof(null===(f=Pt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(F=null===(R=null===(_=Pt?.cordova)||void 0===_?void 0:_.plugins)||void 0===R?void 0:R.browsertab)||void 0===F?void 0:F.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ze=null===(Ie=null===(ee=Pt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===ze?void 0:ze.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Rt=null===(pt=Pt?.cordova)||void 0===pt?void 0:pt.InAppBrowser)||void 0===Rt?void 0:Rt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ee=yield F._initialize(d);yield ee.initialized(),ee.resetRedirect(),function Fl(){Zi.clear()}(),yield F._originValidation(d);const Ie=function to(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Tg(),postBody:null,tenantId:g.tenantId,error:ve(g,"no-auth-event")}}(d,_,R);yield function y_(g,d){return no()._set(hh(g),d)}(d,Ie);const ze=yield function mf(g,d,f){return Sa.apply(this,arguments)}(d,Ie,f),pt=yield function ic(g){const{cordova:d}=As();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let R=null;_?d.plugins.browsertab.openUrl(g):R=d.InAppBrowser.open(g,function Ze(g=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(R)})})}(ze);return function Vc(g,d,f){return pu.apply(this,arguments)}(d,ee,pt)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Yi(g){return Gl.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:R,BuildInfo:F}=As(),ee=setTimeout((0,y.Z)(function*(){yield us(d),f.onEvent(Zl())}),500),Ie=function(){var Rt=(0,y.Z)(function*(Pt){clearTimeout(ee);const wr=yield us(d);let Ls=null;wr&&Pt?.url&&(Ls=function Wl(g,d){var f,_;const R=function Dg(g){const d=gu(g),f=d.link?decodeURIComponent(d.link):void 0,_=gu(f).link,R=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return gu(R).link||R||_||f||g}(d);if(R.includes("/__/auth/callback")){const F=gu(R),ee=F.firebaseError?function ql(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(F.firebaseError)):null,Ie=null===(_=null===(f=ee?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],ze=Ie?ve(Ie):null;return ze?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:ze,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:R,postBody:null}}return null}(wr,Pt.url)),f.onEvent(Ls||Zl())});return function(wr){return Rt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Ie);const ze=R,pt=`${F.packageName.toLowerCase()}://`;As().handleOpenURL=function(){var Rt=(0,y.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(pt)&&Ie({url:Pt}),"function"==typeof ze)try{ze(Pt)}catch(wr){console.error(wr)}});return function(Pt){return Rt.apply(this,arguments)}}()}};function Zl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Ra(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function _u(g=(0,z.z$)()){return!("file:"!==Ra()&&"ionic:"!==Ra()&&"capacitor:"!==Ra()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function vu(){try{const g=self.localStorage,d=nu();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Yl(g=(0,z.z$)()){return function vf(){return(0,z.w1)()&&11===document?.documentMode}()||function Pa(g=(0,z.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,z.hl)()}catch{return Jl()&&(0,z.hl)()}return!1}function Jl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xl(){return(function jc(){return"http:"===Ra()||"https:"===Ra()}()||(0,z.ru)()||_u())&&!function yu(){return(0,z.b$)()||(0,z.UG)()}()&&vu()&&!Jl()}function Eu(){return _u()&&typeof document<"u"}function ph(){return(ph=(0,y.Z)(function*(){return!!Eu()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Jo=Te,$c="persistence";function ro(g){return ed.apply(this,arguments)}function ed(){return(ed=(0,y.Z)(function*(g){yield g._initializationPromise;const d=Iu(),f=Ct($c,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Iu(){var g;try{return(null===(g=function bn(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const So=Te;class Xo{constructor(){this.browserResolver=it(uh),this.cordovaResolver=it(Kl),this.underlyingResolver=null,this._redirectPersistence=Ke,this._completeRedirectFn=cu,this._overrideRedirectResult=sr}_initialize(d){var f=this;return(0,y.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,R){var F=this;return(0,y.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(d,f,_,R)})()}_openRedirect(d,f,_,R){var F=this;return(0,y.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(d,f,_,R)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Eu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return So(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,y.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Cg(){return ph.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function td(g){return g.unwrap()}function wu(g){return nd(g)}function nd(g){const{_tokenResponse:d}=g instanceof z.ZR?g.customData:g;if(!d)return null;if(!(g instanceof z.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Ol.credentialFromResult(g);const f=d.providerId;if(!f||f===De.PASSWORD)return null;let _;switch(f){case De.GOOGLE:_=vs;break;case De.FACEBOOK:_=Gn;break;case De.GITHUB:_=Wi;break;case De.TWITTER:_=Bo;break;default:const{oauthIdToken:R,oauthAccessToken:F,oauthTokenSecret:ee,pendingToken:Ie,nonce:ze}=d;return F||ee||R||Ie?Ie?f.startsWith("saml.")?Gr._create(f,Ie):Jn._fromParams({providerId:f,signInMethod:f,pendingToken:Ie,idToken:R,accessToken:F}):new pr(f).credential({idToken:R,accessToken:F,rawNonce:ze}):null}return g instanceof z.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Di(g,d){return d.catch(f=>{throw f instanceof z.ZR&&function mh(g,d){var f;const _=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Hc(g,function va(g,d){var f;const _=(0,z.m9)(g),R=d;return Te(d.customData.operationType,_,"argument-error"),Te(null===(f=R.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Mr._fromError(_,R)}(g,d));else if(_){const R=nd(d),F=d;R&&(F.credential=R,F.tenantId=_.tenantId||void 0,F.email=_.email||void 0,F.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const R=f.user;return{operationType:f.operationType,credential:wu(f),additionalUserInfo:bi(f),user:ar.getOrCreate(R)}})}function Tu(g,d){return _h.apply(this,arguments)}function _h(){return(_h=(0,y.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>Di(g,f.confirm(_))}})).apply(this,arguments)}class Hc{constructor(d,f){this.resolver=f,this.auth=function Ef(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Di(td(this.auth),this.resolver.resolveSignIn(d))}}class ar{constructor(d){this._delegate=d,this.multiFactor=function It(g){const d=(0,z.m9)(g);return Ki.has(d)||Ki.set(d,Ii._fromUser(d)),Ki.get(d)}(d)}static getOrCreate(d){return ar.USER_MAP.has(d)||ar.USER_MAP.set(d,new ar(d)),ar.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,y.Z)(function*(){return Di(f.auth,Oi(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,y.Z)(function*(){return Tu(_.auth,function pi(g,d,f){return Sc.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,y.Z)(function*(){return Di(f.auth,function __(g,d,f){return Pc.apply(this,arguments)}(f._delegate,d,Xo))})()}linkWithRedirect(d){var f=this;return(0,y.Z)(function*(){return yield ro(pn(f.auth)),ei(f._delegate,d,Xo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,y.Z)(function*(){return Di(f.auth,wc(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Tu(this.auth,function eh(g,d,f){return Ds.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Di(this.auth,function nh(g,d,f){return Ku.apply(this,arguments)}(this._delegate,d,Xo))}reauthenticateWithRedirect(d){var f=this;return(0,y.Z)(function*(){return yield ro(pn(f.auth)),Pi(f._delegate,d,Xo)})()}sendEmailVerification(d){return function b(g,d){return N.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,y.Z)(function*(){return yield function Ka(g,d){return ha.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function An(g,d){return Bn((0,z.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function rn(g,d){return Bn((0,z.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function qu(g,d){return th.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function kn(g,d){return nn.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Z(g,d,f){return Pe.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ar.USER_MAP=new WeakMap;const Tn=Te;let rd=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=f.options;Tn(R,"invalid-api-key",{appName:f.name}),Tn(R,"invalid-api-key",{appName:f.name});const F=typeof window<"u"?Xo:void 0;this._delegate=_.initialize({options:{persistence:zc(R,f.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(tt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ar.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function Qr(g,d,f){const _=pn(g);Te(_._canInitEmulator,_,"emulator-config-failed"),Te(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const R=!!f?.disableWarnings,F=za(d),{host:ee,port:Ie}=function $s(g){const d=za(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(_);if(R){const F=R[1];return{host:F,port:Lo(_.substr(F.length+1))}}{const[F,ee]=_.split(":");return{host:F,port:Lo(ee)}}}(d);_.config.emulator={url:`${F}//${ee}${null===Ie?"":`:${Ie}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:ee,port:Ie,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Ga(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function qi(g,d){return ws.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return ga(this._delegate,f)}confirmPasswordReset(f,_){return function Ya(g,d,f){return Eo.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var R=this;return(0,y.Z)(function*(){return Di(R._delegate,function Io(g,d,f){return Ja.apply(this,arguments)}(R._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function w(g,d){return k.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Dc(g,d){const f=po.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,y.Z)(function*(){Tn(Xl(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function $r(g,d){return Ir.apply(this,arguments)}(f._delegate,Xo);return _?Di(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function mu(g,d){pn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,R){const{next:F,error:ee,complete:Ie}=id(f,_,R);return this._delegate.onAuthStateChanged(F,ee,Ie)}onIdTokenChanged(f,_,R){const{next:F,error:ee,complete:Ie}=id(f,_,R);return this._delegate.onIdTokenChanged(F,ee,Ie)}sendSignInLinkToEmail(f,_){return function Ks(g,d,f){return Ho.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function zu(g,d,f){return vo.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,y.Z)(function*(){let R;switch(function ki(g,d){Jo(Object.values(Ti).includes(d),g,"invalid-persistence-type"),(0,z.b$)()?Jo(d!==Ti.SESSION,g,"unsupported-persistence-type"):(0,z.UG)()?Jo(d===Ti.NONE,g,"unsupported-persistence-type"):Jl()?Jo(d===Ti.NONE||d===Ti.LOCAL&&(0,z.hl)(),g,"unsupported-persistence-type"):Jo(d===Ti.NONE||vu(),g,"unsupported-persistence-type")}(_._delegate,f),f){case Ti.SESSION:R=Ke;break;case Ti.LOCAL:R=(yield it(D)._isAvailable())?D:tu;break;case Ti.NONE:R=kt;break;default:return Ve("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Di(this._delegate,function Zd(g){return Ic.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Di(this._delegate,Qa(this._delegate,f))}signInWithCustomToken(f){return Di(this._delegate,function Hu(g,d){return pa.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Di(this._delegate,function Cl(g,d,f){return Qa((0,z.m9)(g),ts.credential(d,f)).catch(function(){var _=(0,y.Z)(function*(R){throw"auth/password-does-not-meet-requirements"===R.code&&Ws(g),R});return function(R){return _.apply(this,arguments)}}())}(this._delegate,f,_))}signInWithEmailLink(f,_){return Di(this._delegate,function Xa(g,d,f){return eu.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Tu(this._delegate,function Ia(g,d,f){return au.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,y.Z)(function*(){return Tn(Xl(),_._delegate,"operation-not-supported-in-this-environment"),Di(_._delegate,function fg(g,d,f){return uu.apply(this,arguments)}(_._delegate,f,Xo))})()}signInWithRedirect(f){var _=this;return(0,y.Z)(function*(){return Tn(Xl(),_._delegate,"operation-not-supported-in-this-environment"),yield ro(_._delegate),er(_._delegate,f,Xo)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Tc(g,d){return Gu.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Ti,g})();function id(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const R=_;return{next:ee=>R(ee&&ar.getOrCreate(ee)),error:d,complete:f}}function zc(g,d){const f=function gh(g,d){const f=Iu();if(!f)return[];const _=Ct($c,g,d);switch(f.getItem(_)){case Ti.NONE:return[kt];case Ti.LOCAL:return[D,Ke];case Ti.SESSION:return[Ke];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(D)&&f.push(D),typeof window<"u")for(const _ of[tu,Ke])f.includes(_)||f.push(_);return f.includes(kt)||f.push(kt),f}class ea{constructor(){this.providerId="phone",this._delegate=new Ol(td(ne.Z.auth()))}static credential(d,f){return Ol.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}ea.PHONE_SIGN_IN_METHOD=Ol.PHONE_SIGN_IN_METHOD,ea.PROVIDER_ID=Ol.PROVIDER_ID;const sd=Te;class yh{constructor(d,f,_=ne.Z.app()){var R;sd(null===(R=_.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Nl(_.auth(),d,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function oc(g){g.INTERNAL.registerComponent(new me.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new rd(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ts,FacebookAuthProvider:Gn,GithubAuthProvider:Wi,GoogleAuthProvider:vs,OAuthProvider:pr,SAMLAuthProvider:go,PhoneAuthProvider:ea,PhoneMultiFactorGenerator:$l,RecaptchaVerifier:yh,TwitterAuthProvider:Bo,Auth:rd,AuthCredential:gs,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.2")}(ne.Z)},5861:(_t,Ne,O)=>{function y(z,fe,le,ae,me,Le,De){try{var W=z[Le](De),J=W.value}catch(he){return void le(he)}W.done?fe(J):Promise.resolve(J).then(ae,me)}function ne(z){return function(){var fe=this,le=arguments;return new Promise(function(ae,me){var Le=z.apply(fe,le);function De(J){y(Le,ae,me,De,W,"next",J)}function W(J){y(Le,ae,me,De,W,"throw",J)}De(void 0)})}}O.d(Ne,{Z:()=>ne})},7582:(_t,Ne,O)=>{function fe(ie,ue){var Ce={};for(var Ee in ie)Object.prototype.hasOwnProperty.call(ie,Ee)&&ue.indexOf(Ee)<0&&(Ce[Ee]=ie[Ee]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Ee=Object.getOwnPropertySymbols(ie);Ae<Ee.length;Ae++)ue.indexOf(Ee[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ie,Ee[Ae])&&(Ce[Ee[Ae]]=ie[Ee[Ae]])}return Ce}function he(ie,ue,Ce,Ee){return new(Ce||(Ce=Promise))(function(Fe,ot){function Je(Zt){try{dt(Ee.next(Zt))}catch(jt){ot(jt)}}function Rn(Zt){try{dt(Ee.throw(Zt))}catch(jt){ot(jt)}}function dt(Zt){Zt.done?Fe(Zt.value):function Ae(Fe){return Fe instanceof Ce?Fe:new Ce(function(ot){ot(Fe)})}(Zt.value).then(Je,Rn)}dt((Ee=Ee.apply(ie,ue||[])).next())})}function pe(ie){return this instanceof pe?(this.v=ie,this):new pe(ie)}function Ve(ie,ue,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Ee=Ce.apply(ie,ue||[]),Fe=[];return Ae={},ot("next"),ot("throw"),ot("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function ot(yn){Ee[yn]&&(Ae[yn]=function(Dn){return new Promise(function(fn,$t){Fe.push([yn,Dn,fn,$t])>1||Je(yn,Dn)})})}function Je(yn,Dn){try{!function Rn(yn){yn.value instanceof pe?Promise.resolve(yn.value.v).then(dt,Zt):jt(Fe[0][2],yn)}(Ee[yn](Dn))}catch(fn){jt(Fe[0][3],fn)}}function dt(yn){Je("next",yn)}function Zt(yn){Je("throw",yn)}function jt(yn,Dn){yn(Dn),Fe.shift(),Fe.length&&Je(Fe[0][0],Fe[0][1])}}function He(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,ue=ie[Symbol.asyncIterator];return ue?ue.call(ie):(ie=function qe(ie){var ue="function"==typeof Symbol&&Symbol.iterator,Ce=ue&&ie[ue],Ee=0;if(Ce)return Ce.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Ee>=ie.length&&(ie=void 0),{value:ie&&ie[Ee++],done:!ie}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),Ce={},Ee("next"),Ee("throw"),Ee("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Ee(Fe){Ce[Fe]=ie[Fe]&&function(ot){return new Promise(function(Je,Rn){!function Ae(Fe,ot,Je,Rn){Promise.resolve(Rn).then(function(dt){Fe({value:dt,done:Je})},ot)}(Je,Rn,(ot=ie[Fe](ot)).done,ot.value)})}}}O.d(Ne,{FC:()=>Ve,KL:()=>He,_T:()=>fe,mG:()=>he,qq:()=>pe}),"function"==typeof SuppressedError&&SuppressedError}},_t=>{_t(_t.s=1478)}]);