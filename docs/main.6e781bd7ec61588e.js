"use strict";(self.webpackChunkng_football=self.webpackChunkng_football||[]).push([[179],{9058:(vt,Pe,O)=>{O.d(Pe,{BH:()=>ve,DV:()=>zn,Dv:()=>Ni,G6:()=>Be,GJ:()=>_n,L:()=>De,LL:()=>Fe,Pz:()=>Ve,Sg:()=>He,UG:()=>Te,UI:()=>Vn,US:()=>ae,Wj:()=>Gt,Wl:()=>dt,Yr:()=>lt,ZB:()=>he,ZR:()=>Se,aH:()=>ge,b$:()=>St,cI:()=>Cn,dS:()=>ar,eu:()=>ue,g5:()=>z,gK:()=>wt,gQ:()=>Vt,h$:()=>Oe,hl:()=>ne,hu:()=>X,jU:()=>Nt,lb:()=>Zt,m9:()=>mi,ne:()=>Un,p$:()=>J,pd:()=>zt,r3:()=>it,ru:()=>At,tV:()=>W,uI:()=>ie,ug:()=>ms,vZ:()=>Pn,w1:()=>rn,w9:()=>fn,xO:()=>Br,xb:()=>dn,z$:()=>We,zd:()=>Rt});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(re,j){if(!re)throw z(j)},z=function(re){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+re)},fe=function(re){const j=[];let $=0;for(let B=0;B<re.length;B++){let H=re.charCodeAt(B);H<128?j[$++]=H:H<2048?(j[$++]=H>>6|192,j[$++]=63&H|128):55296==(64512&H)&&B+1<re.length&&56320==(64512&re.charCodeAt(B+1))?(H=65536+((1023&H)<<10)+(1023&re.charCodeAt(++B)),j[$++]=H>>18|240,j[$++]=H>>12&63|128,j[$++]=H>>6&63|128,j[$++]=63&H|128):(j[$++]=H>>12|224,j[$++]=H>>6&63|128,j[$++]=63&H|128)}return j},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,j){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let H=0;H<re.length;H+=3){const me=re[H],$e=H+1<re.length,st=$e?re[H+1]:0,Ot=H+2<re.length,Ut=Ot?re[H+2]:0;let Yn=(15&st)<<2|Ut>>6,ye=63&Ut;Ot||(ye=64,$e||(Yn=64)),B.push($[me>>2],$[(3&me)<<4|st>>4],$[Yn],$[ye])}return B.join("")},encodeString(re,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(re):this.encodeByteArray(fe(re),j)},decodeString(re,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(re):function(re){const j=[];let $=0,B=0;for(;$<re.length;){const H=re[$++];if(H<128)j[B++]=String.fromCharCode(H);else if(H>191&&H<224){const me=re[$++];j[B++]=String.fromCharCode((31&H)<<6|63&me)}else if(H>239&&H<365){const Ot=((7&H)<<18|(63&re[$++])<<12|(63&re[$++])<<6|63&re[$++])-65536;j[B++]=String.fromCharCode(55296+(Ot>>10)),j[B++]=String.fromCharCode(56320+(1023&Ot))}else{const me=re[$++],$e=re[$++];j[B++]=String.fromCharCode((15&H)<<12|(63&me)<<6|63&$e)}}return j.join("")}(this.decodeStringToByteArray(re,j))},decodeStringToByteArray(re,j){this.init_();const $=j?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let H=0;H<re.length;){const me=$[re.charAt(H++)],st=H<re.length?$[re.charAt(H)]:0;++H;const Ut=H<re.length?$[re.charAt(H)]:64;++H;const Bt=H<re.length?$[re.charAt(H)]:64;if(++H,null==me||null==st||null==Ut||null==Bt)throw new pe;B.push(me<<2|st>>4),64!==Ut&&(B.push(st<<4&240|Ut>>2),64!==Bt&&B.push(Ut<<6&192|Bt))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(re){const j=fe(re);return ae.encodeByteArray(j,!0)},De=function(re){return Oe(re).replace(/\./g,"")},W=function(re){try{return ae.decodeString(re,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function J(re){return he(void 0,re)}function he(re,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return j}for(const $ in j)!j.hasOwnProperty($)||!Ue($)||(re[$]=he(re[$],j[$]));return re}function Ue(re){return"__proto__"!==re}const Xe=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=re&&W(re[1]);return j&&JSON.parse(j)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},ge=()=>{var re;return null===(re=Xe())||void 0===re?void 0:re.config},Ve=re=>{var j;return null===(j=Xe())||void 0===j?void 0:j[`_${re}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,$)=>{this.resolve=j,this.reject=$})}wrapCallback(j){return($,B)=>{$?this.reject($):this.resolve(B),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j($):j($,B))}}}function He(re,j){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=j||"demo-project",H=re.iat||0,me=re.sub||re.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:H,exp:H+3600,auth_time:H,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},re);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify($e)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Te(){var re;const j=null===(re=Xe())||void 0===re?void 0:re.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Nt(){return"object"==typeof self&&self.self===self}function At(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function St(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rn(){const re=We();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function lt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Be(){return!Te()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((re,j)=>{try{let $=!0;const B="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(B);H.onsuccess=()=>{H.result.close(),$||self.indexedDB.deleteDatabase(B),re(!0)},H.onupgradeneeded=()=>{$=!1},H.onerror=()=>{var me;j((null===(me=H.error)||void 0===me?void 0:me.message)||"")}}catch($){j($)}})}class Se extends Error{constructor(j,$,B){super($),this.code=j,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,$,B){this.service=j,this.serviceName=$,this.errors=B}create(j,...$){const B=$[0]||{},H=`${this.service}/${j}`,me=this.errors[j],$e=me?function ut(re,j){return re.replace(Je,($,B)=>{const H=j[B];return null!=H?String(H):`<${B}?>`})}(me,B):"Error";return new Se(H,`${this.serviceName}: ${$e} (${H}).`,B)}}const Je=/\{\$([^}]+)}/g;function Cn(re){return JSON.parse(re)}function dt(re){return JSON.stringify(re)}const Qt=function(re){let j={},$={},B={},H="";try{const me=re.split(".");j=Cn(W(me[0])||""),$=Cn(W(me[1])||""),H=me[2],B=$.d||{},delete $.d}catch{}return{header:j,claims:$,data:B,signature:H}},fn=function(re){const $=Qt(re).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},_n=function(re){const j=Qt(re).claims;return"object"==typeof j&&!0===j.admin};function it(re,j){return Object.prototype.hasOwnProperty.call(re,j)}function zn(re,j){if(Object.prototype.hasOwnProperty.call(re,j))return re[j]}function dn(re){for(const j in re)if(Object.prototype.hasOwnProperty.call(re,j))return!1;return!0}function Vn(re,j,$){const B={};for(const H in re)Object.prototype.hasOwnProperty.call(re,H)&&(B[H]=j.call($,re[H],H,re));return B}function Pn(re,j){if(re===j)return!0;const $=Object.keys(re),B=Object.keys(j);for(const H of $){if(!B.includes(H))return!1;const me=re[H],$e=j[H];if(oi(me)&&oi($e)){if(!Pn(me,$e))return!1}else if(me!==$e)return!1}for(const H of B)if(!$.includes(H))return!1;return!0}function oi(re){return null!==re&&"object"==typeof re}function Br(re){const j=[];for(const[$,B]of Object.entries(re))Array.isArray(B)?B.forEach(H=>{j.push(encodeURIComponent($)+"="+encodeURIComponent(H))}):j.push(encodeURIComponent($)+"="+encodeURIComponent(B));return j.length?"&"+j.join("&"):""}function Rt(re){const j={};return re.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[H,me]=B.split("=");j[decodeURIComponent(H)]=decodeURIComponent(me)}}),j}function zt(re){const j=re.indexOf("?");if(!j)return"";const $=re.indexOf("#",j);return re.substring(j,$>0?$:void 0)}class Vt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,$){$||($=0);const B=this.W_;if("string"==typeof j)for(let Bt=0;Bt<16;Bt++)B[Bt]=j.charCodeAt($)<<24|j.charCodeAt($+1)<<16|j.charCodeAt($+2)<<8|j.charCodeAt($+3),$+=4;else for(let Bt=0;Bt<16;Bt++)B[Bt]=j[$]<<24|j[$+1]<<16|j[$+2]<<8|j[$+3],$+=4;for(let Bt=16;Bt<80;Bt++){const Yn=B[Bt-3]^B[Bt-8]^B[Bt-14]^B[Bt-16];B[Bt]=4294967295&(Yn<<1|Yn>>>31)}let Ut,bt,H=this.chain_[0],me=this.chain_[1],$e=this.chain_[2],st=this.chain_[3],Ot=this.chain_[4];for(let Bt=0;Bt<80;Bt++){Bt<40?Bt<20?(Ut=st^me&($e^st),bt=1518500249):(Ut=me^$e^st,bt=1859775393):Bt<60?(Ut=me&$e|st&(me|$e),bt=2400959708):(Ut=me^$e^st,bt=3395469782);const Yn=(H<<5|H>>>27)+Ut+Ot+bt+B[Bt]&4294967295;Ot=st,st=$e,$e=4294967295&(me<<30|me>>>2),me=H,H=Yn}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+me&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+st&4294967295,this.chain_[4]=this.chain_[4]+Ot&4294967295}update(j,$){if(null==j)return;void 0===$&&($=j.length);const B=$-this.blockSize;let H=0;const me=this.buf_;let $e=this.inbuf_;for(;H<$;){if(0===$e)for(;H<=B;)this.compress_(j,H),H+=this.blockSize;if("string"==typeof j){for(;H<$;)if(me[$e]=j.charCodeAt(H),++$e,++H,$e===this.blockSize){this.compress_(me),$e=0;break}}else for(;H<$;)if(me[$e]=j[H],++$e,++H,$e===this.blockSize){this.compress_(me),$e=0;break}}this.inbuf_=$e,this.total_+=$}digest(){const j=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&$,$/=256;this.compress_(this.buf_);let B=0;for(let H=0;H<5;H++)for(let me=24;me>=0;me-=8)j[B]=this.chain_[H]>>me&255,++B;return j}}function Un(re,j){const $=new Kr(re,j);return $.subscribe.bind($)}class Kr{constructor(j,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{j(this)}).catch(B=>{this.error(B)})}next(j){this.forEachObserver($=>{$.next(j)})}error(j){this.forEachObserver($=>{$.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,$,B){let H;if(void 0===j&&void 0===$&&void 0===B)throw new Error("Missing Observer.");H=function pn(re,j){if("object"!=typeof re||null===re)return!1;for(const $ of j)if($ in re&&"function"==typeof re[$])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:$,complete:B},void 0===H.next&&(H.next=Qn),void 0===H.error&&(H.error=Qn),void 0===H.complete&&(H.complete=Qn);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),me}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,j)}sendOne(j,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{$(this.observers[j])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qn(){}const Ni=function(re,j,$,B){let H;if(B<j?H="at least "+j:B>$&&(H=0===$?"none":"no more than "+$),H)throw new Error(re+" failed: Was called with "+B+(1===B?" argument.":" arguments.")+" Expects "+H+".")};function wt(re,j){return`${re} failed: ${j} argument `}function Gt(re,j,$,B){if((!B||$)&&"function"!=typeof $)throw new Error(wt(re,j)+"must be a valid function.")}function Zt(re,j,$,B){if((!B||$)&&("object"!=typeof $||null===$))throw new Error(wt(re,j)+"must be a valid context object.")}const ar=function(re){const j=[];let $=0;for(let B=0;B<re.length;B++){let H=re.charCodeAt(B);if(H>=55296&&H<=56319){const me=H-55296;B++,X(B<re.length,"Surrogate pair missing trail surrogate."),H=65536+(me<<10)+(re.charCodeAt(B)-56320)}H<128?j[$++]=H:H<2048?(j[$++]=H>>6|192,j[$++]=63&H|128):H<65536?(j[$++]=H>>12|224,j[$++]=H>>6&63|128,j[$++]=63&H|128):(j[$++]=H>>18|240,j[$++]=H>>12&63|128,j[$++]=H>>6&63|128,j[$++]=63&H|128)}return j},ms=function(re){let j=0;for(let $=0;$<re.length;$++){const B=re.charCodeAt($);B<128?j++:B<2048?j+=2:B>=55296&&B<=56319?(j+=4,$++):j+=3}return j};function mi(re){return re&&re._delegate?re._delegate:re}},1478:(vt,Pe,O)=>{var y=O(6593),X=O(7045),z=O(5879);const fe=[{path:"",loadChildren:()=>O.e(814).then(O.bind(O,1850)).then(i=>i.LeagueModule)},{path:"**",redirectTo:""}];let le=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=z.oAB({type:i});static#n=this.\u0275inj=z.cJS({imports:[X.Bz.forRoot(fe,{useHash:!0}),X.Bz]})}return i})(),ae=(()=>{class i{constructor(){this.title="ng-football"}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=z.Xpm({type:i,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(s,u){1&s&&(z.TgZ(0,"div",0),z._UZ(1,"router-outlet"),z.qZA())},dependencies:[X.lC],styles:["p[_ngcontent-%COMP%]{font-family:Lato}"]})}return i})();var pe=O(9862),Oe=O(7217),De=O(6814),W=O(8326),J=O(7213),he=O(6321),Ue=O(5592),je=O(2459),tt=O(2096),qe=O(7921),ot=O(9360),Xe=O(8251);function Ct(){return(0,ot.e)((i,e)=>{let n,s=!1;i.subscribe((0,Xe.x)(e,u=>{const l=n;n=u,s&&e.next([l,u]),s=!0}))})}var Ye,mt=O(7398),ge=O(6699),Ve=O(3997),ve=O(2181),We=(O(999),O(3106)),ie=O(5861),Te=O(534),Nt=O(4537),At=O(7879),St=O(9058),Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rn={},lt=lt||{},Be=Yt||self;function ne(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ue(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ee="closure_uid_"+(1e9*Math.random()>>>0),Se=0;function Fe(i,e,n){return i.call.apply(i.bind,arguments)}function ut(i,e,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Je(i,e,n){return(Je=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fe:ut).apply(null,arguments)}function Cn(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function dt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(s,u,l){for(var p=Array(arguments.length-2),T=2;T<arguments.length;T++)p[T-2]=arguments[T];return e.prototype[u].apply(s,p)}}function Qt(){this.s=this.s,this.o=this.o}Qt.prototype.s=!1,Qt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ae(i){Object.prototype.hasOwnProperty.call(i,Ee)&&i[Ee]||(i[Ee]=++Se)}(this)},Qt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function fn(i){const e=i.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=i[s];return n}return[]}function _n(i,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(ne(s)){const u=i.length||0,l=s.length||0;i.length=u+l;for(let p=0;p<l;p++)i[u+p]=s[p]}else i.push(s)}}function it(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var zn=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};Be.addEventListener("test",n,e),Be.removeEventListener("test",n,e)}catch{}return i}();function dn(i){return/^[\s\xa0]*$/.test(i)}function Vn(){var i=Be.navigator;return i&&(i=i.userAgent)?i:""}function Pn(i){return-1!=Vn().indexOf(i)}function oi(i){return oi[" "](i),i}oi[" "]=function(){};var pn,i,Br=Pn("Opera"),Rt=Pn("Trident")||Pn("MSIE"),zt=Pn("Edge"),Vt=zt||Rt,Un=Pn("Gecko")&&!(-1!=Vn().toLowerCase().indexOf("webkit")&&!Pn("Edge"))&&!(Pn("Trident")||Pn("MSIE"))&&!Pn("Edge"),Kr=-1!=Vn().toLowerCase().indexOf("webkit")&&!Pn("Edge");function Sr(){var i=Be.document;return i?i.documentMode:void 0}e:{var Qn="",Ni=(i=Vn(),Un?/rv:([^\);]+)(\)|;)/.exec(i):zt?/Edge\/([\d\.]+)/.exec(i):Rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Kr?/WebKit\/(\S+)/.exec(i):Br?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ni&&(Qn=Ni?Ni[1]:""),Rt){var wt=Sr();if(null!=wt&&wt>parseFloat(Qn)){pn=String(wt);break e}}pn=Qn}var Zt=Be.document&&Rt&&(Sr()||parseInt(pn,10))||void 0;function ar(i,e){if(it.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Un){e:{try{oi(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:ms[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ar.$.h.call(this)}}dt(ar,it);var ms={2:"touch",3:"pen",4:"mouse"};ar.prototype.h=function(){ar.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var gr="closure_listenable_"+(1e6*Math.random()|0),Zr=0;function er(i,e,n,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=u,this.key=++Zr,this.fa=this.ia=!1}function Nr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function pi(i,e,n){for(const s in i)e.call(n,i[s],s,i)}function Qr(i){const e={};for(const n in i)e[n]=i[n];return e}const Oi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mi(i,e){let n,s;for(let u=1;u<arguments.length;u++){for(n in s=arguments[u],s)i[n]=s[n];for(let l=0;l<Oi.length;l++)n=Oi[l],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function re(i){this.src=i,this.g={},this.h=0}function j(i,e){var n=e.type;if(n in i.g){var l,s=i.g[n],u=mn(s,e);(l=0<=u)&&Array.prototype.splice.call(s,u,1),l&&(Nr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function $(i,e,n,s){for(var u=0;u<i.length;++u){var l=i[u];if(!l.fa&&l.listener==e&&l.capture==!!n&&l.la==s)return u}return-1}re.prototype.add=function(i,e,n,s,u){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var p=$(i,e,s,u);return-1<p?(e=i[p],n||(e.ia=!1)):((e=new er(e,this.src,l,!!s,u)).ia=n,i.push(e)),e};var B="closure_lm_"+(1e6*Math.random()|0),H={};function me(i,e,n,s,u){if(s&&s.once)return Ot(i,e,n,s,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)me(i,e[l],n,s,u);return null}return n=ce(n),i&&i[gr]?i.O(e,n,ue(s)?!!s.capture:!!s,u):$e(i,e,n,!1,s,u)}function $e(i,e,n,s,u,l){if(!e)throw Error("Invalid event type");var p=ue(u)?!!u.capture:!!u,T=ye(i);if(T||(i[B]=T=new re(i)),(n=T.add(e,n,s,p,l)).proxy)return n;if(s=function st(){const e=Yn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)zn||(u=p),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(Bt(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return n}function Ot(i,e,n,s,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ot(i,e[l],n,s,u);return null}return n=ce(n),i&&i[gr]?i.P(e,n,ue(s)?!!s.capture:!!s,u):$e(i,e,n,!0,s,u)}function Ut(i,e,n,s,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Ut(i,e[l],n,s,u);else s=ue(s)?!!s.capture:!!s,n=ce(n),i&&i[gr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=$(l=i.g[e],n,s,u))&&(Nr(l[n]),Array.prototype.splice.call(l,n,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=ye(i))&&(e=i.g[e.toString()],i=-1,e&&(i=$(e,n,s,u)),(n=-1<i?e[i]:null)&&bt(n))}function bt(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[gr])j(e.i,i);else{var n=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(n,s,i.capture):e.detachEvent?e.detachEvent(Bt(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=ye(e))?(j(n,i),0==n.h&&(n.src=null,e[B]=null)):Nr(i)}}}function Bt(i){return i in H?H[i]:H[i]="on"+i}function Yn(i,e){if(i.fa)i=!0;else{e=new ar(e,this);var n=i.listener,s=i.la||i.src;i.ia&&bt(i),i=n.call(s,e)}return i}function ye(i){return(i=i[B])instanceof re?i:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(i){return"function"==typeof i?i:(i[te]||(i[te]=function(e){return i.handleEvent(e)}),i[te])}function Q(){Qt.call(this),this.i=new re(this),this.S=this,this.J=null}function K(i,e){var n,s=i.J;if(s)for(n=[];s;s=s.J)n.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new it(e,i);else if(e instanceof it)e.target=e.target||i;else{var u=e;mi(e=new it(s,i),u)}if(u=!0,n)for(var l=n.length-1;0<=l;l--){var p=e.g=n[l];u=_e(p,s,!0,e)&&u}if(u=_e(p=e.g=i,s,!0,e)&&u,u=_e(p,s,!1,e)&&u,n)for(l=0;l<n.length;l++)u=_e(p=e.g=n[l],s,!1,e)&&u}function _e(i,e,n,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.fa&&p.capture==n){var T=p.listener,S=p.la||p.src;p.ia&&j(i.i,p),u=!1!==T.call(S,s)&&u}}return u&&!s.defaultPrevented}dt(Q,Qt),Q.prototype[gr]=!0,Q.prototype.removeEventListener=function(i,e,n,s){Ut(this,i,e,n,s)},Q.prototype.N=function(){if(Q.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],s=0;s<n.length;s++)Nr(n[s]);delete i.g[e],i.h--}}this.J=null},Q.prototype.O=function(i,e,n,s){return this.i.add(String(i),e,!1,n,s)},Q.prototype.P=function(i,e,n,s){return this.i.add(String(i),e,!0,n,s)};var Re=Be.JSON.stringify;function Ze(){var i=xn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var wn=new class ht{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new en,i=>i.reset());class en{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function tr(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function br(i){Be.setTimeout(()=>{throw i},0)}let Or,Mn=!1,xn=new class jt{constructor(){this.h=this.g=null}add(e,n){const s=wn.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}},ki=()=>{const i=Be.Promise.resolve(void 0);Or=()=>{i.then(Gs)}};var Gs=()=>{for(var i;i=Ze();){try{i.h.call(i.g)}catch(n){br(n)}var e=wn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Mn=!1};function mr(i,e){Q.call(this),this.h=i||1,this.g=e||Be,this.j=Je(this.qb,this),this.l=Date.now()}function hn(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ci(i,e,n){if("function"==typeof i)n&&(i=Je(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Je(i.handleEvent,i)}return 2147483647<Number(e)?-1:Be.setTimeout(i,e||0)}function Ji(i){i.g=Ci(()=>{i.g=null,i.i&&(i.i=!1,Ji(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}dt(mr,Q),(Ye=mr.prototype).ga=!1,Ye.T=null,Ye.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),K(this,"tick"),this.ga&&(hn(this),this.start()))}},Ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.N=function(){mr.$.N.call(this),hn(this),delete this.g};class Uo extends Qt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ji(this)}N(){super.N(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(i){Qt.call(this),this.h=i,this.g={}}dt(_s,Qt);var aa=[];function Bo(i,e,n,s){Array.isArray(n)||(n&&(aa[0]=n.toString()),n=aa);for(var u=0;u<n.length;u++){var l=me(e,n[u],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function kr(i){pi(i.g,function(e,n){this.g.hasOwnProperty(n)&&bt(e)},i),i.g={}}function _i(){this.g=!0}function Li(i,e,n,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $o(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<u.length;p++)u[p]=""}}}return Re(n)}catch{return e}}(i,n)+(s?" "+s:"")})}_s.prototype.N=function(){_s.$.N.call(this),kr(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_i.prototype.Ea=function(){this.g=!1},_i.prototype.info=function(){};var Fi={},ja=null;function yi(){return ja=ja||new Q}function ua(i){it.call(this,Fi.Ta,i)}function vo(i){const e=yi();K(e,new ua(e))}function Nu(i,e){it.call(this,Fi.STAT_EVENT,i),this.stat=e}function Yr(i){const e=yi();K(e,new Nu(e,i))}function ca(i,e){it.call(this,Fi.Ua,i),this.size=e}function qs(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){i()},e)}Fi.Ta="serverreachability",dt(ua,it),Fi.STAT_EVENT="statevent",dt(Nu,it),Fi.Ua="timingevent",dt(ca,it);var Ho={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$a={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xi(){}function an(){}Xi.prototype.h=null;var Lr,Dr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rr(){it.call(this,"d")}function Vi(){it.call(this,"c")}function Ks(){}function es(i,e,n,s){this.l=i,this.j=e,this.m=n,this.W=s||1,this.U=new _s(this),this.P=Ms,this.V=new mr(i=Vt?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}dt(Rr,it),dt(Vi,it),dt(Ks,Xi),Ks.prototype.g=function(){return new XMLHttpRequest},Ks.prototype.i=function(){return{}},Lr=new Ks;var Ms=45e3,Zs={},Gn={};function yt(i,e,n){i.L=1,i.A=Si(Fr(e)),i.u=n,i.S=!0,$t(i,null)}function $t(i,e){i.G=Date.now(),dr(i),i.B=Fr(i.A);var n=i.B,s=i.W;Array.isArray(s)||(s=[String(s)]),$r(n.i,"t",s),i.o=0,n=i.l.J,i.h=new Ai,i.g=ma(i.l,n?e:null,!i.u),0<i.O&&(i.M=new Uo(Je(i.Pa,i,i.g),i.O)),Bo(i.U,i.g,"readystatechange",i.nb),e=i.I?Qr(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),vo(),function jo(i,e,n,s,u,l){i.info(function(){if(i.g)if(l)for(var p="",T=l.split("&"),S=0;S<T.length;S++){var x=T[S].split("=");if(1<x.length){var L=x[0];x=x[1];var G=L.split("_");p=2<=G.length&&"type"==G[1]?p+(L+"=")+x+"&":p+(L+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+n+"\n"+p})}(i.j,i.v,i.B,i.m,i.W,i.u)}function Bn(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Jr(i,e,n){let u,s=!0;for(;!i.J&&i.o<n.length;){if(u=Qs(i,n),u==Gn){4==e&&(i.s=4,Yr(14),s=!1),Li(i.j,i.m,null,"[Incomplete Response]");break}if(u==Zs){i.s=4,Yr(15),Li(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}Li(i.j,i.m,u,null),qt(i,u)}Bn(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,Yr(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yc(e),e.M=!0,Yr(11))):(Li(i.j,i.m,n,"[Invalid Chunked Response]"),Xr(i),vi(i))}function Qs(i,e){var n=i.o,s=e.indexOf("\n",n);return-1==s?Gn:(n=Number(e.substring(n,s)),isNaN(n)?Zs:(s+=1)+n>e.length?Gn:(e=e.slice(s,s+n),i.o=s+n,e))}function dr(i){i.Y=Date.now()+i.P,ys(i,i.P)}function ys(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=qs(Je(i.lb,i),e)}function jn(i){i.C&&(Be.clearTimeout(i.C),i.C=null)}function vi(i){0==i.l.H||i.J||Xa(i.l,i)}function Xr(i){jn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,hn(i.V),kr(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function qt(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||ku(n.i,i)))if(!i.K&&ku(n.i,i)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Ja(n),eo(n)}ga(n),Yr(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=qs(Je(n.ib,n),6e3));if(1>=Ou(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else to(n,11)}else if((i.K||n.g==i)&&Ja(n),!dn(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let x=u[e];if(n.V=x[0],x=x[1],2==n.H)if("c"==x[0]){n.K=x[1],n.pa=x[2];const L=x[3];null!=L&&(n.ra=L,n.l.info("VER="+n.ra));const G=x[4];null!=G&&(n.Ga=G,n.l.info("SVER="+n.Ga));const oe=x[5];null!=oe&&"number"==typeof oe&&0<oe&&(n.L=s=1.5*oe,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const be=i.g;if(be){const rt=be.g?be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rt){var l=s.i;l.g||-1==rt.indexOf("spdy")&&-1==rt.indexOf("quic")&&-1==rt.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(ts(l,l.h),l.h=null))}if(s.F){const gt=be.g?be.g.getResponseHeader("X-HTTP-Session-Id"):null;gt&&(s.Da=gt,An(s.I,s.F,gt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var p=i;if((s=n).wa=vc(s,s.J?s.pa:null,s.Y),p.K){zr(s.i,p);var T=p,S=s.L;S&&T.setTimeout(S),T.C&&(jn(T),dr(T)),s.g=p}else pa(s);0<n.j.length&&ks(n)}else"stop"!=x[0]&&"close"!=x[0]||to(n,7);else 3==n.H&&("stop"==x[0]||"close"==x[0]?"stop"==x[0]?to(n,7):So(n):"noop"!=x[0]&&n.h&&n.h.Aa(x),n.A=0)}vo()}catch{}}function ai(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ne(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function vs(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ne(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const s in i)e[n++]=s;return e}}}(i),s=function Io(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ne(i)){for(var e=[],n=i.length,s=0;s<n;s++)e.push(i[s]);return e}for(s in e=[],n=0,i)e[n++]=i[s];return e}(i),u=s.length,l=0;l<u;l++)e.call(void 0,s[l],n&&n[l],i)}(Ye=es.prototype).setTimeout=function(i){this.P=i},Ye.nb=function(i){i=i.target;const e=this.M;e&&3==nr(i)?e.l():this.Pa(i)},Ye.Pa=function(i){try{if(i==this.g)e:{const L=nr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>L)&&(3!=L||Vt||this.g&&(this.h.h||this.g.ja()||Qa(this.g)))){this.J||4!=L||7==e||vo(),jn(this);var n=this.g.da();this.ca=n;t:if(Bn(this)){var s=Qa(this.g);i="";var u=s.length,l=4==nr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),vi(this);var p="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:l&&e==u-1});s.length=0,this.h.g+=i,this.o=0,p=this.h.g}else p=this.g.ja();if(this.i=200==n,function Ws(i,e,n,s,u,l,p){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+l+" "+p})}(this.j,this.v,this.B,this.m,this.W,L,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var T,S=this.g;if((T=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dn(T)){var x=T;break t}}x=null}if(!(n=x)){this.i=!1,this.s=3,Yr(12),Xr(this),vi(this);break e}Li(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qt(this,n)}this.S?(Jr(this,L,p),Vt&&this.i&&3==L&&(Bo(this.U,this.V,"tick",this.mb),this.V.start())):(Li(this.j,this.m,p,null),qt(this,p)),4==L&&Xr(this),this.i&&!this.J&&(4==L?Xa(this.l,this):(this.i=!1,dr(this)))}else(function Ya(i){const e={};i=(i.g&&2<=nr(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(dn(i[s]))continue;var n=tr(i[s]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const l=e[u]||[];e[u]=l,l.push(n)}!function gi(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(s){return s.join(", ")})})(this.g),400==n&&0<p.indexOf("Unknown SID")?(this.s=3,Yr(12)):(this.s=0,Yr(13)),Xr(this),vi(this)}}}catch{}},Ye.mb=function(){if(this.g){var i=nr(this.g),e=this.g.ja();this.o<e.length&&(jn(this),Jr(this,i,e),this.i&&4!=i&&dr(this))}},Ye.cancel=function(){this.J=!0,Xr(this)},Ye.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function yo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(vo(),Yr(17)),Xr(this),this.s=2,vi(this)):ys(this,this.Y-i)};var ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _r(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof _r){this.h=i.h,Ui(this,i.j),this.s=i.s,this.g=i.g,zo(this,i.m),this.l=i.l;var e=i.i,n=new Wi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Bi(this,n),this.o=i.o}else i&&(e=String(i).match(ur))?(this.h=!1,Ui(this,e[1]||"",!0),this.s=Es(e[2]||""),this.g=Es(e[3]||"",!0),zo(this,e[4]),this.l=Es(e[5]||"",!0),Bi(this,e[6]||"",!0),this.o=Es(e[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}function Fr(i){return new _r(i)}function Ui(i,e,n){i.j=n?Es(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function zo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Bi(i,e,n){e instanceof Wi?(i.i=e,function wo(i,e){e&&!i.j&&(Nn(i),i.i=null,i.g.forEach(function(n,s){var u=s.toLowerCase();s!=u&&(Js(this,s),$r(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=tn(e,Ys)),i.i=new Wi(e,i.h))}function An(i,e,n){i.i.set(e,n)}function Si(i){return An(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Es(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function tn(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,gc),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function gc(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}_r.prototype.toString=function(){var i=[],e=this.j;e&&i.push(tn(e,Is,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(tn(e,Is,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(tn(n,"/"==n.charAt(0)?ws:la,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",tn(n,da)),i.join("")};var Is=/[#\/\?@]/g,la=/[#\?:]/g,ws=/[#\?]/g,Ys=/[#\?@]/g,da=/#/g;function Wi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Nn(i){i.g||(i.g=new Map,i.h=0,i.i&&function xs(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),u=null;if(0<=s){var l=i[n].substring(0,s);u=i[n].substring(s+1)}else l=i[n];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Js(i,e){Nn(i),e=bi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ln(i,e){return Nn(i),e=bi(i,e),i.g.has(e)}function $r(i,e,n){Js(i,e),0<n.length&&(i.i=null,i.g.set(bi(i,e),fn(n)),i.h+=n.length)}function bi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Hr(i){this.l=i||ha,i=Be.PerformanceNavigationTiming?0<(i=Be.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Be.g&&Be.g.Ka&&Be.g.Ka()&&Be.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Wi.prototype).add=function(i,e){Nn(this),this.i=null,i=bi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Ye.forEach=function(i,e){Nn(this),this.g.forEach(function(n,s){n.forEach(function(u){i.call(e,u,s,this)},this)},this)},Ye.ta=function(){Nn(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const u=i[s];for(let l=0;l<u.length;l++)n.push(e[s])}return n},Ye.Z=function(i){Nn(this);let e=[];if("string"==typeof i)Ln(this,i)&&(e=e.concat(this.g.get(bi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Ye.set=function(i,e){return Nn(this),this.i=null,Ln(this,i=bi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Ye.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const l=encodeURIComponent(String(s)),p=this.Z(s);for(s=0;s<p.length;s++){var u=l;""!==p[s]&&(u+="="+encodeURIComponent(String(p[s]))),i.push(u)}}return this.i=i.join("&")};var ha=10;function Ns(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ou(i){return i.h?1:i.g?i.g.size:0}function ku(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ts(i,e){i.g?i.g.add(e):i.h=e}function zr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Lu(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return fn(i.i)}Hr.prototype.cancel=function(){if(this.i=Lu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var qd=class{stringify(i){return Be.JSON.stringify(i,void 0)}parse(i){return Be.JSON.parse(i,void 0)}};function Go(){this.g=new qd}function $n(i,e,n){const s=n||"";try{ai(i,function(u,l){let p=u;ue(u)&&(p=Re(u)),e.push(s+l+"="+encodeURIComponent(p))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function za(i,e,n,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function Ga(i){this.l=i.ec||null,this.j=i.ob||!1}function fa(i,e){Q.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Wa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(Ga,Xi),Ga.prototype.g=function(){return new fa(this.l,this.j)},Ga.prototype.i=function(i){return function(){return i}}({}),dt(fa,Q);var Wa=0;function Fu(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Wo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,To(i)}function To(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Ye=fa.prototype).open=function(i,e){if(this.readyState!=Wa)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,To(this)},Ye.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wo(this)),this.readyState=Wa},Ye.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Be.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fu(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Ye.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Wo(this):To(this),3==this.readyState&&Fu(this)}},Ye.Za=function(i){this.g&&(this.response=this.responseText=i,Wo(this))},Ye.Ya=function(i){this.g&&(this.response=i,Wo(this))},Ye.ka=function(){this.g&&Wo(this)},Ye.setRequestHeader=function(i,e){this.v.append(i,e)},Ye.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var qa=Be.JSON.parse;function Wn(i){Q.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Do,this.L=this.M=!1}dt(Wn,Q);var Do="",Ka=/^https?$/i,Za=["POST","PUT"];function ji(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Xs(i),yr(i)}function Xs(i){i.F||(i.F=!0,K(i,"complete"),K(i,"error"))}function mc(i){if(i.h&&typeof lt<"u"&&(!i.C[1]||4!=nr(i)||2!=i.da()))if(i.v&&4==nr(i))Ci(i.La,0,i);else if(K(i,"readystatechange"),4==nr(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=0===p){var u=String(i.I).match(ur)[1]||null;!u&&Be.self&&Be.self.location&&(u=Be.self.location.protocol.slice(0,-1)),s=!Ka.test(u?u.toLowerCase():"")}n=s}if(n)K(i,"complete"),K(i,"success");else{i.m=6;try{var l=2<nr(i)?i.g.statusText:""}catch{l=""}i.j=l+" ["+i.da()+"]",Xs(i)}}finally{yr(i)}}}function yr(i,e){if(i.g){Co(i);const n=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||K(i,"ready");try{n.onreadystatechange=s}catch{}}}function Co(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Be.clearTimeout(i.A),i.A=null)}function nr(i){return i.g?i.g.readyState:0}function Qa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Do:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(i){let e="";return pi(i,function(n,s){e+=s,e+=":",e+=n,e+="\r\n"}),e}function Os(i,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=ns(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):An(i,e,n))}function Ri(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Ao(i){this.Ga=0,this.j=[],this.l=new _i,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ri("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ri("baseRetryDelayMs",5e3,i),this.hb=Ri("retryDelaySeedMs",1e4,i),this.eb=Ri("forwardChannelMaxRetries",2,i),this.xa=Ri("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Hr(i&&i.concurrentRequestLimit),this.Ja=new Go,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function So(i){if(Vu(i),3==i.H){var e=i.W++,n=Fr(i.I);if(An(n,"SID",i.K),An(n,"RID",e),An(n,"TYPE","terminate"),rs(i,n),(e=new es(i,i.l,e)).L=2,e.A=Si(Fr(n)),n=!1,Be.navigator&&Be.navigator.sendBeacon)try{n=Be.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Be.Image&&((new Image).src=e.A,n=!0),n||(e.g=ma(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dr(e)}Ko(i)}function eo(i){i.g&&(yc(i),i.g.cancel(),i.g=null)}function Vu(i){eo(i),i.u&&(Be.clearTimeout(i.u),i.u=null),Ja(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Be.clearTimeout(i.m),i.m=null)}function ks(i){if(!Ns(i.i)&&!i.m){i.m=!0;var e=i.Na;Or||ki(),Mn||(Or(),Mn=!0),xn.add(e,i),i.C=0}}function Ls(i,e){var n;n=e?e.m:i.W++;const s=Fr(i.I);An(s,"SID",i.K),An(s,"RID",n),An(s,"AID",i.V),rs(i,s),i.o&&i.s&&Os(s,i.o,i.s),n=new es(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Fs(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ts(i.i,n),yt(n,s,e)}function rs(i,e){i.na&&pi(i.na,function(n,s){An(e,s,n)}),i.h&&ai({},function(n,s){An(e,s,n)})}function Fs(i,e,n){n=Math.min(i.j.length,n);var s=i.h?Je(i.h.Va,i.h,i):null;e:{var u=i.j;let l=-1;for(;;){const p=["count="+n];-1==l?0<n?(l=u[0].g,p.push("ofs="+l)):l=0:p.push("ofs="+l);let T=!0;for(let S=0;S<n;S++){let x=u[S].g;const L=u[S].map;if(x-=l,0>x)l=Math.max(0,u[S].g-100),T=!1;else try{$n(L,p,"req"+x+"_")}catch{s&&s(L)}}if(T){s=p.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,s}function pa(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Or||ki(),Mn||(Or(),Mn=!0),xn.add(e,i),i.A=0}}function ga(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=qs(Je(i.Ma,i),Cl(i,i.A)),i.A++,0))}function yc(i){null!=i.B&&(Be.clearTimeout(i.B),i.B=null)}function qo(i){i.g=new es(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Fr(i.wa);An(e,"RID","rpc"),An(e,"SID",i.K),An(e,"AID",i.V),An(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&An(e,"TO",i.qa),An(e,"TYPE","xmlhttp"),rs(i,e),i.o&&i.s&&Os(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=Si(Fr(e)),n.u=null,n.S=!0,$t(n,i)}function Ja(i){null!=i.v&&(Be.clearTimeout(i.v),i.v=null)}function Xa(i,e){var n=null;if(i.g==e){Ja(i),yc(i),i.g=null;var s=2}else{if(!ku(i.i,e))return;n=e.F,zr(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;K(s=yi(),new ca(s,n)),ks(i)}else pa(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==s&&function _c(i,e){return!(Ou(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=qs(Je(i.Na,i,e),Cl(i,i.C)),i.C++,0)))}(i,e)||2==s&&ga(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:to(i,5);break;case 4:to(i,10);break;case 3:to(i,6);break;default:to(i,2)}}function Cl(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function to(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var s=Je(i.pb,i);n||(n=new _r("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||Ui(n,"https"),Si(n)),function Dl(i,e){const n=new _i;if(Be.Image){const s=new Image;s.onload=Cn(za,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Cn(za,n,s,"TestLoadImage: error",!1,e),s.onabort=Cn(za,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Cn(za,n,s,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(n.toString(),s)}else Yr(2);i.H=0,i.h&&i.h.za(e),Ko(i),Vu(i)}function Ko(i){if(i.H=0,i.ma=[],i.h){const e=Lu(i.i);(0!=e.length||0!=i.j.length)&&(_n(i.ma,e),_n(i.ma,i.j),i.i.i.length=0,fn(i.j),i.j.length=0),i.h.ya()}}function vc(i,e,n){var s=n instanceof _r?Fr(n):new _r(n);if(""!=s.g)e&&(s.g=e+"."+s.g),zo(s,s.m);else{var u=Be.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var l=new _r(null);s&&Ui(l,s),e&&(l.g=e),u&&zo(l,u),n&&(l.l=n),s=l}return e=i.Da,(n=i.F)&&e&&An(s,n,e),An(s,"VER",i.ra),rs(i,s),s}function ma(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(i.Ha&&!i.va?new Ga({ob:n}):i.va)).Oa(i.J),e}function Ec(){}function no(){if(Rt&&!(10<=Number(Zt)))throw Error("Environmental error: no available transport.")}function ui(i,e){Q.call(this),this.g=new Ao(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!dn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new b(this)}function w(i){Rr.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function k(){Vi.call(this),this.status=1}function b(i){this.g=i}function Z(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Me(i,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)s[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)s[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var l=i.g[3],p=(e=i.g[0])+(l^(n=i.g[1])&((u=i.g[2])^l))+s[0]+3614090360&4294967295;p=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=(n=(u=(l=(e=n+(p<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(l^n&(u^l))+s[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=l+(u^e&(n^u))+s[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^l&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(l^e))+s[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(u^l&(n^u))+s[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^l&(n^u))+s[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=l+(n^u&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(l^e))+s[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=n+(l^e&(u^l))+s[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(n^u^l)+s[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^l)+s[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=l+(e^n^u)+s[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=u+(l^e^n)+s[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^l^e)+s[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(u^(n|~l))+s[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~l))+s[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(l|~n))+s[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=n+(l^(u|~e))+s[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((l=(e=n+((p=e+(u^(n|~l))+s[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=l+(n^(e|~u))+s[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((u=l+((p=u+(e^(l|~n))+s[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+l&4294967295}function ke(i,e){this.h=e;for(var n=[],s=!0,u=i.length-1;0<=u;u--){var l=0|i[u];s&&l==e||(n[u]=l,s=!1)}this.g=n}(Ye=Wn.prototype).Oa=function(i){this.M=i},Ye.ha=function(i,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lr.g(),this.C=function Eo(i){return i.h||(i.h=i.i())}(this.u?this.u:Lr),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(l){return void ji(this,l)}if(i=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)n.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())n.set(l,s.get(l))}s=Array.from(n.keys()).find(l=>"content-type"==l.toLowerCase()),u=Be.FormData&&i instanceof Be.FormData,!(0<=mn(Za,e))||s||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,p]of n)this.g.setRequestHeader(l,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Co(this),0<this.B&&((this.L=function Ts(i){return Rt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=Ci(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){ji(this,l)}},Ye.ua=function(){typeof lt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,K(this,"timeout"),this.abort(8))},Ye.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,K(this,"complete"),K(this,"abort"),yr(this))},Ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yr(this,!0)),Wn.$.N.call(this)},Ye.La=function(){this.s||(this.G||this.v||this.l?mc(this):this.kb())},Ye.kb=function(){mc(this)},Ye.isActive=function(){return!!this.g},Ye.da=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},Ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),qa(e)}},Ye.Ia=function(){return this.m},Ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=Ao.prototype).ra=8,Ye.H=1,Ye.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new es(this,this.l,i);let l=this.s;if(this.U&&(l?(l=Qr(l),mi(l,this.U)):l=this.U),null!==this.o||this.O||(u.I=l,l=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Fs(this,u,e),An(n=Fr(this.I),"RID",i),An(n,"CVER",22),this.F&&An(n,"X-HTTP-Session-Id",this.F),rs(this,n),l&&(this.O?e="headers="+encodeURIComponent(String(ns(l)))+"&"+e:this.o&&Os(n,this.o,l)),ts(this.i,u),this.bb&&An(n,"TYPE","init"),this.P?(An(n,"$req",e),An(n,"SID","null"),u.aa=!0,yt(u,n,null)):yt(u,n,e),this.H=2}}else 3==this.H&&(i?Ls(this,i):0==this.j.length||Ns(this.i)||Ls(this))},Ye.Ma=function(){if(this.u=null,qo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=qs(Je(this.jb,this),i)}},Ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Yr(10),eo(this),qo(this))},Ye.ib=function(){null!=this.v&&(this.v=null,eo(this),ga(this),Yr(19))},Ye.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Yr(2)):(this.l.info("Failed to ping google.com"),Yr(1))},Ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ye=Ec.prototype).Ba=function(){},Ye.Aa=function(){},Ye.za=function(){},Ye.ya=function(){},Ye.isActive=function(){return!0},Ye.Va=function(){},no.prototype.g=function(i,e){return new ui(i,e)},dt(ui,Q),ui.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Yr(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=vc(i,null,i.Y),ks(i)},ui.prototype.close=function(){So(this.g)},ui.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Re(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&ks(e)},ui.prototype.N=function(){this.g.h=null,delete this.j,So(this.g),delete this.g,ui.$.N.call(this)},dt(w,Rr),dt(k,Vi),dt(b,Ec),b.prototype.Ba=function(){K(this.g,"a")},b.prototype.Aa=function(i){K(this.g,new w(i))},b.prototype.za=function(i){K(this.g,new k)},b.prototype.ya=function(){K(this.g,"b")},dt(Z,function N(){this.blockSize=-1}),Z.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Z.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,s=this.m,u=this.h,l=0;l<e;){if(0==u)for(;l<=n;)Me(this,i,l),l+=this.blockSize;if("string"==typeof i){for(;l<e;)if(s[u++]=i.charCodeAt(l++),u==this.blockSize){Me(this,s),u=0;break}}else for(;l<e;)if(s[u++]=i[l++],u==this.blockSize){Me(this,s),u=0;break}}this.h=u,this.i+=e},Z.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)i[n++]=this.g[e]>>>s&255;return i};var Tt={};function vn(i){return-128<=i&&128>i?function Xn(i,e){var n=Tt;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new ke([0|e],0>e?-1:0)}):new ke([0|i],0>i?-1:0)}function un(i){if(isNaN(i)||!isFinite(i))return Fn;if(0>i)return fr(un(-i));for(var e=[],n=1,s=0;i>=n;s++)e[s]=i/n|0,n*=Xt;return new ke(e,0)}var Xt=4294967296,Fn=vn(0),Tn=vn(1),Cr=vn(16777216);function cr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function hr(i){return-1==i.h}function fr(i){for(var e=i.g.length,n=[],s=0;s<e;s++)n[s]=~i.g[s];return new ke(n,~i.h).add(Tn)}function ei(i,e){return i.add(fr(e))}function is(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function lr(i,e){this.g=i,this.h=e}function ss(i,e){if(cr(e))throw Error("division by zero");if(cr(i))return new lr(Fn,Fn);if(hr(i))return e=ss(fr(i),e),new lr(fr(e.g),fr(e.h));if(hr(e))return e=ss(i,fr(e)),new lr(fr(e.g),e.h);if(30<i.g.length){if(hr(i)||hr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Tn,s=e;0>=s.X(i);)n=Al(n),s=Al(s);var u=Sn(n,1),l=Sn(s,1);for(s=Sn(s,2),n=Sn(n,2);!cr(s);){var p=l.add(s);0>=p.X(i)&&(u=u.add(n),l=p),s=Sn(s,1),n=Sn(n,1)}return e=ei(i,u.R(e)),new lr(u,e)}for(u=Fn;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),p=(l=un(n)).R(e);hr(p)||0<p.X(i);)p=(l=un(n-=s)).R(e);cr(l)&&(l=Tn),u=u.add(l),i=ei(i,p)}return new lr(u,i)}function Al(i){for(var e=i.g.length+1,n=[],s=0;s<e;s++)n[s]=i.D(s)<<1|i.D(s-1)>>>31;return new ke(n,i.h)}function Sn(i,e){var n=e>>5;e%=32;for(var s=i.g.length-n,u=[],l=0;l<s;l++)u[l]=0<e?i.D(l+n)>>>e|i.D(l+n+1)<<32-e:i.D(l+n);return new ke(u,i.h)}(Ye=ke.prototype).ea=function(){if(hr(this))return-fr(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);i+=(0<=s?s:Xt+s)*e,e*=Xt}return i},Ye.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(cr(this))return"0";if(hr(this))return"-"+fr(this).toString(i);for(var e=un(Math.pow(i,6)),n=this,s="";;){var u=ss(n,e).g,l=((0<(n=ei(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(cr(n=u))return l+s;for(;6>l.length;)l="0"+l;s=l+s}},Ye.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Ye.X=function(i){return hr(i=ei(this,i))?-1:cr(i)?0:1},Ye.abs=function(){return hr(this)?fr(this):this},Ye.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0,u=0;u<=e;u++){var l=s+(65535&this.D(u))+(65535&i.D(u)),p=(l>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);s=p>>>16,n[u]=(p&=65535)<<16|(l&=65535)}return new ke(n,-2147483648&n[n.length-1]?-1:0)},Ye.R=function(i){if(cr(this)||cr(i))return Fn;if(hr(this))return hr(i)?fr(this).R(fr(i)):fr(fr(this).R(i));if(hr(i))return fr(this.R(fr(i)));if(0>this.X(Cr)&&0>i.X(Cr))return un(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var u=0;u<i.g.length;u++){var l=this.D(s)>>>16,p=65535&this.D(s),T=i.D(u)>>>16,S=65535&i.D(u);n[2*s+2*u]+=p*S,is(n,2*s+2*u),n[2*s+2*u+1]+=l*S,is(n,2*s+2*u+1),n[2*s+2*u+1]+=p*T,is(n,2*s+2*u+1),n[2*s+2*u+2]+=l*T,is(n,2*s+2*u+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new ke(n,0)},Ye.gb=function(i){return ss(this,i).h},Ye.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&i.D(s);return new ke(n,this.h&i.h)},Ye.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|i.D(s);return new ke(n,this.h|i.h)},Ye.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^i.D(s);return new ke(n,this.h^i.h)},no.prototype.createWebChannel=no.prototype.g,ui.prototype.send=ui.prototype.u,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,$a.COMPLETE="complete",an.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",Q.prototype.listen=Q.prototype.O,Wn.prototype.listenOnce=Wn.prototype.P,Wn.prototype.getLastError=Wn.prototype.Sa,Wn.prototype.getLastErrorCode=Wn.prototype.Ia,Wn.prototype.getStatus=Wn.prototype.da,Wn.prototype.getResponseJson=Wn.prototype.Wa,Wn.prototype.getResponseText=Wn.prototype.ja,Wn.prototype.send=Wn.prototype.ha,Wn.prototype.setWithCredentials=Wn.prototype.Oa,Z.prototype.digest=Z.prototype.l,Z.prototype.reset=Z.prototype.reset,Z.prototype.update=Z.prototype.j,ke.prototype.add=ke.prototype.add,ke.prototype.multiply=ke.prototype.R,ke.prototype.modulo=ke.prototype.gb,ke.prototype.compare=ke.prototype.X,ke.prototype.toNumber=ke.prototype.ea,ke.prototype.toString=ke.prototype.toString,ke.prototype.getBits=ke.prototype.D,ke.fromNumber=un,ke.fromString=function On(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return fr(On(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=un(Math.pow(e,8)),s=Fn,u=0;u<i.length;u+=8){var l=Math.min(8,i.length-u),p=parseInt(i.substring(u,u+l),e);8>l?(l=un(Math.pow(e,l)),s=s.R(l).add(un(p))):s=(s=s.R(n)).add(un(p))}return s};var Ic=rn.createWebChannelTransport=function(){return new no},_a=rn.getStatEventTarget=function(){return yi()},Ei=rn.ErrorCode=Ho,Kd=rn.EventType=$a,Zd=rn.Event=Fi,ci=rn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Uu=(rn.FetchXmlHttpFactory=Ga,rn.WebChannel=an),Sl=rn.XhrIo=Wn,Jh=rn.Md5=Z,Pi=rn.Integer=ke;const Vs="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let ya="10.8.0";const ro=new At.Yd("@firebase/firestore");function io(){return ro.logLevel}function Ne(i,...e){if(ro.logLevel<=At.in.DEBUG){const n=e.map(eu);ro.debug(`Firestore (${ya}): ${i}`,...n)}}function vr(i,...e){if(ro.logLevel<=At.in.ERROR){const n=e.map(eu);ro.error(`Firestore (${ya}): ${i}`,...n)}}function Er(i,...e){if(ro.logLevel<=At.in.WARN){const n=e.map(eu);ro.warn(`Firestore (${ya}): ${i}`,...n)}}function eu(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Dt(i="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+i;throw vr(e),new Error(e)}function xt(i,e){i||Dt()}function at(i,e){return i}const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends St.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ti{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class tu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gr.UNAUTHENTICATED))}shutdown(){}}class Ke{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bn{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var s=this;let u=this.i;const l=x=>this.i!==u?(u=this.i,n(x)):Promise.resolve();let p=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new ti,e.enqueueRetryable(()=>l(this.currentUser))};const T=()=>{const x=p;e.enqueueRetryable((0,ie.Z)(function*(){yield x.promise,yield l(s.currentUser)}))},S=x=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(x=>S(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?S(x):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new ti)}},0),T()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(xt("string"==typeof s.accessToken),new tu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new Gr(e)}}class Yd{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nu{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Yd(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class li{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=l=>{null!=l.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.R;return this.R=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const u=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>u(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?u(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xt("string"==typeof n.token),this.R=n.token,new li(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qi(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Bu{static newId(){const n=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=qi(40);for(let l=0;l<u.length;++l)s.length<20&&u[l]<n&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[l]%62))}return s}}function Kt(i,e){return i<e?-1:i>e?1:0}function va(i,e,n){return i.length===e.length&&i.every((s,u)=>n(s,e[u]))}function Jd(i){return i+"\0"}class rr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Qe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new rr(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new rr(0,0))}static max(){return new Et(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ii{constructor(e,n,s){void 0===n?n=0:n>e.length&&Dt(),void 0===s?s=e.length-n:s>e.length-n&&Dt(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return 0===Ii.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let u=0;u<s;u++){const l=e.get(u),p=n.get(u);if(l<p)return-1;if(l>p)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class gn extends Ii{construct(e,n,s){return new gn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Qe(Le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(u=>u.length>0))}return new gn(n)}static emptyPath(){return new gn([])}}const Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ii{construct(e,n,s){return new En(e,n,s)}static isValidIdentifier(e){return Cs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new En(["__name__"])}static fromServerFormat(e){const n=[];let s="",u=0;const l=()=>{if(0===s.length)throw new Qe(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let p=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new Qe(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[u+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Qe(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,u+=2}else"`"===T?(p=!p,u++):"."!==T||p?(s+=T,u++):(l(),u++)}if(l(),p)throw new Qe(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}class _t{constructor(e){this.path=e}static fromPath(e){return new _t(gn.fromString(e))}static fromName(e){return new _t(gn.fromString(e).popFirst(5))}static empty(){return new _t(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return gn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new gn(e.slice()))}}class bo{constructor(e,n,s,u){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=u}}function Tc(i){return i.fields.find(e=>2===e.kind)}function Ro(i){return i.fields.filter(e=>2!==e.kind)}bo.UNKNOWN_ID=-1;class Us{constructor(e,n){this.fieldPath=e,this.kind=n}}class D{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new D(0,R.min())}}function v(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=Et.fromTimestamp(1e9===s?new rr(n+1,0):new rr(n,s));return new R(u,_t.empty(),e)}function A(i){return new R(i.readTime,i.key,-1)}class R{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new R(Et.min(),_t.empty(),-1)}static max(){return new R(Et.max(),_t.empty(),-1)}}function U(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=_t.comparator(i.documentKey,e.documentKey),0!==n?n:Kt(i.largestBatchId,e.largestBatchId))}const Y="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ce(i){return ft.apply(this,arguments)}function ft(){return ft=(0,ie.Z)(function*(i){if(i.code!==Le.FAILED_PRECONDITION||i.message!==Y)throw i;Ne("LocalStore","Unexpectedly lost primary lease")}),ft.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((s,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,u)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,s)=>{n(e)})}static reject(e){return new se((n,s)=>{s(e)})}static waitFor(e){return new se((n,s)=>{let u=0,l=0,p=!1;e.forEach(T=>{++u,T.next(()=>{++l,p&&l===u&&n()},S=>s(S))}),p=!0,l===u&&n()})}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next(u=>u?se.resolve(u):s());return n}static forEach(e,n){const s=[];return e.forEach((u,l)=>{s.push(n.call(this,u,l))}),this.waitFor(s)}static mapArray(e,n){return new se((s,u)=>{const l=e.length,p=new Array(l);let T=0;for(let S=0;S<l;S++){const x=S;n(e[x]).next(L=>{p[x]=L,++T,T===l&&s(p)},L=>u(L))}})}static doWhile(e,n){return new se((s,u)=>{const l=()=>{!0===e()?n().next(()=>{l()},u):s()};l()})}}class qn{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ti,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new kn(e,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=Cc(s.target.error);this.V.reject(new kn(e,u))}}static open(e,n,s,u){try{return new qn(n,e.transaction(u,s))}catch(l){throw new kn(n,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Dc(n)}}class kt{constructor(e,n,s){this.name=e,this.version=n,this.p=s,12.2===kt.S((0,St.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),as(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,St.hl)())return!1;if(kt.C())return!0;const e=(0,St.z$)(),n=kt.S(e),s=0<n&&n<10,u=kt.v(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var n=this;return(0,ie.Z)(function*(){return n.db||(Ne("SimpleDb","Opening database:",n.name),n.db=yield new Promise((s,u)=>{const l=indexedDB.open(n.name,n.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{u(new kn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const T=p.target.error;u("VersionError"===T.name?new Qe(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new Qe(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new kn(e,T))},l.onupgradeneeded=p=>{Ne("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',p.oldVersion),n.p.N(p.target.result,l.transaction,p.oldVersion,n.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=s=>n.B(s)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,s,u){var l=this;return(0,ie.Z)(function*(){const p="readonly"===n;let T=0;for(;;){++T;try{l.db=yield l.O(e);const S=qn.open(l.db,e,p?"readonly":"readwrite",s),x=u(S).next(L=>(S.g(),L)).catch(L=>(S.abort(L),se.reject(L))).toPromise();return x.catch(()=>{}),yield S.m,x}catch(S){const x=S,L="FirebaseError"!==x.name&&T<3;if(Ne("SimpleDb","Transaction failed with error:",x.message,"Retrying:",L),l.close(),!L)return Promise.reject(x)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Mi{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return as(this.k.delete())}}class kn extends Qe{constructor(e,n){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function os(i){return"IndexedDbTransactionError"===i.name}class Dc{constructor(e){this.store=e}put(e,n){let s;return void 0!==n?(Ne("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),as(s)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),as(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),as(this.store.count())}W(e,n){const s=this.options(e,n),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const l=u.getAll(s.range);return new se((p,T)=>{l.onerror=S=>{T(S.target.error)},l.onsuccess=S=>{p(S.target.result)}})}{const l=this.cursor(s),p=[];return this.G(l,(T,S)=>{p.push(S)}).next(()=>p)}}j(e,n){const s=this.store.getAll(e,null===n?void 0:n);return new se((u,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}H(e,n){Ne("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.J=!1;const u=this.cursor(s);return this.G(u,(l,p,T)=>T.delete())}Y(e,n){let s;n?s=e:(s={},n=e);const u=this.cursor(s);return this.G(u,n)}Z(e){const n=this.cursor({});return new se((s,u)=>{n.onerror=l=>{const p=Cc(l.target.error);u(p)},n.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(T=>{T?p.continue():s()}):s()}})}G(e,n){const s=[];return new se((u,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const T=p.target.result;if(!T)return void u();const S=new Mi(T),x=n(T.primaryKey,T.value,S);if(x instanceof se){const L=x.catch(G=>(S.done(),se.reject(G)));s.push(L)}S.isDone?u():null===S.$?T.continue():T.continue(S.$)}}).next(()=>se.waitFor(s))}options(e,n){let s;return void 0!==e&&("string"==typeof e?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.J?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function as(i){return new se((e,n)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=Cc(s.target.error);n(u)}})}let Pl=!1;function Cc(i){const e=kt.S((0,St.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const s=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pl||(Pl=!0,setTimeout(()=>{throw s},0)),s}}return i}class Xh{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ne("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.Z)(function*(){n.task=null;try{Ne("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(s){os(s)?Ne("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Ce(s)}yield n.ee(6e4)}))}}class Ml{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,ie.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>n.ne(s,e))})()}ne(e,n){const s=new Set;let u=n,l=!0;return se.doWhile(()=>!0===l&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return Ne("IndexBackfiller",`Processing collection: ${p}`),this.re(e,p,u).next(T=>{u-=T,s.add(p)});l=!1})).next(()=>n-u)}re(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ie(u,l)).next(T=>(Ne("IndexBackfiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,n,T))).next(()=>p.size)}))}ie(e,n){let s=e;return n.changes.forEach((u,l)=>{const p=A(l);U(p,s)>0&&(s=p)}),new R(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}let ni=(()=>{class i{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=u=>this.se(u),this.oe=u=>s.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function ru(i){return null==i}function Ea(i){return 0===i&&1/i==-1/0}function iu(i){return"number"==typeof i&&Number.isInteger(i)&&!Ea(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function di(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Xd(e)),e=Ac(i.get(n),e);return Xd(e)}function Ac(i,e){let n=e;const s=i.length;for(let u=0;u<s;u++){const l=i.charAt(u);switch(l){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=l}}return n}function Xd(i){return i+"\x01\x01"}function As(i){const e=i.length;if(xt(e>=2),2===e)return xt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),gn.emptyPath();const n=e-2,s=[];let u="";for(let l=0;l<e;){const p=i.indexOf("\x01",l);switch((p<0||p>n)&&Dt(),i.charAt(p+1)){case"\x01":const T=i.substring(l,p);let S;0===u.length?S=T:(u+=T,S=u,u=""),s.push(S);break;case"\x10":u+=i.substring(l,p),u+="\0";break;case"\x11":u+=i.substring(l,p+1);break;default:Dt()}l=p+2}return new gn(s)}const Sc=["userId","batchId"];function so(i,e){return[i,di(e)]}function ju(i,e,n){return[i,di(e),n]}const eh={},xl=["prefixPath","collectionGroup","readTime","documentId"],Zo=["prefixPath","collectionGroup","documentId"],ef=["collectionGroup","readTime","prefixPath","documentId"],dg=["canonicalId","targetId"],hg=["targetId","path"],m_=["path","targetId"],tf=["collectionId","parent"],Nl=["indexId","uid"],bc=["uid","sequenceNumber"],fg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],su=["indexId","uid","orderedDocumentKey"],th=["userId","collectionPath","documentId"],$u=["userId","collectionPath","largestBatchId"],__=["userId","collectionGroup","largestBatchId"],Rc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ol=[...Rc,"documentOverlays"],nf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ki=nf,pg=[...Ki,"indexConfiguration","indexState","indexEntries"];class Hu extends xe{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Vr(i,e){const n=at(i);return kt.M(n.ae,e)}function Pc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ss(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function kl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ir{constructor(e,n){this.comparator=e,this.root=n||hi.EMPTY}insert(e,n){return new ir(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return n+s.left.size;u<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,n,s,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,n,s,u,l){this.key=e,this.value=n,this.color=s??hi.RED,this.left=u??hi.EMPTY,this.right=l??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,u,l){return new hi(e??this.key,n??this.value,s??this.color,u??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let u=this;const l=s(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,n,s),null):0===l?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return hi.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(e,n,s,u,l){return this}insert(e,n,s){return new hi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nh(this.data.getIterator())}getIteratorFrom(e){return new nh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jn(this.comparator);return n.data=e,n}}class nh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ia(i){return i.hasNext()?i.getNext():void 0}class xi{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new xi([])}unionWith(e){let n=new Jn(En.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class wa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new wa("Invalid base64 string: "+l):l}}(e);return new ri(n)}static fromUint8Array(e){const n=function(u){let l="";for(let p=0;p<u.length;++p)l+=String.fromCharCode(u[p]);return l}(e);return new ri(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let u=0;u<n.length;u++)s[u]=n.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const rf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(i){if(xt(!!i),"string"==typeof i){let e=0;const n=rf.exec(i);if(xt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ur(i.seconds),nanos:Ur(i.nanos)}}function Ur(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ir(i){return"string"==typeof i?ri.fromBase64String(i):ri.fromUint8Array(i)}function ou(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function au(i){const e=i.mapValue.fields.__previous_value__;return ou(e)?au(e):e}function Ta(i){const e=us(i.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class ih{constructor(e,n,s,u,l,p,T,S,x){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=u,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=S,this.useFetchStreams=x}}class Qo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}const oo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Po={nullValue:"NULL_VALUE"};function cs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ou(i)?4:af(i)?9007199254740991:10:Dt()}function Zi(i,e){if(i===e)return!0;const n=cs(i);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ta(i).isEqual(Ta(e));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const p=us(u.timestampValue),T=us(l.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,Ir(i.bytesValue).isEqual(Ir(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,l){return Ur(u.geoPointValue.latitude)===Ur(l.geoPointValue.latitude)&&Ur(u.geoPointValue.longitude)===Ur(l.geoPointValue.longitude)}(i,e);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return Ur(u.integerValue)===Ur(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const p=Ur(u.doubleValue),T=Ur(l.doubleValue);return p===T?Ea(p)===Ea(T):isNaN(p)&&isNaN(T)}return!1}(i,e);case 9:return va(i.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:return function(u,l){const p=u.mapValue.fields||{},T=l.mapValue.fields||{};if(Pc(p)!==Pc(T))return!1;for(const S in p)if(p.hasOwnProperty(S)&&(void 0===T[S]||!Zi(p[S],T[S])))return!1;return!0}(i,e);default:return Dt()}var l}function uu(i,e){return void 0!==(i.values||[]).find(n=>Zi(n,e))}function Bs(i,e){if(i===e)return 0;const n=cs(i),s=cs(e);if(n!==s)return Kt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kt(i.booleanValue,e.booleanValue);case 2:return function(l,p){const T=Ur(l.integerValue||l.doubleValue),S=Ur(p.integerValue||p.doubleValue);return T<S?-1:T>S?1:T===S?0:isNaN(T)?isNaN(S)?0:-1:1}(i,e);case 3:return cu(i.timestampValue,e.timestampValue);case 4:return cu(Ta(i),Ta(e));case 5:return Kt(i.stringValue,e.stringValue);case 6:return function(l,p){const T=Ir(l),S=Ir(p);return T.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const T=l.split("/"),S=p.split("/");for(let x=0;x<T.length&&x<S.length;x++){const L=Kt(T[x],S[x]);if(0!==L)return L}return Kt(T.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const T=Kt(Ur(l.latitude),Ur(p.latitude));return 0!==T?T:Kt(Ur(l.longitude),Ur(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const T=l.values||[],S=p.values||[];for(let x=0;x<T.length&&x<S.length;++x){const L=Bs(T[x],S[x]);if(L)return L}return Kt(T.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){if(l===oo.mapValue&&p===oo.mapValue)return 0;if(l===oo.mapValue)return 1;if(p===oo.mapValue)return-1;const T=l.fields||{},S=Object.keys(T),x=p.fields||{},L=Object.keys(x);S.sort(),L.sort();for(let G=0;G<S.length&&G<L.length;++G){const oe=Kt(S[G],L[G]);if(0!==oe)return oe;const be=Bs(T[S[G]],x[L[G]]);if(0!==be)return be}return Kt(S.length,L.length)}(i.mapValue,e.mapValue);default:throw Dt()}}function cu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Kt(i,e);const n=us(i),s=us(e),u=Kt(n.seconds,s.seconds);return 0!==u?u:Kt(n.nanos,s.nanos)}function Mc(i){return sh(i)}function sh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=us(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ir(i.bytesValue).toBase64():"referenceValue"in i?_t.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",u=!0;for(const l of n.values||[])u?u=!1:s+=",",s+=sh(l);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let u="{",l=!0;for(const p of s)l?l=!1:u+=",",u+=`${p}:${sh(n.fields[p])}`;return u+"}"}(i.mapValue):Dt()}function Gu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function sf(i){return!!i&&"integerValue"in i}function Nc(i){return!!i&&"arrayValue"in i}function gg(i){return!!i&&"nullValue"in i}function Ll(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Yo(i){return!!i&&"mapValue"in i}function Oc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ss(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Oc(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function af(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function fi(i){return"nullValue"in i?Po:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Gu(Qo.empty(),_t.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Dt()}function mg(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Gu(Qo.empty(),_t.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?oo:Dt()}function Wu(i,e){const n=Bs(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function uf(i,e){const n=Bs(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Yo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(n)}setAll(e){let n=En.emptyPath(),s={},u=[];e.forEach((p,T)=>{if(!n.isImmediateParentOf(T)){const S=this.getFieldsMap(n);this.applyChanges(S,s,u),s={},u=[],n=T.popLast()}p?s[T.lastSegment()]=Oc(p):u.push(T.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,s,u)}delete(e){const n=this.field(e.popLast());Yo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=n.mapValue.fields[e.get(s)];Yo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,s){Ss(n,(u,l)=>e[u]=l);for(const u of s)delete e[u]}clone(){return new sr(Oc(this.value))}}function Jo(i){const e=[];return Ss(i.fields,(n,s)=>{const u=new En([n]);if(Yo(s)){const l=Jo(s.mapValue).fields;if(0===l.length)e.push(u);else for(const p of l)e.push(u.child(p))}else e.push(u)}),new xi(e)}class pr{constructor(e,n,s,u,l,p,T){this.key=e,this.documentType=n,this.version=s,this.readTime=u,this.createTime=l,this.data=p,this.documentState=T}static newInvalidDocument(e){return new pr(e,0,Et.min(),Et.min(),Et.min(),sr.empty(),0)}static newFoundDocument(e,n,s,u){return new pr(e,1,n,Et.min(),s,u,0)}static newNoDocument(e,n){return new pr(e,2,n,Et.min(),Et.min(),sr.empty(),0)}static newUnknownDocument(e,n){return new pr(e,3,n,Et.min(),Et.min(),sr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ao{constructor(e,n){this.position=e,this.inclusive=n}}function qu(i,e,n){let s=0;for(let u=0;u<i.position.length;u++){const l=e[u],p=i.position[u];if(s=l.field.isKeyField()?_t.comparator(_t.fromName(p.referenceValue),n.key):Bs(p,n.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function cf(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Zi(i.position[n],e.position[n]))return!1;return!0}class Fl{constructor(e,n="asc"){this.field=e,this.dir=n}}function lf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class _g{}class Jt extends _g{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,s):new yg(e,n,s):"array-contains"===n?new Zu(e,s):"in"===n?new uh(e,s):"not-in"===n?new lu(e,s):"array-contains-any"===n?new ff(e,s):new Jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return"in"===n?new kc(e,s):new Bl(e,s)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Bs(n,this.value)):null!==n&&cs(this.value)===cs(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends _g{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Kn(e,n)}matches(e){return uo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function uo(i){return"and"===i.op}function df(i){return"or"===i.op}function Ku(i){return Vl(i)&&uo(i)}function Vl(i){for(const e of i.filters)if(e instanceof Kn)return!1;return!0}function oh(i){if(i instanceof Jt)return i.field.canonicalString()+i.op.toString()+Mc(i.value);if(Ku(i))return i.filters.map(e=>oh(e)).join(",");{const e=i.filters.map(n=>oh(n)).join(",");return`${i.op}(${e})`}}function Ul(i,e){return i instanceof Jt?(s=i,(u=e)instanceof Jt&&s.op===u.op&&s.field.isEqual(u.field)&&Zi(s.value,u.value)):i instanceof Kn?function(s,u){return u instanceof Kn&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((l,p,T)=>l&&Ul(p,u.filters[T]),!0)}(i,e):void Dt();var s,u}function hf(i,e){const n=i.filters.concat(e);return Kn.create(n,i.op)}function ah(i){return i instanceof Jt?`${(n=i).field.canonicalString()} ${n.op} ${Mc(n.value)}`:i instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(ah).join(" ,")+"}"}(i):"Filter";var n}class yg extends Jt{constructor(e,n,s){super(e,n,s),this.key=_t.fromName(s.referenceValue)}matches(e){const n=_t.comparator(e.key,this.key);return this.matchesComparison(n)}}class kc extends Jt{constructor(e,n){super(e,"in",n),this.keys=vg(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Bl extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=vg(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vg(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(s=>_t.fromName(s.referenceValue))}class Zu extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nc(n)&&uu(n.arrayValue,this.value)}}class uh extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&uu(this.value.arrayValue,n)}}class lu extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!uu(this.value.arrayValue,n)}}class ff extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>uu(this.value.arrayValue,s))}}class ch{constructor(e,n=null,s=[],u=[],l=null,p=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=u,this.limit=l,this.startAt=p,this.endAt=T,this.ce=null}}function Lc(i,e=null,n=[],s=[],u=null,l=null,p=null){return new ch(i,e,n,s,u,l,p)}function Mo(i){const e=at(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>oh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>{return(l=s).field.canonicalString()+l.dir;var l}).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Mc(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Mc(s)).join(",")),e.ce=n}return e.ce}function Qu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!lf(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Ul(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!cf(i.startAt,e.startAt)&&cf(i.endAt,e.endAt)}function jl(i){return _t.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function $l(i,e){return i.filters.filter(n=>n instanceof Jt&&n.field.isEqual(e))}function Da(i,e,n){let s=Po,u=!0;for(const l of $l(i,e)){let p=Po,T=!0;switch(l.op){case"<":case"<=":p=fi(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,T=!1;break;case"!=":case"not-in":p=Po}Wu({value:s,inclusive:u},{value:p,inclusive:T})<0&&(s=p,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];Wu({value:s,inclusive:u},{value:p,inclusive:n.inclusive})<0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}function Yu(i,e,n){let s=oo,u=!0;for(const l of $l(i,e)){let p=oo,T=!0;switch(l.op){case">=":case">":p=mg(l.value),T=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,T=!1;break;case"!=":case"not-in":p=oo}uf({value:s,inclusive:u},{value:p,inclusive:T})>0&&(s=p,u=T)}if(null!==n)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const p=n.position[l];uf({value:s,inclusive:u},{value:p,inclusive:n.inclusive})>0&&(s=p,u=n.inclusive);break}return{value:s,inclusive:u}}class Ca{constructor(e,n=null,s=[],u=[],l=null,p="F",T=null,S=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=u,this.limit=l,this.limitType=p,this.startAt=T,this.endAt=S,this.le=null,this.he=null,this.Pe=null}}function Eg(i,e,n,s,u,l,p,T){return new Ca(i,e,n,s,u,l,p,T)}function bs(i){return new Ca(i)}function pf(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function gf(i){return null!==i.collectionGroup}function Aa(i){const e=at(i);if(null===e.le){e.le=[];const n=new Set;for(const l of e.explicitOrderBy)e.le.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new Jn(En.comparator);return p.filters.forEach(S=>{S.getFlattenedFilters().forEach(x=>{x.isInequality()&&(T=T.add(x.field))})}),T})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.le.push(new Fl(l,s))}),n.has(En.keyField().canonicalString())||e.le.push(new Fl(En.keyField(),s))}return e.le}function Qi(i){const e=at(i);return e.he||(e.he=function Hl(i,e){if("F"===i.limitType)return Lc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Fl(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new ao(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ao(i.startAt.position,i.startAt.inclusive):null;return Lc(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}(e,Aa(i))),e.he}function Ju(i,e){const n=i.filters.concat([e]);return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Fc(i,e,n){return new Ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function du(i,e){return Qu(Qi(i),Qi(e))&&i.limitType===e.limitType}function lh(i){return`${Mo(Qi(i))}|lt:${i.limitType}`}function Vc(i){return`Query(target=${function(n){let s=n.path.canonicalString();return null!==n.collectionGroup&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(u=>ah(u)).join(", ")}]`),ru(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(u=>{return`${(p=u).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(u=>Mc(u)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(u=>Mc(u)).join(",")),`Target(${s})`}(Qi(i))}; limitType=${i.limitType})`}function Sa(i,e){return e.isFoundDocument()&&function(s,u){const l=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_t.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(i,e)&&function(s,u){for(const l of Aa(s))if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(i,e)&&function(s,u){for(const l of s.filters)if(!l.matches(u))return!1;return!0}(i,e)&&(u=e,!((s=i).startAt&&!function(p,T,S){const x=qu(p,T,S);return p.inclusive?x<=0:x<0}(s.startAt,Aa(s),u)||s.endAt&&!function(p,T,S){const x=qu(p,T,S);return p.inclusive?x>=0:x>0}(s.endAt,Aa(s),u)));var s,u}function Ig(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function mf(i){return(e,n)=>{let s=!1;for(const u of Aa(i)){const l=wg(u,e,n);if(0!==l)return l;s=s||u.field.isKeyField()}return 0}}function wg(i,e,n){const s=i.field.isKeyField()?_t.comparator(e.key,n.key):function(l,p,T){const S=p.data.field(l),x=T.data.field(l);return null!==S&&null!==x?Bs(S,x):Dt()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Dt()}}class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0!==s)for(const[u,l]of s)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,n){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[n]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,s)=>{for(const[u,l]of s)e(u,l)})}isEmpty(){return kl(this.inner)}size(){return this.innerSize}}const y_=new ir(_t.comparator);function ls(){return y_}const Xu=new ir(_t.comparator);function zl(...i){let e=Xu;for(const n of i)e=e.insert(n.key,n);return e}function Tg(i){let e=Xu;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function lo(){return Gl()}function dh(){return Gl()}function Gl(){return new co(i=>i.toString(),(i,e)=>i.isEqual(e))}const Dg=new ir(_t.comparator),hu=new Jn(_t.comparator);function nn(...i){let e=hu;for(const n of i)e=e.add(n);return e}const _f=new Jn(Kt);function Wl(){return _f}function ql(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ea(e)?"-0":e}}function fu(i){return{integerValue:""+i}}function hh(i,e){return iu(e)?fu(e):ql(i,e)}class Uc{constructor(){this._=void 0}}function Kl(i,e,n){return i instanceof pu?function(u,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&ou(l)&&(l=au(l)),l&&(p.fields.__previous_value__=l),{mapValue:p}}(n,e):i instanceof gu?yf(i,e):i instanceof Ra?Zl(i,e):function(u,l){const p=Bc(u,l),T=Ql(p)+Ql(u.Ie);return sf(p)&&sf(u.Ie)?fu(T):ql(u.serializer,T)}(i,e)}function ba(i,e,n){return i instanceof gu?yf(i,e):i instanceof Ra?Zl(i,e):n}function Bc(i,e){return i instanceof mu?sf(s=e)||(l=s)&&"doubleValue"in l?e:{integerValue:0}:null;var s,l}class pu extends Uc{}class gu extends Uc{constructor(e){super(),this.elements=e}}function yf(i,e){const n=Yl(e);for(const s of i.elements)n.some(u=>Zi(u,s))||n.push(s);return{arrayValue:{values:n}}}class Ra extends Uc{constructor(e){super(),this.elements=e}}function Zl(i,e){let n=Yl(e);for(const s of i.elements)n=n.filter(u=>!Zi(u,s));return{arrayValue:{values:n}}}class mu extends Uc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Ql(i){return Ur(i.integerValue||i.doubleValue)}function Yl(i){return Nc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class _u{constructor(e,n){this.field=e,this.transform=n}}class fh{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wi(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Xo{}function jc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new vu(i.key,Dn.none()):new yu(i.key,i.data,Dn.none());{const n=i.data,s=sr.empty();let u=new Jn(En.comparator);for(let l of e.fields)if(!u.has(l)){let p=n.field(l);null===p&&l.length>1&&(l=l.popLast(),p=n.field(l)),null===p?s.delete(l):s.set(l,p),u=u.add(l)}return new xo(i.key,s,new xi(u.toArray()),Dn.none())}}function $i(i,e,n){i instanceof yu?function(u,l,p){const T=u.value.clone(),S=Xl(u.fieldTransforms,l,p.transformResults);T.setAll(S),l.convertToFoundDocument(p.version,T).setHasCommittedMutations()}(i,e,n):i instanceof xo?function(u,l,p){if(!wi(u.precondition,l))return void l.convertToUnknownDocument(p.version);const T=Xl(u.fieldTransforms,l,p.transformResults),S=l.data;S.setAll(ea(u)),S.setAll(T),l.convertToFoundDocument(p.version,S).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ho(i,e,n,s){return i instanceof yu?function(l,p,T,S){if(!wi(l.precondition,p))return T;const x=l.value.clone(),L=vf(l.fieldTransforms,S,p);return x.setAll(L),p.convertToFoundDocument(p.version,x).setHasLocalMutations(),null}(i,e,n,s):i instanceof xo?function(l,p,T,S){if(!wi(l.precondition,p))return T;const x=vf(l.fieldTransforms,S,p),L=p.data;return L.setAll(ea(l)),L.setAll(x),p.convertToFoundDocument(p.version,L).setHasLocalMutations(),null===T?null:T.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(G=>G.field))}(i,e,n,s):(T=n,wi(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T);var p,T}function Jl(i,e){let n=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),l=Bc(s.transform,u||null);null!=l&&(null===n&&(n=sr.empty()),n.set(s.field,l))}return n||null}function ph(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=i.fieldTransforms)&&void 0===u||s&&u&&va(s,u,(l,p)=>function Cg(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(s=i.transform)instanceof gu&&u instanceof gu||s instanceof Ra&&u instanceof Ra?va(s.elements,u.elements,Zi):s instanceof mu&&u instanceof mu?Zi(s.Ie,u.Ie):s instanceof pu&&u instanceof pu);var s,u}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var s,u}class yu extends Xo{constructor(e,n,s,u=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class xo extends Xo{constructor(e,n,s,u,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=u,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ea(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Xl(i,e,n){const s=new Map;xt(i.length===n.length);for(let u=0;u<n.length;u++){const l=i[u],p=l.transform,T=e.data.field(l.field);s.set(l.field,ba(p,T,n[u]))}return s}function vf(i,e,n){const s=new Map;for(const u of i){const l=u.transform,p=n.data.field(u.field);s.set(u.field,Kl(l,p,e))}return s}class vu extends Xo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gh extends Xo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ed{constructor(e,n,s,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&$i(l,e,s[u])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ho(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ho(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=dh();return this.mutations.forEach(u=>{const l=e.get(u.key),p=l.overlayedDocument;let T=this.applyToLocalView(p,l.mutatedFields);T=n.has(u.key)?null:T;const S=jc(p,T);null!==S&&s.set(u.key,S),p.isValidDocument()||p.convertToNoDocument(Et.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),nn())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(n,s)=>ph(n,s))&&va(this.baseMutations,e.baseMutations,(n,s)=>ph(n,s))}}class Ti{constructor(e,n,s,u){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=u}static from(e,n,s){xt(e.mutations.length===s.length);let u=Dg;const l=e.mutations;for(let p=0;p<l.length;p++)u=u.insert(l[p].key,s[p].version);return new Ti(e,n,s,u)}}class Eu{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $c{constructor(e,n){this.count=e,this.unchangedNames=n}}var or,In;function td(i){switch(i){default:return Dt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function nd(i){if(void 0===i)return vr("GRPC error has no .code"),Le.UNKNOWN;switch(i){case or.OK:return Le.OK;case or.CANCELLED:return Le.CANCELLED;case or.UNKNOWN:return Le.UNKNOWN;case or.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case or.INTERNAL:return Le.INTERNAL;case or.UNAVAILABLE:return Le.UNAVAILABLE;case or.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case or.NOT_FOUND:return Le.NOT_FOUND;case or.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case or.ABORTED:return Le.ABORTED;case or.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case or.DATA_LOSS:return Le.DATA_LOSS;default:return Dt()}}(In=or||(or={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";function ta(){return new TextEncoder}const rd=new Pi([4294967295,4294967295],0);function _h(i){const e=ta().encode(i),n=new Jh;return n.update(e),new Uint8Array(n.digest())}function id(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Pi([n,s],0),new Pi([u,l],0)]}class ec{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new g(`Invalid padding: ${n}`);if(s<0)throw new g(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new g(`Invalid hash count: ${s}`);if(0===e.length&&0!==n)throw new g(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Pi.fromNumber(this.Te)}de(e,n,s){let u=e.add(n.multiply(Pi.fromNumber(s)));return 1===u.compare(rd)&&(u=new Pi([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=_h(e),[s,u]=id(n);for(let l=0;l<this.hashCount;l++){const p=this.de(s,u,l);if(!this.Ae(p))return!1}return!0}static create(e,n,s){const u=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),p=new ec(l,u,n);return s.forEach(T=>p.insert(T)),p}insert(e){if(0===this.Te)return;const n=_h(e),[s,u]=id(n);for(let l=0;l<this.hashCount;l++){const p=this.de(s,u,l);this.Re(p)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class d{constructor(e,n,s,u,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const u=new Map;return u.set(e,f.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new d(Et.min(),u,new ir(Kt),ls(),nn())}}class f{constructor(e,n,s,u,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new f(s,n,nn(),nn(),nn())}}class _{constructor(e,n,s,u){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=u}}class P{constructor(e,n){this.targetId=e,this.fe=n}}class F{constructor(e,n,s=ri.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=u}}class ee{constructor(){this.ge=0,this.pe=pt(),this.ye=ri.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=nn(),n=nn(),s=nn();return this.pe.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:s=s.add(u);break;default:Dt()}}),new f(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=pt()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,xt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Ie{constructor(e){this.Le=e,this.ke=new Map,this.qe=ls(),this.Qe=ze(),this.Ke=new ir(Kt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:Dt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,s=e.fe.count,u=this.Ye(n);if(u){const l=u.target;if(jl(l))if(0===s){const p=new _t(l.path);this.We(n,p,pr.newNoDocument(p,Et.min()))}else xt(1===s);else{const p=this.Ze(n);if(p!==s){const T=this.Xe(e),S=T?this.et(T,e,p):1;0!==S&&(this.He(n),this.Ke=this.Ke.insert(n,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:l=0}=n;let p,T;try{p=Ir(s).toUint8Array()}catch(S){if(S instanceof wa)return Er("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{T=new ec(p,u,l)}catch(S){return Er(S instanceof g?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===T.Te?null:T}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let u=0;return s.forEach(l=>{const p=this.Le.nt(),T=`projects/${p.projectId}/databases/${p.database}/documents/${l.path.canonicalString()}`;e.mightContain(T)||(this.We(n,l,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((l,p)=>{const T=this.Ye(p);if(T){if(l.current&&jl(T.target)){const S=new _t(T.target.path);null!==this.qe.get(S)||this.st(p,S)||this.We(p,S,pr.newNoDocument(S,e))}l.De&&(n.set(p,l.ve()),l.Fe())}});let s=nn();this.Qe.forEach((l,p)=>{let T=!0;p.forEachWhile(S=>{const x=this.Ye(S);return!x||"TargetPurposeLimboResolution"===x.purpose||(T=!1,!1)}),T&&(s=s.add(l))}),this.qe.forEach((l,p)=>p.setReadTime(e));const u=new d(e,n,this.Ke,this.qe,s);return this.qe=ls(),this.Qe=ze(),this.Ke=new ir(Kt),u}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ee,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Jn(Kt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ee),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ze(){return new ir(_t.comparator)}function pt(){return new ir(_t.comparator)}const Pt={asc:"ASCENDING",desc:"DESCENDING"},Mt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wr={and:"AND",or:"OR"};class js{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $s(i,e){return i.useProto3Json||ru(e)?e:{value:e}}function Pa(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zc(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ef(i,e){return Pa(i,e.toTimestamp())}function Wr(i){return xt(!!i),Et.fromTimestamp(function(n){const s=us(n);return new rr(s.seconds,s.nanos)}(i))}function Ma(i,e){return sd(i,e).canonicalString()}function sd(i,e){const n=(u=i,new gn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function od(i){const e=gn.fromString(i);return xt(T_(e)),e}function xa(i,e){return Ma(i.databaseId,e.path)}function Hs(i,e){const n=od(e);if(n.get(1)!==i.databaseId.projectId)throw new Qe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Qe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new _t(ud(n))}function ad(i,e){return Ma(i.databaseId,e)}function Gc(i){const e=od(i);return 4===e.length?gn.emptyPath():ud(e)}function tc(i){return new gn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ud(i){return xt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ag(i,e,n){return{name:xa(i,e),fields:n.value.mapValue.fields}}function If(i,e,n){const s=Hs(i,e.name),u=Wr(e.updateTime),l=e.createTime?Wr(e.createTime):Et.min(),p=new sr({mapValue:{fields:e.fields}}),T=pr.newFoundDocument(s,u,l,p);return n&&T.setHasCommittedMutations(),n?T.setHasCommittedMutations():T}function Wc(i,e){let n;if(e instanceof yu)n={update:Ag(i,e.key,e.value)};else if(e instanceof vu)n={delete:xa(i,e.key)};else if(e instanceof xo)n={update:Ag(i,e.key,e.data),updateMask:FI(e.fieldMask)};else{if(!(e instanceof gh))return Dt();n={verify:xa(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(l,p){const T=p.transform;if(T instanceof pu)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof gu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Ra)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof mu)return{fieldPath:p.field.canonicalString(),increment:T.Ie};throw Dt()}(0,s))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:Ef(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Dt()),n;var l}function qc(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?Dn.updateTime(Wr(l.updateTime)):void 0!==l.exists?Dn.exists(l.exists):Dn.none():Dn.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(p,T){let S=null;"setToServerValue"in T?(xt("REQUEST_TIME"===T.setToServerValue),S=new pu):"appendMissingElements"in T?S=new gu(T.appendMissingElements.values||[]):"removeAllFromArray"in T?S=new Ra(T.removeAllFromArray.values||[]):"increment"in T?S=new mu(p,T.increment):Dt();const x=En.fromServerFormat(T.fieldPath);return new _u(x,S)}(i,u)):[];var l;if(e.update){const u=Hs(i,e.update.name),l=new sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new xi((e.updateMask.fieldPaths||[]).map(L=>En.fromServerFormat(L)));return new xo(u,l,p,n,s)}return new yu(u,l,n,s)}if(e.delete){const u=Hs(i,e.delete);return new vu(u,n)}if(e.verify){const u=Hs(i,e.verify);return new gh(u,n)}return Dt()}function Sg(i,e){return{documents:[ad(i,e.path)]}}function bg(i,e){const n={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ad(i,u);const l=function(x){if(0!==x.length)return w_(Kn.create(x,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const p=function(x){if(0!==x.length)return x.map(L=>{return{field:fo((oe=L).field),direction:I_(oe.dir)};var oe})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const T=$s(i,e.limit);return null!==T&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(n.structuredQuery.endAt=function(x){return{before:!x.inclusive,values:x.position}}(e.endAt)),{ut:n,parent:u};var x}function E_(i){let e=Gc(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let u=null;if(s>0){xt(1===s);const L=n.from[0];L.allDescendants?u=L.collectionId:e=e.child(L.collectionId)}let l=[];n.where&&(l=function(G){const oe=Rg(G);return oe instanceof Kn&&Ku(oe)?oe.getFilters():[oe]}(n.where));let p=[];n.orderBy&&(p=n.orderBy.map(oe=>{return new Fl(cd((rt=oe).field),function(ct){switch(ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(rt.direction));var rt}));let T=null;n.limit&&(T=function(G){let oe;return oe="object"==typeof G?G.value:G,ru(oe)?null:oe}(n.limit));let S=null;var G;n.startAt&&(S=new ao((G=n.startAt).values||[],!!G.before));let x=null;return n.endAt&&(x=function(G){return new ao(G.values||[],!G.before)}(n.endAt)),Eg(e,u,p,l,T,"F",S,x)}function Rg(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=cd(n.unaryFilter.field);return Jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=cd(n.unaryFilter.field);return Jt.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=cd(n.unaryFilter.field);return Jt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=cd(n.unaryFilter.field);return Jt.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(i):void 0!==i.fieldFilter?Jt.create(cd((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Kn.create(n.compositeFilter.filters.map(s=>Rg(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Dt()}}(n.compositeFilter.op))}(i):Dt();var n}function I_(i){return Pt[i]}function Tf(i){return Mt[i]}function Pg(i){return wr[i]}function fo(i){return{fieldPath:i.canonicalString()}}function cd(i){return En.fromServerFormat(i.fieldPath)}function w_(i){return i instanceof Jt?function(n){if("=="===n.op){if(Ll(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(gg(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Ll(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(gg(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:Tf(n.op),value:n.value}}}(i):i instanceof Kn?function(n){const s=n.getFilters().map(u=>w_(u));return 1===s.length?s[0]:{compositeFilter:{op:Pg(n.op),filters:s}}}(i):Dt()}function FI(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function T_(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class na{constructor(e,n,s,u,l=Et.min(),p=Et.min(),T=ri.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=S}withSequenceNumber(e){return new na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class D_{constructor(e){this.ct=e}}function yh(i,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:xa(l=i.ct,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Pa(l,p.version.toTimestamp()),createTime:Pa(l,p.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return Dt();s.unknownDocument={path:n.path.toArray(),version:nc(e.version)}}var l,p;return s}function dd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(i){const e=new rr(i.seconds,i.nanoseconds);return Et.fromTimestamp(e)}function ic(i,e){const n=(e.baseMutations||[]).map(l=>qc(i.ct,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const s=e.mutations.map(l=>qc(i.ct,l)),u=rr.fromMillis(e.localWriteTimeMs);return new ed(e.batchId,u,n,s)}function hd(i){const e=rc(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?rc(i.lastLimboFreeSnapshotVersion):Et.min();let s;return s=void 0!==i.query.documents?(xt(1===(l=i.query).documents.length),Qi(bs(Gc(l.documents[0])))):function(l){return Qi(E_(l))}(i.query),new na(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,ri.fromBase64String(i.resumeToken));var l}function C_(i,e){const n=nc(e.snapshotVersion),s=nc(e.lastLimboFreeSnapshotVersion);let u;u=jl(e.target)?Sg(i.ct,e.target):bg(i.ct,e.target).ut;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mo(e.target),readTime:n,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Mg(i){const e=E_({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Fc(e,e.limit,"L"):e}function xg(i,e){return new Eu(e.largestBatchId,qc(i.ct,e.overlayMutation))}function A_(i,e){const n=e.path.lastSegment();return[i,di(e.path.popLast()),n]}function S_(i,e,n,s){return{indexId:i,uid:e,sequenceNumber:n,readTime:nc(s.readTime),documentKey:di(s.documentKey.path),largestBatchId:s.largestBatchId}}class sc{getBundleMetadata(e,n){return fd(e).get(n).next(s=>{if(s)return{id:(l=s).bundleId,createTime:rc(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return fd(e).put({bundleId:(u=n).id,createTime:nc(Wr(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return b_(e).get(n).next(s=>{if(s)return{name:(l=s).name,query:Mg(l.bundledQuery),readTime:rc(l.readTime)};var l})}saveNamedQuery(e,n){return b_(e).put({name:(u=n).name,readTime:nc(Wr(u.readTime)),bundledQuery:u.bundledQuery});var u}}function fd(i){return Vr(i,"bundles")}function b_(i){return Vr(i,"namedQueries")}class Ng{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Ng(e,n.uid||"")}getOverlay(e,n){return Df(e).get(A_(this.userId,n)).next(s=>s?xg(this.serializer,s):null)}getOverlays(e,n){const s=lo();return se.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){const u=[];return s.forEach((l,p)=>{const T=new Eu(n,p);u.push(this.ht(e,T))}),se.waitFor(u)}removeOverlaysForBatchId(e,n,s){const u=new Set;n.forEach(p=>u.add(di(p.getCollectionPath())));const l=[];return u.forEach(p=>{const T=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(Df(e).H("collectionPathOverlayIndex",T))}),se.waitFor(l)}getOverlaysForCollection(e,n,s){const u=lo(),l=di(n),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Df(e).W("collectionPathOverlayIndex",p).next(T=>{for(const S of T){const x=xg(this.serializer,S);u.set(x.getKey(),x)}return u})}getOverlaysForCollectionGroup(e,n,s,u){const l=lo();let p;const T=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Df(e).Y({index:"collectionGroupOverlayIndex",range:T},(S,x,L)=>{const G=xg(this.serializer,x);l.size()<u||G.largestBatchId===p?(l.set(G.getKey(),G),p=G.largestBatchId):L.done()}).next(()=>l)}ht(e,n){return Df(e).put(function(u,l,p){const[T,S,x]=A_(l,p.mutation.key);return{userId:l,collectionPath:S,documentId:x,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Wc(u.ct,p.mutation)}}(this.serializer,this.userId,n))}}function Df(i){return Vr(i,"documentOverlays")}class pd{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ur(e.integerValue));else if("doubleValue"in e){const s=Ur(e.doubleValue);isNaN(s)?this.Et(n,13):(this.Et(n,15),Ea(s)?n.dt(0):n.dt(s))}else if("timestampValue"in e){const s=e.timestampValue;this.Et(n,20),"string"==typeof s?n.At(s):(n.At(`${s.seconds||""}`),n.dt(s.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ir(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(n,45),n.dt(s.latitude||0),n.dt(s.longitude||0)}else"mapValue"in e?af(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Dt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const s=e.fields||{};this.Et(n,55);for(const u of Object.keys(s))this.Rt(u,n),this.It(s[u],n)}wt(e,n){const s=e.values||[];this.Et(n,50);for(const u of s)this.It(u,n)}gt(e,n){this.Et(n,37),_t.fromName(e).path.forEach(s=>{this.Et(n,60),this.St(s,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function VI(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function xv(i){const e=64-function(s){let u=0;for(let l=0;l<8;++l){const p=VI(255&s[l]);if(u+=p,8!==p)break}return u}(i);return Math.ceil(e/8)}pd.bt=new pd;class R_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Ct(s.value),s=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Mt(s.value),s=n.next();this.xt()}Ot(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Bt(e){const n=this.Lt(e),s=xv(n);this.kt(1+s),this.buffer[this.position++]=255&s;for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Lt(e),s=xv(n);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let u=n.length-s;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&n[0]);n[0]^=s?255:128;for(let u=1;u<n.length;++u)n[u]^=s?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Nv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Ov{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class vh{constructor(){this.Gt=new R_,this.zt=new Nv(this.Gt),this.jt=new Ov(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Kc{constructor(e,n,s,u){this.indexId=e,this.documentKey=n,this.arrayValue=s,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(n);return s.set(this.directionalValue,0),n!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Kc(this.indexId,this.documentKey,this.arrayValue,s)}}function Na(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Oa(i.arrayValue,e.arrayValue),0!==n?n:(n=Oa(i.directionalValue,e.directionalValue),0!==n?n:_t.comparator(i.documentKey,e.documentKey)))}function Oa(i,e){for(let n=0;n<i.length&&n<e.length;++n){const s=i[n]-e[n];if(0!==s)return s}return i.length-e.length}class gd{constructor(e){this.Yt=new Jn((n,s)=>En.comparator(n.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const s=n;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(xt(e.collectionGroup===this.collectionId),this.en)return!1;const n=Tc(e);if(void 0!==n&&!this.nn(n))return!1;const s=Ro(e);let u=new Set,l=0,p=0;for(;l<s.length&&this.nn(s[l]);++l)u=u.add(s[l].fieldPath.canonicalString());if(l===s.length)return!0;if(this.Yt.size>0){const T=this.Yt.getIterator().getNext();if(!u.has(T.field.canonicalString())){const S=s[l];if(!this.rn(T,S)||!this.sn(this.Zt[p++],S))return!1}++l}for(;l<s.length;++l)if(p>=this.Zt.length||!this.sn(this.Zt[p++],s[l]))return!1;return!0}on(){if(this.en)return null;let e=new Jn(En.comparator);const n=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)n.push(new Us(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Us(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Us(s.field,"asc"===s.dir?0:1)));return new bo(bo.UNKNOWN_ID,this.collectionId,n,D.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Og(i){var e,n;if(xt(i instanceof Jt||i instanceof Kn),i instanceof Jt){if(i instanceof uh){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(l=>Jt.create(i.field,"==",l)))||[];return Kn.create(u,"or")}return i}const s=i.filters.map(u=>Og(u));return Kn.create(s,i.op)}function P_(i){if(0===i.getFilters().length)return[];const e=x_(Og(i));return xt(kv(e)),Cf(e)||M_(e)?[e]:e.getFilters()}function Cf(i){return i instanceof Jt}function M_(i){return i instanceof Kn&&Ku(i)}function kv(i){return Cf(i)||M_(i)||function(n){if(n instanceof Kn&&df(n)){for(const s of n.getFilters())if(!Cf(s)&&!M_(s))return!1;return!0}return!1}(i)}function x_(i){if(xt(i instanceof Jt||i instanceof Kn),i instanceof Jt)return i;if(1===i.filters.length)return x_(i.filters[0]);const e=i.filters.map(s=>x_(s));let n=Kn.create(e,i.op);return n=kg(n),kv(n)?n:(xt(n instanceof Kn),xt(uo(n)),xt(n.filters.length>1),n.filters.reduce((s,u)=>Eh(s,u)))}function Eh(i,e){let n;return xt(i instanceof Jt||i instanceof Kn),xt(e instanceof Jt||e instanceof Kn),n=i instanceof Jt?e instanceof Jt?Kn.create([i,e],"and"):Af(i,e):e instanceof Jt?Af(e,i):function(u,l){if(xt(u.filters.length>0&&l.filters.length>0),uo(u)&&uo(l))return hf(u,l.getFilters());const p=df(u)?u:l,T=df(u)?l:u,S=p.filters.map(x=>Eh(x,T));return Kn.create(S,"or")}(i,e),kg(n)}function Af(i,e){if(uo(e))return hf(e,i.getFilters());{const n=e.filters.map(s=>Eh(i,s));return Kn.create(n,"or")}}function kg(i){if(xt(i instanceof Jt||i instanceof Kn),i instanceof Jt)return i;const e=i.getFilters();if(1===e.length)return kg(e[0]);if(Vl(i))return i;const n=e.map(u=>kg(u)),s=[];return n.forEach(u=>{u instanceof Jt?s.push(u):u instanceof Kn&&(u.op===i.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:Kn.create(s,i.op)}class UI{constructor(){this._n=new Sf}addToCollectionParentIndex(e,n){return this._n.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(R.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(R.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class Sf{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n]||new Jn(gn.comparator),l=!u.has(s);return this.index[n]=u.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),u=this.index[n];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Jn(gn.comparator)).toArray()}}const bf=new Uint8Array(0);class Lv{constructor(e,n){this.databaseId=n,this.an=new Sf,this.un=new co(s=>Mo(s),(s,u)=>Qu(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const s=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const l={collectionId:s,parent:di(u)};return N_(e).put(l)}return se.resolve()}getCollectionParents(e,n){const s=[],u=IDBKeyRange.bound([n,""],[Jd(n),""],!1,!0);return N_(e).W(u).next(l=>{for(const p of l){if(p.collectionId!==n)break;s.push(As(p.parent))}return s})}addFieldIndex(e,n){const s=_d(e),u={indexId:(T=n).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var T;delete u.indexId;const l=s.add(u);if(n.indexState){const p=Iu(e);return l.next(T=>{p.put(S_(T,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return l.next()}deleteFieldIndex(e,n){const s=_d(e),u=Iu(e),l=md(e);return s.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=_d(e),s=md(e),u=Iu(e);return n.H().next(()=>s.H()).next(()=>u.H())}createTargetIndexes(e,n){return se.forEach(this.cn(n),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const l=new gd(s).on();if(null!=l)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,n){const s=md(e);let u=!0;const l=new Map;return se.forEach(this.cn(n),p=>this.ln(e,p).next(T=>{u&&(u=!!T),l.set(p,T)})).next(()=>{if(u){let p=nn();const T=[];return se.forEach(l,(S,x)=>{var Lt;Ne("IndexedDbIndexManager",`Using index ${Lt=S,`id=${Lt.indexId}|cg=${Lt.collectionGroup}|f=${Lt.fields.map(on=>`${on.fieldPath}:${on.kind}`).join(",")}`} to execute ${Mo(n)}`);const L=function(Lt,on){const Hn=Tc(on);if(void 0===Hn)return null;for(const Zn of $l(Lt,Hn.fieldPath))switch(Zn.op){case"array-contains-any":return Zn.value.arrayValue.values||[];case"array-contains":return[Zn.value]}return null}(x,S),G=function(Lt,on){const Hn=new Map;for(const Zn of Ro(on))for(const si of $l(Lt,Zn.fieldPath))switch(si.op){case"==":case"in":Hn.set(Zn.fieldPath.canonicalString(),si.value);break;case"not-in":case"!=":return Hn.set(Zn.fieldPath.canonicalString(),si.value),Array.from(Hn.values())}return null}(x,S),oe=function(Lt,on){const Hn=[];let Zn=!0;for(const si of Ro(on)){const Gi=0===si.kind?Da(Lt,si.fieldPath,Lt.startAt):Yu(Lt,si.fieldPath,Lt.startAt);Hn.push(Gi.value),Zn&&(Zn=Gi.inclusive)}return new ao(Hn,Zn)}(x,S),be=function(Lt,on){const Hn=[];let Zn=!0;for(const si of Ro(on)){const Gi=0===si.kind?Yu(Lt,si.fieldPath,Lt.endAt):Da(Lt,si.fieldPath,Lt.endAt);Hn.push(Gi.value),Zn&&(Zn=Gi.inclusive)}return new ao(Hn,Zn)}(x,S),rt=this.hn(S,x,oe),gt=this.hn(S,x,be),ct=this.Pn(S,x,G),Ft=this.In(S.indexId,L,rt,oe.inclusive,gt,be.inclusive,ct);return se.forEach(Ft,sn=>s.j(sn,n.limit).next(Lt=>{Lt.forEach(on=>{const Hn=_t.fromSegments(on.documentKey);p.has(Hn)||(p=p.add(Hn),T.push(Hn))})}))}).next(()=>T)}return se.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:P_(Kn.create(e.filters,"and")).map(s=>Lc(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,s,u,l,p,T){const S=(null!=n?n.length:1)*Math.max(s.length,l.length),x=S/(null!=n?n.length:1),L=[];for(let G=0;G<S;++G){const oe=n?this.Tn(n[G/x]):bf,be=this.En(e,oe,s[G%x],u),rt=this.dn(e,oe,l[G%x],p),gt=T.map(ct=>this.En(e,oe,ct,!0));L.push(...this.createRange(be,rt,gt))}return L}En(e,n,s,u){const l=new Kc(e,_t.empty(),n,s);return u?l:l.Jt()}dn(e,n,s,u){const l=new Kc(e,_t.empty(),n,s);return u?l.Jt():l}ln(e,n){const s=new gd(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(l=>{let p=null;for(const T of l)s.tn(T)&&(!p||T.fields.length>p.fields.length)&&(p=T);return p})}getIndexType(e,n){let s=2;const u=this.cn(n);return se.forEach(u,l=>this.ln(e,l).next(p=>{p?0!==s&&p.fields.length<function(S){let x=new Jn(En.comparator),L=!1;for(const G of S.filters)for(const oe of G.getFlattenedFilters())oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?L=!0:x=x.add(oe.field));for(const G of S.orderBy)G.field.isKeyField()||(x=x.add(G.field));return x.size+(L?1:0)}(l)&&(s=1):s=0})).next(()=>null!==n.limit&&u.length>1&&2===s?1:s)}An(e,n){const s=new vh;for(const u of Ro(e)){const l=n.data.field(u.fieldPath);if(null==l)return null;const p=s.Ht(u.kind);pd.bt.Pt(l,p)}return s.Wt()}Tn(e){const n=new vh;return pd.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const s=new vh;return pd.bt.Pt(Gu(this.databaseId,n),s.Ht(function(l){const p=Ro(l);return 0===p.length?0:p[p.length-1].kind}(e))),s.Wt()}Pn(e,n,s){if(null===s)return[];let u=[];u.push(new vh);let l=0;for(const p of Ro(e)){const T=s[l++];for(const S of u)if(this.Vn(n,p.fieldPath)&&Nc(T))u=this.mn(u,p,T);else{const x=S.Ht(p.kind);pd.bt.Pt(T,x)}}return this.fn(u)}hn(e,n,s){return this.Pn(e,n,s.position)}fn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].Wt();return n}mn(e,n,s){const u=[...e],l=[];for(const p of s.arrayValue.values||[])for(const T of u){const S=new vh;S.seed(T.Wt()),pd.bt.Pt(p,S.Ht(n.kind)),l.push(S)}return l}Vn(e,n){return!!e.filters.find(s=>s instanceof Jt&&s.field.isEqual(n)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,n){const s=_d(e),u=Iu(e);return(n?s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):s.W()).next(l=>{const p=[];return se.forEach(l,T=>u.get([T.indexId,this.uid]).next(S=>{p.push(function(L,G){const oe=G?new D(G.sequenceNumber,new R(rc(G.readTime),new _t(As(G.documentKey)),G.largestBatchId)):D.empty(),be=L.fields.map(([rt,gt])=>new Us(En.fromServerFormat(rt),gt));return new bo(L.indexId,L.collectionGroup,be,oe)}(T,S))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((s,u)=>{const l=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==l?l:Kt(s.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const u=_d(e),l=Iu(e);return this.gn(e).next(p=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(T=>se.forEach(T,S=>l.put(S_(S.indexId,this.uid,p,s)))))}updateIndexEntries(e,n){const s=new Map;return se.forEach(n,(u,l)=>{const p=s.get(u.collectionGroup);return(p?se.resolve(p):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(s.set(u.collectionGroup,T),se.forEach(T,S=>this.pn(e,u,S).next(x=>{const L=this.yn(l,S);return x.isEqual(L)?se.resolve():this.wn(e,l,S,x,L)}))))})}Sn(e,n,s,u){return md(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(s,n.key),documentKey:n.key.path.toArray()})}bn(e,n,s,u){return md(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(s,n.key),n.key.path.toArray()])}pn(e,n,s){const u=md(e);let l=new Jn(Na);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,n)])},(p,T)=>{l=l.add(new Kc(s.indexId,n,T.arrayValue,T.directionalValue))}).next(()=>l)}yn(e,n){let s=new Jn(Na);const u=this.An(n,e);if(null==u)return s;const l=Tc(n);if(null!=l){const p=e.data.field(l.fieldPath);if(Nc(p))for(const T of p.arrayValue.values||[])s=s.add(new Kc(n.indexId,e.key,this.Tn(T),u))}else s=s.add(new Kc(n.indexId,e.key,bf,u));return s}wn(e,n,s,u,l){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const p=[];return function(S,x,L,G,oe){const be=S.getIterator(),rt=x.getIterator();let gt=Ia(be),ct=Ia(rt);for(;gt||ct;){let Ft=!1,sn=!1;if(gt&&ct){const Lt=L(gt,ct);Lt<0?sn=!0:Lt>0&&(Ft=!0)}else null!=gt?sn=!0:Ft=!0;Ft?(G(ct),ct=Ia(rt)):sn?(oe(gt),gt=Ia(be)):(gt=Ia(be),ct=Ia(rt))}}(u,l,Na,T=>{p.push(this.Sn(e,n,s,T))},T=>{p.push(this.bn(e,n,s,T))}),se.waitFor(p)}gn(e){let n=1;return Iu(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,l)=>{l.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((p,T)=>Na(p,T)).filter((p,T,S)=>!T||0!==Na(p,S[T-1]));const u=[];u.push(e);for(const p of s){const T=Na(p,e),S=Na(p,n);if(0===T)u[0]=e.Jt();else if(T>0&&S<0)u.push(p),u.push(p.Jt());else if(S>0)break}u.push(n);const l=[];for(let p=0;p<u.length;p+=2){if(this.Dn(u[p],u[p+1]))return[];l.push(IDBKeyRange.bound([u[p].indexId,this.uid,u[p].arrayValue,u[p].directionalValue,bf,[]],[u[p+1].indexId,this.uid,u[p+1].arrayValue,u[p+1].directionalValue,bf,[]]))}return l}Dn(e,n){return Na(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(O_)}getMinOffset(e,n){return se.mapArray(this.cn(n),s=>this.ln(e,s).next(u=>u||Dt())).next(O_)}}function N_(i){return Vr(i,"collectionParents")}function md(i){return Vr(i,"indexEntries")}function _d(i){return Vr(i,"indexConfiguration")}function Iu(i){return Vr(i,"indexState")}function O_(i){xt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;U(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new R(e.readTime,e.documentKey,n)}const Rf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ds{constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zc(i,e,n){const s=i.store("mutations"),u=i.store("documentMutations"),l=[],p=IDBKeyRange.only(n.batchId);let T=0;const S=s.Y({range:p},(L,G,oe)=>(T++,oe.delete()));l.push(S.next(()=>{xt(1===T)}));const x=[];for(const L of n.mutations){const G=ju(e,L.key.path,n.batchId);l.push(u.delete(G)),x.push(L.key)}return se.waitFor(l).next(()=>x)}function Pf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Dt();e=i.noDocument}return JSON.stringify(e).length}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(41943040,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class Mf{constructor(e,n,s,u){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=u,this.Cn={}}static lt(e,n,s,u){xt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Mf(l,n,s,u)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).Y({index:"userMutationsIndex",range:s},(u,l,p)=>{n=!1,p.done()}).next(()=>n)}addMutationBatch(e,n,s,u){const l=yd(e),p=wu(e);return p.add({}).next(T=>{xt("number"==typeof T);const S=new ed(T,n,s,u),x=function(be,rt,gt){const ct=gt.baseMutations.map(sn=>Wc(be.ct,sn)),Ft=gt.mutations.map(sn=>Wc(be.ct,sn));return{userId:rt,batchId:gt.batchId,localWriteTimeMs:gt.localWriteTime.toMillis(),baseMutations:ct,mutations:Ft}}(this.serializer,this.userId,S),L=[];let G=new Jn((oe,be)=>Kt(oe.canonicalString(),be.canonicalString()));for(const oe of u){const be=ju(this.userId,oe.key.path,T);G=G.add(oe.key.path.popLast()),L.push(p.put(x)),L.push(l.put(be,eh))}return G.forEach(oe=>{L.push(this.indexManager.addToCollectionParentIndex(e,oe))}),e.addOnCommittedListener(()=>{this.Cn[T]=S.keys()}),se.waitFor(L).next(()=>S)})}lookupMutationBatch(e,n){return wu(e).get(n).next(s=>s?(xt(s.userId===this.userId),ic(this.serializer,s)):null)}vn(e,n){return this.Cn[n]?se.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const u=s.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,u=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return wu(e).Y({index:"userMutationsIndex",range:u},(p,T,S)=>{T.userId===this.userId&&(xt(T.batchId>=s),l=ic(this.serializer,T)),S.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return wu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).W("userMutationsIndex",n).next(s=>s.map(u=>ic(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=so(this.userId,n.path),u=IDBKeyRange.lowerBound(s),l=[];return yd(e).Y({range:u},(p,T,S)=>{const[x,L,G]=p,oe=As(L);if(x===this.userId&&n.path.isEqual(oe))return wu(e).get(G).next(be=>{if(!be)throw Dt();xt(be.userId===this.userId),l.push(ic(this.serializer,be))});S.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Jn(Kt);const u=[];return n.forEach(l=>{const p=so(this.userId,l.path),T=IDBKeyRange.lowerBound(p),S=yd(e).Y({range:T},(x,L,G)=>{const[oe,be,rt]=x,gt=As(be);oe===this.userId&&l.path.isEqual(gt)?s=s.add(rt):G.done()});u.push(S)}),se.waitFor(u).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1,l=so(this.userId,s),p=IDBKeyRange.lowerBound(l);let T=new Jn(Kt);return yd(e).Y({range:p},(S,x,L)=>{const[G,oe,be]=S,rt=As(oe);G===this.userId&&s.isPrefixOf(rt)?rt.length===u&&(T=T.add(be)):L.done()}).next(()=>this.Fn(e,T))}Fn(e,n){const s=[],u=[];return n.forEach(l=>{u.push(wu(e).get(l).next(p=>{if(null===p)throw Dt();xt(p.userId===this.userId),s.push(ic(this.serializer,p))}))}),se.waitFor(u).next(()=>s)}removeMutationBatch(e,n){return Zc(e.ae,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),se.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return se.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return yd(e).Y({range:s},(l,p,T)=>{if(l[0]===this.userId){const S=As(l[1]);u.push(S)}else T.done()}).next(()=>{xt(0===u.length)})})}containsKey(e,n){return Lg(e,this.userId,n)}xn(e){return k_(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lg(i,e,n){const s=so(e,n.path),u=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return yd(i).Y({range:l,J:!0},(T,S,x)=>{const[L,G,oe]=T;L===e&&G===u&&(p=!0),x.done()}).next(()=>p)}function wu(i){return Vr(i,"mutations")}function yd(i){return Vr(i,"documentMutations")}function k_(i){return Vr(i,"mutationQueues")}class Qc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Qc(0)}static Bn(){return new Qc(-1)}}class Fv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const s=new Qc(n.highestTargetId);return n.highestTargetId=s.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>Et.fromTimestamp(new rr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.Ln(e).next(u=>(u.highestListenSequenceNumber=n,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(s=>(s.targetCount+=1,this.Qn(n,s),this.kn(e,s))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yc(e).delete(n.targetId)).next(()=>this.Ln(e)).next(s=>(xt(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,n,s){let u=0;const l=[];return Yc(e).Y((p,T)=>{const S=hd(T);S.sequenceNumber<=n&&null===s.get(S.targetId)&&(u++,l.push(this.removeTargetData(e,S)))}).next(()=>se.waitFor(l)).next(()=>u)}forEachTarget(e,n){return Yc(e).Y((s,u)=>{const l=hd(u);n(l)})}Ln(e){return Vv(e).get("targetGlobalKey").next(n=>(xt(null!==n),n))}kn(e,n){return Vv(e).put("targetGlobalKey",n)}qn(e,n){return Yc(e).put(C_(this.serializer,n))}Qn(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const s=Mo(n),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Yc(e).Y({range:u,index:"queryTargetsIndex"},(p,T,S)=>{const x=hd(T);Qu(n,x.target)&&(l=x,S.done())}).next(()=>l)}addMatchingKeys(e,n,s){const u=[],l=Jc(e);return n.forEach(p=>{const T=di(p.path);u.push(l.put({targetId:s,path:T})),u.push(this.referenceDelegate.addReference(e,s,p))}),se.waitFor(u)}removeMatchingKeys(e,n,s){const u=Jc(e);return se.forEach(n,l=>{const p=di(l.path);return se.waitFor([u.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,n){const s=Jc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),u=Jc(e);let l=nn();return u.Y({range:s,J:!0},(p,T,S)=>{const x=As(p[1]),L=new _t(x);l=l.add(L)}).next(()=>l)}containsKey(e,n){const s=di(n.path),u=IDBKeyRange.bound([s],[Jd(s)],!1,!0);let l=0;return Jc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([p,T],S,x)=>{0!==p&&(l++,x.done())}).next(()=>l>0)}_t(e,n){return Yc(e).get(n).next(s=>s?hd(s):null)}}function Yc(i){return Vr(i,"targets")}function Vv(i){return Vr(i,"targetGlobal")}function Jc(i){return Vr(i,"targetDocuments")}function vd([i,e],[n,s]){const u=Kt(i,n);return 0===u?Kt(e,s):u}class Ih{constructor(e){this.Kn=e,this.buffer=new Jn(vd),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();vd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fg{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(s){os(s)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Ce(s)}yield n.zn(3e5)}))}}class L_{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(0===n)return se.resolve(ni._e);const s=new Ih(n);return this.jn.forEachTarget(e,u=>s.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>s.Wn(u))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.jn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Rf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rf):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let s,u,l,p,T,S,x;const L=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(G=>(G>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${G}`),u=this.params.maximumSequenceNumbersToCollect):u=G,p=Date.now(),this.nthSequenceNumber(e,u))).next(G=>(s=G,T=Date.now(),this.removeTargets(e,s,n))).next(G=>(l=G,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(G=>(x=Date.now(),io()<=At.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-L}ms\n\tDetermined least recently used ${u} in `+(T-p)+`ms\n\tRemoved ${l} targets in `+(S-T)+`ms\n\tRemoved ${G} documents in `+(x-S)+`ms\nTotal Duration: ${x-L}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:G})))}}class Vg{constructor(e,n){this.db=e,this.garbageCollector=function xf(i,e){return new L_(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(u=>s+u))}Zn(e){let n=0;return this.Jn(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(s,u)=>n(u))}addReference(e,n,s){return Nf(e,s)}removeReference(e,n,s){return Nf(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return Nf(e,n)}er(e,n){return function(u,l){let p=!1;return k_(u).Z(T=>Lg(u,T,l).next(S=>(S&&(p=!0),se.resolve(!S)))).next(()=>p)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Xn(e,(p,T)=>{if(T<=n){const S=this.er(e,p).next(x=>{if(!x)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Et.min()),Jc(e).delete([0,di(p.path)])))});u.push(S)}}).next(()=>se.waitFor(u)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return Nf(e,n)}Xn(e,n){const s=Jc(e);let u,l=ni._e;return s.Y({index:"documentTargetsIndex"},([p,T],{path:S,sequenceNumber:x})=>{0===p?(l!==ni._e&&n(new _t(As(u)),l),l=x,u=S):l=ni._e}).next(()=>{l!==ni._e&&n(new _t(As(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nf(i,e){return Jc(i).put((u=i.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:u}));var u}class Ug{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return void 0!==s?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Xc(e).put(s)}removeEntry(e,n,s){return Xc(e).delete(function(l,p){const T=l.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],dd(p),T[T.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.tr(e,s)))}getEntry(e,n){let s=pr.newInvalidDocument(n);return Xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(el(n))},(u,l)=>{s=this.nr(n,l)}).next(()=>s)}rr(e,n){let s={size:0,document:pr.newInvalidDocument(n)};return Xc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(el(n))},(u,l)=>{s={document:this.nr(n,l),size:Pf(l)}}).next(()=>s)}getEntries(e,n){let s=ls();return this.ir(e,n,(u,l)=>{const p=this.nr(u,l);s=s.insert(u,p)}).next(()=>s)}sr(e,n){let s=ls(),u=new ir(_t.comparator);return this.ir(e,n,(l,p)=>{const T=this.nr(l,p);s=s.insert(l,T),u=u.insert(l,Pf(p))}).next(()=>({documents:s,_r:u}))}ir(e,n,s){if(n.isEmpty())return se.resolve();let u=new Jn(jg);n.forEach(S=>u=u.add(S));const l=IDBKeyRange.bound(el(u.first()),el(u.last())),p=u.getIterator();let T=p.getNext();return Xc(e).Y({index:"documentKeyIndex",range:l},(S,x,L)=>{const G=_t.fromSegments([...x.prefixPath,x.collectionGroup,x.documentId]);for(;T&&jg(T,G)<0;)s(T,null),T=p.getNext();T&&T.isEqual(G)&&(s(T,x),T=p.hasNext()?p.getNext():null),T?L.U(el(T)):L.done()}).next(()=>{for(;T;)s(T,null),T=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,n,s,u,l){const p=n.path,T=[p.popLast().toArray(),p.lastSegment(),dd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xc(e).W(IDBKeyRange.bound(T,S,!0)).next(x=>{l?.incrementDocumentReadCount(x.length);let L=ls();for(const G of x){const oe=this.nr(_t.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);oe.isFoundDocument()&&(Sa(n,oe)||u.has(oe.key))&&(L=L.insert(oe.key,oe))}return L})}getAllFromCollectionGroup(e,n,s,u){let l=ls();const p=Bg(n,s),T=Bg(n,R.max());return Xc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,T,!0)},(S,x,L)=>{const G=this.nr(_t.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);l=l.insert(G.key,G),l.size===u&&L.done()}).next(()=>l)}newChangeBuffer(e){return new BI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Of(e).get("remoteDocumentGlobalKey").next(n=>(xt(!!n),n))}tr(e,n){return Of(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const s=function ld(i,e){let n;if(e.document)n=If(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=_t.fromSegments(e.noDocument.path),u=rc(e.noDocument.readTime);n=pr.newNoDocument(s,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dt();{const s=_t.fromSegments(e.unknownDocument.path),u=rc(e.unknownDocument.version);n=pr.newUnknownDocument(s,u)}}return e.readTime&&n.setReadTime(function(u){const l=new rr(u[0],u[1]);return Et.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!s.isNoDocument()||!s.version.isEqual(Et.min()))return s}return pr.newInvalidDocument(e)}}function wh(i){return new F_(i)}class BI extends Ug{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new co(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const n=[];let s=0,u=new Jn((l,p)=>Kt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const T=this.ur.get(l);if(n.push(this.ar.removeEntry(e,l,T.readTime)),p.isValidDocument()){const S=yh(this.ar.serializer,p);u=u.add(l.path.popLast());const x=Pf(S);s+=x-T.size,n.push(this.ar.addEntry(e,l,S))}else if(s-=T.size,this.trackRemovals){const S=yh(this.ar.serializer,p.convertToNoDocument(Et.min()));n.push(this.ar.addEntry(e,l,S))}}),u.forEach(l=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,l))}),n.push(this.ar.updateMetadata(e,s)),se.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(s=>(this.ur.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:s,_r:u})=>(u.forEach((l,p)=>{this.ur.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function Of(i){return Vr(i,"remoteDocumentGlobal")}function Xc(i){return Vr(i,"remoteDocumentsV14")}function el(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bg(i,e){const n=e.documentKey.path.toArray();return[i,dd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jg(i,e){const n=i.path.toArray(),s=e.path.toArray();let u=0;for(let l=0;l<n.length-2&&l<s.length-2;++l)if(u=Kt(n[l],s[l]),u)return u;return u=Kt(n.length,s.length),u||(u=Kt(n[n.length-2],s[s.length-2]),u||Kt(n[n.length-1],s[s.length-1]))}class tl{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class V_{constructor(e,n,s,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==s&&ho(s.mutation,u,xi.empty(),rr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,nn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=nn()){const u=lo();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,s).next(l=>{let p=zl();return l.forEach((T,S)=>{p=p.insert(T,S.overlayedDocument)}),p}))}getOverlayedDocuments(e,n){const s=lo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,nn()))}populateOverlays(e,n,s){const u=[];return s.forEach(l=>{n.has(l)||u.push(l)}),this.documentOverlayCache.getOverlays(e,u).next(l=>{l.forEach((p,T)=>{n.set(p,T)})})}computeViews(e,n,s,u){let l=ls();const p=Gl(),T=Gl();return n.forEach((S,x)=>{const L=s.get(x.key);u.has(x.key)&&(void 0===L||L.mutation instanceof xo)?l=l.insert(x.key,x):void 0!==L?(p.set(x.key,L.mutation.getFieldMask()),ho(L.mutation,x,L.mutation.getFieldMask(),rr.now())):p.set(x.key,xi.empty())}),this.recalculateAndSaveOverlays(e,l).next(S=>(S.forEach((x,L)=>p.set(x,L)),n.forEach((x,L)=>{var G;return T.set(x,new tl(L,null!==(G=p.get(x))&&void 0!==G?G:null))}),T))}recalculateAndSaveOverlays(e,n){const s=Gl();let u=new ir((p,T)=>p-T),l=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(p=>{for(const T of p)T.keys().forEach(S=>{const x=n.get(S);if(null===x)return;let L=s.get(S)||xi.empty();L=T.applyToLocalView(x,L),s.set(S,L);const G=(u.get(T.batchId)||nn()).add(S);u=u.insert(T.batchId,G)})}).next(()=>{const p=[],T=u.getReverseIterator();for(;T.hasNext();){const S=T.getNext(),x=S.key,L=S.value,G=dh();L.forEach(oe=>{if(!l.has(oe)){const be=jc(n.get(oe),s.get(oe));null!==be&&G.set(oe,be),l=l.add(oe)}}),p.push(this.documentOverlayCache.saveOverlays(e,x,G))}return se.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,u){return _t.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):gf(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,u):this.getDocumentsMatchingCollectionQuery(e,n,s,u);var p}getNextDocuments(e,n,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,u).next(l=>{const p=u-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,u-l.size):se.resolve(lo());let T=-1,S=l;return p.next(x=>se.forEach(x,(L,G)=>(T<G.largestBatchId&&(T=G.largestBatchId),l.get(L)?se.resolve():this.remoteDocumentCache.getEntry(e,L).next(oe=>{S=S.insert(L,oe)}))).next(()=>this.populateOverlays(e,x,l)).next(()=>this.computeViews(e,S,x,nn())).next(L=>({batchId:T,changes:Tg(L)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _t(n)).next(s=>{let u=zl();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,s,u){const l=n.collectionGroup;let p=zl();return this.indexManager.getCollectionParents(e,l).next(T=>se.forEach(T,S=>{const x=(G=n,oe=S.child(l),new Ca(oe,null,G.explicitOrderBy.slice(),G.filters.slice(),G.limit,G.limitType,G.startAt,G.endAt));var G,oe;return this.getDocumentsMatchingCollectionQuery(e,x,s,u).next(L=>{L.forEach((G,oe)=>{p=p.insert(G,oe)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,n,s,u){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(p=>(l=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,u))).next(p=>{l.forEach((S,x)=>{const L=x.getKey();null===p.get(L)&&(p=p.insert(L,pr.newInvalidDocument(L)))});let T=zl();return p.forEach((S,x)=>{const L=l.get(S);void 0!==L&&ho(L.mutation,x,xi.empty(),rr.now()),Sa(n,x)&&(T=T.insert(S,x))}),T})}}class $g{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return se.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:Wr(u.createTime)}),se.resolve();var u}getNamedQuery(e,n){return se.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:Mg(u.bundledQuery),readTime:Wr(u.readTime)}),se.resolve();var u}}class kf{constructor(){this.overlays=new ir(_t.comparator),this.hr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=lo();return se.forEach(n,u=>this.getOverlay(e,u).next(l=>{null!==l&&s.set(u,l)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((u,l)=>{this.ht(e,n,l)}),se.resolve()}removeOverlaysForBatchId(e,n,s){const u=this.hr.get(s);return void 0!==u&&(u.forEach(l=>this.overlays=this.overlays.remove(l)),this.hr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const u=lo(),l=n.length+1,p=new _t(n.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const S=T.getNext().value,x=S.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===l&&S.largestBatchId>s&&u.set(S.getKey(),S)}return se.resolve(u)}getOverlaysForCollectionGroup(e,n,s,u){let l=new ir((x,L)=>x-L);const p=this.overlays.getIterator();for(;p.hasNext();){const x=p.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>s){let L=l.get(x.largestBatchId);null===L&&(L=lo(),l=l.insert(x.largestBatchId,L)),L.set(x.getKey(),x)}}const T=lo(),S=l.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((x,L)=>T.set(x,L)),!(T.size()>=u)););return se.resolve(T)}ht(e,n,s){const u=this.overlays.get(s.key);if(null!==u){const p=this.hr.get(u.largestBatchId).delete(s.key);this.hr.set(u.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new Eu(n,s));let l=this.hr.get(n);void 0===l&&(l=nn(),this.hr.set(n,l)),this.hr.set(n,l.add(s.key))}}class Hg{constructor(){this.Pr=new Jn(Di.Ir),this.Tr=new Jn(Di.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const s=new Di(e,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Ar(new Di(e,n))}Rr(e,n){e.forEach(s=>this.removeReference(s,n))}Vr(e){const n=new _t(new gn([])),s=new Di(n,e),u=new Di(n,e+1),l=[];return this.Tr.forEachInRange([s,u],p=>{this.Ar(p),l.push(p.key)}),l}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new _t(new gn([])),s=new Di(n,e),u=new Di(n,e+1);let l=nn();return this.Tr.forEachInRange([s,u],p=>{l=l.add(p.key)}),l}containsKey(e){const n=new Di(e,0),s=this.Pr.firstAfterOrEqual(n);return null!==s&&e.isEqual(s.key)}}class Di{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return _t.comparator(e.key,n.key)||Kt(e.pr,n.pr)}static Er(e,n){return Kt(e.pr,n.pr)||_t.comparator(e.key,n.key)}}class Lf{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Jn(Di.Ir)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,s,u){const l=this.yr;this.yr++;const p=new ed(l,n,s,u);this.mutationQueue.push(p);for(const T of u)this.wr=this.wr.add(new Di(T.key,l)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return se.resolve(p)}lookupMutationBatch(e,n){return se.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),l=u<0?0:u;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Di(n,0),u=new Di(n,Number.POSITIVE_INFINITY),l=[];return this.wr.forEachInRange([s,u],p=>{const T=this.Sr(p.pr);l.push(T)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Jn(Kt);return n.forEach(u=>{const l=new Di(u,0),p=new Di(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([l,p],T=>{s=s.add(T.pr)})}),se.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,u=s.length+1;let l=s;_t.isDocumentKey(l)||(l=l.child(""));const p=new Di(new _t(l),0);let T=new Jn(Kt);return this.wr.forEachWhile(S=>{const x=S.key.path;return!!s.isPrefixOf(x)&&(x.length===u&&(T=T.add(S.pr)),!0)},p),se.resolve(this.Dr(T))}Dr(e){const n=[];return e.forEach(s=>{const u=this.Sr(s);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){xt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return se.forEach(n.mutations,u=>{const l=new Di(u.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,n){const s=new Di(n,0),u=this.wr.firstAfterOrEqual(s);return se.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return se.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ka{constructor(e){this.vr=e,this.docs=new ir(_t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,u=this.docs.get(s),l=u?u.size:0,p=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(e,n){let s=ls();return n.forEach(u=>{const l=this.docs.get(u);s=s.insert(u,l?l.document.mutableCopy():pr.newInvalidDocument(u))}),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,u){let l=ls();const p=n.path,T=new _t(p.child("")),S=this.docs.getIteratorFrom(T);for(;S.hasNext();){const{key:x,value:{document:L}}=S.getNext();if(!p.isPrefixOf(x.path))break;x.path.length>p.length+1||U(A(L),s)<=0||(u.has(L.key)||Sa(n,L))&&(l=l.insert(L.key,L.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,n,s,u){Dt()}Fr(e,n){return se.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Ed(this)}getSize(e){return se.resolve(this.size)}}class Ed extends Ug{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(s)}),se.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class zg{constructor(e){this.persistence=e,this.Mr=new co(n=>Mo(n),Qu),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Hg,this.targetCount=0,this.Br=Qc.Nn()}forEachTarget(e,n){return this.Mr.forEach((s,u)=>n(u)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),se.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Qc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.qn(n),se.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let u=0;const l=[];return this.Mr.forEach((p,T)=>{T.sequenceNumber<=n&&null===s.get(T.targetId)&&(this.Mr.delete(p),l.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),se.waitFor(l).next(()=>u)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.Mr.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this.Nr.dr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this.Nr.Rr(n,s);const u=this.persistence.referenceDelegate,l=[];return u&&n.forEach(p=>{l.push(u.markPotentiallyOrphaned(e,p))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Nr.gr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this.Nr.containsKey(n))}}class Gg{constructor(e,n){this.Lr={},this.overlays={},this.kr=new ni(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new zg(this),this.indexManager=new UI,this.remoteDocumentCache=new ka(s=>this.referenceDelegate.Kr(s)),this.serializer=new D_(n),this.$r=new $g(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kf,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Lr[e.toKey()];return s||(s=new Lf(n,this.referenceDelegate),this.Lr[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,s){Ne("MemoryPersistence","Starting transaction:",e);const u=new Uv(this.kr.next());return this.referenceDelegate.Ur(),s(u).next(l=>this.referenceDelegate.Wr(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Gr(e,n){return se.or(Object.values(this.Lr).map(s=>()=>s.containsKey(e,n)))}}class Uv extends xe{constructor(e){super(),this.currentSequenceNumber=e}}class Th{constructor(e){this.persistence=e,this.zr=new Hg,this.jr=null}static Hr(e){return new Th(e)}get Jr(){if(this.jr)return this.jr;throw Dt()}addReference(e,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),se.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(l=>this.Jr.add(l.toString()))}).next(()=>s.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Jr,s=>{const u=_t.fromPath(s);return this.Yr(e,u).next(l=>{l||n.removeEntry(u,Et.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return se.or([()=>se.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Bv{constructor(e){this.serializer=e}N(e,n,s,u){const l=new qn("createOrUpgrade",n);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sc,{unique:!0}),S.createObjectStore("documentMutations"),U_(e),function(S){S.createObjectStore("remoteDocuments")}(e));let p=se.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),U_(e)),p=p.next(()=>function(S){const x=S.store("targetGlobal"),L={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return x.put("targetGlobalKey",L)}(l))),s<4&&u>=4&&(0!==s&&(p=p.next(()=>function(S,x){return x.store("mutations").W().next(L=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sc,{unique:!0});const G=x.store("mutations"),oe=L.map(be=>G.put(be));return se.waitFor(oe)})}(e,l))),p=p.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(p=p.next(()=>this.Xr(l))),s<6&&u>=6&&(p=p.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ei(l)))),s<7&&u>=7&&(p=p.next(()=>this.ti(l))),s<8&&u>=8&&(p=p.next(()=>this.ni(e,l))),s<9&&u>=9&&(p=p.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(p=p.next(()=>this.ri(l))),s<11&&u>=11&&(p=p.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(p=p.next(()=>{!function(S){const x=S.createObjectStore("documentOverlays",{keyPath:th});x.createIndex("collectionPathOverlayIndex",$u,{unique:!1}),x.createIndex("collectionGroupOverlayIndex",__,{unique:!1})}(e)})),s<13&&u>=13&&(p=p.next(()=>function(S){const x=S.createObjectStore("remoteDocumentsV14",{keyPath:xl});x.createIndex("documentKeyIndex",Zo),x.createIndex("collectionGroupIndex",ef)}(e)).next(()=>this.ii(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(p=p.next(()=>this.si(e,l))),s<15&&u>=15&&(p=p.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:Nl}).createIndex("sequenceNumberIndex",bc,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:fg}).createIndex("documentKeyIndex",su,{unique:!1})}(e))),p}ei(e){let n=0;return e.store("remoteDocuments").Y((s,u)=>{n+=Pf(u)}).next(()=>{const s={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const n=e.store("mutationQueues"),s=e.store("mutations");return n.W().next(u=>se.forEach(u,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",p).next(T=>se.forEach(T,S=>{xt(S.userId===l.userId);const x=ic(this.serializer,S);return Zc(e,l.userId,x).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const l=[];return s.Y((p,T)=>{const S=new gn(p),x=[0,di(S)];l.push(n.get(x).next(L=>L?se.resolve():n.put({targetId:0,path:di(S),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>se.waitFor(l))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:tf});const s=n.store("collectionParents"),u=new Sf,l=p=>{if(u.add(p)){const T=p.lastSegment(),S=p.popLast();return s.put({collectionId:T,parent:di(S)})}};return n.store("remoteDocuments").Y({J:!0},(p,T)=>{const S=new gn(p);return l(S.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([p,T,S],x)=>{const L=As(T);return l(L.popLast())}))}ri(e){const n=e.store("targets");return n.Y((s,u)=>{const l=hd(u),p=C_(this.serializer,l);return n.put(p)})}ii(e,n){const s=n.store("remoteDocuments"),u=[];return s.Y((l,p)=>{const T=n.store("remoteDocumentsV14"),S=(G=p,G.document?new _t(gn.fromString(G.document.name).popFirst(5)):G.noDocument?_t.fromSegments(G.noDocument.path):G.unknownDocument?_t.fromSegments(G.unknownDocument.path):Dt()).path.toArray(),x={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};var G;u.push(T.put(x))}).next(()=>se.waitFor(u))}si(e,n){const s=n.store("mutations"),u=wh(this.serializer),l=new Gg(Th.Hr,this.serializer.ct);return s.W().next(p=>{const T=new Map;return p.forEach(S=>{var x;let L=null!==(x=T.get(S.userId))&&void 0!==x?x:nn();ic(this.serializer,S).keys().forEach(G=>L=L.add(G)),T.set(S.userId,L)}),se.forEach(T,(S,x)=>{const L=new Gr(x),G=Ng.lt(this.serializer,L),oe=l.getIndexManager(L),be=Mf.lt(L,this.serializer,oe,l.referenceDelegate);return new V_(u,be,G,oe).recalculateAndSaveOverlaysForDocumentKeys(new Hu(n,ni._e),S).next()})})}}function U_(i){i.createObjectStore("targetDocuments",{keyPath:hg}).createIndex("documentTargetsIndex",m_,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dg,{unique:!0}),i.createObjectStore("targetGlobal")}const Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dh{constructor(e,n,s,u,l,p,T,S,x,L,G=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.oi=l,this.window=p,this.document=T,this._i=x,this.ai=L,this.ui=G,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=oe=>Promise.resolve(),!Dh.D())throw new Qe(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vg(this,u),this.Ti=n+"main",this.serializer=new D_(S),this.Ei=new kt(this.Ti,this.ui,new Bv(this.serializer)),this.Qr=new Fv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wh(this.serializer),this.$r=new sc,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===L&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(Le.FAILED_PRECONDITION,Wg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ni(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var s=(0,ie.Z)(function*(u){if(n.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,ie.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ie.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(os(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Id(e).get("owner").next(n=>se.resolve(this.Si(n)))}bi(e){return Ff(e).delete(this.clientId)}Di(){var e=this;return(0,ie.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Vr(s,"clientMetadata");return u.W().next(l=>{const p=e.vi(l,18e5),T=l.filter(S=>-1===p.indexOf(S));return se.forEach(T,S=>u.delete(S.clientId)).next(()=>T)})}).catch(()=>[]);if(e.di)for(const s of n)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?se.resolve(!0):Id(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Qe(Le.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ff(e).W().next(s=>void 0===this.vi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ne("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ie.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const s=new Hu(n,ni._e);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(s=>this.Ci(s.updateTimeMs,n)&&!this.Mi(s.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Ff(e).W().next(n=>this.vi(n,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Mf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ng.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,s){Ne("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",l=15===(S=this.ui)?pg:14===S?Ki:13===S?nf:12===S?Ol:11===S?Rc:void Dt();var S;let p;return this.Ei.runTransaction(e,u,l,T=>(p=new Hu(T,this.kr?this.kr.next():ni._e),"readwrite-primary"===n?this.gi(p).next(S=>!!S||this.pi(p)).next(S=>{if(!S)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Qe(Le.FAILED_PRECONDITION,Y);return s(p)}).next(S=>this.wi(p).next(()=>S)):this.ki(p).next(()=>s(p)))).then(T=>(p.raiseOnCommittedEvent(),T))}ki(e){return Id(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Qe(Le.FAILED_PRECONDITION,Wg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Id(e).put("owner",n)}static D(){return kt.D()}yi(e){const n=Id(e);return n.get("owner").next(s=>this.Si(s)?(Ne("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):se.resolve())}Ci(e,n){const s=Date.now();return!(e<s-n||e>s&&(vr(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,St.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const s=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return vr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Id(i){return Vr(i,"owner")}function Ff(i){return Vr(i,"clientMetadata")}function Vf(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Ch{constructor(e,n,s,u){this.targetId=e,this.fromCache=n,this.qi=s,this.Qi=u}static Ki(e,n){let s=nn(),u=nn();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new Ch(e,n.fromCache,s,u)}}class jI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jv{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,St.G6)()?8:kt.v((0,St.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,s,u){const l={result:null};return this.ji(e,n).next(p=>{l.result=p}).next(()=>{if(!l.result)return this.Hi(e,n,u,s).next(p=>{l.result=p})}).next(()=>{if(l.result)return;const p=new jI;return this.Ji(e,n,p).next(T=>{if(l.result=T,this.Ui)return this.Yi(e,n,p,T.size)})}).next(()=>l.result)}Yi(e,n,s,u){return s.documentReadCount<this.Wi?(io()<=At.in.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",Vc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),se.resolve()):(io()<=At.in.DEBUG&&Ne("QueryEngine","Query:",Vc(n),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Gi*u?(io()<=At.in.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",Vc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(n))):se.resolve())}ji(e,n){if(pf(n))return se.resolve(null);let s=Qi(n);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Fc(n,null,"F"),s=Qi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const p=nn(...l);return this.zi.getDocuments(e,p).next(T=>this.indexManager.getMinOffset(e,s).next(S=>{const x=this.Zi(n,T);return this.Xi(n,x,p,S.readTime)?this.ji(e,Fc(n,null,"F")):this.es(e,x,n,S)}))})))}Hi(e,n,s,u){return pf(n)||u.isEqual(Et.min())?se.resolve(null):this.zi.getDocuments(e,s).next(l=>{const p=this.Zi(n,l);return this.Xi(n,p,s,u)?se.resolve(null):(io()<=At.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Vc(n)),this.es(e,p,n,v(u,-1)).next(T=>T))})}Zi(e,n){let s=new Jn(mf(e));return n.forEach((u,l)=>{Sa(e,l)&&(s=s.add(l))}),s}Xi(e,n,s,u){if(null===e.limit)return!1;if(s.size!==n.size)return!0;const l="F"===e.limitType?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Ji(e,n,s){return io()<=At.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Vc(n)),this.zi.getDocumentsMatchingQuery(e,n,R.min(),s)}es(e,n,s,u){return this.zi.getDocumentsMatchingQuery(e,s,u).next(l=>(n.forEach(p=>{l=l.insert(p.key,p)}),l))}}class $v{constructor(e,n,s,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new ir(Kt),this.rs=new co(l=>Mo(l),Qu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function B_(i,e,n,s){return new $v(i,e,n,s)}function Hv(i,e){return j_.apply(this,arguments)}function j_(){return j_=(0,ie.Z)(function*(i,e){const n=at(i);return yield n.persistence.runTransaction("Handle user change","readonly",s=>{let u;return n.mutationQueue.getAllMutationBatches(s).next(l=>(u=l,n._s(e),n.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],T=[];let S=nn();for(const x of u){p.push(x.batchId);for(const L of x.mutations)S=S.add(L.key)}for(const x of l){T.push(x.batchId);for(const L of x.mutations)S=S.add(L.key)}return n.localDocuments.getDocuments(s,S).next(x=>({us:x,removedBatchIds:p,addedBatchIds:T}))})})}),j_.apply(this,arguments)}function $_(i){const e=at(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Bf(i,e,n){let s=nn(),u=nn();return n.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let p=ls();return n.forEach((T,S)=>{const x=l.get(T);S.isFoundDocument()!==x.isFoundDocument()&&(u=u.add(T)),S.isNoDocument()&&S.version.isEqual(Et.min())?(e.removeEntry(T,S.readTime),p=p.insert(T,S)):!x.isValidDocument()||S.version.compareTo(x.version)>0||0===S.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(S),p=p.insert(T,S)):Ne("LocalStore","Ignoring outdated watch update for ",T,". Current version:",x.version," Watch version:",S.version)}),{cs:p,ls:u}})}function wd(i,e){const n=at(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oc(i,e){const n=at(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return n.Qr.getTargetData(s,e).next(l=>l?(u=l,se.resolve(u)):n.Qr.allocateTargetId(s).next(p=>(u=new na(e,p,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=n.ns.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(e,s.targetId)),s})}function ac(i,e,n){return nl.apply(this,arguments)}function nl(){return nl=(0,ie.Z)(function*(i,e,n){const s=at(i),u=s.ns.get(e),l=n?"readwrite":"readwrite-primary";try{n||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,u)))}catch(p){if(!os(p))throw p;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.ns=s.ns.remove(e),s.rs.delete(u.target)}),nl.apply(this,arguments)}function rl(i,e,n){const s=at(i);let u=Et.min(),l=nn();return s.persistence.runTransaction("Execute query","readwrite",p=>function(S,x,L){const G=at(S),oe=G.rs.get(L);return void 0!==oe?se.resolve(G.ns.get(oe)):G.Qr.getTargetData(x,L)}(s,p,Qi(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(p,T.targetId).next(S=>{l=S})}).next(()=>s.ts.getDocumentsMatchingQuery(p,e,n?u:Et.min(),n?l:nn())).next(T=>($f(s,Ig(e),T),{documents:T,hs:l})))}function il(i,e){const n=at(i),s=at(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",l=>s._t(l,e).next(p=>p?p.target:null))}function jf(i,e){const n=at(i),s=n.ss.get(e)||Et.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,v(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>($f(n,e,u),u))}function $f(i,e,n){let s=i.ss.get(e)||Et.min();n.forEach((u,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.ss.set(e,s)}function H_(){return H_=(0,ie.Z)(function*(i,e,n,s){const u=at(i);let l=nn(),p=ls();for(const x of n){const L=e.Ps(x.metadata.name);x.document&&(l=l.add(L));const G=e.Is(x);G.setReadTime(e.Ts(x.metadata.readTime)),p=p.insert(L,G)}const T=u.os.newChangeBuffer({trackRemovals:!0}),S=yield oc(u,(L=s,Qi(bs(gn.fromString(`__bundle__/docs/${L}`)))));var L;return u.persistence.runTransaction("Apply bundle documents","readwrite",x=>Bf(x,T,p).next(L=>(T.apply(x),L)).next(L=>u.Qr.removeMatchingKeysForTargetId(x,S.targetId).next(()=>u.Qr.addMatchingKeys(x,l,S.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(x,L.cs,L.ls)).next(()=>L.cs)))}),H_.apply(this,arguments)}function Kg(i,e){return sl.apply(this,arguments)}function sl(){return sl=(0,ie.Z)(function*(i,e,n=nn()){const s=yield oc(i,Qi(Mg(e.bundledQuery))),u=at(i);return u.persistence.runTransaction("Save named query","readwrite",l=>{const p=Wr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return u.$r.saveNamedQuery(l,e);const T=s.withResumeToken(ri.EMPTY_BYTE_STRING,p);return u.ns=u.ns.insert(T.targetId,T),u.Qr.updateTargetData(l,T).next(()=>u.Qr.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>u.Qr.addMatchingKeys(l,n,s.targetId)).next(()=>u.$r.saveNamedQuery(l,e))})}),sl.apply(this,arguments)}function z_(i,e){return`firestore_clients_${i}_${e}`}function Zg(i,e,n){let s=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Qg(i,e){return`firestore_targets_${i}_${e}`}class zf{constructor(e,n,s,u){this.user=e,this.batchId=n,this.state=s,this.error=u}static Es(e,n,s){const u=JSON.parse(s);let l,p="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return p&&u.error&&(p="string"==typeof u.error.message&&"string"==typeof u.error.code,p&&(l=new Qe(u.error.code,u.error.message))),p?new zf(e,n,u.state,l):(vr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ol{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static Es(e,n){const s=JSON.parse(n);let u,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Qe(s.error.code,s.error.message))),l?new ol(e,s.state,u):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ah{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const s=JSON.parse(n);let u="object"==typeof s&&s.activeTargetIds instanceof Array,l=Wl();for(let p=0;u&&p<s.activeTargetIds.length;++p)u=iu(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return u?new Ah(e,l):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Yg{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Yg(n.clientId,n.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jg{constructor(){this.activeTargetIds=Wl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G_{constructor(e,n,s,u,l){this.window=e,this.oi=n,this.persistenceKey=s,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ir(Kt),this.started=!1,this.ys=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ws=z_(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Jg),this.bs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.Z)(function*(){const n=yield e.syncEngine.Li();for(const u of n){if(u===e.Vs)continue;const l=e.getItem(z_(e.persistenceKey,u));if(l){const p=Ah.Es(u,l);p&&(e.ps=e.ps.insert(p.clientId,p))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const u=e.xs(s);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((s,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,s){this.Bs(e,n,s),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Qg(this.persistenceKey,e));if(s){const u=ol.Es(e,s);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qg(this.persistenceKey,e))}updateQueryState(e,n,s){this.qs(e,n,s)}handleUserChange(e,n,s){n.forEach(u=>{this.Ls(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne("SharedClientState","READ",e,n),n}setItem(e,n){Ne("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const s=e;if(s.storageArea===this.storage){if(Ne("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ie.Z)(function*(){if(n.started){if(null!==s.key)if(n.bs.test(s.key)){if(null==s.newValue){const u=n.$s(s.key);return n.Us(u,null)}{const u=n.Ws(s.key,s.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(s.key)){if(null!==s.newValue){const u=n.Gs(s.key,s.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(s.key)){if(null!==s.newValue){const u=n.js(s.key,s.newValue);if(u)return n.Hs(u)}}else if(s.key===n.vs){if(null!==s.newValue){const u=n.xs(s.newValue);if(u)return n.Os(u)}}else if(s.key===n.Ss){const u=function(p){let T=ni._e;if(null!=p)try{const S=JSON.parse(p);xt("number"==typeof S),T=S}catch(S){vr("SharedClientState","Failed to read sequence number from WebStorage",S)}return T}(s.newValue);u!==ni._e&&n.sequenceNumberHandler(u)}else if(s.key===n.Fs){const u=n.Js(s.newValue);yield Promise.all(u.map(l=>n.syncEngine.Ys(l)))}}else n.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,s){const u=new zf(this.currentUser,e,n,s),l=Zg(this.persistenceKey,this.currentUser,e);this.setItem(l,u.ds())}Ls(e){const n=Zg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,s){const u=Qg(this.persistenceKey,e),l=new ol(e,n,s);this.setItem(u,l.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const s=this.$s(e);return Ah.Es(s,n)}Gs(e,n){const s=this.Ds.exec(e),u=Number(s[1]);return zf.Es(new Gr(void 0!==s[2]?s[2]:null),u,n)}js(e,n){const s=this.Cs.exec(e),u=Number(s[1]);return ol.Es(u,n)}xs(e){return Yg.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,ie.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const s=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),l=this.Ns(s),p=[],T=[];return l.forEach(S=>{u.has(S)||p.push(S)}),u.forEach(S=>{l.has(S)||T.push(S)}),this.syncEngine.eo(p,T).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Wl();return e.forEach((s,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class W_{constructor(){this.no=new Jg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,s){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Jg,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gf{io(e){}shutdown(){}}class Wf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qf=null;function Kf(){return null===qf?qf=268435456+Math.round(2147483648*Math.random()):qf++,"0x"+qf.toString(16)}const Xg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const hs="WebChannelConnection";class q_ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${u}/databases/${l}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${l}`}get wo(){return!1}So(n,s,u,l,p){const T=Kf(),S=this.bo(n,s.toUriEncodedString());Ne("RestConnection",`Sending RPC '${n}' ${T}:`,S,u);const x={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(x,l,p),this.Co(n,S,x,u).then(L=>(Ne("RestConnection",`Received RPC '${n}' ${T}: `,L),L),L=>{throw Er("RestConnection",`RPC '${n}' ${T} failed with error: `,L,"url: ",S,"request:",u),L})}vo(n,s,u,l,p,T){return this.So(n,s,u,l,p)}Do(n,s,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+ya,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,p)=>n[p]=l),u&&u.headers.forEach((l,p)=>n[p]=l)}bo(n,s){return`${this.fo}/v1/${s}:${Xg[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,s,u){const l=Kf();return new Promise((p,T)=>{const S=new Sl;S.setWithCredentials(!0),S.listenOnce(Kd.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Ei.NO_ERROR:const L=S.getResponseJson();Ne(hs,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(L)),p(L);break;case Ei.TIMEOUT:Ne(hs,`RPC '${e}' ${l} timed out`),T(new Qe(Le.DEADLINE_EXCEEDED,"Request time out"));break;case Ei.HTTP_ERROR:const G=S.getStatus();if(Ne(hs,`RPC '${e}' ${l} failed with status:`,G,"response text:",S.getResponseText()),G>0){let oe=S.getResponseJson();Array.isArray(oe)&&(oe=oe[0]);const be=oe?.error;if(be&&be.status&&be.message){const rt=function(ct){const Ft=ct.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(Ft)>=0?Ft:Le.UNKNOWN}(be.status);T(new Qe(rt,be.message))}else T(new Qe(Le.UNKNOWN,"Server responded with status "+S.getStatus()))}else T(new Qe(Le.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{Ne(hs,`RPC '${e}' ${l} completed.`)}});const x=JSON.stringify(u);Ne(hs,`RPC '${e}' ${l} sending request:`,u),S.send(n,"POST",x,s,15)})}Fo(e,n,s){const u=Kf(),l=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Ic(),T=_a(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;void 0!==x&&(S.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Do(S.initMessageHeaders,n,s),S.encodeInitMessageHeaders=!0;const L=l.join("");Ne(hs,`Creating RPC '${e}' stream ${u}: ${L}`,S);const G=p.createWebChannel(L,S);let oe=!1,be=!1;const rt=new Zf({lo:ct=>{be?Ne(hs,`Not sending because RPC '${e}' stream ${u} is closed:`,ct):(oe||(Ne(hs,`Opening RPC '${e}' stream ${u} transport.`),G.open(),oe=!0),Ne(hs,`RPC '${e}' stream ${u} sending:`,ct),G.send(ct))},ho:()=>G.close()}),gt=(ct,Ft,sn)=>{ct.listen(Ft,Lt=>{try{sn(Lt)}catch(on){setTimeout(()=>{throw on},0)}})};return gt(G,Uu.EventType.OPEN,()=>{be||Ne(hs,`RPC '${e}' stream ${u} transport opened.`)}),gt(G,Uu.EventType.CLOSE,()=>{be||(be=!0,Ne(hs,`RPC '${e}' stream ${u} transport closed`),rt.Vo())}),gt(G,Uu.EventType.ERROR,ct=>{be||(be=!0,Er(hs,`RPC '${e}' stream ${u} transport errored:`,ct),rt.Vo(new Qe(Le.UNAVAILABLE,"The operation could not be completed")))}),gt(G,Uu.EventType.MESSAGE,ct=>{var Ft;if(!be){const sn=ct.data[0];xt(!!sn);const on=sn.error||(null===(Ft=sn[0])||void 0===Ft?void 0:Ft.error);if(on){Ne(hs,`RPC '${e}' stream ${u} received error:`,on);const Hn=on.status;let Zn=function(XE){const gv=or[XE];if(void 0!==gv)return nd(gv)}(Hn),si=on.message;void 0===Zn&&(Zn=Le.INTERNAL,si="Unknown error status: "+Hn+" with message "+on.message),be=!0,rt.Vo(new Qe(Zn,si)),G.close()}else Ne(hs,`RPC '${e}' stream ${u} received:`,sn),rt.mo(sn)}}),gt(T,Zd.STAT_EVENT,ct=>{ct.stat===ci.PROXY?Ne(hs,`RPC '${e}' stream ${u} detected buffering proxy`):ct.stat===ci.NOPROXY&&Ne(hs,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{rt.Ro()},0),rt}}function K_(){return typeof window<"u"?window:null}function Sh(){return typeof document<"u"?document:null}function Qf(i){return new js(i,!0)}class em{constructor(e,n,s=1e3,u=1.5,l=6e4){this.oi=e,this.timerId=n,this.Mo=s,this.xo=u,this.Oo=l,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Lo),u=Math.max(0,n-s);u>0&&Ne("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class bh{constructor(e,n,s,u,l,p,T,S){this.oi=e,this.$o=s,this.Uo=u,this.connection=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=S,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new em(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,ie.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,ie.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var s=this;return(0,ie.Z)(function*(){s.n_(),s.r_(),s.jo.cancel(),s.Wo++,4!==e?s.jo.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),s.jo.ko()):n&&n.code===Le.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.i_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Wo===n&&this.o_(s,u)},s=>{e(()=>{const u=new Qe(Le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(u)})})}o_(e,n){const s=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{s(()=>this.__(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,ie.Z)(function*(){e.state=0,e.start()}))}__(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zv extends bh{constructor(e,n,s,u,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function v_(i,e){let n;if("targetChange"in e){const s="NO_CHANGE"===(x=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===x?1:"REMOVE"===x?2:"CURRENT"===x?3:"RESET"===x?4:Dt(),u=e.targetChange.targetIds||[],l=function(x,L){return x.useProto3Json?(xt(void 0===L||"string"==typeof L),ri.fromBase64String(L||"")):(xt(void 0===L||L instanceof Uint8Array),ri.fromUint8Array(L||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&function(x){const L=void 0===x.code?Le.UNKNOWN:nd(x.code);return new Qe(L,x.message||"")}(p);n=new F(s,u,l,T||null)}else if("documentChange"in e){const s=e.documentChange,u=Hs(i,s.document.name),l=Wr(s.document.updateTime),p=s.document.createTime?Wr(s.document.createTime):Et.min(),T=new sr({mapValue:{fields:s.document.fields}}),S=pr.newFoundDocument(u,l,p,T);n=new _(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=Hs(i,s.document),l=s.readTime?Wr(s.readTime):Et.min(),p=pr.newNoDocument(u,l);n=new _([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,u=Hs(i,s.document);n=new _([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Dt();{const s=e.filter,{count:u=0,unchangedNames:l}=s,p=new $c(u,l);n=new P(s.targetId,p)}}var x;return n}(this.serializer,e),s=function(l){if(!("targetChange"in l))return Et.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?Et.min():p.readTime?Wr(p.readTime):Et.min()}(e);return this.listener.u_(n,s)}c_(e){const n={};n.database=tc(this.serializer),n.addTarget=function(l,p){let T;const S=p.target;if(T=jl(S)?{documents:Sg(l,S)}:{query:bg(l,S).ut},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=zc(l,p.resumeToken);const x=$s(l,p.expectedCount);null!==x&&(T.expectedCount=x)}else if(p.snapshotVersion.compareTo(Et.min())>0){T.readTime=Pa(l,p.snapshotVersion.toTimestamp());const x=$s(l,p.expectedCount);null!==x&&(T.expectedCount=x)}return T}(this.serializer,e);const s=function Mv(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);s&&(n.labels=s),this.t_(n)}l_(e){const n={};n.database=tc(this.serializer),n.removeTarget=e,this.t_(n)}}class Td extends bh{constructor(e,n,s,u,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,u,p),this.serializer=l,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Pv(i,e){return i&&i.length>0?(xt(void 0!==e),i.map(n=>function(u,l){let p=Wr(u.updateTime?u.updateTime:l);return p.isEqual(Et.min())&&(p=Wr(l)),new fh(p,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),s=Wr(e.commitTime);return this.listener.T_(s,n)}return xt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=tc(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Wc(this.serializer,s))};this.t_(n)}}class Rh extends class{}{constructor(e,n,s,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new Qe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.So(e,sd(n,s),u,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Qe(Le.UNKNOWN,l.toString())})}vo(e,n,s,u,l){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,T])=>this.connection.vo(e,sd(n,s),u,p,T,l)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Qe(Le.UNKNOWN,p.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Wv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(vr(n),this.g_=!1):Ne("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class qv{constructor(e,n,s,u,l){var p=this;this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=l,this.M_.io(T=>{s.enqueueAndForget((0,ie.Z)(function*(){var S;uc(p)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,ie.Z)(function*(L){const G=at(L);G.v_.add(4),yield al(G),G.x_.set("Unknown"),G.v_.delete(4),yield Ph(G)}),function x(L){return S.apply(this,arguments)})(p))}))}),this.x_=new Wv(s,u)}}function Ph(i){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ie.Z)(function*(i){if(uc(i))for(const e of i.F_)yield e(!0)}),Jf.apply(this,arguments)}function al(i){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,ie.Z)(function*(i){for(const e of i.F_)yield e(!1)}),Mh.apply(this,arguments)}function tm(i,e){const n=at(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),ep(n)?nm(n):Dd(n).Jo()&&Xf(n,e))}function ul(i,e){const n=at(i),s=Dd(n);n.C_.delete(e),s.Jo()&&Z_(n,e),0===n.C_.size&&(s.Jo()?s.Xo():uc(n)&&n.x_.set("Unknown"))}function Xf(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dd(i).c_(e)}function Z_(i,e){i.O_.Oe(e),Dd(i).l_(e)}function nm(i){i.O_=new Ie({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Dd(i).start(),i.x_.p_()}function ep(i){return uc(i)&&!Dd(i).Ho()&&i.C_.size>0}function uc(i){return 0===at(i).v_.size}function rm(i){i.O_=void 0}function Kv(i){return im.apply(this,arguments)}function im(){return im=(0,ie.Z)(function*(i){i.C_.forEach((e,n)=>{Xf(i,e)})}),im.apply(this,arguments)}function $I(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,ie.Z)(function*(i,e){rm(i),ep(i)?(i.x_.S_(e),nm(i)):i.x_.set("Unknown")}),tp.apply(this,arguments)}function Q_(i,e,n){return po.apply(this,arguments)}function po(){return po=(0,ie.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof F&&2===e.state&&e.cause)try{yield(s=(0,ie.Z)(function*(l,p){const T=p.cause;for(const S of p.targetIds)l.C_.has(S)&&(yield l.remoteSyncer.rejectListen(S,T),l.C_.delete(S),l.O_.removeTarget(S))}),function u(l,p){return s.apply(this,arguments)})(i,e)}catch(s){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield xh(i,s)}else if(e instanceof _?i.O_.$e(e):e instanceof P?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(Et.min()))try{const s=yield $_(i.localStore);n.compareTo(s)>=0&&(yield function(l,p){const T=l.O_.it(p);return T.targetChanges.forEach((S,x)=>{if(S.resumeToken.approximateByteSize()>0){const L=l.C_.get(x);L&&l.C_.set(x,L.withResumeToken(S.resumeToken,p))}}),T.targetMismatches.forEach((S,x)=>{const L=l.C_.get(S);if(!L)return;l.C_.set(S,L.withResumeToken(ri.EMPTY_BYTE_STRING,L.snapshotVersion)),Z_(l,S);const G=new na(L.target,S,x,L.sequenceNumber);Xf(l,G)}),l.remoteSyncer.applyRemoteEvent(T)}(i,n))}catch(s){Ne("RemoteStore","Failed to raise snapshot:",s),yield xh(i,s)}var s}),po.apply(this,arguments)}function xh(i,e,n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,ie.Z)(function*(i,e,n){if(!os(e))throw e;i.v_.add(1),yield al(i),i.x_.set("Offline"),n||(n=()=>$_(i.localStore)),i.asyncQueue.enqueueRetryable((0,ie.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield Ph(i)}))}),Y_.apply(this,arguments)}function np(i,e){return e().catch(n=>xh(i,n,e))}function go(i){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,ie.Z)(function*(i){const e=at(i),n=Du(e);let s=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Zv(e);)try{const u=yield wd(e.localStore,s);if(null===u){0===e.D_.length&&n.Xo();break}s=u.batchId,HI(e,u)}catch(u){yield xh(e,u)}J_(e)&&rp(e)}),Nh.apply(this,arguments)}function Zv(i){return uc(i)&&i.D_.length<10}function HI(i,e){i.D_.push(e);const n=Du(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function J_(i){return uc(i)&&!Du(i).Ho()&&i.D_.length>0}function rp(i){Du(i).start()}function La(i){return ip.apply(this,arguments)}function ip(){return ip=(0,ie.Z)(function*(i){Du(i).d_()}),ip.apply(this,arguments)}function Qv(i){return X_.apply(this,arguments)}function X_(){return X_=(0,ie.Z)(function*(i){const e=Du(i);for(const n of i.D_)e.I_(n.mutations)}),X_.apply(this,arguments)}function Hi(i,e,n){return sm.apply(this,arguments)}function sm(){return sm=(0,ie.Z)(function*(i,e,n){const s=i.D_.shift(),u=Ti.from(s,e,n);yield np(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield go(i)}),sm.apply(this,arguments)}function om(i,e){return am.apply(this,arguments)}function am(){return am=(0,ie.Z)(function*(i,e){var n;e&&Du(i).P_&&(yield(n=(0,ie.Z)(function*(u,l){if(td(T=l.code)&&T!==Le.ABORTED){const p=u.D_.shift();Du(u).Zo(),yield np(u,()=>u.remoteSyncer.rejectFailedWrite(p.batchId,l)),yield go(u)}var T}),function s(u,l){return n.apply(this,arguments)})(i,e)),J_(i)&&rp(i)}),am.apply(this,arguments)}function ey(i,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,ie.Z)(function*(i,e){const n=at(i);n.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const s=uc(n);n.v_.add(3),yield al(n),s&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Ph(n)}),Oh.apply(this,arguments)}function sp(i,e){return op.apply(this,arguments)}function op(){return op=(0,ie.Z)(function*(i,e){const n=at(i);e?(n.v_.delete(2),yield Ph(n)):e||(n.v_.add(2),yield al(n),n.x_.set("Unknown"))}),op.apply(this,arguments)}function Dd(i){return i.N_||(i.N_=function(n,s,u){const l=at(n);return l.R_(),new zv(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{Po:Kv.bind(null,i),To:$I.bind(null,i),u_:Q_.bind(null,i)}),i.F_.push(function(){var e=(0,ie.Z)(function*(n){n?(i.N_.Zo(),ep(i)?nm(i):i.x_.set("Unknown")):(yield i.N_.stop(),rm(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function Du(i){return i.B_||(i.B_=function(n,s,u){const l=at(n);return l.R_(),new Td(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,u)}(i.datastore,i.asyncQueue,{Po:La.bind(null,i),To:om.bind(null,i),E_:Qv.bind(null,i),T_:Hi.bind(null,i)}),i.F_.push(function(){var e=(0,ie.Z)(function*(n){n?(i.B_.Zo(),yield go(i)):(yield i.B_.stop(),i.D_.length>0&&(Ne("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.B_}class ap{constructor(e,n,s,u,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=u,this.removalCallback=l,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,u,l){const p=Date.now()+s,T=new ap(e,n,p,u,l);return T.start(s),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qe(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cd(i,e){if(vr("AsyncQueue",`${e}: ${i}`),os(i))return new Qe(Le.UNAVAILABLE,`${e}: ${i}`);throw i}class Ad{constructor(e){this.comparator=e?(n,s)=>e(n,s)||_t.comparator(n.key,s.key):(n,s)=>_t.comparator(n.key,s.key),this.keyedMap=zl(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new Ad(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ad)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,l=s.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const s=new Ad;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class ty{constructor(){this.L_=new ir(_t.comparator)}track(e){const n=e.doc.key,s=this.L_.get(n);s?0!==e.type&&3===s.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==s.type?this.L_=this.L_.insert(n,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.L_=this.L_.remove(n):1===e.type&&2===s.type?this.L_=this.L_.insert(n,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):Dt():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,s)=>{e.push(s)}),e}}class cl{constructor(e,n,s,u,l,p,T,S,x){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=S,this.hasCachedResults=x}static fromInitialDocuments(e,n,s,u,l){const p=[];return n.forEach(T=>{p.push({type:0,doc:T})}),new cl(e,n,Ad.emptySet(n),p,s,u,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==s[u].type||!n[u].doc.isEqual(s[u].doc))return!1;return!0}}class Sd{constructor(){this.q_=void 0,this.Q_=[]}}class Cu{constructor(){this.queries=new co(e=>lh(e),du),this.onlineState="Unknown",this.K_=new Set}}function cc(i,e){return um.apply(this,arguments)}function um(){return um=(0,ie.Z)(function*(i,e){const n=at(i),s=e.query;let u=!1,l=n.queries.get(s);if(l||(u=!0,l=new Sd),u)try{l.q_=yield n.onListen(s)}catch(p){const T=Cd(p,`Initialization of query '${Vc(e.query)}' failed`);return void e.onError(T)}n.queries.set(s,l),l.Q_.push(e),e.U_(n.onlineState),l.q_&&e.W_(l.q_)&&ll(n)}),um.apply(this,arguments)}function cm(i,e){return up.apply(this,arguments)}function up(){return up=(0,ie.Z)(function*(i,e){const n=at(i),s=e.query;let u=!1;const l=n.queries.get(s);if(l){const p=l.Q_.indexOf(e);p>=0&&(l.Q_.splice(p,1),u=0===l.Q_.length)}if(u)return n.queries.delete(s),n.onUnlisten(s)}),up.apply(this,arguments)}function ny(i,e){const n=at(i);let s=!1;for(const u of e){const p=n.queries.get(u.query);if(p){for(const T of p.Q_)T.W_(u)&&(s=!0);p.q_=u}}s&&ll(n)}function lm(i,e,n){const s=at(i),u=s.queries.get(e);if(u)for(const l of u.Q_)l.onError(n);s.queries.delete(e)}function ll(i){i.K_.forEach(e=>{e.next()})}class bd{constructor(e,n,s){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=s||{}}W_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new cl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class ry{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class dm{constructor(e){this.serializer=e}Ps(e){return Hs(this.serializer,e)}Is(e){return e.metadata.exists?If(this.serializer,e.document,!1):pr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Wr(e)}}class Yv{constructor(e,n,s){this.ta=e,this.localStore=n,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const s=gn.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,s=new dm(this.serializer);for(const u of e)if(u.metadata.queries){const l=s.Ps(u.metadata.name);for(const p of u.metadata.queries){const T=(n.get(p)||nn()).add(l);n.set(p,T)}}return n}complete(){var e=this;return(0,ie.Z)(function*(){const n=yield function Hf(i,e,n,s){return H_.apply(this,arguments)}(e.localStore,new dm(e.serializer),e.documents,e.ta.id),s=e.ra(e.documents);for(const u of e.queries)yield Kg(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function iy(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class sy{constructor(e){this.key=e}}class oy{constructor(e){this.key=e}}class hm{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nn(),this.mutatedKeys=nn(),this.ua=mf(e),this.ca=new Ad(this.ua)}get la(){return this.oa}ha(e,n){const s=n?n.Pa:new ty,u=n?n.ca:this.ca;let l=n?n.mutatedKeys:this.mutatedKeys,p=u,T=!1;const S="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,x="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((L,G)=>{const oe=u.get(L),be=Sa(this.query,G)?G:null,rt=!!oe&&this.mutatedKeys.has(oe.key),gt=!!be&&(be.hasLocalMutations||this.mutatedKeys.has(be.key)&&be.hasCommittedMutations);let ct=!1;oe&&be?oe.data.isEqual(be.data)?rt!==gt&&(s.track({type:3,doc:be}),ct=!0):this.Ia(oe,be)||(s.track({type:2,doc:be}),ct=!0,(S&&this.ua(be,S)>0||x&&this.ua(be,x)<0)&&(T=!0)):!oe&&be?(s.track({type:0,doc:be}),ct=!0):oe&&!be&&(s.track({type:1,doc:oe}),ct=!0,(S||x)&&(T=!0)),ct&&(be?(p=p.add(be),l=gt?l.add(L):l.delete(L)):(p=p.delete(L),l=l.delete(L)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const L="F"===this.query.limitType?p.last():p.first();p=p.delete(L.key),l=l.delete(L.key),s.track({type:1,doc:L})}return{ca:p,Pa:s,Xi:T,mutatedKeys:l}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,u){const l=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const p=e.Pa.k_();p.sort((L,G)=>function(be,rt){const gt=ct=>{switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return gt(be)-gt(rt)}(L.type,G.type)||this.ua(L.doc,G.doc)),this.Ta(s),u=null!=u&&u;const T=n&&!u?this.Ea():[],S=0===this.aa.size&&this.current&&!u?1:0,x=S!==this._a;return this._a=S,0!==p.length||x?{snapshot:new cl(this.query,e.ca,l,p,e.mutatedKeys,0===S,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),da:T}:{da:T}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ty,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=nn(),this.ca.forEach(s=>{this.Aa(s.key)&&(this.aa=this.aa.add(s.key))});const n=[];return e.forEach(s=>{this.aa.has(s)||n.push(new oy(s))}),this.aa.forEach(s=>{e.has(s)||n.push(new sy(s))}),n}Ra(e){this.oa=e.hs,this.aa=nn();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return cl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class zI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Jv{constructor(e){this.key=e,this.ma=!1}}class GI{constructor(e,n,s,u,l,p){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.fa={},this.ga=new co(T=>lh(T),du),this.pa=new Map,this.ya=new Set,this.wa=new ir(_t.comparator),this.Sa=new Map,this.ba=new Hg,this.Da={},this.Ca=new Map,this.va=Qc.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function WI(i,e){return cp.apply(this,arguments)}function cp(){return cp=(0,ie.Z)(function*(i,e){const n=Ep(i);let s,u;const l=n.ga.get(e);if(l)s=l.targetId,n.sharedClientState.addLocalQueryTarget(s),u=l.view.Va();else{const p=yield oc(n.localStore,Qi(e)),T=n.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,u=yield lp(n,e,s,"current"===T,p.resumeToken),n.isPrimaryClient&&tm(n.remoteStore,p)}return u}),cp.apply(this,arguments)}function lp(i,e,n,s,u){return ay.apply(this,arguments)}function ay(){return ay=(0,ie.Z)(function*(i,e,n,s,u){i.Ma=(G,oe,be)=>{return(rt=(0,ie.Z)(function*(ct,Ft,sn,Lt){let on=Ft.view.ha(sn);on.Xi&&(on=yield rl(ct.localStore,Ft.query,!1).then(({documents:Gi})=>Ft.view.ha(Gi,on)));const Hn=Lt&&Lt.targetChanges.get(Ft.targetId),Zn=Lt&&null!=Lt.targetMismatches.get(Ft.targetId),si=Ft.view.applyChanges(on,ct.isPrimaryClient,Hn,Zn);return Lh(ct,Ft.targetId,si.da),si.snapshot}),function gt(ct,Ft,sn,Lt){return rt.apply(this,arguments)})(i,G,oe,be);var rt};const l=yield rl(i.localStore,e,!0),p=new hm(e,l.hs),T=p.ha(l.documents),S=f.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==i.onlineState,u),x=p.applyChanges(T,i.isPrimaryClient,S);Lh(i,n,x.da);const L=new zI(e,n,p);return i.ga.set(e,L),i.pa.has(n)?i.pa.get(n).push(e):i.pa.set(n,[e]),x.snapshot}),ay.apply(this,arguments)}function dp(i,e){return hp.apply(this,arguments)}function hp(){return hp=(0,ie.Z)(function*(i,e){const n=at(i),s=n.ga.get(e),u=n.pa.get(s.targetId);if(u.length>1)return n.pa.set(s.targetId,u.filter(l=>!du(l,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ac(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),ul(n.remoteStore,s.targetId),lc(n,s.targetId)}).catch(Ce))):(lc(n,s.targetId),yield ac(n.localStore,s.targetId,!0))}),hp.apply(this,arguments)}function fm(){return fm=(0,ie.Z)(function*(i,e,n){const s=wm(i);try{const u=yield function(p,T){const S=at(p),x=rr.now(),L=T.reduce((be,rt)=>be.add(rt.key),nn());let G,oe;return S.persistence.runTransaction("Locally write mutations","readwrite",be=>{let rt=ls(),gt=nn();return S.os.getEntries(be,L).next(ct=>{rt=ct,rt.forEach((Ft,sn)=>{sn.isValidDocument()||(gt=gt.add(Ft))})}).next(()=>S.localDocuments.getOverlayedDocuments(be,rt)).next(ct=>{G=ct;const Ft=[];for(const sn of T){const Lt=Jl(sn,G.get(sn.key).overlayedDocument);null!=Lt&&Ft.push(new xo(sn.key,Lt,Jo(Lt.value.mapValue),Dn.exists(!0)))}return S.mutationQueue.addMutationBatch(be,x,Ft,T)}).next(ct=>{oe=ct;const Ft=ct.applyToLocalDocumentSet(G,gt);return S.documentOverlayCache.saveOverlays(be,ct.batchId,Ft)})}).then(()=>({batchId:oe.batchId,changes:Tg(G)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(p,T,S){let x=p.Da[p.currentUser.toKey()];x||(x=new ir(Kt)),x=x.insert(T,S),p.Da[p.currentUser.toKey()]=x}(s,u.batchId,n),yield Au(s,u.changes),yield go(s.remoteStore)}catch(u){const l=Cd(u,"Failed to persist write");n.reject(l)}}),fm.apply(this,arguments)}function pm(i,e){return fp.apply(this,arguments)}function fp(){return fp=(0,ie.Z)(function*(i,e){const n=at(i);try{const s=yield function qg(i,e){const n=at(i),s=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const T=[];e.targetChanges.forEach((L,G)=>{const oe=u.get(G);if(!oe)return;T.push(n.Qr.removeMatchingKeys(l,L.removedDocuments,G).next(()=>n.Qr.addMatchingKeys(l,L.addedDocuments,G)));let be=oe.withSequenceNumber(l.currentSequenceNumber);var gt,ct,Ft;null!==e.targetMismatches.get(G)?be=be.withResumeToken(ri.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):L.resumeToken.approximateByteSize()>0&&(be=be.withResumeToken(L.resumeToken,s)),u=u.insert(G,be),ct=be,Ft=L,(0===(gt=oe).resumeToken.approximateByteSize()||ct.snapshotVersion.toMicroseconds()-gt.snapshotVersion.toMicroseconds()>=3e8||Ft.addedDocuments.size+Ft.modifiedDocuments.size+Ft.removedDocuments.size>0)&&T.push(n.Qr.updateTargetData(l,be))});let S=ls(),x=nn();if(e.documentUpdates.forEach(L=>{e.resolvedLimboDocuments.has(L)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(l,L))}),T.push(Bf(l,p,e.documentUpdates).next(L=>{S=L.cs,x=L.ls})),!s.isEqual(Et.min())){const L=n.Qr.getLastRemoteSnapshotVersion(l).next(G=>n.Qr.setTargetsMetadata(l,l.currentSequenceNumber,s));T.push(L)}return se.waitFor(T).next(()=>p.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,S,x)).next(()=>S)}).then(l=>(n.ns=u,l))}(n.localStore,e);e.targetChanges.forEach((u,l)=>{const p=n.Sa.get(l);p&&(xt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?p.ma=!0:u.modifiedDocuments.size>0?xt(p.ma):u.removedDocuments.size>0&&(xt(p.ma),p.ma=!1))}),yield Au(n,s,e)}catch(s){yield Ce(s)}}),fp.apply(this,arguments)}function cn(i,e,n){const s=at(i);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const u=[];s.ga.forEach((l,p)=>{const T=p.view.U_(e);T.snapshot&&u.push(T.snapshot)}),function(p,T){const S=at(p);S.onlineState=T;let x=!1;S.queries.forEach((L,G)=>{for(const oe of G.Q_)oe.U_(T)&&(x=!0)}),x&&ll(S)}(s.eventManager,e),u.length&&s.fa.u_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function cy(i,e,n){return pp.apply(this,arguments)}function pp(){return pp=(0,ie.Z)(function*(i,e,n){const s=at(i);s.sharedClientState.updateQueryState(e,"rejected",n);const u=s.Sa.get(e),l=u&&u.key;if(l){let p=new ir(_t.comparator);p=p.insert(l,pr.newNoDocument(l,Et.min()));const T=nn().add(l),S=new d(Et.min(),new Map,new ir(Kt),p,T);yield pm(s,S),s.wa=s.wa.remove(l),s.Sa.delete(e),Fh(s)}else yield ac(s.localStore,e,!1).then(()=>lc(s,e,n)).catch(Ce)}),pp.apply(this,arguments)}function Rd(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,ie.Z)(function*(i,e){const n=at(i),s=e.batch.batchId;try{const u=yield function Uf(i,e){const n=at(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),l=n.os.newChangeBuffer({trackRemovals:!0});return function(T,S,x,L){const G=x.batch,oe=G.keys();let be=se.resolve();return oe.forEach(rt=>{be=be.next(()=>L.getEntry(S,rt)).next(gt=>{const ct=x.docVersions.get(rt);xt(null!==ct),gt.version.compareTo(ct)<0&&(G.applyToRemoteDocument(gt,x),gt.isValidDocument()&&(gt.setReadTime(x.commitVersion),L.addEntry(gt)))})}),be.next(()=>T.mutationQueue.removeMutationBatch(S,G))}(n,s,e,l).next(()=>l.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(T){let S=nn();for(let x=0;x<T.mutationResults.length;++x)T.mutationResults[x].transformResults.length>0&&(S=S.add(T.batch.mutations[x].key));return S}(e))).next(()=>n.localDocuments.getDocuments(s,u))})}(n.localStore,e);mp(n,s,null),dl(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),yield Au(n,u)}catch(u){yield Ce(u)}}),gp.apply(this,arguments)}function Xv(i,e,n){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,ie.Z)(function*(i,e,n){const s=at(i);try{const u=yield function(p,T){const S=at(p);return S.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let L;return S.mutationQueue.lookupMutationBatch(x,T).next(G=>(xt(null!==G),L=G.keys(),S.mutationQueue.removeMutationBatch(x,G))).next(()=>S.mutationQueue.performConsistencyCheck(x)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(x,L,T)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,L)).next(()=>S.localDocuments.getDocuments(x,L))})}(s.localStore,e);mp(s,e,n),dl(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),yield Au(s,u)}catch(u){yield Ce(u)}}),Pd.apply(this,arguments)}function kh(){return kh=(0,ie.Z)(function*(i,e){const n=at(i);uc(n.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const T=at(p);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>T.mutationQueue.getHighestUnacknowledgedBatchId(S))}(n.localStore);if(-1===s)return void e.resolve();const u=n.Ca.get(s)||[];u.push(e),n.Ca.set(s,u)}catch(s){const u=Cd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),kh.apply(this,arguments)}function dl(i,e){(i.Ca.get(e)||[]).forEach(n=>{n.resolve()}),i.Ca.delete(e)}function mp(i,e,n){const s=at(i);let u=s.Da[s.currentUser.toKey()];if(u){const l=u.get(e);l&&(n?l.reject(n):l.resolve(),u=u.remove(e)),s.Da[s.currentUser.toKey()]=u}}function lc(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.pa.get(e))i.ga.delete(s),n&&i.fa.xa(s,n);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(s=>{i.ba.containsKey(s)||_p(i,s)})}function _p(i,e){i.ya.delete(e.path.canonicalString());const n=i.wa.get(e);null!==n&&(ul(i.remoteStore,n),i.wa=i.wa.remove(e),i.Sa.delete(n),Fh(i))}function Lh(i,e,n){for(const s of n)s instanceof sy?(i.ba.addReference(s.key,e),ly(i,s)):s instanceof oy?(Ne("SyncEngine","Document no longer in limbo: "+s.key),i.ba.removeReference(s.key,e),i.ba.containsKey(s.key)||_p(i,s.key)):Dt()}function ly(i,e){const n=e.key,s=n.path.canonicalString();i.wa.get(n)||i.ya.has(s)||(Ne("SyncEngine","New document in limbo: "+n),i.ya.add(s),Fh(i))}function Fh(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const n=new _t(gn.fromString(e)),s=i.va.next();i.Sa.set(s,new Jv(n)),i.wa=i.wa.insert(n,s),tm(i.remoteStore,new na(Qi(bs(n.path)),s,"TargetPurposeLimboResolution",ni._e))}}function Au(i,e,n){return gm.apply(this,arguments)}function gm(){return gm=(0,ie.Z)(function*(i,e,n){const s=at(i),u=[],l=[],p=[];var T;s.ga.isEmpty()||(s.ga.forEach((T,S)=>{p.push(s.Ma(S,e,n).then(x=>{if((x||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(S.targetId,x?.fromCache?"not-current":"current"),x){u.push(x);const L=Ch.Ki(S.targetId,x);l.push(L)}}))}),yield Promise.all(p),s.fa.u_(u),yield(T=(0,ie.Z)(function*(x,L){const G=at(x);try{yield G.persistence.runTransaction("notifyLocalViewChanges","readwrite",oe=>se.forEach(L,be=>se.forEach(be.qi,rt=>G.persistence.referenceDelegate.addReference(oe,be.targetId,rt)).next(()=>se.forEach(be.Qi,rt=>G.persistence.referenceDelegate.removeReference(oe,be.targetId,rt)))))}catch(oe){if(!os(oe))throw oe;Ne("LocalStore","Failed to update sequence numbers: "+oe)}for(const oe of L){const be=oe.targetId;if(!oe.fromCache){const rt=G.ns.get(be),ct=rt.withLastLimboFreeSnapshotVersion(rt.snapshotVersion);G.ns=G.ns.insert(be,ct)}}}),function S(x,L){return T.apply(this,arguments)})(s.localStore,l))}),gm.apply(this,arguments)}function eE(i,e){return yp.apply(this,arguments)}function yp(){return yp=(0,ie.Z)(function*(i,e){const n=at(i);if(!n.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const s=yield Hv(n.localStore,e);n.currentUser=e,(l=n).Ca.forEach(T=>{T.forEach(S=>{S.reject(new Qe(Le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Ca.clear(),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Au(n,s.us)}var l}),yp.apply(this,arguments)}function tE(i,e){const n=at(i),s=n.Sa.get(e);if(s&&s.ma)return nn().add(s.key);{let u=nn();const l=n.pa.get(e);if(!l)return u;for(const p of l){const T=n.ga.get(p);u=u.unionWith(T.view.la)}return u}}function nE(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,ie.Z)(function*(i,e){const n=at(i),s=yield rl(n.localStore,e.query,!0),u=e.view.Ra(s);return n.isPrimaryClient&&Lh(n,e.targetId,u.da),u}),mm.apply(this,arguments)}function rE(i,e){return vp.apply(this,arguments)}function vp(){return vp=(0,ie.Z)(function*(i,e){const n=at(i);return jf(n.localStore,e).then(s=>Au(n,s))}),vp.apply(this,arguments)}function dy(i,e,n,s){return _m.apply(this,arguments)}function _m(){return _m=(0,ie.Z)(function*(i,e,n,s){const u=at(i),l=yield function(T,S){const x=at(T),L=at(x.mutationQueue);return x.persistence.runTransaction("Lookup mutation documents","readonly",G=>L.vn(G,S).next(oe=>oe?x.localDocuments.getDocuments(G,oe):se.resolve(null)))}(u.localStore,e);var S;null!==l?("pending"===n?yield go(u.remoteStore):"acknowledged"===n||"rejected"===n?(mp(u,e,s||null),dl(u,e),S=e,at(at(u.localStore).mutationQueue).Mn(S)):Dt(),yield Au(u,l)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),_m.apply(this,arguments)}function Rs(){return Rs=(0,ie.Z)(function*(i,e){const n=at(i);if(Ep(n),wm(n),!0===e&&!0!==n.Fa){const s=n.sharedClientState.getAllActiveQueryTargets(),u=yield hy(n,s.toArray());n.Fa=!0,yield sp(n.remoteStore,!0);for(const l of u)tm(n.remoteStore,l)}else if(!1===e&&!1!==n.Fa){const s=[];let u=Promise.resolve();n.pa.forEach((l,p)=>{n.sharedClientState.isLocalQueryTarget(p)?s.push(p):u=u.then(()=>(lc(n,p),ac(n.localStore,p,!0))),ul(n.remoteStore,p)}),yield u,yield hy(n,s),function(p){const T=at(p);T.Sa.forEach((S,x)=>{ul(T.remoteStore,x)}),T.ba.mr(),T.Sa=new Map,T.wa=new ir(_t.comparator)}(n),n.Fa=!1,yield sp(n.remoteStore,!1)}}),Rs.apply(this,arguments)}function hy(i,e,n){return ym.apply(this,arguments)}function ym(){return ym=(0,ie.Z)(function*(i,e,n){const s=at(i),u=[],l=[];for(const p of e){let T;const S=s.pa.get(p);if(S&&0!==S.length){T=yield oc(s.localStore,Qi(S[0]));for(const x of S){const L=s.ga.get(x),G=yield nE(s,L);G.snapshot&&l.push(G.snapshot)}}else{const x=yield il(s.localStore,p);T=yield oc(s.localStore,x),yield lp(s,sE(x),p,!1,T.resumeToken)}u.push(T)}return s.fa.u_(l),u}),ym.apply(this,arguments)}function sE(i){return Eg(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function vm(i){return n=at(i).localStore,at(at(n).persistence).Li();var n}function fy(i,e,n,s){return Em.apply(this,arguments)}function Em(){return Em=(0,ie.Z)(function*(i,e,n,s){const u=at(i);if(u.Fa)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const l=u.pa.get(e);if(l&&l.length>0)switch(n){case"current":case"not-current":{const p=yield jf(u.localStore,Ig(l[0])),T=d.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ri.EMPTY_BYTE_STRING);yield Au(u,p,T);break}case"rejected":yield ac(u.localStore,e,!0),lc(u,e,s);break;default:Dt()}}),Em.apply(this,arguments)}function oE(i,e,n){return Im.apply(this,arguments)}function Im(){return Im=(0,ie.Z)(function*(i,e,n){const s=Ep(i);if(s.Fa){for(const u of e){if(s.pa.has(u)){Ne("SyncEngine","Adding an already active target "+u);continue}const l=yield il(s.localStore,u),p=yield oc(s.localStore,l);yield lp(s,sE(l),p.targetId,!1,p.resumeToken),tm(s.remoteStore,p)}for(const u of n)s.pa.has(u)&&(yield ac(s.localStore,u,!1).then(()=>{ul(s.remoteStore,u),lc(s,u)}).catch(Ce))}}),Im.apply(this,arguments)}function Ep(i){const e=at(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cy.bind(null,e),e.fa.u_=ny.bind(null,e.eventManager),e.fa.xa=lm.bind(null,e.eventManager),e}function wm(i){const e=at(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xv.bind(null,e),e}class hl{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ie.Z)(function*(){n.serializer=Qf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return B_(this.persistence,new jv,e.initialUser,this.serializer)}createPersistence(e){return new Gg(Th.Hr,this.serializer)}createSharedClientState(e){return new W_}terminate(){var e=this;return(0,ie.Z)(function*(){var n,s;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Tm extends hl{constructor(e,n,s){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,s=this;return(0,ie.Z)(function*(){yield n().call(s,e),yield s.Na.initialize(s,e),yield wm(s.Na.syncEngine),yield go(s.Na.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return B_(this.persistence,new jv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Fg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const s=new Ml(n,this.persistence);return new Xh(e.asyncQueue,s)}createPersistence(e){const n=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new Dh(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,K_(),Sh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new W_}}class py extends Tm{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,s=this;return(0,ie.Z)(function*(){yield n().call(s,e);const u=s.Na.syncEngine;s.sharedClientState instanceof G_&&(s.sharedClientState.syncEngine={Zs:dy.bind(null,u),Xs:fy.bind(null,u),eo:oE.bind(null,u),Li:vm.bind(null,u),Ys:rE.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var l=(0,ie.Z)(function*(p){yield function iE(i,e){return Rs.apply(this,arguments)}(s.Na.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const n=K_();if(!G_.D(n))throw new Qe(Le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G_(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class xd{initialize(e,n){var s=this;return(0,ie.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(n),s.remoteStore=s.createRemoteStore(n),s.eventManager=s.createEventManager(n),s.syncEngine=s.createSyncEngine(n,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>cn(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=eE.bind(null,s.syncEngine),yield sp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cu}createDatastore(e){const n=Qf(e.databaseInfo.databaseId),s=new q_(e.databaseInfo);return new Rh(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return s=this.localStore,u=this.datastore,l=e.asyncQueue,p=n=>cn(this.syncEngine,n,0),T=Wf.D()?new Wf:new Gf,new qv(s,u,l,p,T);var s,u,l,p,T}createSyncEngine(e,n){return function(u,l,p,T,S,x,L){const G=new GI(u,l,p,T,S,x);return L&&(G.Fa=!0),G}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,ie.Z)(function*(){var n,s;yield(s=(0,ie.Z)(function*(l){const p=at(l);Ne("RemoteStore","RemoteStore shutting down."),p.v_.add(5),yield al(p),p.M_.shutdown(),p.x_.set("Unknown")}),function u(l){return s.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function gy(i,e=10240){let n=0;return{read:()=>(0,ie.Z)(function*(){if(n<i.byteLength){const s={value:i.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})(),cancel:()=>(0,ie.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class mo{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Dm{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new ti,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(s=>{s&&s.ea()?this.metadata.resolve(s.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.X_)}`))},s=>this.metadata.reject(s))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,ie.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,ie.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,ie.Z)(function*(){const n=yield e.Ka();if(null===n)return null;const s=e.qa.decode(n),u=Number(s);isNaN(u)&&e.$a(`length string (${s}) is not valid number`);const l=yield e.Ua(u);return new ry(JSON.parse(l),n.length+u)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,ie.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),s})()}Ua(e){var n=this;return(0,ie.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const s=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),s})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,ie.Z)(function*(){const n=yield e.ka.read();if(!n.done){const s=new Uint8Array(e.buffer.length+n.value.length);s.set(e.buffer),s.set(n.value,e.buffer.length),e.buffer=s}return n.done})()}}class cE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ie.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Qe(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const s=yield(u=(0,ie.Z)(function*(p,T){const S=at(p),x={documents:T.map(be=>xa(S.serializer,be))},L=yield S.vo("BatchGetDocuments",S.serializer.databaseId,gn.emptyPath(),x,T.length),G=new Map;L.forEach(be=>{const rt=function wf(i,e){return"found"in e?function(s,u){xt(!!u.found);const l=Hs(s,u.found.name),p=Wr(u.found.updateTime),T=u.found.createTime?Wr(u.found.createTime):Et.min(),S=new sr({mapValue:{fields:u.found.fields}});return pr.newFoundDocument(l,p,T,S)}(i,e):"missing"in e?function(s,u){xt(!!u.missing),xt(!!u.readTime);const l=Hs(s,u.missing),p=Wr(u.readTime);return pr.newNoDocument(l,p)}(i,e):Dt()}(S.serializer,be);G.set(rt.key.toString(),rt)});const oe=[];return T.forEach(be=>{const rt=G.get(be.toString());xt(!!rt),oe.push(rt)}),oe}),function l(p,T){return u.apply(this,arguments)})(n.datastore,e);var u;return s.forEach(u=>n.recordVersion(u)),s})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new vu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var s;e.mutations.forEach(s=>{n.delete(s.key.toString())}),n.forEach((s,u)=>{const l=_t.fromPath(u);e.mutations.push(new gh(l,e.precondition(l)))}),yield(s=(0,ie.Z)(function*(l,p){const T=at(l),S={writes:p.map(x=>Wc(T.serializer,x))};yield T.So("Commit",T.serializer.databaseId,gn.emptyPath(),S)}),function u(l,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Dt();n=Et.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Qe(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Et.min())?Dn.exists(!1):Dn.updateTime(n):Dn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Et.min()))throw new Qe(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dn.updateTime(n)}return Dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class my{constructor(e,n,s,u,l){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=u,this.deferred=l,this.za=s.maxAttempts,this.jo=new em(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,ie.Z)(function*(){const n=new cE(e.datastore),s=e.Ja(n);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.Ya(l)}))}).catch(u=>{e.Ya(u)})}))}Ja(e){try{const n=this.updateFunction(e);return!ru(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!td(n)}return!1}}class lE{constructor(e,n,s,u){var l=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=u,this.user=Gr.UNAUTHENTICATED,this.clientId=Bu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,ie.Z)(function*(T){Ne("FirestoreClient","Received user=",T.uid),yield l.authCredentialListener(T),l.user=T});return function(T){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Ne("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(s){const u=Cd(s,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Vh(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,ie.Z)(function*(l){s.isEqual(l)||(yield Hv(e.localStore,l),s=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Ip.apply(this,arguments)}function Nd(i,e){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield wp(i);Ne("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>ey(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,u)=>ey(e.remoteStore,u)),i._onlineComponents=e}),Uh.apply(this,arguments)}function dE(i){return"FirebaseError"===i.name?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function wp(i){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,ie.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ne("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!dE(n))throw n;Er("Error using user provided cache. Falling back to memory cache: "+n),yield Vh(i,new hl)}}else Ne("FirestoreClient","Using default OfflineComponentProvider"),yield Vh(i,new hl);return i._offlineComponents}),Tp.apply(this,arguments)}function Bh(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ie.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ne("FirestoreClient","Using user provided OnlineComponentProvider"),yield Nd(i,i._uninitializedComponentsProvider._online)):(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield Nd(i,new xd))),i._onlineComponents}),Dp.apply(this,arguments)}function Cp(i){return wp(i).then(e=>e.persistence)}function zs(i){return wp(i).then(e=>e.localStore)}function _y(i){return Bh(i).then(e=>e.remoteStore)}function Cm(i){return Bh(i).then(e=>e.syncEngine)}function Od(i){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ie.Z)(function*(i){const e=yield Bh(i),n=e.eventManager;return n.onListen=WI.bind(null,e.syncEngine),n.onUnlisten=dp.bind(null,e.syncEngine),n}),Sp.apply(this,arguments)}function Am(i,e,n={}){const s=new ti;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(l,p,T,S,x){const L=new mo({next:oe=>{p.enqueueAndForget(()=>cm(l,G));const be=oe.docs.has(T);!be&&oe.fromCache?x.reject(new Qe(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):be&&oe.fromCache&&S&&"server"===S.source?x.reject(new Qe(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(oe)},error:oe=>x.reject(oe)}),G=new bd(bs(T.path),L,{includeMetadataChanges:!0,Z_:!0});return cc(l,G)}(yield Od(i),i.asyncQueue,e,n,s)})),s.promise}function fE(i,e,n={}){const s=new ti;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function(l,p,T,S,x){const L=new mo({next:oe=>{p.enqueueAndForget(()=>cm(l,G)),oe.fromCache&&"server"===S.source?x.reject(new Qe(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(oe)},error:oe=>x.reject(oe)}),G=new bd(T,L,{includeMetadataChanges:!0,Z_:!0});return cc(l,G)}(yield Od(i),i.asyncQueue,e,n,s)})),s.promise}function Sm(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const kd=new Map;function bm(i,e,n){if(!n)throw new Qe(Le.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Rm(i,e,n,s){if(!0===e&&!0===s)throw new Qe(Le.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pm(i){if(!_t.isDocumentKey(i))throw new Qe(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Iy(i){if(_t.isDocumentKey(i))throw new Qe(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Pp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(s=i).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof i?"a function":Dt()}function yn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Qe(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pp(i);throw new Qe(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function wy(i,e){if(e<=0)throw new Qe(Le.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Ty{constructor(e){var n,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Qe(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qe(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Sm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new Qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Qe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,n,s,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qe(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qe(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new lg;switch(s.type){case"firstParty":return new nu(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Qe(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=kd.get(n);s&&(Ne("ComponentProvider","Removing Datastore"),kd.delete(n),s.terminate())}(this),Promise.resolve()}}class Yi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class Mr{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mr(this.firestore,e,this._key)}}class Fa extends Yi{constructor(e,n,s){super(e,n,bs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new _t(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function Cy(i,e,...n){if(i=(0,St.m9)(i),bm("collection","path",e),i instanceof $h){const s=gn.fromString(e,...n);return Iy(s),new Fa(i,null,s)}{if(!(i instanceof Mr||i instanceof Fa))throw new Qe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gn.fromString(e,...n));return Iy(s),new Fa(i.firestore,null,s)}}function Ld(i,e,...n){if(i=(0,St.m9)(i),1===arguments.length&&(e=Bu.newId()),bm("doc","path",e),i instanceof $h){const s=gn.fromString(e,...n);return Pm(s),new Mr(i,null,new _t(s))}{if(!(i instanceof Mr||i instanceof Fa))throw new Qe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gn.fromString(e,...n));return Pm(s),new Mr(i.firestore,i instanceof Fa?i.converter:null,new _t(s))}}function Sy(i,e){return i=(0,St.m9)(i),e=(0,St.m9)(e),(i instanceof Mr||i instanceof Fa)&&(e instanceof Mr||e instanceof Fa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Fd(i,e){return i=(0,St.m9)(i),e=(0,St.m9)(e),i instanceof Yi&&e instanceof Yi&&i.firestore===e.firestore&&du(i._query,e._query)&&i.converter===e.converter}class _E{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new em(this,"async_queue_retry"),this._u=()=>{const n=Sh();n&&Ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Sh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Sh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new ti;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,ie.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!os(n))throw n;Ne("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(s=>{throw this.ru=s,this.iu=!1,vr("INTERNAL UNHANDLED ERROR: ",function(p){let T=p.message||"";return p.stack&&(T=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),T}(s)),s}).then(s=>(this.iu=!1,s))));return this.Xa=n,n}enqueueAfterDelay(e,n,s){this.au(),this.ou.indexOf(e)>-1&&(n=0);const u=ap.createAndSchedule(this,e,n,s,l=>this.lu(l));return this.nu.push(u),u}au(){this.ru&&Dt()}verifyOperationInProgress(){}hu(){var e=this;return(0,ie.Z)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function Mm(i){return function(n,s){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(i)}class yE{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ar extends $h{constructor(e,n,s,u){super(e,n,s,u),this.type="firestore",this._queue=new _E,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xm(this),this._firestoreClient.terminate()}}function qr(i){return i._firestoreClient||xm(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function xm(i){var e,n,s;const u=i._freezeSettings(),l=(S=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ih(i._databaseId,S,i._persistenceKey,(L=u).host,L.ssl,L.experimentalForceLongPolling,L.experimentalAutoDetectLongPolling,Sm(L.experimentalLongPollingOptions),L.useFetchStreams));var S,L;i._firestoreClient=new lE(i._authCredentials,i._appCheckCredentials,i._queue,l),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(s=u.localCache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nm(i,e,n){const s=new ti;return i.asyncQueue.enqueue((0,ie.Z)(function*(){try{yield Vh(i,n),yield Nd(i,e),s.resolve()}catch(u){const l=u;if(!dE(l))throw l;Er("Error enabling indexeddb cache. Falling back to memory cache: "+l),s.reject(l)}})).then(()=>s.promise)}function ra(i){if(i._initialized||i._terminated)throw new Qe(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(ri.fromBase64String(e))}catch(n){throw new Qe(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class No{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Qe(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bu{constructor(e){this._methodName=e}}class Ru{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qe(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qe(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const Vd=/^__.*__$/;class Ud{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return null!==this.fieldMask?new xo(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class fl{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pl(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class Pu{constructor(e,n,s,u,l,p){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===l&&this.Eu(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Pu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:s,Vu:!1});return u.mu(e),u}fu(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:s,Vu:!1});return u.Eu(),u}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Vp(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(pl(this.du)&&Vd.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Bd{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Qf(e)}Su(e,n,s,u=!1){return new Pu({du:e,methodName:n,wu:s,path:En.emptyPath(),Vu:!1,yu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oo(i){const e=i._freezeSettings(),n=Qf(i._databaseId);return new Bd(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Mu(i,e,n,s,u,l={}){const p=i.Su(l.merge||l.mergeFields?2:0,e,n,u);Py("Data must be an object, but it was:",p,s);const T=Ry(s,p);let S,x;if(l.merge)S=new xi(p.fieldMask),x=p.fieldTransforms;else if(l.mergeFields){const L=[];for(const G of l.mergeFields){const oe=Hh(e,G,n);if(!p.contains(oe))throw new Qe(Le.INVALID_ARGUMENT,`Field '${oe}' is specified in your field mask but missing from your input data.`);CE(L,oe)||L.push(oe)}S=new xi(L),x=p.fieldTransforms.filter(G=>S.covers(G.field))}else S=null,x=p.fieldTransforms;return new Ud(new sr(T),S,x)}class jd extends bu{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jd}}function km(i,e,n){return new Pu({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xp extends bu{_toFieldTransform(e){return new _u(e.path,new pu)}isEqual(e){return e instanceof xp}}class Np extends bu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=km(this,e,!0),s=this.bu.map(l=>xu(l,n)),u=new gu(s);return new _u(e.path,u)}isEqual(e){return e instanceof Np&&(0,St.vZ)(this.bu,e.bu)}}class Op extends bu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=km(this,e,!0),s=this.bu.map(l=>xu(l,n)),u=new Ra(s);return new _u(e.path,u)}isEqual(e){return e instanceof Op&&(0,St.vZ)(this.bu,e.bu)}}class kp extends bu{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new mu(e.serializer,hh(e.serializer,this.Du));return new _u(e.path,n)}isEqual(e){return e instanceof kp&&this.Du===e.Du}}function Lp(i,e,n,s){const u=i.Su(1,e,n);Py("Data must be an object, but it was:",u,s);const l=[],p=sr.empty();Ss(s,(S,x)=>{const L=Fm(e,S,n);x=(0,St.m9)(x);const G=u.fu(L);if(x instanceof jd)l.push(L);else{const oe=xu(x,G);null!=oe&&(l.push(L),p.set(L,oe))}});const T=new xi(l);return new fl(p,T,u.fieldTransforms)}function Fp(i,e,n,s,u,l){const p=i.Su(1,e,n),T=[Hh(e,s,n)],S=[u];if(l.length%2!=0)throw new Qe(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let oe=0;oe<l.length;oe+=2)T.push(Hh(e,l[oe])),S.push(l[oe+1]);const x=[],L=sr.empty();for(let oe=T.length-1;oe>=0;--oe)if(!CE(x,T[oe])){const be=T[oe];let rt=S[oe];rt=(0,St.m9)(rt);const gt=p.fu(be);if(rt instanceof jd)x.push(be);else{const ct=xu(rt,gt);null!=ct&&(x.push(be),L.set(be,ct))}}const G=new xi(x);return new fl(L,G,p.fieldTransforms)}function Lm(i,e,n,s=!1){return xu(n,i.Su(s?4:3,e))}function xu(i,e){if(TE(i=(0,St.m9)(i)))return Py("Unsupported field value:",e,i),Ry(i,e);if(i instanceof bu)return function(s,u){if(!pl(u.du))throw u.pu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.pu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(s,u){const l=[];let p=0;for(const T of s){let S=xu(T,u.gu(p));null==S&&(S={nullValue:"NULL_VALUE"}),l.push(S),p++}return{arrayValue:{values:l}}}(i,e)}return function(s,u){if(null===(s=(0,St.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return hh(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const l=rr.fromDate(s);return{timestampValue:Pa(u.serializer,l)}}if(s instanceof rr){const l=new rr(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Pa(u.serializer,l)}}if(s instanceof Ru)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ps)return{bytesValue:zc(u.serializer,s._byteString)};if(s instanceof Mr){const l=u.databaseId,p=s.firestore._databaseId;if(!p.isEqual(l))throw u.pu(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ma(s.firestore._databaseId||u.databaseId,s._key.path)}}throw u.pu(`Unsupported field value: ${Pp(s)}`)}(i,e)}function Ry(i,e){const n={};return kl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(i,(s,u)=>{const l=xu(u,e.Ru(s));null!=l&&(n[s]=l)}),{mapValue:{fields:n}}}function TE(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof rr||i instanceof Ru||i instanceof ps||i instanceof Mr||i instanceof bu)}function Py(i,e,n){if(!TE(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=Pp(n);throw e.pu("an object"===s?i+" a custom object":i+" "+s)}var u}function Hh(i,e,n){if((e=(0,St.m9)(e))instanceof No)return e._internalPath;if("string"==typeof e)return Fm(i,e);throw Vp("Field path arguments must be of type string or ",i,!1,void 0,n)}const DE=new RegExp("[~\\*/\\[\\]]");function Fm(i,e,n){if(e.search(DE)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Vp(i,e,n,s,u){const l=s&&!s.isEmpty(),p=void 0!==u;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let S="";return(l||p)&&(S+=" (found",l&&(S+=` in field ${s}`),p&&(S+=` in document ${u}`),S+=")"),new Qe(Le.INVALID_ARGUMENT,T+i+S)}function CE(i,e){return i.some(n=>n.isEqual(e))}class zh{constructor(e,n,s,u,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new AE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Up("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class AE extends zh{data(){return super.data()}}function Up(i,e){return"string"==typeof e?Fm(i,e):e instanceof No?e._internalPath:e._delegate._internalPath}function Bp(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Qe(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gl{}class ml extends gl{}function sa(i,e,...n){let s=[];e instanceof gl&&s.push(e),s=s.concat(n),function(l){const p=l.filter(S=>S instanceof _l).length,T=l.filter(S=>S instanceof $d).length;if(p>1||p>0&&T>0)throw new Qe(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)i=u._apply(i);return i}class $d extends ml{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new $d(e,n,s)}_apply(e){const n=this._parse(e);return Ny(e._query,n),new Yi(e.firestore,e.converter,Ju(e._query,n))}_parse(e){const n=Oo(e.firestore);return function(l,p,T,S,x,L,G){let oe;if(x.isKeyField()){if("array-contains"===L||"array-contains-any"===L)throw new Qe(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${L}' queries on documentId().`);if("in"===L||"not-in"===L){xy(G,L);const be=[];for(const rt of G)be.push(jm(S,l,rt));oe={arrayValue:{values:be}}}else oe=jm(S,l,G)}else"in"!==L&&"not-in"!==L&&"array-contains-any"!==L||xy(G,L),oe=Lm(T,"where",G,"in"===L||"not-in"===L);return Jt.create(x,L,oe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class _l extends gl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _l(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===n.length?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,l){let p=u;const T=l.getFlattenedFilters();for(const S of T)Ny(p,S),p=Ju(p,S)}(e._query,n),new Yi(e.firestore,e.converter,Ju(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Vm extends ml{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(u,l,p){if(null!==u.startAt)throw new Qe(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Qe(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fl(l,p)}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(u,l){const p=u.explicitOrderBy.concat([l]);return new Ca(u.path,u.collectionGroup,p,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class $p extends ml{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new $p(e,n,s)}_apply(e){return new Yi(e.firestore,e.converter,Fc(e._query,this._limit,this._limitType))}}class yl extends ml{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new yl(e,n,s)}_apply(e){const n=My(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(l=n,new Ca((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class zp extends ml{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new zp(e,n,s)}_apply(e){const n=My(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(l=n,new Ca((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function My(i,e,n,s){if(n[0]=(0,St.m9)(n[0]),n[0]instanceof zh)return function(l,p,T,S,x){if(!S)throw new Qe(Le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const L=[];for(const G of Aa(l))if(G.field.isKeyField())L.push(Gu(p,S.key));else{const oe=S.data.field(G.field);if(ou(oe))throw new Qe(Le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+G.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===oe){const be=G.field.canonicalString();throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${be}' (used as the orderBy) does not exist.`)}L.push(oe)}return new ao(L,x)}(i._query,i.firestore._databaseId,e,n[0]._document,s);{const u=Oo(i.firestore);return function(p,T,S,x,L,G){const oe=p.explicitOrderBy;if(L.length>oe.length)throw new Qe(Le.INVALID_ARGUMENT,`Too many arguments provided to ${x}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const be=[];for(let rt=0;rt<L.length;rt++){const gt=L[rt];if(oe[rt].field.isKeyField()){if("string"!=typeof gt)throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${x}(), but got a ${typeof gt}`);if(!gf(p)&&-1!==gt.indexOf("/"))throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${x}() must be a plain document ID, but '${gt}' contains a slash.`);const ct=p.path.child(gn.fromString(gt));if(!_t.isDocumentKey(ct))throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${x}() must result in a valid document path, but '${ct}' is not because it contains an odd number of segments.`);const Ft=new _t(ct);be.push(Gu(T,Ft))}else{const ct=Lm(S,x,gt);be.push(ct)}}return new ao(be,G)}(i._query,i.firestore._databaseId,u,e,n,s)}}function jm(i,e,n){if("string"==typeof(n=(0,St.m9)(n))){if(""===n)throw new Qe(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gf(e)&&-1!==n.indexOf("/"))throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(gn.fromString(n));if(!_t.isDocumentKey(s))throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gu(i,new _t(s))}if(n instanceof Mr)return Gu(i,n._key);throw new Qe(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pp(n)}.`)}function xy(i,e){if(!Array.isArray(i)||0===i.length)throw new Qe(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ny(i,e){const n=function(u,l){for(const p of u)for(const T of p.getFlattenedFilters())if(l.indexOf(T.op)>=0)return T.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Qe(Le.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Gp{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Dt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ss(e,(u,l)=>{s[u]=this.convertValue(l,n)}),s}convertGeoPoint(e){return new Ru(Ur(e.latitude),Ur(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=au(e);return null==s?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const n=us(e);return new rr(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=gn.fromString(e);xt(T_(s));const u=new Qo(s.get(1),s.get(3)),l=new _t(s.popFirst(5));return u.isEqual(n)||vr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function Wh(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class PE extends Gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,n)}}class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ko extends zh{constructor(e,n,s,u,l,p){super(e,n,s,u,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Up("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class dc extends ko{data(e={}){return super.data(e)}}class Va{constructor(e,n,s,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new vl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new dc(this._firestore,this._userDataWriter,s.key,s,new vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qe(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let p=0;return u._snapshot.docChanges.map(T=>({type:"added",doc:new dc(u._firestore,u._userDataWriter,T.doc.key,T.doc,new vl(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:p++}))}{let p=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(T=>l||3!==T.type).map(T=>{const S=new dc(u._firestore,u._userDataWriter,T.doc.key,T.doc,new vl(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);let x=-1,L=-1;return 0!==T.type&&(x=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),1!==T.type&&(p=p.add(T.doc),L=p.indexOf(T.doc.key)),{type:Fy(T.type),doc:S,oldIndex:x,newIndex:L}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function Vy(i,e){return i instanceof ko&&e instanceof ko?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Va&&e instanceof Va&&i._firestore===e._firestore&&Fd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class hc extends Gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,n)}}function jy(i,e,n){i=yn(i,Mr);const s=yn(i.firestore,Ar),u=Wh(i.converter,e,n);return Hd(s,[Mu(Oo(s),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Dn.none())])}function Gm(i,e,n,...s){i=yn(i,Mr);const u=yn(i.firestore,Ar),l=Oo(u);let p;return p="string"==typeof(e=(0,St.m9)(e))||e instanceof No?Fp(l,"updateDoc",i._key,e,n,s):Lp(l,"updateDoc",i._key,e),Hd(u,[p.toMutation(i._key,Dn.exists(!0))])}function Wp(i,...e){var n,s,u;i=(0,St.m9)(i);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Mm(e[p])||(l=e[p],p++);const T={includeMetadataChanges:l.includeMetadataChanges};if(Mm(e[p])){const G=e[p];e[p]=null===(n=G.next)||void 0===n?void 0:n.bind(G),e[p+1]=null===(s=G.error)||void 0===s?void 0:s.bind(G),e[p+2]=null===(u=G.complete)||void 0===u?void 0:u.bind(G)}let S,x,L;if(i instanceof Mr)x=yn(i.firestore,Ar),L=bs(i._key.path),S={next:G=>{e[p]&&e[p](qp(x,i,G))},error:e[p+1],complete:e[p+2]};else{const G=yn(i,Yi);x=yn(G.firestore,Ar),L=G._query;const oe=new hc(x);S={next:be=>{e[p]&&e[p](new Va(x,oe,G,be))},error:e[p+1],complete:e[p+2]},Bp(i._query)}return function(oe,be,rt,gt){const ct=new mo(gt),Ft=new bd(be,ct,rt);return oe.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return cc(yield Od(oe),Ft)})),()=>{ct.La(),oe.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return cm(yield Od(oe),Ft)}))}}(qr(x),L,T,S)}function Hd(i,e){return function(s,u){const l=new ti;return s.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function uy(i,e,n){return fm.apply(this,arguments)}(yield Cm(s),u,l)})),l.promise}(qr(i),e)}function qp(i,e,n){const s=n.docs.get(e._key),u=new hc(i);return new ko(i,u,e._key,s,new vl(n.hasPendingWrites,n.fromCache),e.converter)}const Yy={maxAttempts:5};class qm{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,n,s){this._verifyNotCommitted();const u=oa(e,this._firestore),l=Wh(u.converter,n,s),p=Mu(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,s);return this._mutations.push(p.toMutation(u._key,Dn.none())),this}update(e,n,s,...u){this._verifyNotCommitted();const l=oa(e,this._firestore);let p;return p="string"==typeof(n=(0,St.m9)(n))||n instanceof No?Fp(this._dataReader,"WriteBatch.update",l._key,n,s,u):Lp(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(p.toMutation(l._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=oa(e,this._firestore);return this._mutations=this._mutations.concat(new vu(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oa(i,e){if((i=(0,St.m9)(i)).firestore!==e)throw new Qe(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class fc extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=Oo(n)}get(n){const s=oa(n,this._firestore),u=new PE(this._firestore);return this._transaction.lookup([s._key]).then(l=>{if(!l||1!==l.length)return Dt();const p=l[0];if(p.isFoundDocument())return new zh(this._firestore,u,p.key,p,s.converter);if(p.isNoDocument())return new zh(this._firestore,u,s._key,null,s.converter);throw Dt()})}set(n,s,u){const l=oa(n,this._firestore),p=Wh(l.converter,s,u),T=Mu(this._dataReader,"Transaction.set",l._key,p,null!==l.converter,u);return this._transaction.set(l._key,T),this}update(n,s,u,...l){const p=oa(n,this._firestore);let T;return T="string"==typeof(s=(0,St.m9)(s))||s instanceof No?Fp(this._dataReader,"Transaction.update",p._key,s,u,l):Lp(this._dataReader,"Transaction.update",p._key,s),this._transaction.update(p._key,T),this}delete(n){const s=oa(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=oa(e,this._firestore),s=new hc(this._firestore);return super.get(e).then(u=>new ko(this._firestore,s,n._key,u._document,new vl(!1,!1),n.converter))}}function pc(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qe("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function nv(){if(typeof Uint8Array>"u")throw new Qe("unimplemented","Uint8Arrays are not available in this environment.")}function rv(){if(!function rh(){return typeof atob<"u"}())throw new Qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ya=Te.SDK_VERSION,(0,Te._registerComponent)(new Nt.wA("firestore",(s,{instanceIdentifier:u,options:l})=>{const p=s.getProvider("app").getImmediate(),T=new Ar(new bn(s.getProvider("auth-internal")),new Pr(s.getProvider("app-check-internal")),function(x,L){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Qe(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(x.options.projectId,L)}(p,u),p);return l=Object.assign({useFetchStreams:n},l),T._setSettings(l),T},"PUBLIC").setMultipleInstances(!0)),(0,Te.registerVersion)(Vs,"4.4.2",e),(0,Te.registerVersion)(Vs,"4.4.2","esm2017")}();class zd{constructor(e){this._delegate=e}static fromBase64String(e){return rv(),new zd(ps.fromBase64String(e))}static fromUint8Array(e){return nv(),new zd(ps.fromUint8Array(e))}toBase64(){return rv(),this._delegate.toBase64()}toUint8Array(){return nv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ym(i){return function iv(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const s of e)if(s in n&&"function"==typeof n[s])return!0;return!1}(i,["next","error","complete"])}class o0{enableIndexedDbPersistence(e,n){return function EE(i,e){ra(i=yn(i,Ar));const n=qr(i);if(n._uninitializedComponentsProvider)throw new Qe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");Er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),u=new xd;return Nm(n,u,new Tm(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function ZI(i){ra(i=yn(i,Ar));const e=qr(i);if(e._uninitializedComponentsProvider)throw new Qe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");Er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),s=new xd;return Nm(e,s,new py(s,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function by(i){if(i._initialized&&!i._terminated)throw new Qe(Le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ie.Z)(function*(){try{yield(n=(0,ie.Z)(function*(u){if(!kt.D())return Promise.resolve();const l=u+"main";yield kt.delete(l)}),function s(u){return n.apply(this,arguments)})(Vf(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Jm{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,s={}){!function Dy(i,e,n,s={}){var u;const l=(i=yn(i,$h))._getSettings(),p=`${e}:${n}`;if("firestore.googleapis.com"!==l.host&&l.host!==p&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:p,ssl:!1})),s.mockUserToken){let T,S;if("string"==typeof s.mockUserToken)T=s.mockUserToken,S=Gr.MOCK_USER;else{T=(0,St.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new Qe(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Gr(x)}i._authCredentials=new Ke(new tu(T,S))}}(this._delegate,e,n,s)}enableNetwork(){return function Mp(i){return function hE(i){return i.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Cp(i),n=yield _y(i);return e.setNetworkEnabled(!0),function(u){const l=at(u);return l.v_.delete(0),Ph(l)}(n)}))}(qr(i=yn(i,Ar)))}(this._delegate)}disableNetwork(){return function IE(i){return function bp(i){return i.asyncQueue.enqueue((0,ie.Z)(function*(){const e=yield Cp(i),n=yield _y(i);return e.setNetworkEnabled(!1),(s=(0,ie.Z)(function*(l){const p=at(l);p.v_.add(0),yield al(p),p.x_.set("Offline")}),function u(l){return s.apply(this,arguments)})(n);var s}))}(qr(i=yn(i,Ar)))}(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Rm("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QI(i){return function(n){const s=new ti;return n.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return function Md(i,e){return kh.apply(this,arguments)}(yield Cm(n),s)})),s.promise}(qr(i=yn(i,Ar)))}(this._delegate)}onSnapshotsInSync(e){return function Hy(i,e){return function pE(i,e){const n=new mo(e);return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return u=yield Od(i),l=n,at(u).K_.add(l),void l.next();var u,l})),()=>{n.La(),i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return u=yield Od(i),l=n,void at(u).K_.delete(l);var u,l}))}}(qr(i=yn(i,Ar)),Mm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ba(this,Cy(this._delegate,e))}catch(n){throw xr(n,"collection()","Firestore.collection()")}}doc(e){try{return new ii(this,Ld(this._delegate,e))}catch(n){throw xr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function Ay(i,e){if(i=yn(i,$h),bm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qe(Le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(i,null,(s=e,new Ca(gn.emptyPath(),s)));var s}(this._delegate,e))}catch(n){throw xr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BE(i,e,n){i=yn(i,Ar);const s=Object.assign(Object.assign({},Yy),n);return function(l){if(l.maxAttempts<1)throw new Qe(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,p,T){const S=new ti;return l.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){const x=yield function Ap(i){return Bh(i).then(e=>e.datastore)}(l);new my(l.asyncQueue,x,T,p,S).ja()})),S.promise}(qr(i),u=>e(new fc(i,u)),s)}(this._delegate,n=>e(new sv(this,n)))}batch(){return qr(this._delegate),new ov(new qm(this._delegate,e=>Hd(this._delegate,e)))}loadBundle(e){return function Om(i,e){const n=qr(i=yn(i,Ar)),s=new yE;return function yy(i,e,n,s){const u=function(p,T){let S;return S="string"==typeof p?ta().encode(p):p,L=function(L,G){if(L instanceof Uint8Array)return gy(L,G);if(L instanceof ArrayBuffer)return gy(new Uint8Array(L),G);if(L instanceof ReadableStream)return L.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Dm(L,T);var L}(n,Qf(e));i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){!function aE(i,e,n){const s=at(i);var u;(u=(0,ie.Z)(function*(p,T,S){try{const x=yield T.getMetadata();if(yield function(rt,gt){const ct=at(rt),Ft=Wr(gt.createTime);return ct.persistence.runTransaction("hasNewerBundle","readonly",sn=>ct.$r.getBundleMetadata(sn,gt.id)).then(sn=>!!sn&&sn.createTime.compareTo(Ft)>=0)}(p.localStore,x))return yield T.close(),S._completeWith({taskState:"Success",documentsLoaded:(rt=x).totalDocuments,bytesLoaded:rt.totalBytes,totalDocuments:rt.totalDocuments,totalBytes:rt.totalBytes}),Promise.resolve(new Set);S._updateProgress(iy(x));const L=new Yv(x,p.localStore,T.serializer);let G=yield T.Oa();for(;G;){const be=yield L.na(G);be&&S._updateProgress(be),G=yield T.Oa()}const oe=yield L.complete();return yield Au(p,oe.sa,void 0),yield function(rt,gt){const ct=at(rt);return ct.persistence.runTransaction("Save bundle","readwrite",Ft=>ct.$r.saveBundleMetadata(Ft,gt))}(p.localStore,x),S._completeWith(oe.progress),Promise.resolve(oe.ia)}catch(x){return Er("SyncEngine",`Loading bundle failed with ${x}`),S._failWith(x),Promise.resolve(new Set)}var rt}),function l(p,T,S){return u.apply(this,arguments)})(s,e,n).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield Cm(i),u,s)}))}(n,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function wE(i,e){return function vy(i,e){return i.asyncQueue.enqueue((0,ie.Z)(function*(){return function(s,u){const l=at(s);return l.persistence.runTransaction("Get named query","readonly",p=>l.$r.getNamedQuery(p,u))}(yield zs(i),e)}))}(qr(i=yn(i,Ar)),e).then(n=>n?new Yi(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Ps(this,n):null)}}class Gd extends Gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new ps(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ii.forKey(n,this.firestore,null)}}class sv{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Gd(e)}get(e){const n=Il(e);return this._delegate.get(n).then(s=>new qh(this._firestore,new ko(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const u=Il(e);return s?(pc("Transaction.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=Il(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=Il(e);return this._delegate.delete(n),this}}class ov{constructor(e){this._delegate=e}set(e,n,s){const u=Il(e);return s?(pc("WriteBatch.set",s),this._delegate.set(u,n,s)):this._delegate.set(u,n),this}update(e,n,s,...u){const l=Il(e);return 2===arguments.length?this._delegate.update(l,n):this._delegate.update(l,n,s,...u),this}delete(e){const n=Il(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class gs{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new dc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kh(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=gs.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let l=u.get(n);return l||(l=new gs(e,new Gd(e),n),u.set(n,l)),l}}gs.INSTANCES=new WeakMap;class ii{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gd(e)}static forPath(e,n,s){if(e.length%2!=0)throw new Qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ii(n,new Mr(n._delegate,s,new _t(e)))}static forKey(e,n,s){return new ii(n,new Mr(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ba(this.firestore,Cy(this._delegate,e))}catch(n){throw xr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Mr&&Sy(this._delegate,e)}set(e,n){n=pc("DocumentReference.set",n);try{return n?jy(this._delegate,e,n):jy(this._delegate,e)}catch(s){throw xr(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return 1===arguments.length?Gm(this._delegate,e):Gm(this._delegate,e,n,...s)}catch(u){throw xr(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Wm(i){return Hd(yn(i.firestore,Ar),[new vu(i._key,Dn.none())])}(this._delegate)}onSnapshot(...e){const n=Xm(e),s=e_(e,u=>new qh(this.firestore,new ko(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Wp(this._delegate,n,s)}get(e){let n;return n="cache"===e?.source?function Hm(i){i=yn(i,Mr);const e=yn(i.firestore,Ar),n=qr(e),s=new hc(e);return function jh(i,e){const n=new ti;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(s=(0,ie.Z)(function*(l,p,T){try{const S=yield function(L,G){const oe=at(L);return oe.persistence.runTransaction("read document","readonly",be=>oe.localDocuments.getDocument(be,G))}(l,p);S.isFoundDocument()?T.resolve(S):S.isNoDocument()?T.resolve(null):T.reject(new Qe(Le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const x=Cd(S,`Failed to get document '${p} from cache`);T.reject(x)}}),function u(l,p,T){return s.apply(this,arguments)})(yield zs(i),e,n);var s})),n.promise}(n,i._key).then(u=>new ko(e,s,i._key,u,new vl(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function zm(i){i=yn(i,Mr);const e=yn(i.firestore,Ar);return Am(qr(e),i._key,{source:"server"}).then(n=>qp(e,i,n))}(this._delegate):function ME(i){i=yn(i,Mr);const e=yn(i.firestore,Ar);return Am(qr(e),i._key).then(n=>qp(e,i,n))}(this._delegate),n.then(s=>new qh(this.firestore,new ko(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ii(this.firestore,this._delegate.withConverter(e?gs.getInstance(this.firestore,e):null))}}function xr(i,e,n){return i.message=i.message.replace(e,n),i}function Xm(i){for(const e of i)if("object"==typeof e&&!Ym(e))return e;return{}}function e_(i,e){var n,s;let u;return u=Ym(i[0])?i[0]:Ym(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class qh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ii(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Vy(this._delegate,e._delegate)}}class Kh extends qh{data(e){const n=this._delegate.data(e);return this._delegate._converter||function bl(i,e){i||Dt()}(void 0!==n),n}}class Ps{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gd(e)}where(e,n,s){try{return new Ps(this.firestore,sa(this._delegate,function Gh(i,e,n){const s=e,u=Up("where",i);return $d._create(u,s,n)}(e,n,s)))}catch(u){throw xr(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ps(this.firestore,sa(this._delegate,function SE(i,e="asc"){const n=e,s=Up("orderBy",i);return Vm._create(s,n)}(e,n)))}catch(s){throw xr(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,sa(this._delegate,function bE(i){return wy("limit",i),$p._create("limit",i,"F")}(e)))}catch(n){throw xr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,sa(this._delegate,function Um(i){return wy("limitToLast",i),$p._create("limitToLast",i,"L")}(e)))}catch(n){throw xr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,sa(this._delegate,function Hp(...i){return yl._create("startAt",i,!0)}(...e)))}catch(n){throw xr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,sa(this._delegate,function XI(...i){return yl._create("startAfter",i,!1)}(...e)))}catch(n){throw xr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,sa(this._delegate,function RE(...i){return zp._create("endBefore",i,!1)}(...e)))}catch(n){throw xr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,sa(this._delegate,function Bm(...i){return zp._create("endAt",i,!0)}(...e)))}catch(n){throw xr(n,"endAt()","Query.endAt()")}}isEqual(e){return Fd(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function By(i){i=yn(i,Yi);const e=yn(i.firestore,Ar),n=qr(e),s=new hc(e);return function Rp(i,e){const n=new ti;return i.asyncQueue.enqueueAndForget((0,ie.Z)(function*(){return(s=(0,ie.Z)(function*(l,p,T){try{const S=yield rl(l,p,!0),x=new hm(p,S.hs),L=x.ha(S.documents),G=x.applyChanges(L,!1);T.resolve(G.snapshot)}catch(S){const x=Cd(S,`Failed to execute query '${p} against cache`);T.reject(x)}}),function u(l,p,T){return s.apply(this,arguments)})(yield zs(i),e,n);var s})),n.promise}(n,i._query).then(u=>new Va(e,s,i,u))}(this._delegate):"server"===e?.source?function xE(i){i=yn(i,Yi);const e=yn(i.firestore,Ar),n=qr(e),s=new hc(e);return fE(n,i._query,{source:"server"}).then(u=>new Va(e,s,i,u))}(this._delegate):function Uy(i){i=yn(i,Yi);const e=yn(i.firestore,Ar),n=qr(e),s=new hc(e);return Bp(i._query),fE(n,i._query).then(u=>new Va(e,s,i,u))}(this._delegate),n.then(s=>new Zh(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=Xm(e),s=e_(e,u=>new Zh(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Wp(this._delegate,n,s)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?gs.getInstance(this.firestore,e):null))}}class WE{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Kh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Zh{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new WE(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new Kh(this._firestore,s))})}isEqual(e){return Vy(this._delegate,e._delegate)}}class Ba extends Ps{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ii(this.firestore,e):null}doc(e){try{return new ii(this.firestore,void 0===e?Ld(this._delegate):Ld(this._delegate,e))}catch(n){throw xr(n,"doc()","CollectionReference.doc()")}}add(e){return function $y(i,e){const n=yn(i.firestore,Ar),s=Ld(i),u=Wh(i.converter,e);return Hd(n,[Mu(Oo(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,Dn.exists(!1))]).then(()=>s)}(this._delegate,e).then(n=>new ii(this.firestore,n))}isEqual(e){return Sy(this._delegate,e._delegate)}withConverter(e){return new Ba(this.firestore,this._delegate.withConverter(e?gs.getInstance(this.firestore,e):null))}}function Il(i){return yn(i,Mr)}class Qp{constructor(...e){this._delegate=new No(...e)}static documentId(){return new Qp(En.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof No&&this._delegate._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Km(){return new xp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wl(e)}static delete(){const e=function jE(){return new jd("deleteField")}();return e._methodName="FieldValue.delete",new wl(e)}static arrayUnion(...e){const n=function El(...i){return new Np("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new wl(n)}static arrayRemove(...e){const n=function Zm(...i){return new Op("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new wl(n)}static increment(e){const n=function $E(i){return new kp("increment",i)}(e);return n._methodName="FieldValue.increment",new wl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qE={Firestore:Jm,GeoPoint:Ru,Timestamp:rr,Blob:zd,Transaction:sv,WriteBatch:ov,DocumentReference:ii,DocumentSnapshot:qh,Query:Ps,QueryDocumentSnapshot:Kh,QuerySnapshot:Zh,CollectionReference:Ba,FieldPath:Qp,FieldValue:wl,setLogLevel:function Ua(i){!function Qd(i){ro.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function uv(i){(function av(i,e){i.INTERNAL.registerComponent(new Nt.wA("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},qE)))})(i,(e,n)=>new Jm(e,n,new o0)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(We.Z);var Yp=O(7142);function t_(i,e){return function KE(i,e=he.z){return new Ue.y(n=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},n)}):s=i.onSnapshot({includeMetadataChanges:!0},n),()=>{s?.()}})}(i,e)}function Jp(i,e){return t_(i,e).pipe((0,mt.U)(n=>({payload:n,type:"query"})))}class lv{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const s=this.ref.collection(e),{ref:u,query:l}=pv(s,n);return new r_(u,l,this.afs)}snapshotChanges(){return function cv(i,e){return t_(i,e).pipe((0,qe.O)(void 0),Ct(),(0,mt.U)(n=>{const[s,u]=n;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,je.D)(this.ref.get(e)).pipe(W.iC)}}function Xp(i,e){return Jp(i,e).pipe((0,qe.O)(void 0),Ct(),(0,mt.U)(n=>{const[s,u]=n,l=u.payload.docChanges(),p=l.map(T=>({type:T.type,payload:T}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((T,S)=>{const x=l.find(G=>G.doc.ref.isEqual(T.ref)),L=s?.payload.docs.find(G=>G.ref.isEqual(T.ref));x&&JSON.stringify(x.doc.metadata)===JSON.stringify(T.metadata)||!x&&L&&JSON.stringify(L.metadata)===JSON.stringify(T.metadata)||p.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:T}})}),p}))}function eg(i,e,n){return Xp(i,n).pipe((0,ge.R)((s,u)=>function tg(i,e,n){return e.forEach(s=>{n.indexOf(s.type)>-1&&(i=function dv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ng(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return ng(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ng(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(l=>l.payload),e),[]),(0,Ve.x)(),(0,mt.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function ng(i,e,n,...s){const u=i.slice();return u.splice(e,n,...s),u}function n_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class r_{ref;query;afs;constructor(e,n,s){this.ref=e,this.query=n,this.afs=s}stateChanges(e){let n=Xp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,mt.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,qe.O)(void 0),Ct(),(0,ve.h)(([s,u])=>u.length>0||!s),(0,mt.U)(([,s])=>s),W.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ge.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return eg(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return Jp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(n=>n.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),W.iC)}get(e){return(0,je.D)(this.query.get(e)).pipe(W.iC)}add(e){return this.ref.add(e)}doc(e){return new lv(this.ref.doc(e),this.afs)}}class hv{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Xp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(n=>n.filter(s=>e.indexOf(s.type)>-1)),(0,ve.h)(n=>n.length>0),W.iC):Xp(this.query,this.afs.schedulers.outsideAngular).pipe(W.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ge.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return eg(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.iC)}valueChanges(e={}){return Jp(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),W.iC)}get(e){return(0,je.D)(this.query.get(e)).pipe(W.iC)}}const i_=new z.OlP("angularfire2.enableFirestorePersistence"),s_=new z.OlP("angularfire2.firestore.persistenceSettings"),fv=new z.OlP("angularfire2.firestore.settings"),ZE=new z.OlP("angularfire2.firestore.use-emulator");function pv(i,e=(n=>n)){return{query:e(i),ref:i}}let QE=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,s,u,l,p,T,S,x,L,G,oe,be,rt,gt,ct,Ft,sn){this.schedulers=S;const Lt=(0,Oe.on)(n,T,s),on=L;G&&(0,J.nw)(Lt,T,oe,rt,gt,ct,be,Ft),[this.firestore,this.persistenceEnabled$]=(0,Oe.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Hn=T.runOutsideAngular(()=>Lt.firestore());if(l&&Hn.settings(l),on&&Hn.useEmulator(...on),u&&!(0,De.PM)(p)){const Zn=()=>{try{return(0,je.D)(Hn.enablePersistence(x||void 0).then(()=>!0,()=>!1))}catch(si){return typeof console<"u"&&console.warn(si),(0,tt.of)(!1)}};return[Hn,T.runOutsideAngular(Zn)]}return[Hn,(0,tt.of)(!1)]},[l,on,u])}collection(n,s){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:l,query:p}=pv(u,s),T=this.schedulers.ngZone.run(()=>l);return new r_(T,p,this)}collectionGroup(n,s){const u=s||(p=>p),l=this.firestore.collectionGroup(n);return new hv(u(l),this)}doc(n){let s;s="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>s);return new lv(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||i)(z.LFG(Oe.Dh),z.LFG(Oe.xv,8),z.LFG(i_,8),z.LFG(fv,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(W.HU),z.LFG(s_,8),z.LFG(ZE,8),z.LFG(J.zQ,8),z.LFG(J.Qv,8),z.LFG(J.L6,8),z.LFG(J._Q,8),z.LFG(J.rT,8),z.LFG(J.lh,8),z.LFG(J.f7,8),z.LFG(W.Rf,8))};static \u0275prov=z.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),YE=(()=>{class i{constructor(){Yp.Z.registerVersion("angularfire",W.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:i_,useValue:!0},{provide:s_,useValue:n}]}}static \u0275fac=function(s){return new(s||i)};static \u0275mod=z.oAB({type:i});static \u0275inj=z.cJS({providers:[QE]})}return i})(),JE=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=z.oAB({type:i,bootstrap:[ae]});static#n=this.\u0275inj=z.cJS({imports:[Oe.hO.initializeApp({apiKey:"AIzaSyC0bhIEMKfNuBKu4Vp5WwGYoZW2GWJGfaY",authDomain:"magic-173de.firebaseapp.com",databaseURL:"https://magic-173de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"magic-173de",storageBucket:"magic-173de.appspot.com",messagingSenderId:"843032359293",appId:"1:843032359293:web:cf9b2d1cfe9dc26dfd5c14"}),YE,J.ww,y.b2,le,pe.JF]})}return i})();y.q6().bootstrapModule(JE).catch(i=>console.error(i))},5619:(vt,Pe,O)=>{O.d(Pe,{X:()=>X});var y=O(8645);class X extends y.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const le=super._subscribe(fe);return!le.closed&&fe.next(this._value),le}getValue(){const{hasError:fe,thrownError:le,_value:ae}=this;if(fe)throw le;return this._throwIfClosed(),ae}next(fe){super.next(this._value=fe)}}},5592:(vt,Pe,O)=>{O.d(Pe,{y:()=>Oe});var y=O(305),X=O(7394),z=O(4850),fe=O(8407),le=O(2653),ae=O(4674),pe=O(1441);let Oe=(()=>{class he{constructor(je){je&&(this._subscribe=je)}lift(je){const tt=new he;return tt.source=this,tt.operator=je,tt}subscribe(je,tt,qe){const ot=function J(he){return he&&he instanceof y.Lv||function W(he){return he&&(0,ae.m)(he.next)&&(0,ae.m)(he.error)&&(0,ae.m)(he.complete)}(he)&&(0,X.Nn)(he)}(je)?je:new y.Hp(je,tt,qe);return(0,pe.x)(()=>{const{operator:Xe,source:Ct}=this;ot.add(Xe?Xe.call(ot,Ct):Ct?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(je){try{return this._subscribe(je)}catch(tt){je.error(tt)}}forEach(je,tt){return new(tt=De(tt))((qe,ot)=>{const Xe=new y.Hp({next:Ct=>{try{je(Ct)}catch(mt){ot(mt),Xe.unsubscribe()}},error:ot,complete:qe});this.subscribe(Xe)})}_subscribe(je){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(je)}[z.L](){return this}pipe(...je){return(0,fe.U)(je)(this)}toPromise(je){return new(je=De(je))((tt,qe)=>{let ot;this.subscribe(Xe=>ot=Xe,Xe=>qe(Xe),()=>tt(ot))})}}return he.create=Ue=>new he(Ue),he})();function De(he){var Ue;return null!==(Ue=he??le.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(vt,Pe,O)=>{O.d(Pe,{x:()=>pe});var y=O(5592),X=O(7394);const fe=(0,O(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=O(9039),ae=O(1441);let pe=(()=>{class De extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const he=new Oe(this,this);return he.operator=J,he}_throwIfClosed(){if(this.closed)throw new fe}next(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(J)}})}error(J){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:he}=this;for(;he.length;)he.shift().error(J)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:he,isStopped:Ue,observers:je}=this;return he||Ue?X.Lc:(this.currentObservers=null,je.push(J),new X.w0(()=>{this.currentObservers=null,(0,le.P)(je,J)}))}_checkFinalizedStatuses(J){const{hasError:he,thrownError:Ue,isStopped:je}=this;he?J.error(Ue):je&&J.complete()}asObservable(){const J=new y.y;return J.source=this,J}}return De.create=(W,J)=>new Oe(W,J),De})();class Oe extends pe{constructor(W,J){super(),this.destination=W,this.source=J}next(W){var J,he;null===(he=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===he||he.call(J,W)}error(W){var J,he;null===(he=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===he||he.call(J,W)}complete(){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===J||J.call(W)}_subscribe(W){var J,he;return null!==(he=null===(J=this.source)||void 0===J?void 0:J.subscribe(W))&&void 0!==he?he:X.Lc}}},305:(vt,Pe,O)=>{O.d(Pe,{Hp:()=>qe,Lv:()=>he});var y=O(4674),X=O(7394),z=O(2653),fe=O(3894),le=O(2420);const ae=De("C",void 0,void 0);function De(ge,Ve,ve){return{kind:ge,value:Ve,error:ve}}var W=O(7599),J=O(1441);class he extends X.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,X.Nn)(Ve)&&Ve.add(this)):this.destination=mt}static create(Ve,ve,He){return new qe(Ve,ve,He)}next(Ve){this.isStopped?Ct(function Oe(ge){return De("N",ge,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?Ct(function pe(ge){return De("E",void 0,ge)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?Ct(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function je(ge,Ve){return Ue.call(ge,Ve)}class tt{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Ve)}catch(He){ot(He)}}error(Ve){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Ve)}catch(He){ot(He)}else ot(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(ve){ot(ve)}}}class qe extends he{constructor(Ve,ve,He){let We;if(super(),(0,y.m)(Ve)||!Ve)We={next:Ve??void 0,error:ve??void 0,complete:He??void 0};else{let ie;this&&z.config.useDeprecatedNextContext?(ie=Object.create(Ve),ie.unsubscribe=()=>this.unsubscribe(),We={next:Ve.next&&je(Ve.next,ie),error:Ve.error&&je(Ve.error,ie),complete:Ve.complete&&je(Ve.complete,ie)}):We=Ve}this.destination=new tt(We)}}function ot(ge){z.config.useDeprecatedSynchronousErrorHandling?(0,J.O)(ge):(0,fe.h)(ge)}function Ct(ge,Ve){const{onStoppedNotification:ve}=z.config;ve&&W.z.setTimeout(()=>ve(ge,Ve))}const mt={closed:!0,next:le.Z,error:function Xe(ge){throw ge},complete:le.Z}},7394:(vt,Pe,O)=>{O.d(Pe,{Lc:()=>ae,w0:()=>le,Nn:()=>pe});var y=O(4674);const z=(0,O(2306).d)(De=>function(J){De(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((he,Ue)=>`${Ue+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var fe=O(9039);class le{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const je of J)je.remove(this);else J.remove(this);const{initialTeardown:he}=this;if((0,y.m)(he))try{he()}catch(je){W=je instanceof z?je.errors:[je]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const je of Ue)try{Oe(je)}catch(tt){W=W??[],tt instanceof z?W=[...W,...tt.errors]:W.push(tt)}}if(W)throw new z(W)}}add(W){var J;if(W&&W!==this)if(this.closed)Oe(W);else{if(W instanceof le){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(W)}}_hasParent(W){const{_parentage:J}=this;return J===W||Array.isArray(J)&&J.includes(W)}_addParent(W){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(W),J):J?[J,W]:W}_removeParent(W){const{_parentage:J}=this;J===W?this._parentage=null:Array.isArray(J)&&(0,fe.P)(J,W)}remove(W){const{_finalizers:J}=this;J&&(0,fe.P)(J,W),W instanceof le&&W._removeParent(this)}}le.EMPTY=(()=>{const De=new le;return De.closed=!0,De})();const ae=le.EMPTY;function pe(De){return De instanceof le||De&&"closed"in De&&(0,y.m)(De.remove)&&(0,y.m)(De.add)&&(0,y.m)(De.unsubscribe)}function Oe(De){(0,y.m)(De)?De():De.unsubscribe()}},2653:(vt,Pe,O)=>{O.d(Pe,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(vt,Pe,O)=>{O.d(Pe,{z:()=>le});var y=O(7537),z=O(4564),fe=O(2459);function le(...ae){return function X(){return(0,y.J)(1)}()((0,fe.D)(ae,(0,z.yG)(ae)))}},6232:(vt,Pe,O)=>{O.d(Pe,{E:()=>X});const X=new(O(5592).y)(le=>le.complete())},2459:(vt,Pe,O)=>{O.d(Pe,{D:()=>Ve});var y=O(4829),X=O(3093),z=O(5137),ae=O(5592),Oe=O(4971),De=O(4674),W=O(7103);function he(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new ae.y(We=>{(0,W.f)(We,He,()=>{const ie=ve[Symbol.asyncIterator]();(0,W.f)(We,He,()=>{ie.next().then(Te=>{Te.done?We.complete():We.next(Te.value)})},0,!0)})})}var Ue=O(8382),je=O(4026),tt=O(4266),qe=O(3664),ot=O(5726),Xe=O(9853),Ct=O(541);function Ve(ve,He){return He?function ge(ve,He){if(null!=ve){if((0,Ue.c)(ve))return function fe(ve,He){return(0,y.Xf)(ve).pipe((0,z.R)(He),(0,X.Q)(He))}(ve,He);if((0,tt.z)(ve))return function pe(ve,He){return new ae.y(We=>{let ie=0;return He.schedule(function(){ie===ve.length?We.complete():(We.next(ve[ie++]),We.closed||this.schedule())})})}(ve,He);if((0,je.t)(ve))return function le(ve,He){return(0,y.Xf)(ve).pipe((0,z.R)(He),(0,X.Q)(He))}(ve,He);if((0,ot.D)(ve))return he(ve,He);if((0,qe.T)(ve))return function J(ve,He){return new ae.y(We=>{let ie;return(0,W.f)(We,He,()=>{ie=ve[Oe.h](),(0,W.f)(We,He,()=>{let Te,Nt;try{({value:Te,done:Nt}=ie.next())}catch(At){return void We.error(At)}Nt?We.complete():We.next(Te)},0,!0)}),()=>(0,De.m)(ie?.return)&&ie.return()})}(ve,He);if((0,Ct.L)(ve))return function mt(ve,He){return he((0,Ct.Q)(ve),He)}(ve,He)}throw(0,Xe.z)(ve)}(ve,He):(0,y.Xf)(ve)}},4829:(vt,Pe,O)=>{O.d(Pe,{Xf:()=>Ue});var y=O(7582),X=O(4266),z=O(4026),fe=O(5592),le=O(8382),ae=O(5726),pe=O(9853),Oe=O(3664),De=O(541),W=O(4674),J=O(3894),he=O(4850);function Ue(ge){if(ge instanceof fe.y)return ge;if(null!=ge){if((0,le.c)(ge))return function je(ge){return new fe.y(Ve=>{const ve=ge[he.L]();if((0,W.m)(ve.subscribe))return ve.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,X.z)(ge))return function tt(ge){return new fe.y(Ve=>{for(let ve=0;ve<ge.length&&!Ve.closed;ve++)Ve.next(ge[ve]);Ve.complete()})}(ge);if((0,z.t)(ge))return function qe(ge){return new fe.y(Ve=>{ge.then(ve=>{Ve.closed||(Ve.next(ve),Ve.complete())},ve=>Ve.error(ve)).then(null,J.h)})}(ge);if((0,ae.D)(ge))return Xe(ge);if((0,Oe.T)(ge))return function ot(ge){return new fe.y(Ve=>{for(const ve of ge)if(Ve.next(ve),Ve.closed)return;Ve.complete()})}(ge);if((0,De.L)(ge))return function Ct(ge){return Xe((0,De.Q)(ge))}(ge)}throw(0,pe.z)(ge)}function Xe(ge){return new fe.y(Ve=>{(function mt(ge,Ve){var ve,He,We,ie;return(0,y.mG)(this,void 0,void 0,function*(){try{for(ve=(0,y.KL)(ge);!(He=yield ve.next()).done;)if(Ve.next(He.value),Ve.closed)return}catch(Te){We={error:Te}}finally{try{He&&!He.done&&(ie=ve.return)&&(yield ie.call(ve))}finally{if(We)throw We.error}}Ve.complete()})})(ge,Ve).catch(ve=>Ve.error(ve))})}},3019:(vt,Pe,O)=>{O.d(Pe,{T:()=>ae});var y=O(7537),X=O(4829),z=O(6232),fe=O(4564),le=O(2459);function ae(...pe){const Oe=(0,fe.yG)(pe),De=(0,fe._6)(pe,1/0),W=pe;return W.length?1===W.length?(0,X.Xf)(W[0]):(0,y.J)(De)((0,le.D)(W,Oe)):z.E}},2096:(vt,Pe,O)=>{O.d(Pe,{of:()=>z});var y=O(4564),X=O(2459);function z(...fe){const le=(0,y.yG)(fe);return(0,X.D)(fe,le)}},8251:(vt,Pe,O)=>{O.d(Pe,{x:()=>X});var y=O(305);function X(fe,le,ae,pe,Oe){return new z(fe,le,ae,pe,Oe)}class z extends y.Lv{constructor(le,ae,pe,Oe,De,W){super(le),this.onFinalize=De,this.shouldUnsubscribe=W,this._next=ae?function(J){try{ae(J)}catch(he){le.error(he)}}:super._next,this._error=Oe?function(J){try{Oe(J)}catch(he){le.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},6328:(vt,Pe,O)=>{O.d(Pe,{b:()=>z});var y=O(1631),X=O(4674);function z(fe,le){return(0,X.m)(le)?(0,y.z)(fe,le,1):(0,y.z)(fe,1)}},3572:(vt,Pe,O)=>{O.d(Pe,{d:()=>z});var y=O(9360),X=O(8251);function z(fe){return(0,y.e)((le,ae)=>{let pe=!1;le.subscribe((0,X.x)(ae,Oe=>{pe=!0,ae.next(Oe)},()=>{pe||ae.next(fe),ae.complete()}))})}},3997:(vt,Pe,O)=>{O.d(Pe,{x:()=>fe});var y=O(2737),X=O(9360),z=O(8251);function fe(ae,pe=y.y){return ae=ae??le,(0,X.e)((Oe,De)=>{let W,J=!0;Oe.subscribe((0,z.x)(De,he=>{const Ue=pe(he);(J||!ae(W,Ue))&&(J=!1,W=Ue,De.next(he))}))})}function le(ae,pe){return ae===pe}},2181:(vt,Pe,O)=>{O.d(Pe,{h:()=>z});var y=O(9360),X=O(8251);function z(fe,le){return(0,y.e)((ae,pe)=>{let Oe=0;ae.subscribe((0,X.x)(pe,De=>fe.call(le,De,Oe++)&&pe.next(De)))})}},4716:(vt,Pe,O)=>{O.d(Pe,{x:()=>X});var y=O(9360);function X(z){return(0,y.e)((fe,le)=>{try{fe.subscribe(le)}finally{le.add(z)}})}},1374:(vt,Pe,O)=>{O.d(Pe,{P:()=>pe});var y=O(6973),X=O(2181),z=O(8180),fe=O(3572),le=O(3026),ae=O(2737);function pe(Oe,De){const W=arguments.length>=2;return J=>J.pipe(Oe?(0,X.h)((he,Ue)=>Oe(he,Ue,J)):ae.y,(0,z.q)(1),W?(0,fe.d)(De):(0,le.T)(()=>new y.K))}},7398:(vt,Pe,O)=>{O.d(Pe,{U:()=>z});var y=O(9360),X=O(8251);function z(fe,le){return(0,y.e)((ae,pe)=>{let Oe=0;ae.subscribe((0,X.x)(pe,De=>{pe.next(fe.call(le,De,Oe++))}))})}},7537:(vt,Pe,O)=>{O.d(Pe,{J:()=>z});var y=O(1631),X=O(2737);function z(fe=1/0){return(0,y.z)(X.y,fe)}},1631:(vt,Pe,O)=>{O.d(Pe,{z:()=>Oe});var y=O(7398),X=O(4829),z=O(9360),fe=O(7103),le=O(8251),pe=O(4674);function Oe(De,W,J=1/0){return(0,pe.m)(W)?Oe((he,Ue)=>(0,y.U)((je,tt)=>W(he,je,Ue,tt))((0,X.Xf)(De(he,Ue))),J):("number"==typeof W&&(J=W),(0,z.e)((he,Ue)=>function ae(De,W,J,he,Ue,je,tt,qe){const ot=[];let Xe=0,Ct=0,mt=!1;const ge=()=>{mt&&!ot.length&&!Xe&&W.complete()},Ve=He=>Xe<he?ve(He):ot.push(He),ve=He=>{je&&W.next(He),Xe++;let We=!1;(0,X.Xf)(J(He,Ct++)).subscribe((0,le.x)(W,ie=>{Ue?.(ie),je?Ve(ie):W.next(ie)},()=>{We=!0},void 0,()=>{if(We)try{for(Xe--;ot.length&&Xe<he;){const ie=ot.shift();tt?(0,fe.f)(W,tt,()=>ve(ie)):ve(ie)}ge()}catch(ie){W.error(ie)}}))};return De.subscribe((0,le.x)(W,Ve,()=>{mt=!0,ge()})),()=>{qe?.()}}(he,Ue,De,J)))}},3093:(vt,Pe,O)=>{O.d(Pe,{Q:()=>fe});var y=O(7103),X=O(9360),z=O(8251);function fe(le,ae=0){return(0,X.e)((pe,Oe)=>{pe.subscribe((0,z.x)(Oe,De=>(0,y.f)(Oe,le,()=>Oe.next(De),ae),()=>(0,y.f)(Oe,le,()=>Oe.complete(),ae),De=>(0,y.f)(Oe,le,()=>Oe.error(De),ae)))})}},6699:(vt,Pe,O)=>{O.d(Pe,{R:()=>fe});var y=O(9360),X=O(8251);function fe(le,ae){return(0,y.e)(function z(le,ae,pe,Oe,De){return(W,J)=>{let he=pe,Ue=ae,je=0;W.subscribe((0,X.x)(J,tt=>{const qe=je++;Ue=he?le(Ue,tt,qe):(he=!0,tt),Oe&&J.next(Ue)},De&&(()=>{he&&J.next(Ue),J.complete()})))}}(le,ae,arguments.length>=2,!0))}},3020:(vt,Pe,O)=>{O.d(Pe,{B:()=>le});var y=O(4829),X=O(8645),z=O(305),fe=O(9360);function le(pe={}){const{connector:Oe=(()=>new X.x),resetOnError:De=!0,resetOnComplete:W=!0,resetOnRefCountZero:J=!0}=pe;return he=>{let Ue,je,tt,qe=0,ot=!1,Xe=!1;const Ct=()=>{je?.unsubscribe(),je=void 0},mt=()=>{Ct(),Ue=tt=void 0,ot=Xe=!1},ge=()=>{const Ve=Ue;mt(),Ve?.unsubscribe()};return(0,fe.e)((Ve,ve)=>{qe++,!Xe&&!ot&&Ct();const He=tt=tt??Oe();ve.add(()=>{qe--,0===qe&&!Xe&&!ot&&(je=ae(ge,J))}),He.subscribe(ve),!Ue&&qe>0&&(Ue=new z.Hp({next:We=>He.next(We),error:We=>{Xe=!0,Ct(),je=ae(mt,De,We),He.error(We)},complete:()=>{ot=!0,Ct(),je=ae(mt,W),He.complete()}}),(0,y.Xf)(Ve).subscribe(Ue))})(he)}}function ae(pe,Oe,...De){if(!0===Oe)return void pe();if(!1===Oe)return;const W=new z.Hp({next:()=>{W.unsubscribe(),pe()}});return(0,y.Xf)(Oe(...De)).subscribe(W)}},7921:(vt,Pe,O)=>{O.d(Pe,{O:()=>fe});var y=O(5211),X=O(4564),z=O(9360);function fe(...le){const ae=(0,X.yG)(le);return(0,z.e)((pe,Oe)=>{(ae?(0,y.z)(le,pe,ae):(0,y.z)(le,pe)).subscribe(Oe)})}},5137:(vt,Pe,O)=>{O.d(Pe,{R:()=>X});var y=O(9360);function X(z,fe=0){return(0,y.e)((le,ae)=>{ae.add(z.schedule(()=>le.subscribe(ae),fe))})}},4664:(vt,Pe,O)=>{O.d(Pe,{w:()=>fe});var y=O(4829),X=O(9360),z=O(8251);function fe(le,ae){return(0,X.e)((pe,Oe)=>{let De=null,W=0,J=!1;const he=()=>J&&!De&&Oe.complete();pe.subscribe((0,z.x)(Oe,Ue=>{De?.unsubscribe();let je=0;const tt=W++;(0,y.Xf)(le(Ue,tt)).subscribe(De=(0,z.x)(Oe,qe=>Oe.next(ae?ae(Ue,qe,tt,je++):qe),()=>{De=null,he()}))},()=>{J=!0,he()}))})}},8180:(vt,Pe,O)=>{O.d(Pe,{q:()=>fe});var y=O(6232),X=O(9360),z=O(8251);function fe(le){return le<=0?()=>y.E:(0,X.e)((ae,pe)=>{let Oe=0;ae.subscribe((0,z.x)(pe,De=>{++Oe<=le&&(pe.next(De),le<=Oe&&pe.complete())}))})}},9773:(vt,Pe,O)=>{O.d(Pe,{R:()=>le});var y=O(9360),X=O(8251),z=O(4829),fe=O(2420);function le(ae){return(0,y.e)((pe,Oe)=>{(0,z.Xf)(ae).subscribe((0,X.x)(Oe,()=>Oe.complete(),fe.Z)),!Oe.closed&&pe.subscribe(Oe)})}},9397:(vt,Pe,O)=>{O.d(Pe,{b:()=>le});var y=O(4674),X=O(9360),z=O(8251),fe=O(2737);function le(ae,pe,Oe){const De=(0,y.m)(ae)||pe||Oe?{next:ae,error:pe,complete:Oe}:ae;return De?(0,X.e)((W,J)=>{var he;null===(he=De.subscribe)||void 0===he||he.call(De);let Ue=!0;W.subscribe((0,z.x)(J,je=>{var tt;null===(tt=De.next)||void 0===tt||tt.call(De,je),J.next(je)},()=>{var je;Ue=!1,null===(je=De.complete)||void 0===je||je.call(De),J.complete()},je=>{var tt;Ue=!1,null===(tt=De.error)||void 0===tt||tt.call(De,je),J.error(je)},()=>{var je,tt;Ue&&(null===(je=De.unsubscribe)||void 0===je||je.call(De)),null===(tt=De.finalize)||void 0===tt||tt.call(De)}))}):fe.y}},3026:(vt,Pe,O)=>{O.d(Pe,{T:()=>fe});var y=O(6973),X=O(9360),z=O(8251);function fe(ae=le){return(0,X.e)((pe,Oe)=>{let De=!1;pe.subscribe((0,z.x)(Oe,W=>{De=!0,Oe.next(W)},()=>De?Oe.complete():Oe.error(ae())))})}function le(){return new y.K}},1954:(vt,Pe,O)=>{O.d(Pe,{o:()=>le});var y=O(7394);class X extends y.w0{constructor(pe,Oe){super()}schedule(pe,Oe=0){return this}}const z={setInterval(ae,pe,...Oe){const{delegate:De}=z;return De?.setInterval?De.setInterval(ae,pe,...Oe):setInterval(ae,pe,...Oe)},clearInterval(ae){const{delegate:pe}=z;return(pe?.clearInterval||clearInterval)(ae)},delegate:void 0};var fe=O(9039);class le extends X{constructor(pe,Oe){super(pe,Oe),this.scheduler=pe,this.work=Oe,this.pending=!1}schedule(pe,Oe=0){var De;if(this.closed)return this;this.state=pe;const W=this.id,J=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(J,W,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(J,this.id,Oe),this}requestAsyncId(pe,Oe,De=0){return z.setInterval(pe.flush.bind(pe,this),De)}recycleAsyncId(pe,Oe,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Oe;null!=Oe&&z.clearInterval(Oe)}execute(pe,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(pe,Oe);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Oe){let W,De=!1;try{this.work(pe)}catch(J){De=!0,W=J||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Oe}=this,{actions:De}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(De,this),null!=pe&&(this.id=this.recycleAsyncId(Oe,pe,null)),this.delay=null,super.unsubscribe()}}}},2631:(vt,Pe,O)=>{O.d(Pe,{v:()=>z});var y=O(4552);class X{constructor(le,ae=X.now){this.schedulerActionCtor=le,this.now=ae}schedule(le,ae=0,pe){return new this.schedulerActionCtor(this,le).schedule(pe,ae)}}X.now=y.l.now;class z extends X{constructor(le,ae=X.now){super(le,ae),this.actions=[],this._active=!1}flush(le){const{actions:ae}=this;if(this._active)return void ae.push(le);let pe;this._active=!0;do{if(pe=le.execute(le.state,le.delay))break}while(le=ae.shift());if(this._active=!1,pe){for(;le=ae.shift();)le.unsubscribe();throw pe}}}},6321:(vt,Pe,O)=>{O.d(Pe,{z:()=>z});var y=O(1954);const z=new(O(2631).v)(y.o)},4552:(vt,Pe,O)=>{O.d(Pe,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(vt,Pe,O)=>{O.d(Pe,{z:()=>y});const y={setTimeout(X,z,...fe){const{delegate:le}=y;return le?.setTimeout?le.setTimeout(X,z,...fe):setTimeout(X,z,...fe)},clearTimeout(X){const{delegate:z}=y;return(z?.clearTimeout||clearTimeout)(X)},delegate:void 0}},4971:(vt,Pe,O)=>{O.d(Pe,{h:()=>X});const X=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(vt,Pe,O)=>{O.d(Pe,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(vt,Pe,O)=>{O.d(Pe,{K:()=>X});const X=(0,O(2306).d)(z=>function(){z(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(vt,Pe,O)=>{O.d(Pe,{_6:()=>ae,jO:()=>fe,yG:()=>le});var y=O(4674);function z(pe){return pe[pe.length-1]}function fe(pe){return(0,y.m)(z(pe))?pe.pop():void 0}function le(pe){return function X(pe){return pe&&(0,y.m)(pe.schedule)}(z(pe))?pe.pop():void 0}function ae(pe,Oe){return"number"==typeof z(pe)?pe.pop():Oe}},7453:(vt,Pe,O)=>{O.d(Pe,{D:()=>le});const{isArray:y}=Array,{getPrototypeOf:X,prototype:z,keys:fe}=Object;function le(pe){if(1===pe.length){const Oe=pe[0];if(y(Oe))return{args:Oe,keys:null};if(function ae(pe){return pe&&"object"==typeof pe&&X(pe)===z}(Oe)){const De=fe(Oe);return{args:De.map(W=>Oe[W]),keys:De}}}return{args:pe,keys:null}}},9039:(vt,Pe,O)=>{function y(X,z){if(X){const fe=X.indexOf(z);0<=fe&&X.splice(fe,1)}}O.d(Pe,{P:()=>y})},2306:(vt,Pe,O)=>{function y(X){const fe=X(le=>{Error.call(le),le.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}O.d(Pe,{d:()=>y})},2714:(vt,Pe,O)=>{function y(X,z){return X.reduce((fe,le,ae)=>(fe[le]=z[ae],fe),{})}O.d(Pe,{n:()=>y})},1441:(vt,Pe,O)=>{O.d(Pe,{O:()=>fe,x:()=>z});var y=O(2653);let X=null;function z(le){if(y.config.useDeprecatedSynchronousErrorHandling){const ae=!X;if(ae&&(X={errorThrown:!1,error:null}),le(),ae){const{errorThrown:pe,error:Oe}=X;if(X=null,pe)throw Oe}}else le()}function fe(le){y.config.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=le)}},7103:(vt,Pe,O)=>{function y(X,z,fe,le=0,ae=!1){const pe=z.schedule(function(){fe(),ae?X.add(this.schedule(null,le)):this.unsubscribe()},le);if(X.add(pe),!ae)return pe}O.d(Pe,{f:()=>y})},2737:(vt,Pe,O)=>{function y(X){return X}O.d(Pe,{y:()=>y})},4266:(vt,Pe,O)=>{O.d(Pe,{z:()=>y});const y=X=>X&&"number"==typeof X.length&&"function"!=typeof X},5726:(vt,Pe,O)=>{O.d(Pe,{D:()=>X});var y=O(4674);function X(z){return Symbol.asyncIterator&&(0,y.m)(z?.[Symbol.asyncIterator])}},4674:(vt,Pe,O)=>{function y(X){return"function"==typeof X}O.d(Pe,{m:()=>y})},8382:(vt,Pe,O)=>{O.d(Pe,{c:()=>z});var y=O(4850),X=O(4674);function z(fe){return(0,X.m)(fe[y.L])}},3664:(vt,Pe,O)=>{O.d(Pe,{T:()=>z});var y=O(4971),X=O(4674);function z(fe){return(0,X.m)(fe?.[y.h])}},4026:(vt,Pe,O)=>{O.d(Pe,{t:()=>X});var y=O(4674);function X(z){return(0,y.m)(z?.then)}},541:(vt,Pe,O)=>{O.d(Pe,{L:()=>fe,Q:()=>z});var y=O(7582),X=O(4674);function z(le){return(0,y.FC)(this,arguments,function*(){const pe=le.getReader();try{for(;;){const{value:Oe,done:De}=yield(0,y.qq)(pe.read());if(De)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Oe)}}finally{pe.releaseLock()}})}function fe(le){return(0,X.m)(le?.getReader)}},9360:(vt,Pe,O)=>{O.d(Pe,{A:()=>X,e:()=>z});var y=O(4674);function X(fe){return(0,y.m)(fe?.lift)}function z(fe){return le=>{if(X(le))return le.lift(function(ae){try{return fe(ae,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(vt,Pe,O)=>{O.d(Pe,{Z:()=>fe});var y=O(7398);const{isArray:X}=Array;function fe(le){return(0,y.U)(ae=>function z(le,ae){return X(ae)?le(...ae):le(ae)}(le,ae))}},2420:(vt,Pe,O)=>{function y(){}O.d(Pe,{Z:()=>y})},8407:(vt,Pe,O)=>{O.d(Pe,{U:()=>z,z:()=>X});var y=O(2737);function X(...fe){return z(fe)}function z(fe){return 0===fe.length?y.y:1===fe.length?fe[0]:function(ae){return fe.reduce((pe,Oe)=>Oe(pe),ae)}}},3894:(vt,Pe,O)=>{O.d(Pe,{h:()=>z});var y=O(2653),X=O(7599);function z(fe){X.z.setTimeout(()=>{const{onUnhandledError:le}=y.config;if(!le)throw fe;le(fe)})}},9853:(vt,Pe,O)=>{function y(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Pe,{z:()=>y})},6814:(vt,Pe,O)=>{O.d(Pe,{Do:()=>qe,EM:()=>_r,HT:()=>fe,JF:()=>Bi,K0:()=>ae,Mx:()=>br,O5:()=>Uo,Ov:()=>ca,PM:()=>vs,S$:()=>Ue,V_:()=>Oe,Ye:()=>ot,b0:()=>tt,bD:()=>jn,ez:()=>ys,q:()=>z,sg:()=>hn,w_:()=>le});var y=O(5879);let X=null;function z(){return X}function fe(w){X||(X=w)}class le{}const ae=new y.OlP("DocumentToken");let pe=(()=>{class w{historyGo(b){throw new Error("Not implemented")}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return(0,y.f3M)(De)},providedIn:"platform"})}return w})();const Oe=new y.OlP("Location Initialized");let De=(()=>{class w extends pe{constructor(){super(),this._doc=(0,y.f3M)(ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(b){const N=z().getGlobalEventTarget(this._doc,"window");return N.addEventListener("popstate",b,!1),()=>N.removeEventListener("popstate",b)}onHashChange(b){const N=z().getGlobalEventTarget(this._doc,"window");return N.addEventListener("hashchange",b,!1),()=>N.removeEventListener("hashchange",b)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(b){this._location.pathname=b}pushState(b,N,Z){this._history.pushState(b,N,Z)}replaceState(b,N,Z){this._history.replaceState(b,N,Z)}forward(){this._history.forward()}back(){this._history.back()}historyGo(b=0){this._history.go(b)}getState(){return this._history.state}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return new w},providedIn:"platform"})}return w})();function W(w,k){if(0==w.length)return k;if(0==k.length)return w;let b=0;return w.endsWith("/")&&b++,k.startsWith("/")&&b++,2==b?w+k.substring(1):1==b?w+k:w+"/"+k}function J(w){const k=w.match(/#|\?|$/),b=k&&k.index||w.length;return w.slice(0,b-("/"===w[b-1]?1:0))+w.slice(b)}function he(w){return w&&"?"!==w[0]?"?"+w:w}let Ue=(()=>{class w{historyGo(b){throw new Error("Not implemented")}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=y.Yz7({token:w,factory:function(){return(0,y.f3M)(tt)},providedIn:"root"})}return w})();const je=new y.OlP("appBaseHref");let tt=(()=>{class w extends Ue{constructor(b,N){super(),this._platformLocation=b,this._removeListenerFns=[],this._baseHref=N??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(b){this._removeListenerFns.push(this._platformLocation.onPopState(b),this._platformLocation.onHashChange(b))}getBaseHref(){return this._baseHref}prepareExternalUrl(b){return W(this._baseHref,b)}path(b=!1){const N=this._platformLocation.pathname+he(this._platformLocation.search),Z=this._platformLocation.hash;return Z&&b?`${N}${Z}`:N}pushState(b,N,Z,Me){const ke=this.prepareExternalUrl(Z+he(Me));this._platformLocation.pushState(b,N,ke)}replaceState(b,N,Z,Me){const ke=this.prepareExternalUrl(Z+he(Me));this._platformLocation.replaceState(b,N,ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(b=0){this._platformLocation.historyGo?.(b)}static#e=this.\u0275fac=function(N){return new(N||w)(y.LFG(pe),y.LFG(je,8))};static#t=this.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),qe=(()=>{class w extends Ue{constructor(b,N){super(),this._platformLocation=b,this._baseHref="",this._removeListenerFns=[],null!=N&&(this._baseHref=N)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(b){this._removeListenerFns.push(this._platformLocation.onPopState(b),this._platformLocation.onHashChange(b))}getBaseHref(){return this._baseHref}path(b=!1){let N=this._platformLocation.hash;return null==N&&(N="#"),N.length>0?N.substring(1):N}prepareExternalUrl(b){const N=W(this._baseHref,b);return N.length>0?"#"+N:N}pushState(b,N,Z,Me){let ke=this.prepareExternalUrl(Z+he(Me));0==ke.length&&(ke=this._platformLocation.pathname),this._platformLocation.pushState(b,N,ke)}replaceState(b,N,Z,Me){let ke=this.prepareExternalUrl(Z+he(Me));0==ke.length&&(ke=this._platformLocation.pathname),this._platformLocation.replaceState(b,N,ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(b=0){this._platformLocation.historyGo?.(b)}static#e=this.\u0275fac=function(N){return new(N||w)(y.LFG(pe),y.LFG(je,8))};static#t=this.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac})}return w})(),ot=(()=>{class w{constructor(b){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=b;const N=this._locationStrategy.getBaseHref();this._basePath=function ge(w){if(new RegExp("^(https?:)?//").test(w)){const[,b]=w.split(/\/\/[^\/]+/);return b}return w}(J(mt(N))),this._locationStrategy.onPopState(Z=>{this._subject.emit({url:this.path(!0),pop:!0,state:Z.state,type:Z.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(b=!1){return this.normalize(this._locationStrategy.path(b))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(b,N=""){return this.path()==this.normalize(b+he(N))}normalize(b){return w.stripTrailingSlash(function Ct(w,k){if(!w||!k.startsWith(w))return k;const b=k.substring(w.length);return""===b||["/",";","?","#"].includes(b[0])?b:k}(this._basePath,mt(b)))}prepareExternalUrl(b){return b&&"/"!==b[0]&&(b="/"+b),this._locationStrategy.prepareExternalUrl(b)}go(b,N="",Z=null){this._locationStrategy.pushState(Z,"",b,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(b+he(N)),Z)}replaceState(b,N="",Z=null){this._locationStrategy.replaceState(Z,"",b,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(b+he(N)),Z)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(b=0){this._locationStrategy.historyGo?.(b)}onUrlChange(b){return this._urlChangeListeners.push(b),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(N=>{this._notifyUrlChangeListeners(N.url,N.state)})),()=>{const N=this._urlChangeListeners.indexOf(b);this._urlChangeListeners.splice(N,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(b="",N){this._urlChangeListeners.forEach(Z=>Z(b,N))}subscribe(b,N,Z){return this._subject.subscribe({next:b,error:N,complete:Z})}static#e=this.normalizeQueryParams=he;static#t=this.joinWithSlash=W;static#n=this.stripTrailingSlash=J;static#r=this.\u0275fac=function(N){return new(N||w)(y.LFG(Ue))};static#i=this.\u0275prov=y.Yz7({token:w,factory:function(){return function Xe(){return new ot((0,y.LFG)(Ue))}()},providedIn:"root"})}return w})();function mt(w){return w.replace(/\/index.html$/,"")}function br(w,k){k=encodeURIComponent(k);for(const b of w.split(";")){const N=b.indexOf("="),[Z,Me]=-1==N?[b,""]:[b.slice(0,N),b.slice(N+1)];if(Z.trim()===k)return decodeURIComponent(Me)}return null}class mr{constructor(k,b,N,Z){this.$implicit=k,this.ngForOf=b,this.index=N,this.count=Z}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hn=(()=>{class w{set ngForOf(b){this._ngForOf=b,this._ngForOfDirty=!0}set ngForTrackBy(b){this._trackByFn=b}get ngForTrackBy(){return this._trackByFn}constructor(b,N,Z){this._viewContainer=b,this._template=N,this._differs=Z,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(b){b&&(this._template=b)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const b=this._ngForOf;!this._differ&&b&&(this._differ=this._differs.find(b).create(this.ngForTrackBy))}if(this._differ){const b=this._differ.diff(this._ngForOf);b&&this._applyChanges(b)}}_applyChanges(b){const N=this._viewContainer;b.forEachOperation((Z,Me,ke)=>{if(null==Z.previousIndex)N.createEmbeddedView(this._template,new mr(Z.item,this._ngForOf,-1,-1),null===ke?void 0:ke);else if(null==ke)N.remove(null===Me?void 0:Me);else if(null!==Me){const Tt=N.get(Me);N.move(Tt,ke),Ci(Tt,Z)}});for(let Z=0,Me=N.length;Z<Me;Z++){const Tt=N.get(Z).context;Tt.index=Z,Tt.count=Me,Tt.ngForOf=this._ngForOf}b.forEachIdentityChange(Z=>{Ci(N.get(Z.currentIndex),Z)})}static ngTemplateContextGuard(b,N){return!0}static#e=this.\u0275fac=function(N){return new(N||w)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))};static#t=this.\u0275dir=y.lG2({type:w,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return w})();function Ci(w,k){w.context.$implicit=k.item}let Uo=(()=>{class w{constructor(b,N){this._viewContainer=b,this._context=new _s,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=N}set ngIf(b){this._context.$implicit=this._context.ngIf=b,this._updateView()}set ngIfThen(b){aa("ngIfThen",b),this._thenTemplateRef=b,this._thenViewRef=null,this._updateView()}set ngIfElse(b){aa("ngIfElse",b),this._elseTemplateRef=b,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(b,N){return!0}static#e=this.\u0275fac=function(N){return new(N||w)(y.Y36(y.s_b),y.Y36(y.Rgc))};static#t=this.\u0275dir=y.lG2({type:w,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return w})();class _s{constructor(){this.$implicit=null,this.ngIf=null}}function aa(w,k){if(k&&!k.createEmbeddedView)throw new Error(`${w} must be a TemplateRef, but received '${(0,y.AaK)(k)}'.`)}class ua{createSubscription(k,b){return(0,y.rg0)(()=>k.subscribe({next:b,error:N=>{throw N}}))}dispose(k){(0,y.rg0)(()=>k.unsubscribe())}}class vo{createSubscription(k,b){return k.then(b,N=>{throw N})}dispose(k){}}const Nu=new vo,Yr=new ua;let ca=(()=>{class w{constructor(b){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=b}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(b){return this._obj?b!==this._obj?(this._dispose(),this.transform(b)):this._latestValue:(b&&this._subscribe(b),this._latestValue)}_subscribe(b){this._obj=b,this._strategy=this._selectStrategy(b),this._subscription=this._strategy.createSubscription(b,N=>this._updateLatestValue(b,N))}_selectStrategy(b){if((0,y.QGY)(b))return Nu;if((0,y.F4k)(b))return Yr;throw function yi(w,k){return new y.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(b,N){b===this._obj&&(this._latestValue=N,this._ref.markForCheck())}static#e=this.\u0275fac=function(N){return new(N||w)(y.Y36(y.sBO,16))};static#t=this.\u0275pipe=y.Yjl({name:"async",type:w,pure:!1,standalone:!0})}return w})(),ys=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275mod=y.oAB({type:w});static#n=this.\u0275inj=y.cJS({})}return w})();const jn="browser",vi="server";function vs(w){return w===vi}let _r=(()=>{class w{static#e=this.\u0275prov=(0,y.Yz7)({token:w,providedIn:"root",factory:()=>new Fr((0,y.LFG)(ae),window)})}return w})();class Fr{constructor(k,b){this.document=k,this.window=b,this.offset=()=>[0,0]}setOffset(k){this.offset=Array.isArray(k)?()=>k:k}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(k){this.supportsScrolling()&&this.window.scrollTo(k[0],k[1])}scrollToAnchor(k){if(!this.supportsScrolling())return;const b=function Ui(w,k){const b=w.getElementById(k)||w.getElementsByName(k)[0];if(b)return b;if("function"==typeof w.createTreeWalker&&w.body&&"function"==typeof w.body.attachShadow){const N=w.createTreeWalker(w.body,NodeFilter.SHOW_ELEMENT);let Z=N.currentNode;for(;Z;){const Me=Z.shadowRoot;if(Me){const ke=Me.getElementById(k)||Me.querySelector(`[name="${k}"]`);if(ke)return ke}Z=N.nextNode()}}return null}(this.document,k);b&&(this.scrollToElement(b),b.focus())}setHistoryScrollRestoration(k){this.supportsScrolling()&&(this.window.history.scrollRestoration=k)}scrollToElement(k){const b=k.getBoundingClientRect(),N=b.left+this.window.pageXOffset,Z=b.top+this.window.pageYOffset,Me=this.offset();this.window.scrollTo(N-Me[0],Z-Me[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Bi{}},9862:(vt,Pe,O)=>{O.d(Pe,{JF:()=>H,eN:()=>ne});var y=O(5879),X=O(2096),z=O(2459),fe=O(5592),le=O(6328),ae=O(2181),pe=O(7398),Oe=O(4716),De=O(4664),W=O(6814);class J{}class he{}class Ue{constructor(te){this.normalizedNames=new Map,this.lazyUpdate=null,te?"string"==typeof te?this.lazyInit=()=>{this.headers=new Map,te.split("\n").forEach(ce=>{const Q=ce.indexOf(":");if(Q>0){const K=ce.slice(0,Q),_e=K.toLowerCase(),Re=ce.slice(Q+1).trim();this.maybeSetNormalizedName(K,_e),this.headers.has(_e)?this.headers.get(_e).push(Re):this.headers.set(_e,[Re])}})}:typeof Headers<"u"&&te instanceof Headers?(this.headers=new Map,te.forEach((ce,Q)=>{this.setHeaderEntries(Q,ce)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(te).forEach(([ce,Q])=>{this.setHeaderEntries(ce,Q)})}:this.headers=new Map}has(te){return this.init(),this.headers.has(te.toLowerCase())}get(te){this.init();const ce=this.headers.get(te.toLowerCase());return ce&&ce.length>0?ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(te){return this.init(),this.headers.get(te.toLowerCase())||null}append(te,ce){return this.clone({name:te,value:ce,op:"a"})}set(te,ce){return this.clone({name:te,value:ce,op:"s"})}delete(te,ce){return this.clone({name:te,value:ce,op:"d"})}maybeSetNormalizedName(te,ce){this.normalizedNames.has(ce)||this.normalizedNames.set(ce,te)}init(){this.lazyInit&&(this.lazyInit instanceof Ue?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(te=>this.applyUpdate(te)),this.lazyUpdate=null))}copyFrom(te){te.init(),Array.from(te.headers.keys()).forEach(ce=>{this.headers.set(ce,te.headers.get(ce)),this.normalizedNames.set(ce,te.normalizedNames.get(ce))})}clone(te){const ce=new Ue;return ce.lazyInit=this.lazyInit&&this.lazyInit instanceof Ue?this.lazyInit:this,ce.lazyUpdate=(this.lazyUpdate||[]).concat([te]),ce}applyUpdate(te){const ce=te.name.toLowerCase();switch(te.op){case"a":case"s":let Q=te.value;if("string"==typeof Q&&(Q=[Q]),0===Q.length)return;this.maybeSetNormalizedName(te.name,ce);const K=("a"===te.op?this.headers.get(ce):void 0)||[];K.push(...Q),this.headers.set(ce,K);break;case"d":const _e=te.value;if(_e){let Re=this.headers.get(ce);if(!Re)return;Re=Re.filter(ht=>-1===_e.indexOf(ht)),0===Re.length?(this.headers.delete(ce),this.normalizedNames.delete(ce)):this.headers.set(ce,Re)}else this.headers.delete(ce),this.normalizedNames.delete(ce)}}setHeaderEntries(te,ce){const Q=(Array.isArray(ce)?ce:[ce]).map(_e=>_e.toString()),K=te.toLowerCase();this.headers.set(K,Q),this.maybeSetNormalizedName(te,K)}forEach(te){this.init(),Array.from(this.normalizedNames.keys()).forEach(ce=>te(this.normalizedNames.get(ce),this.headers.get(ce)))}}class tt{encodeKey(te){return Ct(te)}encodeValue(te){return Ct(te)}decodeKey(te){return decodeURIComponent(te)}decodeValue(te){return decodeURIComponent(te)}}const ot=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ct(ye){return encodeURIComponent(ye).replace(ot,(te,ce)=>Xe[ce]??te)}function mt(ye){return`${ye}`}class ge{constructor(te={}){if(this.updates=null,this.cloneFrom=null,this.encoder=te.encoder||new tt,te.fromString){if(te.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qe(ye,te){const ce=new Map;return ye.length>0&&ye.replace(/^\?/,"").split("&").forEach(K=>{const _e=K.indexOf("="),[Re,ht]=-1==_e?[te.decodeKey(K),""]:[te.decodeKey(K.slice(0,_e)),te.decodeValue(K.slice(_e+1))],Ze=ce.get(Re)||[];Ze.push(ht),ce.set(Re,Ze)}),ce}(te.fromString,this.encoder)}else te.fromObject?(this.map=new Map,Object.keys(te.fromObject).forEach(ce=>{const Q=te.fromObject[ce],K=Array.isArray(Q)?Q.map(mt):[mt(Q)];this.map.set(ce,K)})):this.map=null}has(te){return this.init(),this.map.has(te)}get(te){this.init();const ce=this.map.get(te);return ce?ce[0]:null}getAll(te){return this.init(),this.map.get(te)||null}keys(){return this.init(),Array.from(this.map.keys())}append(te,ce){return this.clone({param:te,value:ce,op:"a"})}appendAll(te){const ce=[];return Object.keys(te).forEach(Q=>{const K=te[Q];Array.isArray(K)?K.forEach(_e=>{ce.push({param:Q,value:_e,op:"a"})}):ce.push({param:Q,value:K,op:"a"})}),this.clone(ce)}set(te,ce){return this.clone({param:te,value:ce,op:"s"})}delete(te,ce){return this.clone({param:te,value:ce,op:"d"})}toString(){return this.init(),this.keys().map(te=>{const ce=this.encoder.encodeKey(te);return this.map.get(te).map(Q=>ce+"="+this.encoder.encodeValue(Q)).join("&")}).filter(te=>""!==te).join("&")}clone(te){const ce=new ge({encoder:this.encoder});return ce.cloneFrom=this.cloneFrom||this,ce.updates=(this.updates||[]).concat(te),ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(te=>this.map.set(te,this.cloneFrom.map.get(te))),this.updates.forEach(te=>{switch(te.op){case"a":case"s":const ce=("a"===te.op?this.map.get(te.param):void 0)||[];ce.push(mt(te.value)),this.map.set(te.param,ce);break;case"d":if(void 0===te.value){this.map.delete(te.param);break}{let Q=this.map.get(te.param)||[];const K=Q.indexOf(mt(te.value));-1!==K&&Q.splice(K,1),Q.length>0?this.map.set(te.param,Q):this.map.delete(te.param)}}}),this.cloneFrom=this.updates=null)}}class ve{constructor(){this.map=new Map}set(te,ce){return this.map.set(te,ce),this}get(te){return this.map.has(te)||this.map.set(te,te.defaultValue()),this.map.get(te)}delete(te){return this.map.delete(te),this}has(te){return this.map.has(te)}keys(){return this.map.keys()}}function We(ye){return typeof ArrayBuffer<"u"&&ye instanceof ArrayBuffer}function ie(ye){return typeof Blob<"u"&&ye instanceof Blob}function Te(ye){return typeof FormData<"u"&&ye instanceof FormData}class At{constructor(te,ce,Q,K){let _e;if(this.url=ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=te.toUpperCase(),function He(ye){switch(ye){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||K?(this.body=void 0!==Q?Q:null,_e=K):_e=Q,_e&&(this.reportProgress=!!_e.reportProgress,this.withCredentials=!!_e.withCredentials,_e.responseType&&(this.responseType=_e.responseType),_e.headers&&(this.headers=_e.headers),_e.context&&(this.context=_e.context),_e.params&&(this.params=_e.params)),this.headers||(this.headers=new Ue),this.context||(this.context=new ve),this.params){const Re=this.params.toString();if(0===Re.length)this.urlWithParams=ce;else{const ht=ce.indexOf("?");this.urlWithParams=ce+(-1===ht?"?":ht<ce.length-1?"&":"")+Re}}else this.params=new ge,this.urlWithParams=ce}serializeBody(){return null===this.body?null:We(this.body)||ie(this.body)||Te(this.body)||function Nt(ye){return typeof URLSearchParams<"u"&&ye instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ge?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Te(this.body)?null:ie(this.body)?this.body.type||null:We(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ge?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(te={}){const ce=te.method||this.method,Q=te.url||this.url,K=te.responseType||this.responseType,_e=void 0!==te.body?te.body:this.body,Re=void 0!==te.withCredentials?te.withCredentials:this.withCredentials,ht=void 0!==te.reportProgress?te.reportProgress:this.reportProgress;let Ze=te.headers||this.headers,jt=te.params||this.params;const wn=te.context??this.context;return void 0!==te.setHeaders&&(Ze=Object.keys(te.setHeaders).reduce((en,tr)=>en.set(tr,te.setHeaders[tr]),Ze)),te.setParams&&(jt=Object.keys(te.setParams).reduce((en,tr)=>en.set(tr,te.setParams[tr]),jt)),new At(ce,Q,_e,{params:jt,headers:Ze,context:wn,reportProgress:ht,responseType:K,withCredentials:Re})}}var St=function(ye){return ye[ye.Sent=0]="Sent",ye[ye.UploadProgress=1]="UploadProgress",ye[ye.ResponseHeader=2]="ResponseHeader",ye[ye.DownloadProgress=3]="DownloadProgress",ye[ye.Response=4]="Response",ye[ye.User=5]="User",ye}(St||{});class Yt{constructor(te,ce=200,Q="OK"){this.headers=te.headers||new Ue,this.status=void 0!==te.status?te.status:ce,this.statusText=te.statusText||Q,this.url=te.url||null,this.ok=this.status>=200&&this.status<300}}class rn extends Yt{constructor(te={}){super(te),this.type=St.ResponseHeader}clone(te={}){return new rn({headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class Ye extends Yt{constructor(te={}){super(te),this.type=St.Response,this.body=void 0!==te.body?te.body:null}clone(te={}){return new Ye({body:void 0!==te.body?te.body:this.body,headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class lt extends Yt{constructor(te){super(te,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${te.url||"(unknown url)"}`:`Http failure response for ${te.url||"(unknown url)"}: ${te.status} ${te.statusText}`,this.error=te.error||null}}function Be(ye,te){return{body:te,headers:ye.headers,context:ye.context,observe:ye.observe,params:ye.params,reportProgress:ye.reportProgress,responseType:ye.responseType,withCredentials:ye.withCredentials}}let ne=(()=>{class ye{constructor(ce){this.handler=ce}request(ce,Q,K={}){let _e;if(ce instanceof At)_e=ce;else{let Ze,jt;Ze=K.headers instanceof Ue?K.headers:new Ue(K.headers),K.params&&(jt=K.params instanceof ge?K.params:new ge({fromObject:K.params})),_e=new At(ce,Q,void 0!==K.body?K.body:null,{headers:Ze,context:K.context,params:jt,reportProgress:K.reportProgress,responseType:K.responseType||"json",withCredentials:K.withCredentials})}const Re=(0,X.of)(_e).pipe((0,le.b)(Ze=>this.handler.handle(Ze)));if(ce instanceof At||"events"===K.observe)return Re;const ht=Re.pipe((0,ae.h)(Ze=>Ze instanceof Ye));switch(K.observe||"body"){case"body":switch(_e.responseType){case"arraybuffer":return ht.pipe((0,pe.U)(Ze=>{if(null!==Ze.body&&!(Ze.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ze.body}));case"blob":return ht.pipe((0,pe.U)(Ze=>{if(null!==Ze.body&&!(Ze.body instanceof Blob))throw new Error("Response is not a Blob.");return Ze.body}));case"text":return ht.pipe((0,pe.U)(Ze=>{if(null!==Ze.body&&"string"!=typeof Ze.body)throw new Error("Response is not a string.");return Ze.body}));default:return ht.pipe((0,pe.U)(Ze=>Ze.body))}case"response":return ht;default:throw new Error(`Unreachable: unhandled observe type ${K.observe}}`)}}delete(ce,Q={}){return this.request("DELETE",ce,Q)}get(ce,Q={}){return this.request("GET",ce,Q)}head(ce,Q={}){return this.request("HEAD",ce,Q)}jsonp(ce,Q){return this.request("JSONP",ce,{params:(new ge).append(Q,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ce,Q={}){return this.request("OPTIONS",ce,Q)}patch(ce,Q,K={}){return this.request("PATCH",ce,Be(K,Q))}post(ce,Q,K={}){return this.request("POST",ce,Be(K,Q))}put(ce,Q,K={}){return this.request("PUT",ce,Be(K,Q))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(J))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();function Cn(ye,te){return te(ye)}function dt(ye,te){return(ce,Q)=>te.intercept(ce,{handle:K=>ye(K,Q)})}const Wt=new y.OlP(""),mn=new y.OlP(""),fn=new y.OlP("");function _n(){let ye=null;return(te,ce)=>{null===ye&&(ye=((0,y.f3M)(Wt,{optional:!0})??[]).reduceRight(dt,Cn));const Q=(0,y.f3M)(y.HDt),K=Q.add();return ye(te,ce).pipe((0,Oe.x)(()=>Q.remove(K)))}}let it=(()=>{class ye extends J{constructor(ce,Q){super(),this.backend=ce,this.injector=Q,this.chain=null,this.pendingTasks=(0,y.f3M)(y.HDt)}handle(ce){if(null===this.chain){const K=Array.from(new Set([...this.injector.get(mn),...this.injector.get(fn,[])]));this.chain=K.reduceRight((_e,Re)=>function Qt(ye,te,ce){return(Q,K)=>ce.runInContext(()=>te(Q,_e=>ye(_e,K)))}(_e,Re,this.injector),Cn)}const Q=this.pendingTasks.add();return this.chain(ce,K=>this.backend.handle(K)).pipe((0,Oe.x)(()=>this.pendingTasks.remove(Q)))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(he),y.LFG(y.lqb))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();const Kr=/^\)\]\}',?\n/;let pn=(()=>{class ye{constructor(ce){this.xhrFactory=ce}handle(ce){if("JSONP"===ce.method)throw new y.vHH(-2800,!1);const Q=this.xhrFactory;return(Q.\u0275loadImpl?(0,z.D)(Q.\u0275loadImpl()):(0,X.of)(null)).pipe((0,De.w)(()=>new fe.y(_e=>{const Re=Q.build();if(Re.open(ce.method,ce.urlWithParams),ce.withCredentials&&(Re.withCredentials=!0),ce.headers.forEach((Mn,xn)=>Re.setRequestHeader(Mn,xn.join(","))),ce.headers.has("Accept")||Re.setRequestHeader("Accept","application/json, text/plain, */*"),!ce.headers.has("Content-Type")){const Mn=ce.detectContentTypeHeader();null!==Mn&&Re.setRequestHeader("Content-Type",Mn)}if(ce.responseType){const Mn=ce.responseType.toLowerCase();Re.responseType="json"!==Mn?Mn:"text"}const ht=ce.serializeBody();let Ze=null;const jt=()=>{if(null!==Ze)return Ze;const Mn=Re.statusText||"OK",xn=new Ue(Re.getAllResponseHeaders()),ki=function Sr(ye){return"responseURL"in ye&&ye.responseURL?ye.responseURL:/^X-Request-URL:/m.test(ye.getAllResponseHeaders())?ye.getResponseHeader("X-Request-URL"):null}(Re)||ce.url;return Ze=new rn({headers:xn,status:Re.status,statusText:Mn,url:ki}),Ze},wn=()=>{let{headers:Mn,status:xn,statusText:ki,url:Gs}=jt(),mr=null;204!==xn&&(mr=typeof Re.response>"u"?Re.responseText:Re.response),0===xn&&(xn=mr?200:0);let hn=xn>=200&&xn<300;if("json"===ce.responseType&&"string"==typeof mr){const Ci=mr;mr=mr.replace(Kr,"");try{mr=""!==mr?JSON.parse(mr):null}catch(Ji){mr=Ci,hn&&(hn=!1,mr={error:Ji,text:mr})}}hn?(_e.next(new Ye({body:mr,headers:Mn,status:xn,statusText:ki,url:Gs||void 0})),_e.complete()):_e.error(new lt({error:mr,headers:Mn,status:xn,statusText:ki,url:Gs||void 0}))},en=Mn=>{const{url:xn}=jt(),ki=new lt({error:Mn,status:Re.status||0,statusText:Re.statusText||"Unknown Error",url:xn||void 0});_e.error(ki)};let tr=!1;const br=Mn=>{tr||(_e.next(jt()),tr=!0);let xn={type:St.DownloadProgress,loaded:Mn.loaded};Mn.lengthComputable&&(xn.total=Mn.total),"text"===ce.responseType&&Re.responseText&&(xn.partialText=Re.responseText),_e.next(xn)},Or=Mn=>{let xn={type:St.UploadProgress,loaded:Mn.loaded};Mn.lengthComputable&&(xn.total=Mn.total),_e.next(xn)};return Re.addEventListener("load",wn),Re.addEventListener("error",en),Re.addEventListener("timeout",en),Re.addEventListener("abort",en),ce.reportProgress&&(Re.addEventListener("progress",br),null!==ht&&Re.upload&&Re.upload.addEventListener("progress",Or)),Re.send(ht),_e.next({type:St.Sent}),()=>{Re.removeEventListener("error",en),Re.removeEventListener("abort",en),Re.removeEventListener("load",wn),Re.removeEventListener("timeout",en),ce.reportProgress&&(Re.removeEventListener("progress",br),null!==ht&&Re.upload&&Re.upload.removeEventListener("progress",Or)),Re.readyState!==Re.DONE&&Re.abort()}})))}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(W.JF))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();const Qn=new y.OlP("XSRF_ENABLED"),wt=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Gt=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Zt{}let ar=(()=>{class ye{constructor(ce,Q,K){this.doc=ce,this.platform=Q,this.cookieName=K,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ce=this.doc.cookie||"";return ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,W.Mx)(ce,this.cookieName),this.lastCookieString=ce),this.lastToken}static#e=this.\u0275fac=function(Q){return new(Q||ye)(y.LFG(W.K0),y.LFG(y.Lbi),y.LFG(wt))};static#t=this.\u0275prov=y.Yz7({token:ye,factory:ye.\u0275fac})}return ye})();function ms(ye,te){const ce=ye.url.toLowerCase();if(!(0,y.f3M)(Qn)||"GET"===ye.method||"HEAD"===ye.method||ce.startsWith("http://")||ce.startsWith("https://"))return te(ye);const Q=(0,y.f3M)(Zt).getToken(),K=(0,y.f3M)(Gt);return null!=Q&&!ye.headers.has(K)&&(ye=ye.clone({headers:ye.headers.set(K,Q)})),te(ye)}var Zr=function(ye){return ye[ye.Interceptors=0]="Interceptors",ye[ye.LegacyInterceptors=1]="LegacyInterceptors",ye[ye.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ye[ye.NoXsrfProtection=3]="NoXsrfProtection",ye[ye.JsonpSupport=4]="JsonpSupport",ye[ye.RequestsMadeViaParent=5]="RequestsMadeViaParent",ye[ye.Fetch=6]="Fetch",ye}(Zr||{});function Nr(...ye){const te=[ne,pn,it,{provide:J,useExisting:it},{provide:he,useExisting:pn},{provide:mn,useValue:ms,multi:!0},{provide:Qn,useValue:!0},{provide:Zt,useClass:ar}];for(const ce of ye)te.push(...ce.\u0275providers);return(0,y.MR2)(te)}const gi=new y.OlP("LEGACY_INTERCEPTOR_FN");function Qr(){return function er(ye,te){return{\u0275kind:ye,\u0275providers:te}}(Zr.LegacyInterceptors,[{provide:gi,useFactory:_n},{provide:mn,useExisting:gi,multi:!0}])}let H=(()=>{class ye{static#e=this.\u0275fac=function(Q){return new(Q||ye)};static#t=this.\u0275mod=y.oAB({type:ye});static#n=this.\u0275inj=y.cJS({providers:[Nr(Qr())]})}return ye})()},5879:(vt,Pe,O)=>{O.d(Pe,{$8M:()=>oo,$WT:()=>Vi,$Z:()=>gp,AFp:()=>Id,ALo:()=>Y0,AaK:()=>he,CHM:()=>Yd,CRH:()=>hw,EJc:()=>NC,EpF:()=>Gm,F4k:()=>$y,FYo:()=>Yf,FiY:()=>Zu,GfV:()=>Jf,Gpc:()=>tt,HDt:()=>kw,JOm:()=>Bc,KtG:()=>nu,LFG:()=>Ot,Lbi:()=>Ch,Lck:()=>_D,MAs:()=>Oy,MMx:()=>V0,MR2:()=>Vg,NdJ:()=>Wp,Ojb:()=>$v,OlP:()=>wt,Oqu:()=>eg,P3R:()=>Yc,PXZ:()=>uA,Q6J:()=>ky,QGY:()=>Wm,Qsj:()=>Wv,R0b:()=>Hi,RDi:()=>D_,Rgc:()=>f_,SBq:()=>Rh,Sil:()=>LC,Suo:()=>dw,TTD:()=>Xt,TgZ:()=>ko,VuI:()=>zA,W1O:()=>mw,X6Q:()=>mA,XFs:()=>Rt,Xpm:()=>vo,Xq5:()=>by,Xts:()=>Ih,Y36:()=>Rd,YKP:()=>L0,YNc:()=>$m,Yjl:()=>Eo,Yz7:()=>Wt,Z0I:()=>it,ZZ4:()=>NI,_Bn:()=>k0,_UZ:()=>Va,_c5:()=>xA,_uU:()=>cv,aQg:()=>OI,c2e:()=>Ow,cJS:()=>fn,cg1:()=>eI,dDg:()=>iA,dqk:()=>pn,eFA:()=>Gw,eJc:()=>_I,ekj:()=>Gd,eoX:()=>jw,f3M:()=>bt,g9A:()=>Vf,h0i:()=>Qh,hGG:()=>NA,hij:()=>tg,iGM:()=>lw,ifc:()=>Re,ip1:()=>Nw,jDz:()=>U0,kL8:()=>a0,lG2:()=>Xi,lcZ:()=>J0,lqb:()=>ka,lri:()=>Uw,n5z:()=>au,oAB:()=>qs,oxw:()=>Gy,q4F:()=>al,qFp:()=>WA,qLn:()=>go,qOj:()=>Ld,qZA:()=>dc,rWj:()=>Bw,rg0:()=>Me,s9C:()=>Wy,sBO:()=>_A,s_b:()=>wv,soG:()=>Dv,tb:()=>SI,tp0:()=>lu,uIk:()=>bu,vHH:()=>ge,vpe:()=>La,wAp:()=>ig,xp6:()=>cy,z2F:()=>ug,zSh:()=>$g,zs3:()=>po});var y=O(8645),X=O(7394),z=O(5592),fe=O(3019),le=O(5619),ae=O(2096),pe=O(3020),Oe=O(4664),De=O(3997);function W(t){for(let r in t)if(t[r]===W)return r;throw Error("Could not find renamed property on target object.")}function J(t,r){for(const o in r)r.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=r[o])}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ue(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const je=W({__forward_ref__:W});function tt(t){return t.__forward_ref__=tt,t.toString=function(){return he(this())},t}function qe(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(je)&&t.__forward_ref__===tt}function Xe(t){return t&&!!t.\u0275providers}const mt="https://g.co/ng/security#xss";class ge extends Error{constructor(r,o){super(function Ve(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,o)),this.code=r}}function ve(t){return"string"==typeof t?t:null==t?"":String(t)}function Nt(t,r){throw new ge(-201,!1)}function ut(t,r){null==t&&function Je(t,r,o,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Wt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fn(t){return{providers:t.providers||[],imports:t.imports||[]}}function _n(t){return zn(t,Pn)||zn(t,Xn)}function it(t){return null!==_n(t)}function zn(t,r){return t.hasOwnProperty(r)?t[r]:null}function Vn(t){return t&&(t.hasOwnProperty(oi)||t.hasOwnProperty(Br))?t[oi]:null}const Pn=W({\u0275prov:W}),oi=W({\u0275inj:W}),Xn=W({ngInjectableDef:W}),Br=W({ngInjectorDef:W});var Rt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Rt||{});let zt;function Un(t){const r=zt;return zt=t,r}function Kr(t,r,o){const a=_n(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Rt.Optional?null:void 0!==r?r:void Nt(he(t))}const pn=globalThis;class wt{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Qr={},Oi="__NG_DI_FLAG__",mi="ngTempTokenPath",j=/\n/gm,B="__source";let H;function $e(t){const r=H;return H=t,r}function st(t,r=Rt.Default){if(void 0===H)throw new ge(-203,!1);return null===H?Kr(t,void 0,r):H.get(t,r&Rt.Optional?null:void 0,r)}function Ot(t,r=Rt.Default){return(function Vt(){return zt}()||st)(qe(t),r)}function bt(t,r=Rt.Default){return Ot(t,Bt(r))}function Bt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yn(t){const r=[];for(let o=0;o<t.length;o++){const a=qe(t[o]);if(Array.isArray(a)){if(0===a.length)throw new ge(900,!1);let c,h=Rt.Default;for(let m=0;m<a.length;m++){const E=a[m],C=te(E);"number"==typeof C?-1===C?c=E.token:h|=C:c=E}r.push(Ot(c,h))}else r.push(Ot(a))}return r}function ye(t,r){return t[Oi]=r,t.prototype[Oi]=r,t}function te(t){return t[Oi]}function K(t){return{toString:t}.toString()}var _e=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_e||{}),Re=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Re||{});const ht={},Ze=[],jt=W({\u0275cmp:W}),wn=W({\u0275dir:W}),en=W({\u0275pipe:W}),tr=W({\u0275mod:W}),br=W({\u0275fac:W}),Or=W({__NG_ELEMENT_ID__:W}),Mn=W({__NG_ENV_ID__:W});function xn(t,r,o){let a=t.length;for(;;){const c=t.indexOf(r,o);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const h=r.length;if(c+h===a||t.charCodeAt(c+h)<=32)return c}o=c+1}}function ki(t,r,o){let a=0;for(;a<o.length;){const c=o[a];if("number"==typeof c){if(0!==c)break;a++;const h=o[a++],m=o[a++],E=o[a++];t.setAttribute(r,m,E,h)}else{const h=c,m=o[++a];mr(h)?t.setProperty(r,h,m):t.setAttribute(r,h,m),a++}}return a}function Gs(t){return 3===t||4===t||6===t}function mr(t){return 64===t.charCodeAt(0)}function hn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?o=c:0===o||Ci(t,o,c,null,-1===o||2===o?r[++a]:null)}}return t}function Ci(t,r,o,a,c){let h=0,m=t.length;if(-1===r)m=-1;else for(;h<t.length;){const E=t[h++];if("number"==typeof E){if(E===r){m=-1;break}if(E>r){m=h-1;break}}}for(;h<t.length;){const E=t[h];if("number"==typeof E)break;if(E===o){if(null===a)return void(null!==c&&(t[h+1]=c));if(a===t[h+1])return void(t[h+2]=c)}h++,null!==a&&h++,null!==c&&h++}-1!==m&&(t.splice(m,0,r),h=m+1),t.splice(h++,0,o),null!==a&&t.splice(h++,0,a),null!==c&&t.splice(h++,0,c)}const Ji="ng-template";function Uo(t,r,o){let a=0,c=!0;for(;a<t.length;){let h=t[a++];if("string"==typeof h&&c){const m=t[a++];if(o&&"class"===h&&-1!==xn(m.toLowerCase(),r,0))return!0}else{if(1===h){for(;a<t.length&&"string"==typeof(h=t[a++]);)if(h.toLowerCase()===r)return!0;return!1}"number"==typeof h&&(c=!1)}}return!1}function _s(t){return 4===t.type&&t.value!==Ji}function aa(t,r,o){return r===(4!==t.type||o?t.value:Ji)}function Bo(t,r,o){let a=4;const c=t.attrs||[],h=function Li(t){for(let r=0;r<t.length;r++)if(Gs(t[r]))return r;return t.length}(c);let m=!1;for(let E=0;E<r.length;E++){const C=r[E];if("number"!=typeof C){if(!m)if(4&a){if(a=2|1&a,""!==C&&!aa(t,C,o)||""===C&&1===r.length){if(kr(a))return!1;m=!0}}else{const M=8&a?C:r[++E];if(8&a&&null!==t.attrs){if(!Uo(t.attrs,M,o)){if(kr(a))return!1;m=!0}continue}const q=_i(8&a?"class":C,c,_s(t),o);if(-1===q){if(kr(a))return!1;m=!0;continue}if(""!==M){let de;de=q>h?"":c[q+1].toLowerCase();const we=8&a?de:null;if(we&&-1!==xn(we,M,0)||2&a&&M!==de){if(kr(a))return!1;m=!0}}}}else{if(!m&&!kr(a)&&!kr(C))return!1;if(m&&kr(C))continue;m=!1,a=C|1&a}}return kr(a)||m}function kr(t){return 0==(1&t)}function _i(t,r,o,a){if(null===r)return-1;let c=0;if(a||!o){let h=!1;for(;c<r.length;){const m=r[c];if(m===t)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let E=r[++c];for(;"string"==typeof E;)E=r[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function yo(t,r){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const a=t[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,t)}function jo(t,r,o=!1){for(let a=0;a<r.length;a++)if(Bo(t,r[a],o))return!0;return!1}function Fi(t,r){return t?":not("+r.trim()+")":r}function ja(t){let r=t[0],o=1,a=2,c="",h=!1;for(;o<t.length;){let m=t[o];if("string"==typeof m)if(2&a){const E=t[++o];c+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&a?c+="."+m:4&a&&(c+=" "+m);else""!==c&&!kr(m)&&(r+=Fi(h,c),c=""),a=m,h=h||!kr(a);o++}return""!==c&&(r+=Fi(h,c)),r}function vo(t){return K(()=>{const r=Ks(t),o={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_e.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Re.Emulated,styles:t.styles||Ze,_:null,schemas:t.schemas||null,tView:null,id:""};es(o);const a=t.dependencies;return o.directiveDefs=Ai(a,!1),o.pipeDefs=Ai(a,!0),o.id=function Zs(t){let r=0;const o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of o)r=Math.imul(31,r)+c.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(o),o})}function Yr(t){return an(t)||Dr(t)}function ca(t){return null!==t}function qs(t){return K(()=>({type:t.type,bootstrap:t.bootstrap||Ze,declarations:t.declarations||Ze,imports:t.imports||Ze,exports:t.exports||Ze,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $a(t,r){if(null==t)return ht;const o={};for(const a in t)if(t.hasOwnProperty(a)){let c=t[a],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=a,r&&(r[c]=h)}return o}function Xi(t){return K(()=>{const r=Ks(t);return es(r),r})}function Eo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function an(t){return t[jt]||null}function Dr(t){return t[wn]||null}function Rr(t){return t[en]||null}function Vi(t){const r=an(t)||Dr(t)||Rr(t);return null!==r&&r.standalone}function Lr(t,r){const o=t[tr]||null;if(!o&&!0===r)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return o}function Ks(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||ht,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ze,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$a(t.inputs,r),outputs:$a(t.outputs)}}function es(t){t.features?.forEach(r=>r(t))}function Ai(t,r){if(!t)return null;const o=r?Rr:Yr;return()=>("function"==typeof t?t():t).map(a=>o(a)).filter(ca)}const Gn=0,yt=1,$t=2,Bn=3,Jr=4,Qs=5,dr=6,ys=7,jn=8,vi=9,Xr=10,qt=11,Io=12,vs=13,ai=14,ur=15,xs=16,_r=17,Fr=18,Ui=19,zo=20,Bi=21,An=22,Si=23,Es=24,tn=25,Is=1,la=2,ws=7,da=9,Nn=11;function Ln(t){return Array.isArray(t)&&"object"==typeof t[Is]}function $r(t){return Array.isArray(t)&&!0===t[Is]}function bi(t){return 0!=(4&t.flags)}function wo(t){return t.componentOffset>-1}function Ha(t){return 1==(1&t.flags)}function Hr(t){return!!t.template}function ha(t){return 0!=(512&t[$t])}function Ts(t,r){return t.hasOwnProperty(br)?t[br]:null}let yr=null,Co=!1;function nr(t){const r=yr;return yr=t,r}const Qa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ns(t){if(!rs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Vu(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ao(t){t.dirty=!0,function Os(t){if(void 0===t.liveConsumerNode)return;const r=Co;Co=!0;try{for(const o of t.liveConsumerNode)o.dirty||Ao(o)}finally{Co=r}}(t),t.consumerMarkedDirty?.(t)}function So(t){return t&&(t.nextProducerIndex=0),nr(t)}function eo(t,r){if(nr(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(rs(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)Ls(t.producerNode[o],t.producerIndexOfThis[o]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vu(t){Fs(t);for(let r=0;r<t.producerNode.length;r++){const o=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==o.version||(ns(o),a!==o.version))return!0}return!1}function ks(t){if(Fs(t),rs(t))for(let r=0;r<t.producerNode.length;r++)Ls(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ls(t,r){if(function pa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Fs(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Ls(t.producerNode[a],t.producerIndexOfThis[a]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],c=t.liveConsumerNode[r];Fs(c),c.producerIndexOfThis[a]=r}}function rs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let to=null;function Me(t){const r=nr(null);try{return t()}finally{nr(r)}}const Tt=()=>{},vn=(()=>({...Qa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Tt}))();class On{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Xt(){return Fn}function Fn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Cr),Tn}function Tn(){const t=hr(this),r=t?.current;if(r){const o=t.previous;if(o===ht)t.previous=r;else for(let a in r)o[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Cr(t,r,o,a){const c=this.declaredInputs[o],h=hr(t)||function fr(t,r){return t[cr]=r}(t,{previous:ht,current:null}),m=h.current||(h.current={}),E=h.previous,C=E[c];m[c]=new On(C&&C.currentValue,r,E===ht),t[a]=r}Xt.ngInherit=!0;const cr="__ngSimpleChanges__";function hr(t){return t[cr]||null}const lr=function(t,r,o){};function Sn(t){for(;Array.isArray(t);)t=t[Gn];return t}function _a(t,r){return Sn(r[t])}function Ei(t,r){return Sn(r[t.index])}function Zd(t,r){return t.data[r]}function ci(t,r){return t[r]}function Ds(t,r){const o=r[t];return Ln(o)?o:o[Gn]}function Pi(t,r){return null==r?null:t[r]}function Vs(t){t[_r]=0}function Gr(t){1024&t[$t]||(t[$t]|=1024,ro(t,1))}function ya(t){1024&t[$t]&&(t[$t]&=-1025,ro(t,-1))}function ro(t,r){let o=t[Bn];if(null===o)return;o[Qs]+=r;let a=o;for(o=o[Bn];null!==o&&(1===r&&1===a[Qs]||-1===r&&0===a[Qs]);)o[Qs]+=r,a=o,o=o[Bn]}const Ne={lFrame:Y(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bl(){return Ne.bindingsEnabled}function Ke(){return Ne.lFrame.lView}function bn(){return Ne.lFrame.tView}function Yd(t){return Ne.lFrame.contextLView=t,t[jn]}function nu(t){return Ne.lFrame.contextLView=null,t}function li(){let t=Pr();for(;null!==t&&64===t.type;)t=t.parent;return t}function Pr(){return Ne.lFrame.currentTNode}function qi(t,r){const o=Ne.lFrame;o.currentTNode=t,o.isParent=r}function Bu(){return Ne.lFrame.isParent}function Cs(){return Ne.lFrame.bindingIndex++}function Tc(t,r){const o=Ne.lFrame;o.bindingIndex=o.bindingRootIndex=t,Rl(r)}function Rl(t){Ne.lFrame.currentDirectiveIndex=t}function I(){return Ne.lFrame.currentQueryIndex}function D(t){Ne.lFrame.currentQueryIndex=t}function v(t){const r=t[yt];return 2===r.type?r.declTNode:1===r.type?t[dr]:null}function A(t,r,o){if(o&Rt.SkipSelf){let c=r,h=t;for(;!(c=c.parent,null!==c||o&Rt.Host||(c=v(h),null===c||(h=h[ai],10&c.type))););if(null===c)return!1;r=c,t=h}const a=Ne.lFrame=U();return a.currentTNode=r,a.lView=t,!0}function R(t){const r=U(),o=t[yt];Ne.lFrame=r,r.currentTNode=o.firstChild,r.lView=t,r.tView=o,r.contextLView=t,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function U(){const t=Ne.lFrame,r=null===t?null:t.child;return null===r?Y(t):r}function Y(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function xe(){const t=Ne.lFrame;return Ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ce=xe;function ft(){const t=xe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kt(){return Ne.lFrame.selectedIndex}function Mi(t){Ne.lFrame.selectedIndex=t}function kn(){const t=Ne.lFrame;return Zd(t.tView,t.selectedIndex)}let Xh=!0;function Ml(){return Xh}function ni(t){Xh=t}function Ea(t,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const h=t.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:M,ngOnDestroy:V}=h;m&&(t.contentHooks??=[]).push(-o,m),E&&((t.contentHooks??=[]).push(o,E),(t.contentCheckHooks??=[]).push(o,E)),C&&(t.viewHooks??=[]).push(-o,C),M&&((t.viewHooks??=[]).push(o,M),(t.viewCheckHooks??=[]).push(o,M)),null!=V&&(t.destroyHooks??=[]).push(o,V)}}function iu(t,r,o){Xd(t,r,3,o)}function di(t,r,o,a){(3&t[$t])===o&&Xd(t,r,o,a)}function Ac(t,r){let o=t[$t];(3&o)===r&&(o&=8191,o+=1,t[$t]=o)}function Xd(t,r,o,a){const h=a??-1,m=r.length-1;let E=0;for(let C=void 0!==a?65535&t[_r]:0;C<m;C++)if("number"==typeof r[C+1]){if(E=r[C],null!=a&&E>=a)break}else r[C]<0&&(t[_r]+=65536),(E<h||-1==h)&&(Sc(t,o,r,C),t[_r]=(4294901760&t[_r])+C+2),C++}function As(t,r){lr(4,t,r);const o=nr(null);try{r.call(t)}finally{nr(o),lr(5,t,r)}}function Sc(t,r,o,a){const c=o[a]<0,h=o[a+1],E=t[c?-o[a]:o[a]];c?t[$t]>>13<t[_r]>>16&&(3&t[$t])===r&&(t[$t]+=8192,As(E,h)):As(E,h)}const so=-1;class ju{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Nl(t){return t!==so}function bc(t){return 32767&t}function su(t,r){let o=function fg(t){return t>>16}(t),a=r;for(;o>0;)a=a[ai],o--;return a}let th=!0;function $u(t){const r=th;return th=t,r}const Rc=255,Ol=5;let nf=0;const Ki={};function Hu(t,r){const o=Pc(t,r);if(-1!==o)return o;const a=r[yt];a.firstCreatePass&&(t.injectorIndex=r.length,Vr(a.data,t),Vr(r,null),Vr(a.blueprint,null));const c=Ss(t,r),h=t.injectorIndex;if(Nl(c)){const m=bc(c),E=su(c,r),C=E[yt].data;for(let M=0;M<8;M++)r[h+M]=E[m+M]|C[m+M]}return r[h+8]=c,h}function Vr(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Pc(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Ss(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,a=null,c=r;for(;null!==c;){if(a=Qo(c),null===a)return so;if(o++,c=c[ai],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return so}function kl(t,r,o){!function pg(t,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Or)&&(a=o[Or]),null==a&&(a=o[Or]=nf++);const c=a&Rc;r.data[t+(c>>Ol)]|=1<<c}(t,r,o)}function zu(t,r,o){if(o&Rt.Optional||void 0!==t)return t;Nt()}function hi(t,r,o,a){if(o&Rt.Optional&&void 0===a&&(a=null),!(o&(Rt.Self|Rt.Host))){const c=t[vi],h=Un(void 0);try{return c?c.get(r,a,o&Rt.Optional):Kr(r,a,o&Rt.Optional)}finally{Un(h)}}return zu(a,0,o)}function Jn(t,r,o,a=Rt.Default,c){if(null!==t){if(2048&r[$t]&&!(a&Rt.Self)){const m=function ih(t,r,o,a,c){let h=t,m=r;for(;null!==h&&null!==m&&2048&m[$t]&&!(512&m[$t]);){const E=nh(h,m,o,a|Rt.Self,Ki);if(E!==Ki)return E;let C=h.parent;if(!C){const M=m[zo];if(M){const V=M.get(o,Ki,a);if(V!==Ki)return V}C=Qo(m),m=m[ai]}h=C}return c}(t,r,o,a,Ki);if(m!==Ki)return m}const h=nh(t,r,o,a,Ki);if(h!==Ki)return h}return hi(r,o,a,c)}function nh(t,r,o,a,c){const h=function rh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Or)?t[Or]:void 0;return"number"==typeof r?r>=0?r&Rc:ou:r}(o);if("function"==typeof h){if(!A(r,t,a))return a&Rt.Host?zu(c,0,a):hi(r,o,a,c);try{let m;if(m=h(a),null!=m||a&Rt.Optional)return m;Nt()}finally{Ce()}}else if("number"==typeof h){let m=null,E=Pc(t,r),C=so,M=a&Rt.Host?r[ur][dr]:null;for((-1===E||a&Rt.SkipSelf)&&(C=-1===E?Ss(t,r):r[E+8],C!==so&&rf(a,!1)?(m=r[yt],E=bc(C),r=su(C,r)):E=-1);-1!==E;){const V=r[yt];if(ri(h,E,V.data)){const q=Ia(E,r,o,m,a,M);if(q!==Ki)return q}C=r[E+8],C!==so&&rf(a,r[yt].data[E+8]===M)&&ri(h,E,r)?(m=V,E=bc(C),r=su(C,r)):E=-1}}return c}function Ia(t,r,o,a,c,h){const m=r[yt],E=m.data[t+8],V=xi(E,m,o,null==a?wo(E)&&th:a!=m&&0!=(3&E.type),c&Rt.Host&&h===E);return null!==V?wa(r,m,V,E):Ki}function xi(t,r,o,a,c){const h=t.providerIndexes,m=r.data,E=1048575&h,C=t.directiveStart,V=h>>20,de=c?E+V:t.directiveEnd;for(let we=a?E:E+V;we<de;we++){const Ge=m[we];if(we<C&&o===Ge||we>=C&&Ge.type===o)return we}if(c){const we=m[C];if(we&&Hr(we)&&we.type===o)return C}return null}function wa(t,r,o,a){let c=t[o];const h=r.data;if(function eh(t){return t instanceof ju}(c)){const m=c;m.resolving&&function We(t,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ge(-200,`Circular dependency in DI detected for ${t}${o}`)}(function He(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ve(t)}(h[o]));const E=$u(m.canSeeViewProviders);m.resolving=!0;const M=m.injectImpl?Un(m.injectImpl):null;A(t,a,Rt.Default);try{c=t[o]=m.factory(void 0,h,t,a),r.firstCreatePass&&o>=a.directiveStart&&function ru(t,r,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:h}=r.type.prototype;if(a){const m=Fn(r);(o.preOrderHooks??=[]).push(t,m),(o.preOrderCheckHooks??=[]).push(t,m)}c&&(o.preOrderHooks??=[]).push(0-t,c),h&&((o.preOrderHooks??=[]).push(t,h),(o.preOrderCheckHooks??=[]).push(t,h))}(o,h[o],r)}finally{null!==M&&Un(M),$u(E),m.resolving=!1,Ce()}}return c}function ri(t,r,o){return!!(o[r+(t>>Ol)]&1<<t)}function rf(t,r){return!(t&Rt.Self||t&Rt.Host&&r)}class Ir{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Jn(this._tNode,this._lView,r,Bt(a),o)}}function ou(){return new Ir(li(),Ke())}function au(t){return K(()=>{const r=t.prototype.constructor,o=r[br]||Ta(r),a=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==a;){const h=c[br]||Ta(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Ta(t){return ot(t)?()=>{const r=Ta(qe(t));return r&&r()}:Ts(t)}function Qo(t){const r=t[yt],o=r.type;return 2===o?r.declTNode:1===o?t[dr]:null}function oo(t){return function ir(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const o=t.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const h=o[c];if(Gs(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(h===r)return o[c+1];c+=2}}}return null}(li(),t)}const cs="__parameters__";function cu(t,r,o){return K(()=>{const a=function Bs(t){return function(...o){if(t){const a=t(...o);for(const c in a)this[c]=a[c]}}}(r);function c(...h){if(this instanceof c)return a.apply(this,h),this;const m=new c(...h);return E.annotation=m,E;function E(C,M,V){const q=C.hasOwnProperty(cs)?C[cs]:Object.defineProperty(C,cs,{value:[]})[cs];for(;q.length<=V;)q.push(null);return(q[V]=q[V]||[]).push(m),C}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function Jo(t,r){t.forEach(o=>Array.isArray(o)?Jo(o,r):r(o))}function pr(t,r,o){r>=t.length?t.push(o):t.splice(r,0,o)}function ao(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Jt(t,r,o){let a=uo(t,r);return a>=0?t[1|a]=o:(a=~a,function lf(t,r,o,a){let c=t.length;if(c==r)t.push(o,a);else if(1===c)t.push(a,t[0]),t[0]=o;else{for(c--,t.push(t[c-1],t[c]);c>r;)t[c]=t[c-2],c--;t[r]=o,t[r+1]=a}}(t,a,r,o)),a}function Kn(t,r){const o=uo(t,r);if(o>=0)return t[1|o]}function uo(t,r){return function Ku(t,r,o){let a=0,c=t.length>>o;for(;c!==a;){const h=a+(c-a>>1),m=t[h<<o];if(r===m)return h<<o;m>r?c=h:a=h+1}return~(c<<o)}(t,r,1)}const Zu=ye(cu("Optional"),8),lu=ye(cu("SkipSelf"),4);function Kl(t){return 128==(128&t.flags)}var Bc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Bc||{});const Zl=new Map;let mu=0;const jc="__ngContext__";function $i(t,r){Ln(r)?(t[jc]=r[Ui],function Yl(t){Zl.set(t[Ui],t)}(r)):t[jc]=r}let Ti;function Eu(t,r){return Ti(t,r)}function $c(t){const r=t[Bn];return $r(r)?r[Bn]:r}function td(t){return Hc(t[Io])}function nd(t){return Hc(t[Jr])}function Hc(t){for(;null!==t&&!$r(t);)t=t[Jr];return t}function ta(t,r,o,a,c){if(null!=a){let h,m=!1;$r(a)?h=a:Ln(a)&&(m=!0,a=a[Gn]);const E=Sn(a);0===t&&null!==o?null==c?Pa(r,o,E):$s(r,o,E,c||null,!0):1===t&&null!==o?$s(r,o,E,c||null,!0):2===t?function wf(t,r,o){const a=Ma(t,r);a&&function Ef(t,r,o,a){t.removeChild(r,o,a)}(t,a,r,o)}(r,E,m):3===t&&r.destroyNode(E),null!=h&&function bg(t,r,o,a,c){const h=o[ws];h!==Sn(o)&&ta(r,t,a,h,c);for(let E=Nn;E<o.length;E++){const C=o[E];qc(C[yt],C,t,r,a,h)}}(r,t,h,o,c)}}function ec(t,r,o){return t.createElement(r,o)}function ee(t,r){const o=t[da],a=o.indexOf(r);ya(r),o.splice(a,1)}function Ie(t,r){if(t.length<=Nn)return;const o=Nn+r,a=t[o];if(a){const c=a[xs];null!==c&&c!==t&&ee(c,a),r>0&&(t[o-1][Jr]=a[Jr]);const h=ao(t,Nn+r);!function g(t,r){qc(t,r,r[qt],2,null,null),r[Gn]=null,r[dr]=null}(a[yt],a);const m=h[Fr];null!==m&&m.detachView(h[yt]),a[Bn]=null,a[Jr]=null,a[$t]&=-129}return a}function ze(t,r){if(!(256&r[$t])){const o=r[qt];r[Si]&&ks(r[Si]),r[Es]&&ks(r[Es]),o.destroyNode&&qc(t,r,o,3,null,null),function _(t){let r=t[Io];if(!r)return pt(t[yt],t);for(;r;){let o=null;if(Ln(r))o=r[Io];else{const a=r[Nn];a&&(o=a)}if(!o){for(;r&&!r[Jr]&&r!==t;)Ln(r)&&pt(r[yt],r),r=r[Bn];null===r&&(r=t),Ln(r)&&pt(r[yt],r),o=r&&r[Jr]}r=o}}(r)}}function pt(t,r){if(!(256&r[$t])){r[$t]&=-129,r[$t]|=256,function Mt(t,r){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let a=0;a<o.length;a+=2){const c=r[o[a]];if(!(c instanceof ju)){const h=o[a+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const E=c[h[m]],C=h[m+1];lr(4,E,C);try{C.call(E)}finally{lr(5,E,C)}}else{lr(4,c,h);try{h.call(c)}finally{lr(5,c,h)}}}}}(t,r),function Pt(t,r){const o=t.cleanup,a=r[ys];if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+3];m>=0?a[m]():a[-m].unsubscribe(),h+=2}else o[h].call(a[o[h+1]]);null!==a&&(r[ys]=null);const c=r[Bi];if(null!==c){r[Bi]=null;for(let h=0;h<c.length;h++)(0,c[h])()}}(t,r),1===r[yt].type&&r[qt].destroy();const o=r[xs];if(null!==o&&$r(r[Bn])){o!==r[Bn]&&ee(o,r);const a=r[Fr];null!==a&&a.detachView(t)}!function Cg(t){Zl.delete(t[Ui])}(r)}}function wr(t,r,o){return function js(t,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[Gn];{const{componentOffset:c}=a;if(c>-1){const{encapsulation:h}=t.data[a.directiveStart+c];if(h===Re.None||h===Re.Emulated)return null}return Ei(a,o)}}(t,r.parent,o)}function $s(t,r,o,a,c){t.insertBefore(r,o,a,c)}function Pa(t,r,o){t.appendChild(r,o)}function zc(t,r,o,a,c){null!==a?$s(t,r,o,a,c):Pa(t,r,o)}function Ma(t,r){return t.parentNode(r)}let ad,na,yh,Hs=function xa(t,r,o){return 40&t.type?Ei(t,o):null};function tc(t,r,o,a){const c=wr(t,a,r),h=r[qt],E=function od(t,r,o){return Hs(t,r,o)}(a.parent||r[dr],a,r);if(null!=c)if(Array.isArray(o))for(let C=0;C<o.length;C++)zc(h,c,o[C],E,!1);else zc(h,c,o,E,!1);void 0!==ad&&ad(h,a,r,o,c)}function ud(t,r){if(null!==r){const o=r.type;if(3&o)return Ei(r,t);if(4&o)return If(-1,t[r.index]);if(8&o){const a=r.child;if(null!==a)return ud(t,a);{const c=t[r.index];return $r(c)?If(-1,c):Sn(c)}}if(32&o)return Eu(r,t)()||Sn(t[r.index]);{const a=Ag(t,r);return null!==a?Array.isArray(a)?a[0]:ud($c(t[ur]),a):ud(t,r.next)}}return null}function Ag(t,r){return null!==r?t[ur][dr].projection[r.projection]:null}function If(t,r){const o=Nn+t+1;if(o<r.length){const a=r[o],c=a[yt].firstChild;if(null!==c)return ud(a,c)}return r[ws]}function Wc(t,r,o,a,c,h,m){for(;null!=o;){const E=a[o.index],C=o.type;if(m&&0===r&&(E&&$i(Sn(E),a),o.flags|=2),32!=(32&o.flags))if(8&C)Wc(t,r,o.child,a,c,h,!1),ta(r,t,c,E,h);else if(32&C){const M=Eu(o,a);let V;for(;V=M();)ta(r,t,c,V,h);ta(r,t,c,E,h)}else 16&C?Sg(t,r,a,o,c,h):ta(r,t,c,E,h);o=m?o.projectionNext:o.next}}function qc(t,r,o,a,c,h){Wc(o,a,t.firstChild,r,c,h,!1)}function Sg(t,r,o,a,c,h){const m=o[ur],C=m[dr].projection[a.projection];if(Array.isArray(C))for(let M=0;M<C.length;M++)ta(r,t,c,C[M],h);else{let M=C;const V=m[Bn];Kl(a)&&(M.flags|=128),Wc(t,r,M,V,c,h,!0)}}function Rg(t,r,o){""===o?t.removeAttribute(r,"class"):t.setAttribute(r,"class",o)}function I_(t,r,o){const{mergedAttrs:a,classes:c,styles:h}=o;null!==a&&ki(t,r,a),null!==c&&Rg(t,r,c),null!==h&&function Mv(t,r,o){t.setAttribute(r,"style",o)}(t,r,h)}function D_(t){na=t}function ic(t){return function dd(){if(void 0===yh&&(yh=null,pn.trustedTypes))try{yh=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return yh}()?.createScriptURL(t)||t}class hd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mt})`}}function sc(t){return t instanceof hd?t.changingThisBreaksApplicationSecurity:t}function fd(t,r){const o=function b_(t){return t instanceof hd&&t.getTypeName()||null}(t);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${mt})`)}return o===r}const Kc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Zc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zc||{});function Lg(t){const r=vd();return r?r.sanitize(Zc.URL,t)||"":fd(t,"URL")?sc(t):function Na(t){return(t=String(t)).match(Kc)?t:"unsafe:"+t}(ve(t))}function wu(t){const r=vd();if(r)return ic(r.sanitize(Zc.RESOURCE_URL,t)||"");if(fd(t,"ResourceURL"))return ic(sc(t));throw new ge(904,!1)}function Yc(t,r,o){return function Fv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?wu:Lg}(r,o)(t)}function vd(){const t=Ke();return t&&t[Xr].sanitizer}const Ih=new wt("ENVIRONMENT_INITIALIZER"),Fg=new wt("INJECTOR",-1),L_=new wt("INJECTOR_DEF_TYPES");class xf{get(r,o=Qr){if(o===Qr){const a=new Error(`NullInjectorError: No provider for ${he(r)}!`);throw a.name="NullInjectorError",a}return o}}function Vg(t){return{\u0275providers:t}}function Nf(...t){return{\u0275providers:Ug(0,t),\u0275fromNgModule:!0}}function Ug(t,...r){const o=[],a=new Set;let c;const h=m=>{o.push(m)};return Jo(r,m=>{const E=m;wh(E,h,[],a)&&(c||=[],c.push(E))}),void 0!==c&&F_(c,h),o}function F_(t,r){for(let o=0;o<t.length;o++){const{ngModule:a,providers:c}=t[o];Of(c,h=>{r(h,a)})}}function wh(t,r,o,a){if(!(t=qe(t)))return!1;let c=null,h=Vn(t);const m=!h&&an(t);if(h||m){if(m&&!m.standalone)return!1;c=t}else{const C=t.ngModule;if(h=Vn(C),!h)return!1;c=C}const E=a.has(c);if(m){if(E)return!1;if(a.add(c),m.dependencies){const C="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const M of C)wh(M,r,o,a)}}else{if(!h)return!1;{if(null!=h.imports&&!E){let M;a.add(c);try{Jo(h.imports,V=>{wh(V,r,o,a)&&(M||=[],M.push(V))})}finally{}void 0!==M&&F_(M,r)}if(!E){const M=Ts(c)||(()=>new c);r({provide:c,useFactory:M,deps:Ze},c),r({provide:L_,useValue:c,multi:!0},c),r({provide:Ih,useValue:()=>Ot(c),multi:!0},c)}const C=h.providers;if(null!=C&&!E){const M=t;Of(C,V=>{r(V,M)})}}}return c!==t&&void 0!==t.providers}function Of(t,r){for(let o of t)Xe(o)&&(o=o.\u0275providers),Array.isArray(o)?Of(o,r):r(o)}const Xc=W({provide:String,useValue:W});function el(t){return null!==t&&"object"==typeof t&&Xc in t}function tl(t){return"function"==typeof t}const $g=new wt("Set Injector scope."),kf={},Hg={};let Di;function Lf(){return void 0===Di&&(Di=new xf),Di}class ka{}class Ed extends ka{get destroyed(){return this._destroyed}constructor(r,o,a,c){super(),this.parent=o,this.source=a,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dh(r,m=>this.processProvider(m)),this.records.set(Fg,Tu(void 0,this)),c.has("environment")&&this.records.set(ka,Tu(void 0,this));const h=this.records.get($g);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(L_.multi,Ze,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const o=$e(this),a=Un(void 0);try{return r()}finally{$e(o),Un(a)}}get(r,o=Qr,a=Rt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Mn))return r[Mn](this);a=Bt(a);const h=$e(this),m=Un(void 0);try{if(!(a&Rt.SkipSelf)){let C=this.records.get(r);if(void 0===C){const M=function Wg(t){return"function"==typeof t||"object"==typeof t&&t instanceof wt}(r)&&_n(r);C=M&&this.injectableDefInScope(M)?Tu(zg(r),kf):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&Rt.Self?Lf():this.parent).get(r,o=a&Rt.Optional&&o===Qr?null:o)}catch(E){if("NullInjectorError"===E.name){if((E[mi]=E[mi]||[]).unshift(he(r)),h)throw E;return function ce(t,r,o,a){const c=t[mi];throw r[B]&&c.unshift(r[B]),t.message=function Q(t,r,o,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=he(r);if(Array.isArray(r))c=r.map(he).join(" -> ");else if("object"==typeof r){let h=[];for(let m in r)if(r.hasOwnProperty(m)){let E=r[m];h.push(m+":"+("string"==typeof E?JSON.stringify(E):he(E)))}c=`{${h.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${t.replace(j,"\n  ")}`}("\n"+t.message,c,o,a),t.ngTokenPath=c,t[mi]=null,t}(E,r,"R3InjectorError",this.source)}throw E}finally{Un(m),$e(h)}}resolveInjectorInitializers(){const r=$e(this),o=Un(void 0);try{const c=this.get(Ih.multi,Ze,Rt.Self);for(const h of c)h()}finally{$e(r),Un(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(he(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(r){let o=tl(r=qe(r))?r:qe(r&&r.provide);const a=function Uv(t){return el(t)?Tu(void 0,t.useValue):Tu(Th(t),kf)}(r);if(tl(r)||!0!==r.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=Tu(void 0,kf,!0),c.factory=()=>Yn(c.multi),this.records.set(o,c)),o=r,c.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===kf&&(o.value=Hg,o.value=o.factory()),"object"==typeof o.value&&o.value&&function U_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=qe(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(r){const o=this._onDestroyHooks.indexOf(r);-1!==o&&this._onDestroyHooks.splice(o,1)}}function zg(t){const r=_n(t),o=null!==r?r.factory:Ts(t);if(null!==o)return o;if(t instanceof wt)throw new ge(204,!1);if(t instanceof Function)return function Gg(t){const r=t.length;if(r>0)throw function qu(t,r){const o=[];for(let a=0;a<t;a++)o.push(r);return o}(r,"?"),new ge(204,!1);const o=function dn(t){return t&&(t[Pn]||t[Xn])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new ge(204,!1)}function Th(t,r,o){let a;if(tl(t)){const c=qe(t);return Ts(c)||zg(c)}if(el(t))a=()=>qe(t.useValue);else if(function jg(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Yn(t.deps||[]));else if(function Bg(t){return!(!t||!t.useExisting)}(t))a=()=>Ot(qe(t.useExisting));else{const c=qe(t&&(t.useClass||t.provide));if(!function Bv(t){return!!t.deps}(t))return Ts(c)||zg(c);a=()=>new c(...Yn(t.deps))}return a}function Tu(t,r,o=!1){return{factory:t,value:r,multi:o?[]:void 0}}function Dh(t,r){for(const o of t)Array.isArray(o)?Dh(o,r):o&&Xe(o)?Dh(o.\u0275providers,r):r(o)}const Id=new wt("AppId",{providedIn:"root",factory:()=>Ff}),Ff="ng",Vf=new wt("Platform Initializer"),Ch=new wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$v=new wt("CSP nonce",{providedIn:"root",factory:()=>function ld(){if(void 0!==na)return na;if(typeof document<"u")return document;throw new ge(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Zg=(t,r,o)=>null;function ol(t,r,o=!1){return Zg(t,r,o)}class hs{}class q_{}class em{resolveComponentFactory(r){throw function K_(t){const r=Error(`No component factory found for ${he(t)}.`);return r.ngComponent=t,r}(r)}}let bh=(()=>{class t{static#e=this.NULL=new em}return t})();function zv(){return Td(li(),Ke())}function Td(t,r){return new Rh(Ei(t,r))}let Rh=(()=>{class t{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=zv}return t})();function Gv(t){return t instanceof Rh?t.nativeElement:t}class Yf{}let Wv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function qv(){const t=Ke(),o=Ds(li().index,t);return(Ln(o)?o:t)[qt]}()}return t})(),Ph=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>null})}return t})();class Jf{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const al=new Jf("16.2.12"),Mh={};function tp(t,r=null,o=null,a){const c=Q_(t,r,o,a);return c.resolveInjectorInitializers(),c}function Q_(t,r=null,o=null,a,c=new Set){const h=[o||Ze,Nf(t)];return a=a||("object"==typeof t?void 0:he(t)),new Ed(h,r||Lf(),a||null,c)}let po=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Qr;static#t=this.NULL=new xf;static create(o,a){if(Array.isArray(o))return tp({name:""},a,o,"");{const c=o.name??"";return tp({name:c},o.parent,o.providers,c)}}static#n=this.\u0275prov=Wt({token:t,providedIn:"any",factory:()=>Ot(Fg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function np(t){return t.ngOriginalError}class go{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&np(r);for(;o&&np(o);)o=np(o);return o||null}}function rp(t){return r=>{setTimeout(t,void 0,r)}}const La=class J_ extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let c=r,h=o||(()=>null),m=a;if(r&&"object"==typeof r){const C=r;c=C.next?.bind(C),h=C.error?.bind(C),m=C.complete?.bind(C)}this.__isAsync&&(h=rp(h),c&&(c=rp(c)),m&&(m=rp(m)));const E=super.subscribe({next:c,error:h,complete:m});return r instanceof X.w0&&r.add(E),E}};function ip(...t){}class Hi{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Qv(){const t="function"==typeof pn.requestAnimationFrame;let r=pn[t?"requestAnimationFrame":"setTimeout"],o=pn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&o){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ey(t){const r=()=>{!function am(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(pn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Oh(t),t.isCheckStableRunning=!0,om(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Oh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,h,m,E)=>{if(function Cd(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(E))return o.invokeTask(c,h,m,E);try{return sp(t),o.invokeTask(c,h,m,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&r(),op(t)}},onInvoke:(o,a,c,h,m,E,C)=>{try{return sp(t),o.invoke(c,h,m,E,C)}finally{t.shouldCoalesceRunChangeDetection&&r(),op(t)}},onHasTask:(o,a,c,h)=>{o.hasTask(c,h),a===c&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,Oh(t),om(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,a,c,h)=>(o.handleError(c,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hi.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(Hi.isInAngularZone())throw new ge(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,r,sm,ip,ip);try{return h.runTask(m,o,a)}finally{h.cancelTask(m)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const sm={};function om(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Oh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function sp(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function op(t){t._nesting--,om(t)}class Dd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,c){return r.apply(o,a)}}const Du=new wt("",{providedIn:"root",factory:ap});function ap(){const t=bt(Hi);let r=!0;const o=new z.y(c=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(r),c.complete()})}),a=new z.y(c=>{let h;t.runOutsideAngular(()=>{h=t.onStable.subscribe(()=>{Hi.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,c.next(!0))})})});const m=t.onUnstable.subscribe(()=>{Hi.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});return(0,fe.T)(o,a.pipe((0,pe.B)()))}function Cu(t){return t instanceof Function?t():t}let lm=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>new t})}return t})();function ll(t){for(;t;){t[$t]|=64;const r=$c(t);if(ha(t)&&!r)return t;t=r}return null}const dm=new wt("",{providedIn:"root",factory:()=>!1});let dp=null;function hp(t,r){return t[r]??fp()}function uy(t,r){const o=fp();o.producerNode?.length&&(t[r]=dp,o.lView=t,dp=pm())}const fm={...Qa,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ll(t.lView)},lView:null};function pm(){return Object.create(fm)}function fp(){return dp??=pm(),dp}const cn={};function cy(t){pp(bn(),Ke(),kt()+t,!1)}function pp(t,r,o,a){if(!a)if(3==(3&r[$t])){const h=t.preOrderCheckHooks;null!==h&&iu(r,h,o)}else{const h=t.preOrderHooks;null!==h&&di(r,h,0,o)}Mi(o)}function Rd(t,r=Rt.Default){const o=Ke();return null===o?Ot(t,r):Jn(li(),o,qe(t),r)}function gp(){throw new Error("invalid")}function Pd(t,r,o,a,c,h,m,E,C,M,V){const q=r.blueprint.slice();return q[Gn]=c,q[$t]=140|a,(null!==M||t&&2048&t[$t])&&(q[$t]|=2048),Vs(q),q[Bn]=q[ai]=t,q[jn]=o,q[Xr]=m||t&&t[Xr],q[qt]=E||t&&t[qt],q[vi]=C||t&&t[vi]||null,q[dr]=h,q[Ui]=function Ql(){return mu++}(),q[An]=V,q[zo]=M,q[ur]=2==r.type?t[ur]:q,q}function Md(t,r,o,a,c){let h=t.data[r];if(null===h)h=function kh(t,r,o,a,c){const h=Pr(),m=Bu(),C=t.data[r]=function rE(t,r,o,a,c,h){let m=r?r.injectorIndex:-1,E=0;return function at(){return null!==Ne.skipHydrationRootTNode}()&&(E|=128),{type:o,index:a,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,r,a,c);return null===t.firstChild&&(t.firstChild=C),null!==h&&(m?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C,C.prev=h)),C}(t,r,o,a,c),function _t(){return Ne.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=a,h.attrs=c;const m=function wc(){const t=Ne.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return qi(h,!0),h}function dl(t,r,o,a){if(0===o)return-1;const c=r.length;for(let h=0;h<o;h++)r.push(a),t.blueprint.push(a),t.data.push(null);return c}function mp(t,r,o,a,c){const h=hp(r,Si),m=kt(),E=2&a;try{Mi(-1),E&&r.length>tn&&pp(t,r,tn,!1),lr(E?2:0,c);const M=E?h:null,V=So(M);try{null!==M&&(M.dirty=!1),o(a,c)}finally{eo(M,V)}}finally{E&&null===r[Si]&&uy(r,Si),Mi(m),lr(E?3:1,c)}}function lc(t,r,o){if(bi(r)){const a=nr(null);try{const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const E=t.data[m];E.contentQueries&&E.contentQueries(1,o[m],m)}}finally{nr(a)}}}function _p(t,r,o){bl()&&(function Im(t,r,o,a){const c=o.directiveStart,h=o.directiveEnd;wo(o)&&function gy(t,r,o){const a=Ei(r,t),c=ly(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const E=Nd(t,Pd(t,c,null,m,a,r,null,t[Xr].rendererFactory.createRenderer(a,o),null,null,null));t[r.index]=E}(r,o,t.data[c+o.componentOffset]),t.firstCreatePass||Hu(o,r),$i(a,r);const m=o.initialInputs;for(let E=c;E<h;E++){const C=t.data[E],M=wa(r,t,E,o);$i(M,r),null!==m&&cE(0,E-c,M,C,0,m),Hr(C)&&(Ds(o.index,r)[jn]=wa(r,t,E,o))}}(t,r,o,Ei(o,r)),64==(64&o.flags)&&Ep(t,r,o))}function Lh(t,r,o=Ei){const a=r.localNames;if(null!==a){let c=r.index+1;for(let h=0;h<a.length;h+=2){const m=a[h+1],E=-1===m?o(r,t):t[m];t[c++]=E}}}function ly(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Fh(t,r,o,a,c,h,m,E,C,M,V){const q=tn+a,de=q+c,we=function Au(t,r){const o=[];for(let a=0;a<r;a++)o.push(a<t?null:cn);return o}(q,de),Ge="function"==typeof M?M():M;return we[yt]={type:t,blueprint:we,template:o,queries:null,viewQuery:E,declTNode:r,data:we.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:de,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:Ge,incompleteFirstPass:!1,ssrId:V}}let yp=t=>null;function vp(t,r,o,a){for(let c in t)if(t.hasOwnProperty(c)){o=null===o?{}:o;const h=t[c];null===a?dy(o,r,c,h):a.hasOwnProperty(c)&&dy(o,r,a[c],h)}return o}function dy(t,r,o,a){t.hasOwnProperty(o)?t[o].push(r,a):t[o]=[r,a]}function Rs(t,r,o,a,c,h,m,E){const C=Ei(r,o);let V,M=r.inputs;!E&&null!=M&&(V=M[a])?(Cp(t,o,V,a,c),wo(r)&&function hy(t,r){const o=Ds(r,t);16&o[$t]||(o[$t]|=64)}(o,r.index)):3&r.type&&(a=function iE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),c=null!=m?m(c,r.value||"",a):c,h.setProperty(C,a,c))}function vm(t,r,o,a){if(bl()){const c=null===a?null:{"":-1},h=function aE(t,r){const o=t.directiveRegistry;let a=null,c=null;if(o)for(let h=0;h<o.length;h++){const m=o[h];if(jo(r,m.selectors,!1))if(a||(a=[]),Hr(m))if(null!==m.findHostDirectiveDefs){const E=[];c=c||new Map,m.findHostDirectiveDefs(m,E,c),a.unshift(...E,m),hl(t,r,E.length)}else a.unshift(m),hl(t,r,0);else c=c||new Map,m.findHostDirectiveDefs?.(m,a,c),a.push(m)}return null===a?null:[a,c]}(t,o);let m,E;null===h?m=E=null:[m,E]=h,null!==m&&fy(t,r,o,m,c,E),c&&function uE(t,r,o){if(r){const a=t.localNames=[];for(let c=0;c<r.length;c+=2){const h=o[r[c+1]];if(null==h)throw new ge(-301,!1);a.push(r[c],h)}}}(o,a,c)}o.mergedAttrs=hn(o.mergedAttrs,o.attrs)}function fy(t,r,o,a,c,h){for(let M=0;M<a.length;M++)kl(Hu(o,r),t,a[M].type);!function py(t,r,o){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+o,t.providerIndexes=r}(o,t.data.length,a.length);for(let M=0;M<a.length;M++){const V=a[M];V.providersResolver&&V.providersResolver(V)}let m=!1,E=!1,C=dl(t,r,a.length,null);for(let M=0;M<a.length;M++){const V=a[M];o.mergedAttrs=hn(o.mergedAttrs,V.hostAttrs),xd(t,o,r,C,V),Tm(C,V,c),null!==V.contentQueries&&(o.flags|=4),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(o.flags|=64);const q=V.type.prototype;!m&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),m=!0),!E&&(q.ngOnChanges||q.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),E=!0),C++}!function _m(t,r,o){const c=r.directiveEnd,h=t.data,m=r.attrs,E=[];let C=null,M=null;for(let V=r.directiveStart;V<c;V++){const q=h[V],de=o?o.get(q):null,Ge=de?de.outputs:null;C=vp(q.inputs,V,C,de?de.inputs:null),M=vp(q.outputs,V,M,Ge);const nt=null===C||null===m||_s(r)?null:lE(C,V,m);E.push(nt)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=8),C.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=E,r.inputs=C,r.outputs=M}(t,o,h)}function Ep(t,r,o){const a=o.directiveStart,c=o.directiveEnd,h=o.index,m=function Ro(){return Ne.lFrame.currentDirectiveIndex}();try{Mi(h);for(let E=a;E<c;E++){const C=t.data[E],M=r[E];Rl(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&wm(C,M)}}finally{Mi(-1),Rl(m)}}function wm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function hl(t,r,o){r.componentOffset=o,(t.components??=[]).push(r.index)}function Tm(t,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=t;Hr(r)&&(o[""]=t)}}function xd(t,r,o,a,c){t.data[a]=c;const h=c.factory||(c.factory=Ts(c.type)),m=new ju(h,Hr(c),Rd);t.blueprint[a]=m,o[a]=m,function Em(t,r,o,a,c){const h=c.hostBindings;if(h){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const E=~r.index;(function oE(t){let r=t.length;for(;r>0;){const o=t[--r];if("number"==typeof o&&o<0)return o}return 0})(m)!=E&&m.push(E),m.push(o,a,h)}}(t,r,a,dl(t,o,c.hostVars,cn),c)}function mo(t,r,o,a,c,h){const m=Ei(t,r);!function Dm(t,r,o,a,c,h,m){if(null==h)t.removeAttribute(r,c,o);else{const E=null==m?ve(h):m(h,a||"",c);t.setAttribute(r,c,E,o)}}(r[qt],m,h,t.value,o,a,c)}function cE(t,r,o,a,c,h){const m=h[r];if(null!==m)for(let E=0;E<m.length;)my(a,o,m[E++],m[E++],m[E++])}function my(t,r,o,a,c){const h=nr(null);try{const m=t.inputTransforms;null!==m&&m.hasOwnProperty(a)&&(c=m[a].call(r,c)),null!==t.setInput?t.setInput(r,c,o,a):r[a]=c}finally{nr(h)}}function lE(t,r,o){let a=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===a&&(a=[]);const m=t[h];for(let E=0;E<m.length;E+=2)if(m[E]===r){a.push(h,m[E+1],o[c+1]);break}}c+=2}else c+=2;else c+=4}return a}function Vh(t,r,o,a){return[t,!0,!1,r,null,0,a,o,null,null,null]}function Ip(t,r){const o=t.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a+1];if(-1!==h){const m=t.data[h];D(o[a]),m.contentQueries(2,r[h],h)}}}function Nd(t,r){return t[Io]?t[vs][Jr]=r:t[Io]=r,t[vs]=r,r}function Uh(t,r,o){D(0);const a=nr(null);try{r(t,o)}finally{nr(a)}}function wp(t){return t[ys]||(t[ys]=[])}function Tp(t){return t.cleanup||(t.cleanup=[])}function Dp(t,r){const o=t[vi],a=o?o.get(go,null):null;a&&a.handleError(r)}function Cp(t,r,o,a,c){for(let h=0;h<o.length;){const m=o[h++],E=o[h++];my(t.data[m],r[m],a,E,c)}}function _y(t,r){const o=Ds(r,t),a=o[yt];!function Cm(t,r){for(let o=r.length;o<t.blueprint.length;o++)r.push(t.blueprint[o])}(a,o);const c=o[Gn];null!==c&&null===o[An]&&(o[An]=ol(c,o[vi])),Ap(a,o,o[jn])}function Ap(t,r,o){R(r);try{const a=t.viewQuery;null!==a&&Uh(1,a,o);const c=t.template;null!==c&&mp(t,r,c,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ip(t,r),t.staticViewQueries&&Uh(2,t.viewQuery,o);const h=t.components;null!==h&&function Od(t,r){for(let o=0;o<r.length;o++)_y(t,r[o])}(r,h)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[$t]&=-5,ft()}}let Sp=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(o,a,c){const h=typeof Zone>"u"?null:Zone.current,m=function ke(t,r,o){const a=Object.create(vn);o&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const c=m=>{a.cleanupFn=m};return a.ref={notify:()=>Ao(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Vu(a))return;a.hasRun=!0;const m=So(a);try{a.cleanupFn(),a.cleanupFn=Tt,a.fn(c)}finally{eo(a,m)}},cleanup:()=>a.cleanupFn()},a.ref}(o,M=>{this.all.has(M)&&this.queue.set(M,h)},c);let E;this.all.add(m),m.notify();const C=()=>{m.cleanup(),E?.(),this.all.delete(m),this.queue.delete(m)};return E=a?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[o,a]of this.queue)this.queue.delete(o),a?a.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:()=>new t})}return t})();function bp(t,r,o){let a=o?t.styles:null,c=o?t.classes:null,h=0;if(null!==r)for(let m=0;m<r.length;m++){const E=r[m];"number"==typeof E?h=E:1==h?c=Ue(c,E):2==h&&(a=Ue(a,E+": "+r[++m]+";"))}o?t.styles=a:t.stylesWithoutHost=a,o?t.classes=c:t.classesWithoutHost=c}function jh(t,r,o,a,c=!1){for(;null!==o;){const h=r[o.index];null!==h&&a.push(Sn(h)),$r(h)&&Am(h,a);const m=o.type;if(8&m)jh(t,r,o.child,a);else if(32&m){const E=Eu(o,r);let C;for(;C=E();)a.push(C)}else if(16&m){const E=Ag(r,o);if(Array.isArray(E))a.push(...E);else{const C=$c(r[ur]);jh(C[yt],C,E,a,!0)}}o=c?o.projectionNext:o.next}return a}function Am(t,r){for(let o=Nn;o<t.length;o++){const a=t[o],c=a[yt].firstChild;null!==c&&jh(a[yt],a,c,r)}t[ws]!==t[Gn]&&r.push(t[ws])}function Rp(t,r,o,a=!0){const c=r[Xr],h=c.rendererFactory,m=c.afterRenderEventManager;h.begin?.(),m?.begin();try{yy(t,r,t.template,o)}catch(C){throw a&&Dp(r,C),C}finally{h.end?.(),c.effectManager?.flush(),m?.end()}}function yy(t,r,o,a){const c=r[$t];if(256!=(256&c)){r[Xr].effectManager?.flush(),R(r);try{Vs(r),function gn(t){return Ne.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&mp(t,r,o,2,a);const m=3==(3&c);if(m){const M=t.preOrderCheckHooks;null!==M&&iu(r,M,null)}else{const M=t.preOrderHooks;null!==M&&di(r,M,0,null),Ac(r,0)}if(function gE(t){for(let r=td(t);null!==r;r=nd(r)){if(!r[la])continue;const o=r[da];for(let a=0;a<o.length;a++){Gr(o[a])}}}(r),vy(r,2),null!==t.contentQueries&&Ip(t,r),m){const M=t.contentCheckHooks;null!==M&&iu(r,M)}else{const M=t.contentHooks;null!==M&&di(r,M,1),Ac(r,1)}!function Xv(t,r){const o=t.hostBindingOpCodes;if(null===o)return;const a=hp(r,Es);try{for(let c=0;c<o.length;c++){const h=o[c];if(h<0)Mi(~h);else{const m=h,E=o[++c],C=o[++c];Tc(E,m),a.dirty=!1;const M=So(a);try{C(2,r[m])}finally{eo(a,M)}}}}finally{null===r[Es]&&uy(r,Es),Mi(-1)}}(t,r);const E=t.components;null!==E&&Sm(r,E,0);const C=t.viewQuery;if(null!==C&&Uh(2,C,a),m){const M=t.viewCheckHooks;null!==M&&iu(r,M)}else{const M=t.viewHooks;null!==M&&di(r,M,2),Ac(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[$t]&=-73,ya(r)}finally{ft()}}}function vy(t,r){for(let o=td(t);null!==o;o=nd(o))for(let a=Nn;a<o.length;a++)Ey(o[a],r)}function mE(t,r,o){Ey(Ds(r,t),o)}function Ey(t,r){if(!function Sl(t){return 128==(128&t[$t])}(t))return;const o=t[yt],a=t[$t];if(80&a&&0===r||1024&a||2===r)yy(o,t,o.template,t[jn]);else if(t[Qs]>0){vy(t,1);const c=o.components;null!==c&&Sm(t,c,1)}}function Sm(t,r,o){for(let a=0;a<r.length;a++)mE(t,r[a],o)}class kd{get rootNodes(){const r=this._lView,o=r[yt];return jh(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(r){this._lView[jn]=r}get destroyed(){return 256==(256&this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Bn];if($r(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Ie(r,a),ao(o,a))}this._attachedToViewContainer=!1}ze(this._lView[yt],this._lView)}onDestroy(r){!function io(t,r){if(256==(256&t[$t]))throw new ge(911,!1);null===t[Bi]&&(t[Bi]=[]),t[Bi].push(r)}(this._lView,r)}markForCheck(){ll(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-129}reattach(){this._lView[$t]|=128}detectChanges(){Rp(this._lView[yt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function f(t,r){qc(t,r,r[qt],2,null,null)}(this._lView[yt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=r}}class bm extends kd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Rp(r[yt],r,r[jn],!1)}checkNoChanges(){}get context(){return null}}class Rm extends bh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=an(r);return new yn(o,this.ngModule)}}function Pm(t){const r=[];for(let o in t)t.hasOwnProperty(o)&&r.push({propName:t[o],templateName:o});return r}class Pp{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){a=Bt(a);const c=this.injector.get(r,Mh,a);return c!==Mh||o===Mh?c:this.parentInjector.get(r,o,a)}}class yn extends q_{get inputs(){const r=this.componentDef,o=r.inputTransforms,a=Pm(r.inputs);if(null!==o)for(const c of a)o.hasOwnProperty(c.propName)&&(c.transform=o[c.propName]);return a}get outputs(){return Pm(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function yi(t){return t.map(ja).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,a,c){let h=(c=c||this.ngModule)instanceof ka?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Pp(r,h):r,E=m.get(Yf,null);if(null===E)throw new ge(407,!1);const q={rendererFactory:E,sanitizer:m.get(Ph,null),effectManager:m.get(Sp,null),afterRenderEventManager:m.get(lm,null)},de=E.createRenderer(null,this.componentDef),we=this.componentDef.selectors[0][0]||"div",Ge=a?function gm(t,r,o,a){const h=a.get(dm,!1)||o===Re.ShadowDom,m=t.selectRootElement(r,h);return function eE(t){yp(t)}(m),m}(de,a,this.componentDef.encapsulation,m):ec(de,we,function Iy(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(we)),Ht=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let et=null;null!==Ge&&(et=ol(Ge,m,!0));const ln=Fh(0,null,null,1,0,null,null,null,null,null,null),Rn=Pd(null,ln,null,Ht,null,null,q,de,m,null,et);let Tr,Vo;R(Rn);try{const Tl=this.componentDef;let cg,LI=null;Tl.findHostDirectiveDefs?(cg=[],LI=new Map,Tl.findHostDirectiveDefs(Tl,cg,LI),cg.push(Tl)):cg=[Tl];const qA=function Ty(t,r){const o=t[yt],a=tn;return t[a]=r,Md(o,a,2,"#host",null)}(Rn,Ge),KA=function $h(t,r,o,a,c,h,m){const E=c[yt];!function Dy(t,r,o,a){for(const c of t)r.mergedAttrs=hn(r.mergedAttrs,c.hostAttrs);null!==r.mergedAttrs&&(bp(r,r.mergedAttrs,!0),null!==o&&I_(a,o,r))}(a,t,r,m);let C=null;null!==r&&(C=ol(r,c[vi]));const M=h.rendererFactory.createRenderer(r,o);let V=16;o.signals?V=4096:o.onPush&&(V=64);const q=Pd(c,ly(o),null,V,c[t.index],t,h,M,null,null,C);return E.firstCreatePass&&hl(E,t,a.length-1),Nd(c,q),c[t.index]=q}(qA,Ge,Tl,cg,Rn,q,de);Vo=Zd(ln,tn),Ge&&function Mr(t,r,o,a){if(a)ki(t,o,["ng-version",al.full]);else{const{attrs:c,classes:h}=function ua(t){const r=[],o=[];let a=1,c=2;for(;a<t.length;){let h=t[a];if("string"==typeof h)2===c?""!==h&&r.push(h,t[++a]):8===c&&o.push(h);else{if(!kr(c))break;c=h}a++}return{attrs:r,classes:o}}(r.selectors[0]);c&&ki(t,o,c),h&&h.length>0&&Rg(t,o,h.join(" "))}}(de,Tl,Ge,a),void 0!==o&&function Fa(t,r,o){const a=t.projection=[];for(let c=0;c<r.length;c++){const h=o[c];a.push(null!=h?Array.from(h):null)}}(Vo,this.ngContentSelectors,o),Tr=function Yi(t,r,o,a,c,h){const m=li(),E=c[yt],C=Ei(m,c);fy(E,c,m,o,null,a);for(let V=0;V<o.length;V++)$i(wa(c,E,m.directiveStart+V,m),c);Ep(E,c,m),C&&$i(C,c);const M=wa(c,E,m.directiveStart+m.componentOffset,m);if(t[jn]=c[jn]=M,null!==h)for(const V of h)V(M,r);return lc(E,m,t),M}(KA,Tl,cg,LI,Rn,[Cy]),Ap(ln,Rn,null)}finally{ft()}return new wy(this.componentType,Tr,Td(Vo,Rn),Rn,Vo)}}class wy extends hs{constructor(r,o,a,c,h){super(),this.location=a,this._rootLView=c,this._tNode=h,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new bm(c),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let c;if(null!==a&&(c=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),o))return;const h=this._rootLView;Cp(h[yt],h,c,r,o),this.previousInputValues.set(r,o),ll(Ds(this._tNode.index,h))}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Cy(){const t=li();Ea(Ke()[yt],t)}function Ld(t){let r=function Ay(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const a=[t];for(;r;){let c;if(Hr(t))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ge(903,!1);c=r.\u0275dir}if(c){if(o){a.push(c);const m=t;m.inputs=Fd(t.inputs),m.inputTransforms=Fd(t.inputTransforms),m.declaredInputs=Fd(t.declaredInputs),m.outputs=Fd(t.outputs);const E=c.hostBindings;E&&yE(t,E);const C=c.viewQuery,M=c.contentQueries;if(C&&_E(t,C),M&&Mm(t,M),J(t.inputs,c.inputs),J(t.declaredInputs,c.declaredInputs),J(t.outputs,c.outputs),null!==c.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),J(m.inputTransforms,c.inputTransforms)),Hr(c)&&c.data.animation){const V=t.data;V.animation=(V.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const E=h[m];E&&E.ngInherit&&E(t),E===Ld&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Sy(t){let r=0,o=null;for(let a=t.length-1;a>=0;a--){const c=t[a];c.hostVars=r+=c.hostVars,c.hostAttrs=hn(c.hostAttrs,o=hn(o,c.hostAttrs))}}(a)}function Fd(t){return t===ht?{}:t===Ze?[]:t}function _E(t,r){const o=t.viewQuery;t.viewQuery=o?(a,c)=>{r(a,c),o(a,c)}:r}function Mm(t,r){const o=t.contentQueries;t.contentQueries=o?(a,c,h)=>{r(a,c,h),o(a,c,h)}:r}function yE(t,r){const o=t.hostBindings;t.hostBindings=o?(a,c)=>{r(a,c),o(a,c)}:r}function by(t){const r=t.inputConfig,o={};for(const a in r)if(r.hasOwnProperty(a)){const c=r[a];Array.isArray(c)&&c[2]&&(o[a]=c[2])}t.inputTransforms=o}function Mp(t){return!!Om(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Om(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function fs(t,r,o){return!Object.is(t[r],o)&&(t[r]=o,!0)}function bu(t,r,o,a){const c=Ke();return fs(c,Cs(),r)&&(bn(),mo(kn(),c,t,r,o,a)),bu}function Vd(t,r,o,a){return fs(t,Cs(),o)?r+ve(o)+a:cn}function $m(t,r,o,a,c,h,m,E){const C=Ke(),M=bn(),V=t+tn,q=M.firstCreatePass?function Ny(t,r,o,a,c,h,m,E,C){const M=r.consts,V=Md(r,t,4,m||null,Pi(M,E));vm(r,o,V,Pi(M,C)),Ea(r,V);const q=V.tView=Fh(2,V,a,c,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,M,null);return null!==r.queries&&(r.queries.template(r,V),q.queries=r.queries.embeddedTView(V)),V}(V,M,C,r,o,a,c,h,m):M.data[V];qi(q,!1);const de=Gp(M,C,q,t);Ml()&&tc(M,C,de,q),$i(de,C),Nd(C,C[V]=Vh(de,C,de,q)),Ha(q)&&_p(M,C,q),null!=m&&Lh(C,q,E)}let Gp=function Wh(t,r,o,a){return ni(!0),r[qt].createComment("")};function Oy(t){return ci(function va(){return Ne.lFrame.contextLView}(),tn+t)}function ky(t,r,o){const a=Ke();return fs(a,Cs(),r)&&Rs(bn(),kn(),a,t,r,a[qt],o,!1),ky}function Ly(t,r,o,a,c){const m=c?"class":"style";Cp(t,o,r.inputs[m],m,a)}function ko(t,r,o,a){const c=Ke(),h=bn(),m=tn+t,E=c[qt],C=h.firstCreatePass?function vl(t,r,o,a,c,h){const m=r.consts,C=Md(r,t,2,a,Pi(m,c));return vm(r,o,C,Pi(m,h)),null!==C.attrs&&bp(C,C.attrs,!1),null!==C.mergedAttrs&&bp(C,C.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,C),C}(m,h,c,r,o,a):h.data[m],M=Fy(h,c,C,E,r,t);c[m]=M;const V=Ha(C);return qi(C,!0),I_(E,M,C),32!=(32&C.flags)&&Ml()&&tc(h,c,M,C),0===function eu(){return Ne.lFrame.elementDepthCount}()&&$i(M,c),function Dt(){Ne.lFrame.elementDepthCount++}(),V&&(_p(h,c,C),lc(h,C,c)),null!==a&&Lh(c,C),ko}function dc(){let t=li();Bu()?function Kt(){Ne.lFrame.isParent=!1}():(t=t.parent,qi(t,!1));const r=t;(function Le(t){return Ne.skipHydrationRootTNode===t})(r)&&function lg(){Ne.skipHydrationRootTNode=null}(),function xt(){Ne.lFrame.elementDepthCount--}();const o=bn();return o.firstCreatePass&&(Ea(o,t),bi(t)&&o.queries.elementEnd(t)),null!=r.classesWithoutHost&&function dg(t){return 0!=(8&t.flags)}(r)&&Ly(o,r,Ke(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function hg(t){return 0!=(16&t.flags)}(r)&&Ly(o,r,Ke(),r.stylesWithoutHost,!1),dc}function Va(t,r,o,a){return ko(t,r,o,a),dc(),Va}let Fy=(t,r,o,a,c,h)=>(ni(!0),ec(a,c,function Cc(){return Ne.lFrame.currentNamespace}()));function Gm(){return Ke()}function Wm(t){return!!t&&"function"==typeof t.then}function $y(t){return!!t&&"function"==typeof t.subscribe}function Wp(t,r,o,a){const c=Ke(),h=bn(),m=li();return function qp(t,r,o,a,c,h,m){const E=Ha(a),M=t.firstCreatePass&&Tp(t),V=r[jn],q=wp(r);let de=!0;if(3&a.type||m){const nt=Ei(a,r),It=m?m(nt):nt,Ht=q.length,et=m?Rn=>m(Sn(Rn[a.index])):a.index;let ln=null;if(!m&&E&&(ln=function Hd(t,r,o,a){const c=t.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===o&&c[h+1]===a){const E=r[ys],C=c[h+2];return E.length>C?E[C]:null}"string"==typeof m&&(h+=2)}return null}(t,r,c,a.index)),null!==ln)(ln.__ngLastListenerFn__||ln).__ngNextListenerFn__=h,ln.__ngLastListenerFn__=h,de=!1;else{h=zy(a,r,V,h,!1);const Rn=o.listen(It,c,h);q.push(h,Rn),M&&M.push(c,et,Ht,Ht+1)}}else h=zy(a,r,V,h,!1);const we=a.outputs;let Ge;if(de&&null!==we&&(Ge=we[c])){const nt=Ge.length;if(nt)for(let It=0;It<nt;It+=2){const Tr=r[Ge[It]][Ge[It+1]].subscribe(h),Vo=q.length;q.push(h,Tr),M&&M.push(c,a.index,Vo,-(Vo+1))}}}(h,c,c[qt],m,t,r,a),Wp}function NE(t,r,o,a){try{return lr(6,r,o),!1!==o(a)}catch(c){return Dp(t,c),!1}finally{lr(7,r,o)}}function zy(t,r,o,a,c){return function h(m){if(m===Function)return a;ll(t.componentOffset>-1?Ds(t.index,r):r);let C=NE(r,o,a,m),M=h.__ngNextListenerFn__;for(;M;)C=NE(r,o,M,m)&&C,M=M.__ngNextListenerFn__;return c&&!1===C&&m.preventDefault(),C}}function Gy(t=1){return function se(t){return(Ne.lFrame.contextLView=function qn(t,r){for(;t>0;)r=r[ai],t--;return r}(t,Ne.lFrame.contextLView))[jn]}(t)}function Wy(t,r,o){return qy(t,"",r,"",o),Wy}function qy(t,r,o,a,c){const h=Ke(),m=Vd(h,r,o,a);return m!==cn&&Rs(bn(),kn(),h,t,m,h[qt],c,!1),qy}function oa(t,r){return t<<17|r<<2}function fc(t){return t>>17&32767}function Km(t){return 2|t}function El(t){return(131068&t)>>2}function Zm(t,r){return-131069&t|r<<2}function Jy(t){return 1|t}function GE(t,r,o,a,c){const h=t[o+1],m=null===r;let E=a?fc(h):El(h),C=!1;for(;0!==E&&(!1===C||m);){const V=t[E+1];r0(t[E],r)&&(C=!0,t[E+1]=a?Jy(V):Km(V)),E=a?fc(V):El(V)}C&&(t[o+1]=a?Km(h):Jy(h))}function r0(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&uo(t,r)>=0}function Gd(t,r){return function ii(t,r,o,a){const c=Ke(),h=bn(),m=function En(t){const r=Ne.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,o}(2);h.firstUpdatePass&&function e_(t,r,o,a){const c=t.data;if(null===c[o+1]){const h=c[kt()],m=function Xm(t,r){return r>=t.expandoStartIndex}(t,o);(function t_(t,r){return 0!=(t.flags&(r?8:16))})(h,a)&&null===r&&!m&&(r=!1),r=function qh(t,r,o,a){const c=function Us(t){const r=Ne.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let h=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(o=Ba(o=Zh(null,t,r,o,a),r.attrs,a),h=null);else{const m=r.directiveStylingLast;if(-1===m||t[m]!==c)if(o=Zh(c,t,r,o,a),null===h){let C=function Kh(t,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==El(a))return t[fc(a)]}(t,r,a);void 0!==C&&Array.isArray(C)&&(C=Zh(null,t,r,C[1],a),C=Ba(C,r.attrs,a),function Ps(t,r,o,a){t[fc(o?r.classBindings:r.styleBindings)]=a}(t,r,a,C))}else h=function WE(t,r,o){let a;const c=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<c;h++)a=Ba(a,t[h].hostAttrs,o);return Ba(a,r.attrs,o)}(t,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),o}(c,h,r,a),function zE(t,r,o,a,c,h){let m=h?r.classBindings:r.styleBindings,E=fc(m),C=El(m);t[a]=o;let V,M=!1;if(Array.isArray(o)?(V=o[1],(null===V||uo(o,V)>0)&&(M=!0)):V=o,c)if(0!==C){const de=fc(t[E+1]);t[a+1]=oa(de,E),0!==de&&(t[de+1]=Zm(t[de+1],a)),t[E+1]=function jE(t,r){return 131071&t|r<<17}(t[E+1],a)}else t[a+1]=oa(E,0),0!==E&&(t[E+1]=Zm(t[E+1],a)),E=a;else t[a+1]=oa(C,0),0===E?E=a:t[C+1]=Zm(t[C+1],a),C=a;M&&(t[a+1]=Km(t[a+1])),GE(t,V,a,!0),GE(t,V,a,!1),function n0(t,r,o,a,c){const h=c?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof r&&uo(h,r)>=0&&(o[a+1]=Jy(o[a+1]))}(r,V,t,a,h),m=oa(E,C),h?r.classBindings=m:r.styleBindings=m}(c,h,r,o,m,a)}}(h,t,m,a),r!==cn&&fs(c,m,r)&&function av(t,r,o,a,c,h,m,E){if(!(3&r.type))return;const C=t.data,M=C[E+1],V=function $E(t){return 1==(1&t)}(M)?uv(C,r,o,c,El(M),m):void 0;Yp(V)||(Yp(h)||function BE(t){return 2==(2&t)}(M)&&(h=uv(C,null,o,c,E,m)),function E_(t,r,o,a,c){if(r)c?t.addClass(o,a):t.removeClass(o,a);else{let h=-1===a.indexOf("-")?void 0:Bc.DashCase;null==c?t.removeStyle(o,a,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=Bc.Important),t.setStyle(o,a,c,h))}}(a,m,_a(kt(),o),c,h))}(h,h.data[kt()],c,c[qt],t,c[m+1]=function KE(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=he(sc(t)))),t}(r,o),a,m)}(t,r,null,!0),Gd}function Zh(t,r,o,a,c){let h=null;const m=o.directiveEnd;let E=o.directiveStylingLast;for(-1===E?E=o.directiveStart:E++;E<m&&(h=r[E],a=Ba(a,h.hostAttrs,c),h!==t);)E++;return null!==t&&(o.directiveStylingLast=E),a}function Ba(t,r,o){const a=o?1:2;let c=-1;if(null!==r)for(let h=0;h<r.length;h++){const m=r[h];"number"==typeof m?c=m:c===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Jt(t,m,!!o||r[++h]))}return void 0===t?null:t}function uv(t,r,o,a,c,h){const m=null===r;let E;for(;c>0;){const C=t[c],M=Array.isArray(C),V=M?C[1]:C,q=null===V;let de=o[c+1];de===cn&&(de=q?Ze:void 0);let we=q?Kn(de,a):V===a?de:void 0;if(M&&!Yp(we)&&(we=Kn(C,a)),Yp(we)&&(E=we,m))return E;const Ge=t[c+1];c=m?fc(Ge):El(Ge)}if(null!==r){let C=h?r.residualClasses:r.residualStyles;null!=C&&(E=Kn(C,a))}return E}function Yp(t){return void 0!==t}function cv(t,r=""){const o=Ke(),a=bn(),c=t+tn,h=a.firstCreatePass?Md(a,c,1,r,null):a.data[c],m=Jp(a,o,h,r,t);o[c]=m,Ml()&&tc(a,o,m,h),qi(h,!1)}let Jp=(t,r,o,a,c)=>(ni(!0),function rd(t,r){return t.createText(r)}(r[qt],a));function eg(t){return tg("",t,""),eg}function tg(t,r,o){const a=Ke(),c=Vd(a,t,r,o);return c!==cn&&function zs(t,r,o){const a=_a(r,t);!function _h(t,r,o){t.setValue(r,o)}(t[qt],a,o)}(a,kt(),c),tg}const Gi=void 0;var gv=["en",[["a","p"],["AM","PM"],Gi],[["AM","PM"],Gi,Gi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gi,"{1} 'at' {0}",Gi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XE(t){const o=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let rg={};function eI(t){const r=function yT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=u0(r);if(o)return o;const a=r.split("-")[0];if(o=u0(a),o)return o;if("en"===a)return gv;throw new ge(701,!1)}function a0(t){return eI(t)[ig.PluralCase]}function u0(t){return t in rg||(rg[t]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[t]),rg[t]}var ig=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ig||{});const sg="en-US";let c0=sg;function rI(t,r,o,a,c){if(t=qe(t),Array.isArray(t))for(let h=0;h<t.length;h++)rI(t[h],r,o,a,c);else{const h=bn(),m=Ke(),E=li();let C=tl(t)?t:qe(t.provide);const M=Th(t),V=1048575&E.providerIndexes,q=E.directiveStart,de=E.providerIndexes>>20;if(tl(t)||!t.multi){const we=new ju(M,c,Rd),Ge=sI(C,r,c?V:V+de,q);-1===Ge?(kl(Hu(E,m),h,C),iI(h,t,r.length),r.push(C),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(we),m.push(we)):(o[Ge]=we,m[Ge]=we)}else{const we=sI(C,r,V+de,q),Ge=sI(C,r,V,V+de),It=Ge>=0&&o[Ge];if(c&&!It||!c&&!(we>=0&&o[we])){kl(Hu(E,m),h,C);const Ht=function mD(t,r,o,a,c){const h=new ju(t,o,Rd);return h.multi=[],h.index=r,h.componentProviders=0,O0(h,c,a&&!o),h}(c?gD:pD,o.length,c,a,M);!c&&It&&(o[Ge].providerFactory=Ht),iI(h,t,r.length,0),r.push(C),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),o.push(Ht),m.push(Ht)}else iI(h,t,we>-1?we:Ge,O0(o[c?Ge:we],M,!c&&a));!c&&a&&It&&o[Ge].componentProviders++}}}function iI(t,r,o,a){const c=tl(r),h=function V_(t){return!!t.useClass}(r);if(c||h){const C=(h?qe(r.useClass):r).prototype.ngOnDestroy;if(C){const M=t.destroyHooks||(t.destroyHooks=[]);if(!c&&r.multi){const V=M.indexOf(o);-1===V?M.push(o,[a,C]):M[V+1].push(a,C)}else M.push(o,C)}}}function O0(t,r,o){return o&&t.componentProviders++,t.multi.push(r)-1}function sI(t,r,o,a){for(let c=o;c<a;c++)if(r[c]===t)return c;return-1}function pD(t,r,o,a){return oI(this.multi,[])}function gD(t,r,o,a){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=wa(o,o[yt],this.providerFactory.index,a);h=E.slice(0,m),oI(c,h);for(let C=m;C<E.length;C++)h.push(E[C])}else h=[],oI(c,h);return h}function oI(t,r){for(let o=0;o<t.length;o++)r.push((0,t[o])());return r}function k0(t,r=[]){return o=>{o.providersResolver=(a,c)=>function fD(t,r,o){const a=bn();if(a.firstCreatePass){const c=Hr(t);rI(o,a.data,a.blueprint,c,!0),rI(r,a.data,a.blueprint,c,!1)}}(a,c?c(t):t,r)}}class Qh{}class L0{}function _D(t,r){return new aI(t,r??null,[])}class aI extends Qh{constructor(r,o,a){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rm(this);const c=Lr(r);this._bootstrapComponents=Cu(c.bootstrap),this._r3Injector=Q_(r,o,[{provide:Qh,useValue:this},{provide:bh,useValue:this.componentFactoryResolver},...a],he(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class uI extends L0{constructor(r){super(),this.moduleType=r}create(r){return new aI(this.moduleType,r,[])}}class F0 extends Qh{constructor(r){super(),this.componentFactoryResolver=new Rm(this),this.instance=null;const o=new Ed([...r.providers,{provide:Qh,useValue:this},{provide:bh,useValue:this.componentFactoryResolver}],r.parent||Lf(),r.debugName,new Set(["environment"]));this.injector=o,r.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function V0(t,r,o=null){return new F0({providers:t,parent:r,debugName:o,runEnvironmentInitializers:!0}).injector}let vD=(()=>{class t{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const a=Ug(0,o.type),c=a.length>0?V0([a],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,c)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Wt({token:t,providedIn:"environment",factory:()=>new t(Ot(ka))})}return t})();function U0(t){t.getStandaloneInjector=r=>r.get(vD).getOrCreateStandaloneInjector(t)}function W0(t,r,o,a,c,h){const m=r+o;return fs(t,m,c)?function ra(t,r,o){return t[r]=o}(t,m+1,h?a.call(h,c):a(c)):function d_(t,r){const o=t[r];return o===cn?void 0:o}(t,m+1)}function Y0(t,r){const o=bn();let a;const c=t+tn;o.firstCreatePass?(a=function VD(t,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(t===a.name)return a}}(r,o.pipeRegistry),o.data[c]=a,a.onDestroy&&(o.destroyHooks??=[]).push(c,a.onDestroy)):a=o.data[c];const h=a.factory||(a.factory=Ts(a.type)),E=Un(Rd);try{const C=$u(!1),M=h();return $u(C),function t0(t,r,o,a){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),r[o]=a}(o,Ke(),c,M),M}finally{Un(E)}}function J0(t,r,o){const a=t+tn,c=Ke(),h=ci(c,a);return function h_(t,r){return t[yt].data[r].pure}(c,a)?W0(c,function Et(){const t=Ne.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,h.transform,o,h):h.transform(o)}function HD(){return this._results[Symbol.iterator]()}class lI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new La)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=lI.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=HD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const c=function sr(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function uf(t,r,o){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let c=t[a],h=r[a];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GD(t,r,o,a=!0){const c=r[yt];if(function P(t,r,o,a){const c=Nn+a,h=o.length;a>0&&(o[c-1][Jr]=r),a<h-Nn?(r[Jr]=o[c],pr(o,Nn+a,r)):(o.push(r),r[Jr]=null),r[Bn]=o;const m=r[xs];null!==m&&o!==m&&function F(t,r){const o=t[da];r[ur]!==r[Bn][Bn][ur]&&(t[la]=!0),null===o?t[da]=[r]:o.push(r)}(m,r);const E=r[Fr];null!==E&&E.insertView(t),r[$t]|=128}(c,r,t,o),a){const h=If(o,t),m=r[qt],E=Ma(m,t[ws]);null!==E&&function d(t,r,o,a,c,h){a[Gn]=c,a[dr]=r,qc(t,a,o,1,c,h)}(c,t[dr],m,r,E,h)}}let f_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=KD}return t})();const WD=f_,qD=class extends WD{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,o){return this.createEmbeddedViewImpl(r,o)}createEmbeddedViewImpl(r,o,a){const c=function zD(t,r,o,a){const c=r.tView,E=Pd(t,c,o,4096&t[$t]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);E[xs]=t[r.index];const M=t[Fr];return null!==M&&(E[Fr]=M.createEmbeddedView(c)),Ap(c,E,o),E}(this._declarationLView,this._declarationTContainer,r,{injector:o,hydrationInfo:a});return new kd(c)}};function KD(){return Ev(li(),Ke())}function Ev(t,r){return 4&t.type?new qD(r,t,Td(t,r)):null}let wv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=eC}return t})();function eC(){return sw(li(),Ke())}const tC=wv,rw=class extends tC{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Td(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ss(this._hostTNode,this._hostLView);if(Nl(r)){const o=su(r,this._hostLView),a=bc(r);return new Ir(o[yt].data[a+8],o)}return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=iw(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-Nn}createEmbeddedView(r,o,a){let c,h;"number"==typeof a?c=a:null!=a&&(c=a.index,h=a.injector);const E=r.createEmbeddedViewImpl(o||{},h,null);return this.insertImpl(E,c,false),E}createComponent(r,o,a,c,h){const m=r&&!function Wu(t){return"function"==typeof t}(r);let E;if(m)E=o;else{const nt=o||{};E=nt.index,a=nt.injector,c=nt.projectableNodes,h=nt.environmentInjector||nt.ngModuleRef}const C=m?r:new yn(an(r)),M=a||this.parentInjector;if(!h&&null==C.ngModule){const It=(m?M:this.parentInjector).get(ka,null);It&&(h=It)}an(C.componentType??{});const we=C.create(M,c,null,h);return this.insertImpl(we.hostView,E,false),we}insert(r,o){return this.insertImpl(r,o,!1)}insertImpl(r,o,a){const c=r._lView;if(function Jh(t){return $r(t[Bn])}(c)){const C=this.indexOf(r);if(-1!==C)this.detach(C);else{const M=c[Bn],V=new rw(M,M[dr],M[Bn]);V.detach(V.indexOf(r))}}const m=this._adjustIndex(o),E=this._lContainer;return GD(E,c,m,!a),r.attachToViewContainerRef(),pr(dI(E),m,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=iw(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Ie(this._lContainer,o);a&&(ao(dI(this._lContainer),o),ze(a[yt],a))}detach(r){const o=this._adjustIndex(r,-1),a=Ie(this._lContainer,o);return a&&null!=ao(dI(this._lContainer),o)?new kd(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function iw(t){return t[8]}function dI(t){return t[8]||(t[8]=[])}function sw(t,r){let o;const a=r[t.index];return $r(a)?o=a:(o=Vh(a,r,null,t),r[t.index]=o,Nd(r,o)),ow(o,r,t,a),new rw(o,t,r)}let ow=function aw(t,r,o,a){if(t[ws])return;let c;c=8&o.type?Sn(a):function nC(t,r){const o=t[qt],a=o.createComment(""),c=Ei(r,t);return $s(o,Ma(o,c),a,function sd(t,r){return t.nextSibling(r)}(o,c),!1),a}(r,o),t[ws]=c};class hI{constructor(r){this.queryList=r,this.matches=null}clone(){return new hI(this.queryList)}setDirty(){this.queryList.setDirty()}}class fI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,c=[];for(let h=0;h<a;h++){const m=o.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new fI(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==gw(r,o).matches&&this.queries[o].setDirty()}}class uw{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class pI{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,h=this.getByIndex(a).embeddedTView(r,c);h&&(h.indexInDeclarationView=a,null!==o?o.push(h):o=[h])}return null!==o?new pI(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class gI{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new gI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const h=a[c];this.matchTNodeWithReadOption(r,o,sC(o,h)),this.matchTNodeWithReadOption(r,o,xi(o,r,h,!1,!1))}else a===f_?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,xi(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Rh||c===wv||c===f_&&4&o.type)this.addMatch(o.index,-2);else{const h=xi(o,r,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function sC(t,r){const o=t.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function aC(t,r,o,a){return-1===o?function oC(t,r){return 11&t.type?Td(t,r):4&t.type?Ev(t,r):null}(r,t):-2===o?function uC(t,r,o){return o===Rh?Td(r,t):o===f_?Ev(r,t):o===wv?sw(r,t):void 0}(t,r,a):wa(t,t[yt],o,r)}function cw(t,r,o,a){const c=r[Fr].queries[a];if(null===c.matches){const h=t.data,m=o.matches,E=[];for(let C=0;C<m.length;C+=2){const M=m[C];E.push(M<0?null:aC(r,h[M],m[C+1],o.metadata.read))}c.matches=E}return c.matches}function mI(t,r,o,a){const c=t.queries.getByIndex(o),h=c.matches;if(null!==h){const m=cw(t,r,c,o);for(let E=0;E<h.length;E+=2){const C=h[E];if(C>0)a.push(m[E/2]);else{const M=h[E+1],V=r[-C];for(let q=Nn;q<V.length;q++){const de=V[q];de[xs]===de[Bn]&&mI(de[yt],de,M,a)}if(null!==V[da]){const q=V[da];for(let de=0;de<q.length;de++){const we=q[de];mI(we[yt],we,M,a)}}}}}return a}function lw(t){const r=Ke(),o=bn(),a=I();D(a+1);const c=gw(o,a);if(t.dirty&&function Uu(t){return 4==(4&t[$t])}(r)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const h=c.crossesNgTemplate?mI(o,r,a,[]):cw(o,r,c,a);t.reset(h,Gv),t.notifyOnChanges()}return!0}return!1}function dw(t,r,o,a){const c=bn();if(c.firstCreatePass){const h=li();(function pw(t,r,o){null===t.queries&&(t.queries=new pI),t.queries.track(new gI(r,o))})(c,new uw(r,o,a),h.index),function dC(t,r){const o=t.contentQueries||(t.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,r)}(c,t),2==(2&o)&&(c.staticContentQueries=!0)}!function fw(t,r,o){const a=new lI(4==(4&o));(function mm(t,r,o,a){const c=wp(r);c.push(o),t.firstCreatePass&&Tp(t).push(a,c.length-1)})(t,r,a,a.destroy),null===r[Fr]&&(r[Fr]=new fI),r[Fr].queries.push(new hI(a))}(c,Ke(),o)}function hw(){return function lC(t,r){return t[Fr].queries[r].queryList}(Ke(),I())}function gw(t,r){return t.queries.getByIndex(r)}function mw(t,r){return Ev(t,r)}function _I(t){return!!Lr(t)}const Nw=new wt("Application Initializer");let wI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,a)=>{this.resolve=o,this.reject=a}),this.appInits=bt(Nw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const c of this.appInits){const h=c();if(Wm(h))o.push(h);else if($y(h)){const m=new Promise((E,C)=>{h.subscribe({complete:E,error:C})});o.push(m)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ow=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Dv=new wt("LocaleId",{providedIn:"root",factory:()=>bt(Dv,Rt.Optional|Rt.SkipSelf)||function xC(){return typeof $localize<"u"&&$localize.locale||sg}()}),NC=new wt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new le.X(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kC{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let LC=(()=>{class t{compileModuleSync(o){return new uI(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),h=Cu(Lr(o).declarations).reduce((m,E)=>{const C=an(E);return C&&m.push(new yn(C)),m},[]);return new kC(a,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Uw=new wt(""),Bw=new wt("");let CI,iA=(()=>{class t{constructor(o,a,c){this._ngZone=o,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CI||(function sA(t){CI=t}(c),c.addToWindow(a)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,a,c){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(Hi),Ot(jw),Ot(Bw))};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac})}return t})(),jw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return CI?.findTestabilityInTree(this,o,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Wd=null;const $w=new wt("AllowMultipleToken"),AI=new wt("PlatformDestroyListeners"),SI=new wt("appBootstrapListener");class uA{constructor(r,o){this.name=r,this.token=o}}function Gw(t,r,o=[]){const a=`Platform: ${r}`,c=new wt(a);return(h=[])=>{let m=bI();if(!m||m.injector.get($w,!1)){const E=[...o,...h,{provide:c,useValue:!0}];t?t(E):function cA(t){if(Wd&&!Wd.get($w,!1))throw new ge(400,!1);(function Hw(){!function vc(t){to=t}(()=>{throw new ge(600,!1)})})(),Wd=t;const r=t.get(qw);(function zw(t){t.get(Vf,null)?.forEach(o=>o())})(t)}(function Ww(t=[],r){return po.create({name:r,providers:[{provide:$g,useValue:"platform"},{provide:AI,useValue:new Set([()=>Wd=null])},...t]})}(E,a))}return function dA(t){const r=bI();if(!r)throw new ge(401,!1);return r}()}}function bI(){return Wd?.get(qw)??null}let qw=(()=>{class t{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const c=function hA(t="zone.js",r){return"noop"===t?new Dd:"zone.js"===t?new Hi(r):t}(a?.ngZone,function Kw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return c.run(()=>{const h=function yD(t,r,o){return new aI(t,r,o)}(o.moduleType,this.injector,function Xw(t){return[{provide:Hi,useFactory:t},{provide:Ih,multi:!0,useFactory:()=>{const r=bt(pA,{optional:!0});return()=>r.initialize()}},{provide:Jw,useFactory:fA},{provide:Du,useFactory:ap}]}(()=>c)),m=h.injector.get(go,null);return c.runOutsideAngular(()=>{const E=c.onError.subscribe({next:C=>{m.handleError(C)}});h.onDestroy(()=>{Av(this._modules,h),E.unsubscribe()})}),function Zw(t,r,o){try{const a=o();return Wm(a)?a.catch(c=>{throw r.runOutsideAngular(()=>t.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(m,c,()=>{const E=h.injector.get(wI);return E.runInitializers(),E.donePromise.then(()=>(function l0(t){ut(t,"Expected localeId to be defined"),"string"==typeof t&&(c0=t.toLowerCase().replace(/_/g,"-"))}(h.injector.get(Dv,sg)||sg),this._moduleDoBootstrap(h),h))})})}bootstrapModule(o,a=[]){const c=Qw({},a);return function oA(t,r,o){const a=new uI(o);return Promise.resolve(a)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const a=o.injector.get(ug);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new ge(-403,!1);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const o=this._injector.get(AI,null);o&&(o.forEach(a=>a()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(po))};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Qw(t,r){return Array.isArray(r)?r.reduce(Qw,t):{...t,...r}}let ug=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=bt(Jw),this.zoneIsStable=bt(Du),this.componentTypes=[],this.components=[],this.isStable=bt(kw).hasPendingTasks.pipe((0,Oe.w)(o=>o?(0,ae.of)(!1):this.zoneIsStable),(0,De.x)(),(0,pe.B)()),this._injector=bt(ka)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,a){const c=o instanceof q_;if(!this._injector.get(wI).done)throw!c&&Vi(o),new ge(405,!1);let m;m=c?o:this._injector.get(bh).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const E=function aA(t){return t.isBoundToModule}(m)?void 0:this._injector.get(Qh),M=m.create(po.NULL,[],a||m.selector,E),V=M.location.nativeElement,q=M.injector.get(Uw,null);return q?.registerApplication(V),M.onDestroy(()=>{this.detachView(M.hostView),Av(this.components,M),q?.unregisterApplication(V)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;Av(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const a=this._injector.get(SI,[]);a.push(...this._bootstrapListeners),a.forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Av(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new ge(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Av(t,r){const o=t.indexOf(r);o>-1&&t.splice(o,1)}const Jw=new wt("",{providedIn:"root",factory:()=>bt(go).handleError.bind(void 0)});function fA(){const t=bt(Hi),r=bt(go);return o=>t.runOutsideAngular(()=>r.handleError(o))}let pA=(()=>{class t{constructor(){this.zone=bt(Hi),this.applicationRef=bt(ug)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=Wt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,o){if(wo(t)&&!o){const a=Ds(t.index,r);return new kd(a,a)}return 47&t.type?new kd(r[ur],r):null}(li(),Ke(),16==(16&t))}class rT{constructor(){}supports(r){return Mp(r)}create(r){return new CA(r)}}const DA=(t,r)=>r;class CA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DA}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,c=0,h=null;for(;o||a;){const m=!a||o&&o.currentIndex<sT(a,c,h)?o:a,E=sT(m,c,h),C=m.currentIndex;if(m===a)c--,a=a._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const M=E-c,V=C-c;if(M!=V){for(let de=0;de<M;de++){const we=de<h.length?h[de]:h[de]=0,Ge=we+de;V<=Ge&&Ge<M&&(h[de]=we+1)}h[m.previousIndex]=V-M}}E!==C&&r(m,E,C)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Mp(r))throw new ge(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,h,m,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let E=0;E<this.length;E++)h=r[E],m=this._trackByFn(E,h),null!==o&&Object.is(o.trackById,m)?(a&&(o=this._verifyReinsertion(o,h,m,E)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,E),a=!0),o=o._next}else c=0,function YI(t,r){if(Array.isArray(t))for(let o=0;o<t.length;o++)r(t[o]);else{const o=t[Symbol.iterator]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,E=>{m=this._trackByFn(c,E),null!==o&&Object.is(o.trackById,m)?(a&&(o=this._verifyReinsertion(o,E,m,c)),Object.is(o.item,E)||this._addIdentityChange(o,E)):(o=this._mismatch(o,E,m,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,c){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,c)):r=this._addAfter(new AA(o,a),h,c),r}_verifyReinsertion(r,o,a,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,h=r._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const c=null===o?this._itHead:o._next;return r._next=c,r._prev=o,null===c?this._itTail=r:c._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new iT),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class iT{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new SA,this.map.set(o,a)),a.add(r)}get(r,o){const c=this.map.get(r);return c?c.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sT(t,r,o){const a=t.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+r+c}class oT{constructor(){}supports(r){return r instanceof Map||Om(r)}create(){return new bA}}class bA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Om(r)))throw new ge(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const a=new RA(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aT(){return new NI([new rT])}let NI=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:aT});constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new t(o)}static extend(o){return{provide:t,useFactory:a=>t.create(o,a||aT()),deps:[[t,new lu,new Zu]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new ge(901,!1)}}return t})();function uT(){return new OI([new oT])}let OI=(()=>{class t{static#e=this.\u0275prov=Wt({token:t,providedIn:"root",factory:uT});constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new t(o)}static extend(o){return{provide:t,useFactory:a=>t.create(o,a||uT()),deps:[[t,new lu,new Zu]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new ge(901,!1)}}return t})();const xA=Gw(null,"core",[]);let NA=(()=>{class t{constructor(o){}static#e=this.\u0275fac=function(a){return new(a||t)(Ot(ug))};static#t=this.\u0275mod=qs({type:t});static#n=this.\u0275inj=fn({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WA(t){const r=an(t);if(!r)return null;const o=new yn(r);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(vt,Pe,O)=>{O.d(Pe,{zQ:()=>rn,ww:()=>Ye,rT:()=>Nt,f7:()=>St,L6:()=>ie,_Q:()=>Te,lh:()=>At,Qv:()=>We,nw:()=>Yt}),O(999);var X=O(6814),z=O(5879),fe=O(8326),le=O(7217),ae=O(8645),pe=O(2096),Oe=O(5592),De=O(2459),W=O(3019),J=O(3093),he=O(4664),Ue=O(7398),je=O(4552);class tt extends ae.x{constructor(Be=1/0,ne=1/0,ue=je.l){super(),this._bufferSize=Be,this._windowTime=ne,this._timestampProvider=ue,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ne===1/0,this._bufferSize=Math.max(1,Be),this._windowTime=Math.max(1,ne)}next(Be){const{isStopped:ne,_buffer:ue,_infiniteTimeWindow:Ae,_timestampProvider:Ee,_windowTime:Se}=this;ne||(ue.push(Be),!Ae&&ue.push(Ee.now()+Se)),this._trimBuffer(),super.next(Be)}_subscribe(Be){this._throwIfClosed(),this._trimBuffer();const ne=this._innerSubscribe(Be),{_infiniteTimeWindow:ue,_buffer:Ae}=this,Ee=Ae.slice();for(let Se=0;Se<Ee.length&&!Be.closed;Se+=ue?1:2)Be.next(Ee[Se]);return this._checkFinalizedStatuses(Be),ne}_trimBuffer(){const{_bufferSize:Be,_timestampProvider:ne,_buffer:ue,_infiniteTimeWindow:Ae}=this,Ee=(Ae?1:2)*Be;if(Be<1/0&&Ee<ue.length&&ue.splice(0,ue.length-Ee),!Ae){const Se=ne.now();let Fe=0;for(let ut=1;ut<ue.length&&ue[ut]<=Se;ut+=2)Fe=ut;Fe&&ue.splice(0,Fe+1)}}}var qe=O(3020);function ot(lt,Be,ne){let ue,Ae=!1;return lt&&"object"==typeof lt?({bufferSize:ue=1/0,windowTime:Be=1/0,refCount:Ae=!1,scheduler:ne}=lt):ue=lt??1/0,(0,qe.B)({connector:()=>new tt(ue,Be,ne),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ae})}var Xe=O(1374),Ct=O(4674);function mt(lt,Be){return(0,Ct.m)(Be)?(0,he.w)(()=>lt,Be):(0,he.w)(()=>lt)}var ge=O(5137),Ve=O(2181),ve=O(7142);const We=new z.OlP("angularfire2.auth.use-emulator"),ie=new z.OlP("angularfire2.auth.settings"),Te=new z.OlP("angularfire2.auth.tenant-id"),Nt=new z.OlP("angularfire2.auth.langugage-code"),At=new z.OlP("angularfire2.auth.use-device-language"),St=new z.OlP("angularfire.auth.persistence"),Yt=(lt,Be,ne,ue,Ae,Ee,Se,Fe)=>(0,le.cc)(`${lt.name}.auth`,"AngularFireAuth",lt.name,()=>{const ut=Be.runOutsideAngular(()=>lt.auth());if(ne&&ut.useEmulator(...ne),ue&&(ut.tenantId=ue),ut.languageCode=Ae,Ee&&ut.useDeviceLanguage(),Se)for(const[Je,Cn]of Object.entries(Se))ut.settings[Je]=Cn;return Fe&&ut.setPersistence(Fe),ut},[ne,ue,Ae,Ee,Se,Fe]);let rn=(()=>{class lt{authState;idToken;user;idTokenResult;credential;constructor(ne,ue,Ae,Ee,Se,Fe,ut,Je,Cn,dt,Qt,Wt){const mn=new ae.x,fn=(0,pe.of)(void 0).pipe((0,J.Q)(Se.outsideAngular),(0,he.w)(()=>Ee.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,999)))),(0,Ue.U)(()=>(0,le.on)(ne,Ee,ue)),(0,Ue.U)(_n=>Yt(_n,Ee,Fe,Je,Cn,dt,ut,Qt)),ot({bufferSize:1,refCount:!1}));if((0,X.PM)(Ae))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,pe.of)(null);else{fn.pipe((0,Xe.P)()).subscribe();const _n=fn.pipe((0,he.w)(dn=>dn.getRedirectResult().then(Vn=>Vn,()=>null)),fe.iC,ot({bufferSize:1,refCount:!1})),it=fn.pipe((0,he.w)(dn=>new Oe.y(Vn=>({unsubscribe:Ee.runOutsideAngular(()=>dn.onAuthStateChanged(Pn=>Vn.next(Pn),Pn=>Vn.error(Pn),()=>Vn.complete()))})))),zn=fn.pipe((0,he.w)(dn=>new Oe.y(Vn=>({unsubscribe:Ee.runOutsideAngular(()=>dn.onIdTokenChanged(Pn=>Vn.next(Pn),Pn=>Vn.error(Pn),()=>Vn.complete()))}))));this.authState=_n.pipe(mt(it),(0,ge.R)(Se.outsideAngular),(0,J.Q)(Se.insideAngular)),this.user=_n.pipe(mt(zn),(0,ge.R)(Se.outsideAngular),(0,J.Q)(Se.insideAngular)),this.idToken=this.user.pipe((0,he.w)(dn=>dn?(0,De.D)(dn.getIdToken()):(0,pe.of)(null))),this.idTokenResult=this.user.pipe((0,he.w)(dn=>dn?(0,De.D)(dn.getIdTokenResult()):(0,pe.of)(null))),this.credential=(0,W.T)(_n,mn,this.authState.pipe((0,Ve.h)(dn=>!dn))).pipe((0,Ue.U)(dn=>dn?.user?dn:null),(0,ge.R)(Se.outsideAngular),(0,J.Q)(Se.insideAngular))}return(0,le.pX)(this,fn,Ee,{spy:{apply:(_n,it,zn)=>{(_n.startsWith("signIn")||_n.startsWith("createUser"))&&zn.then(dn=>mn.next(dn))}}})}static \u0275fac=function(ue){return new(ue||lt)(z.LFG(le.Dh),z.LFG(le.xv,8),z.LFG(z.Lbi),z.LFG(z.R0b),z.LFG(fe.HU),z.LFG(We,8),z.LFG(ie,8),z.LFG(Te,8),z.LFG(Nt,8),z.LFG(At,8),z.LFG(St,8),z.LFG(fe.Rf,8))};static \u0275prov=z.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"any"})}return lt})(),Ye=(()=>{class lt{constructor(){ve.Z.registerVersion("angularfire",fe.q4.full,"auth-compat")}static \u0275fac=function(ue){return new(ue||lt)};static \u0275mod=z.oAB({type:lt});static \u0275inj=z.cJS({providers:[rn]})}return lt})()},7217:(vt,Pe,O)=>{O.d(Pe,{Dh:()=>Oe,GT:()=>ae,cc:()=>je,hO:()=>Ue,on:()=>W,pX:()=>le,xv:()=>De});var y=O(5879),X=O(8326),z=O(7142);const fe=["ngOnDestroy"],le=(Xe,Ct,mt,ge={})=>new Proxy(Xe,{get:(Ve,ve)=>mt.runOutsideAngular(()=>{if(Xe[ve])return ge?.spy?.get&&ge.spy.get(ve,Xe[ve]),Xe[ve];if(fe.indexOf(ve)>-1)return()=>{};const He=Ct.toPromise().then(We=>{const ie=We?.[ve];return"function"==typeof ie?ie.bind(We):ie?.then?ie.then(Te=>mt.run(()=>Te)):mt.run(()=>ie)});return new Proxy(()=>{},{get:(We,ie)=>He[ie],apply:(We,ie,Te)=>He.then(Nt=>{const At=Nt?.(...Te);return ge?.spy?.apply&&ge.spy.apply(ve,Te,At),At})})})}),ae=(Xe,Ct)=>{Ct.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(ge=>{Object.defineProperty(Xe.prototype,ge,Object.getOwnPropertyDescriptor(mt.prototype||mt,ge))})})};class pe{constructor(Ct){return Ct}}const Oe=new y.OlP("angularfire2.app.options"),De=new y.OlP("angularfire2.app.name");function W(Xe,Ct,mt){const Ve="object"==typeof mt&&mt||{};Ve.name=Ve.name||"string"==typeof mt&&mt||"[DEFAULT]";const He=z.Z.apps.filter(We=>We&&We.name===Ve.name)[0]||Ct.runOutsideAngular(()=>z.Z.initializeApp(Xe,Ve));try{if(JSON.stringify(Xe)!==JSON.stringify(He.options)){const We=!!module.hot;J("error",`${He.name} Firebase App already initialized with different options${We?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pe(He)}const J=(Xe,...Ct)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Xe](...Ct)},he={provide:pe,useFactory:W,deps:[Oe,y.R0b,[new y.FiY,De]]};let Ue=(()=>{class Xe{static initializeApp(mt,ge){return{ngModule:Xe,providers:[{provide:Oe,useValue:mt},{provide:De,useValue:ge}]}}constructor(mt){z.Z.registerVersion("angularfire",X.q4.full,"core"),z.Z.registerVersion("angularfire",X.q4.full,"app-compat"),z.Z.registerVersion("angular",y.q4F.full,mt.toString())}static \u0275fac=function(ge){return new(ge||Xe)(y.LFG(y.Lbi))};static \u0275mod=y.oAB({type:Xe});static \u0275inj=y.cJS({providers:[he]})}return Xe})();function je(Xe,Ct,mt,ge,Ve){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===Xe)||[];if(ve)return function tt(Xe,Ct){try{return Xe.toString()===Ct.toString()}catch{return Xe===Ct}}(Ve,He)||(ot("error",`${Ct} was already initialized on the ${mt} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ot("warn",{is:Ve,was:He})),ve;{const We=ge();return globalThis.\u0275AngularfireInstanceCache.push([Xe,We,Ve]),We}}const qe=typeof module<"u"&&!!module.hot,ot=(Xe,...Ct)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Xe](...Ct)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(vt,Pe,O)=>{O.d(Pe,{q4:()=>tt,iC:()=>St,HU:()=>He,Rf:()=>Ct});var y=O(5879),X=O(534);(0,X.registerVersion)("firebase","10.8.0","app");var le=O(1954),pe=O(2631);const De=new class Oe extends pe.v{}(class ae extends le.o{constructor(Be,ne){super(Be,ne),this.scheduler=Be,this.work=ne}schedule(Be,ne=0){return ne>0?super.schedule(Be,ne):(this.delay=ne,this.state=Be,this.scheduler.flush(this),this)}execute(Be,ne){return ne>0||this.closed?super.execute(Be,ne):this._execute(Be,ne)}requestAsyncId(Be,ne,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId(Be,ne,ue):(Be.flush(this),0)}});var J=O(6321),he=O(9397),Ue=O(5137),je=O(3093);const tt=new y.GfV("ANGULARFIRE2_VERSION");class Ct{constructor(){return((lt,Be)=>{const ne=(0,X.getApps)(),ue=[];return ne.forEach(Ae=>{Ae.container.getProvider(lt).instances.forEach(Se=>{ue.includes(Se)||ue.push(Se)})}),ue})(mt)}}const mt="app-check";function ge(){}class Ve{zone;delegate;constructor(Be,ne=De){this.zone=Be,this.delegate=ne}now(){return this.delegate.now()}schedule(Be,ne,ue){const Ae=this.zone;return this.delegate.schedule(function(Se){Ae.runGuarded(()=>{Be.apply(this,[Se])})},ne,ue)}}class ve{zone;task=null;constructor(Be){this.zone=Be}call(Be,ne){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ge,{},ge,ge)),ne.pipe((0,he.b)({next:ue,complete:ue,error:ue})).subscribe(Be).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let He=(()=>{class lt{ngZone;outsideAngular;insideAngular;constructor(ne){this.ngZone=ne,this.outsideAngular=ne.runOutsideAngular(()=>new Ve(Zone.current)),this.insideAngular=ne.run(()=>new Ve(Zone.current,J.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(ue){return new(ue||lt)(y.LFG(y.R0b))};static \u0275prov=y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"})}return lt})();function St(lt){return function Yt(lt){return function(ne){return(ne=ne.lift(new ve(lt.ngZone))).pipe((0,Ue.R)(lt.outsideAngular),(0,je.Q)(lt.insideAngular))}}(function We(){const lt=globalThis.\u0275AngularFireScheduler;if(!lt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return lt}())(lt)}},6593:(vt,Pe,O)=>{O.d(Pe,{Dx:()=>oi,b2:()=>it,q6:()=>Wt});var y=O(5879),X=O(6814);class z extends X.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends z{static makeCurrent(){(0,X.HT)(new fe)}onAndCancel($,B,H){return $.addEventListener(B,H),()=>{$.removeEventListener(B,H)}}dispatchEvent($,B){$.dispatchEvent(B)}remove($){$.parentNode&&$.parentNode.removeChild($)}createElement($,B){return(B=B||this.getDefaultDocument()).createElement($)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode($){return $.nodeType===Node.ELEMENT_NODE}isShadowRoot($){return $ instanceof DocumentFragment}getGlobalEventTarget($,B){return"window"===B?window:"document"===B?$:"body"===B?$.body:null}getBaseHref($){const B=function ae(){return le=le||document.querySelector("base"),le?le.getAttribute("href"):null}();return null==B?null:function Oe(j){pe=pe||document.createElement("a"),pe.setAttribute("href",j);const $=pe.pathname;return"/"===$.charAt(0)?$:`/${$}`}(B)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie($){return(0,X.Mx)(document.cookie,$)}}let pe,le=null,W=(()=>{class j{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(H){return new(H||j)};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const J=new y.OlP("EventManagerPlugins");let he=(()=>{class j{constructor(B,H){this._zone=H,this._eventNameToPlugin=new Map,B.forEach(me=>{me.manager=this}),this._plugins=B.slice().reverse()}addEventListener(B,H,me){return this._findPluginFor(H).addEventListener(B,H,me)}getZone(){return this._zone}_findPluginFor(B){let H=this._eventNameToPlugin.get(B);if(H)return H;if(H=this._plugins.find($e=>$e.supports(B)),!H)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(B,H),H}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(J),y.LFG(y.R0b))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();class Ue{constructor($){this._doc=$}}const je="ng-app-id";let tt=(()=>{class j{constructor(B,H,me,$e={}){this.doc=B,this.appId=H,this.nonce=me,this.platformId=$e,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,X.PM)($e),this.resetHostNodes()}addStyles(B){for(const H of B)1===this.changeUsageCount(H,1)&&this.onStyleAdded(H)}removeStyles(B){for(const H of B)this.changeUsageCount(H,-1)<=0&&this.onStyleRemoved(H)}ngOnDestroy(){const B=this.styleNodesInDOM;B&&(B.forEach(H=>H.remove()),B.clear());for(const H of this.getAllStyles())this.onStyleRemoved(H);this.resetHostNodes()}addHost(B){this.hostNodes.add(B);for(const H of this.getAllStyles())this.addStyleToHost(B,H)}removeHost(B){this.hostNodes.delete(B)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(B){for(const H of this.hostNodes)this.addStyleToHost(H,B)}onStyleRemoved(B){const H=this.styleRef;H.get(B)?.elements?.forEach(me=>me.remove()),H.delete(B)}collectServerRenderedStyles(){const B=this.doc.head?.querySelectorAll(`style[${je}="${this.appId}"]`);if(B?.length){const H=new Map;return B.forEach(me=>{null!=me.textContent&&H.set(me.textContent,me)}),H}return null}changeUsageCount(B,H){const me=this.styleRef;if(me.has(B)){const $e=me.get(B);return $e.usage+=H,$e.usage}return me.set(B,{usage:H,elements:[]}),H}getStyleElement(B,H){const me=this.styleNodesInDOM,$e=me?.get(H);if($e?.parentNode===B)return me.delete(H),$e.removeAttribute(je),$e;{const st=this.doc.createElement("style");return this.nonce&&st.setAttribute("nonce",this.nonce),st.textContent=H,this.platformIsServer&&st.setAttribute(je,this.appId),st}}addStyleToHost(B,H){const me=this.getStyleElement(B,H);B.appendChild(me);const $e=this.styleRef,st=$e.get(H)?.elements;st?st.push(me):$e.set(H,{elements:[me],usage:1})}resetHostNodes(){const B=this.hostNodes;B.clear(),B.add(this.doc.head)}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(X.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const qe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ot=/%COMP%/g,Ve=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function We(j,$){return $.map(B=>B.replace(ot,j))}let ie=(()=>{class j{constructor(B,H,me,$e,st,Ot,Ut,bt=null){this.eventManager=B,this.sharedStylesHost=H,this.appId=me,this.removeStylesOnCompDestroy=$e,this.doc=st,this.platformId=Ot,this.ngZone=Ut,this.nonce=bt,this.rendererByCompId=new Map,this.platformIsServer=(0,X.PM)(Ot),this.defaultRenderer=new Te(B,st,Ut,this.platformIsServer)}createRenderer(B,H){if(!B||!H)return this.defaultRenderer;this.platformIsServer&&H.encapsulation===y.ifc.ShadowDom&&(H={...H,encapsulation:y.ifc.Emulated});const me=this.getOrCreateRenderer(B,H);return me instanceof Ye?me.applyToHost(B):me instanceof rn&&me.applyStyles(),me}getOrCreateRenderer(B,H){const me=this.rendererByCompId;let $e=me.get(H.id);if(!$e){const st=this.doc,Ot=this.ngZone,Ut=this.eventManager,bt=this.sharedStylesHost,Bt=this.removeStylesOnCompDestroy,Yn=this.platformIsServer;switch(H.encapsulation){case y.ifc.Emulated:$e=new Ye(Ut,bt,H,this.appId,Bt,st,Ot,Yn);break;case y.ifc.ShadowDom:return new Yt(Ut,bt,B,H,st,Ot,this.nonce,Yn);default:$e=new rn(Ut,bt,H,Bt,st,Ot,Yn)}me.set(H.id,$e)}return $e}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(he),y.LFG(tt),y.LFG(y.AFp),y.LFG(Ve),y.LFG(X.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();class Te{constructor($,B,H,me){this.eventManager=$,this.doc=B,this.ngZone=H,this.platformIsServer=me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement($,B){return B?this.doc.createElementNS(qe[B]||B,$):this.doc.createElement($)}createComment($){return this.doc.createComment($)}createText($){return this.doc.createTextNode($)}appendChild($,B){(St($)?$.content:$).appendChild(B)}insertBefore($,B,H){$&&(St($)?$.content:$).insertBefore(B,H)}removeChild($,B){$&&$.removeChild(B)}selectRootElement($,B){let H="string"==typeof $?this.doc.querySelector($):$;if(!H)throw new y.vHH(-5104,!1);return B||(H.textContent=""),H}parentNode($){return $.parentNode}nextSibling($){return $.nextSibling}setAttribute($,B,H,me){if(me){B=me+":"+B;const $e=qe[me];$e?$.setAttributeNS($e,B,H):$.setAttribute(B,H)}else $.setAttribute(B,H)}removeAttribute($,B,H){if(H){const me=qe[H];me?$.removeAttributeNS(me,B):$.removeAttribute(`${H}:${B}`)}else $.removeAttribute(B)}addClass($,B){$.classList.add(B)}removeClass($,B){$.classList.remove(B)}setStyle($,B,H,me){me&(y.JOm.DashCase|y.JOm.Important)?$.style.setProperty(B,H,me&y.JOm.Important?"important":""):$.style[B]=H}removeStyle($,B,H){H&y.JOm.DashCase?$.style.removeProperty(B):$.style[B]=""}setProperty($,B,H){$[B]=H}setValue($,B){$.nodeValue=B}listen($,B,H){if("string"==typeof $&&!($=(0,X.q)().getGlobalEventTarget(this.doc,$)))throw new Error(`Unsupported event target ${$} for event ${B}`);return this.eventManager.addEventListener($,B,this.decoratePreventDefault(H))}decoratePreventDefault($){return B=>{if("__ngUnwrap__"===B)return $;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>$(B)):$(B))&&B.preventDefault()}}}function St(j){return"TEMPLATE"===j.tagName&&void 0!==j.content}class Yt extends Te{constructor($,B,H,me,$e,st,Ot,Ut){super($,$e,st,Ut),this.sharedStylesHost=B,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const bt=We(me.id,me.styles);for(const Bt of bt){const Yn=document.createElement("style");Ot&&Yn.setAttribute("nonce",Ot),Yn.textContent=Bt,this.shadowRoot.appendChild(Yn)}}nodeOrShadowRoot($){return $===this.hostEl?this.shadowRoot:$}appendChild($,B){return super.appendChild(this.nodeOrShadowRoot($),B)}insertBefore($,B,H){return super.insertBefore(this.nodeOrShadowRoot($),B,H)}removeChild($,B){return super.removeChild(this.nodeOrShadowRoot($),B)}parentNode($){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot($)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rn extends Te{constructor($,B,H,me,$e,st,Ot,Ut){super($,$e,st,Ot),this.sharedStylesHost=B,this.removeStylesOnCompDestroy=me,this.styles=Ut?We(Ut,H.styles):H.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ye extends rn{constructor($,B,H,me,$e,st,Ot,Ut){const bt=me+"-"+H.id;super($,B,H,$e,st,Ot,Ut,bt),this.contentAttr=function ve(j){return"_ngcontent-%COMP%".replace(ot,j)}(bt),this.hostAttr=function He(j){return"_nghost-%COMP%".replace(ot,j)}(bt)}applyToHost($){this.applyStyles(),this.setAttribute($,this.hostAttr,"")}createElement($,B){const H=super.createElement($,B);return super.setAttribute(H,this.contentAttr,""),H}}let lt=(()=>{class j extends Ue{constructor(B){super(B)}supports(B){return!0}addEventListener(B,H,me){return B.addEventListener(H,me,!1),()=>this.removeEventListener(B,H,me)}removeEventListener(B,H,me){return B.removeEventListener(H,me)}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(X.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const Be=["alt","control","meta","shift"],ne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ue={alt:j=>j.altKey,control:j=>j.ctrlKey,meta:j=>j.metaKey,shift:j=>j.shiftKey};let Ae=(()=>{class j extends Ue{constructor(B){super(B)}supports(B){return null!=j.parseEventName(B)}addEventListener(B,H,me){const $e=j.parseEventName(H),st=j.eventCallback($e.fullKey,me,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,X.q)().onAndCancel(B,$e.domEventName,st))}static parseEventName(B){const H=B.toLowerCase().split("."),me=H.shift();if(0===H.length||"keydown"!==me&&"keyup"!==me)return null;const $e=j._normalizeKey(H.pop());let st="",Ot=H.indexOf("code");if(Ot>-1&&(H.splice(Ot,1),st="code."),Be.forEach(bt=>{const Bt=H.indexOf(bt);Bt>-1&&(H.splice(Bt,1),st+=bt+".")}),st+=$e,0!=H.length||0===$e.length)return null;const Ut={};return Ut.domEventName=me,Ut.fullKey=st,Ut}static matchEventFullKeyCode(B,H){let me=ne[B.key]||B.key,$e="";return H.indexOf("code.")>-1&&(me=B.code,$e="code."),!(null==me||!me)&&(me=me.toLowerCase()," "===me?me="space":"."===me&&(me="dot"),Be.forEach(st=>{st!==me&&(0,ue[st])(B)&&($e+=st+".")}),$e+=me,$e===H)}static eventCallback(B,H,me){return $e=>{j.matchEventFullKeyCode($e,B)&&me.runGuarded(()=>H($e))}}static _normalizeKey(B){return"esc"===B?"escape":B}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(X.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:j.\u0275fac})}return j})();const Wt=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:X.bD},{provide:y.g9A,useValue:function Je(){fe.makeCurrent()},multi:!0},{provide:X.K0,useFactory:function dt(){return(0,y.RDi)(document),document},deps:[]}]),mn=new y.OlP(""),fn=[{provide:y.rWj,useClass:class De{addToWindow($){y.dqk.getAngularTestability=(H,me=!0)=>{const $e=$.findTestabilityInTree(H,me);if(null==$e)throw new y.vHH(5103,!1);return $e},y.dqk.getAllAngularTestabilities=()=>$.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>$.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(H=>{const me=y.dqk.getAllAngularTestabilities();let $e=me.length,st=!1;const Ot=function(Ut){st=st||Ut,$e--,0==$e&&H(st)};me.forEach(Ut=>{Ut.whenStable(Ot)})})}findTestabilityInTree($,B,H){return null==B?null:$.getTestability(B)??(H?(0,X.q)().isShadowRoot(B)?this.findTestabilityInTree($,B.host,!0):this.findTestabilityInTree($,B.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],_n=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Cn(){return new y.qLn},deps:[]},{provide:J,useClass:lt,multi:!0,deps:[X.K0,y.R0b,y.Lbi]},{provide:J,useClass:Ae,multi:!0,deps:[X.K0]},ie,tt,he,{provide:y.FYo,useExisting:ie},{provide:X.JF,useClass:W,deps:[]},[]];let it=(()=>{class j{constructor(B){}static withServerTransition(B){return{ngModule:j,providers:[{provide:y.AFp,useValue:B.appId}]}}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(mn,12))};static#t=this.\u0275mod=y.oAB({type:j});static#n=this.\u0275inj=y.cJS({providers:[..._n,...fn],imports:[X.ez,y.hGG]})}return j})(),oi=(()=>{class j{constructor(B){this._doc=B}getTitle(){return this._doc.title}setTitle(B){this._doc.title=B||""}static#e=this.\u0275fac=function(H){return new(H||j)(y.LFG(X.K0))};static#t=this.\u0275prov=y.Yz7({token:j,factory:function(H){let me=null;return me=H?new H:function Pn(){return new oi((0,y.LFG)(X.K0))}(),me},providedIn:"root"})}return j})();typeof window<"u"&&window},7045:(vt,Pe,O)=>{O.d(Pe,{Bz:()=>va,lC:()=>qt});var y=O(5879),X=O(5592),z=O(4674),le=O(2459),ae=O(2096),pe=O(5619),Oe=O(7453),De=O(2737),W=O(7400),J=O(4564),he=O(2714),Ue=O(8251),je=O(7103);function tt(...I){const D=(0,J.yG)(I),v=(0,J.jO)(I),{args:A,keys:R}=(0,Oe.D)(I);if(0===A.length)return(0,le.D)([],D);const U=new X.y(function qe(I,D,v=De.y){return A=>{ot(D,()=>{const{length:R}=I,U=new Array(R);let Y=R,xe=R;for(let Ce=0;Ce<R;Ce++)ot(D,()=>{const ft=(0,le.D)(I[Ce],D);let se=!1;ft.subscribe((0,Ue.x)(A,qn=>{U[Ce]=qn,se||(se=!0,xe--),xe||A.next(v(U.slice()))},()=>{--Y||A.complete()}))},A)},A)}}(A,D,R?Y=>(0,he.n)(R,Y):De.y));return v?U.pipe((0,W.Z)(v)):U}function ot(I,D,v){I?(0,je.f)(v,I,D):D()}var Xe=O(6973),Ct=O(5211),mt=O(4829);function ge(I){return new X.y(D=>{(0,mt.Xf)(I()).subscribe(D)})}var Ve=O(8407);function ve(I,D){const v=(0,z.m)(I)?I:()=>I,A=R=>R.error(v());return new X.y(D?R=>D.schedule(A,0,R):A)}var He=O(6232),We=O(7394),ie=O(9360);function Te(){return(0,ie.e)((I,D)=>{let v=null;I._refCount++;const A=(0,Ue.x)(D,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(v=null);const R=I._connection,U=v;v=null,R&&(!U||R===U)&&R.unsubscribe(),D.unsubscribe()});I.subscribe(A),A.closed||(v=I.connect())})}class Nt extends X.y{constructor(D,v){super(),this.source=D,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,ie.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new We.w0;const v=this.getSubject();D.add(this.source.subscribe((0,Ue.x)(v,void 0,()=>{this._teardown(),v.complete()},A=>{this._teardown(),v.error(A)},()=>this._teardown()))),D.closed&&(this._connection=null,D=We.w0.EMPTY)}return D}refCount(){return Te()(this)}}var At=O(8645),St=O(6814),Yt=O(7398),rn=O(4664),Ye=O(8180),lt=O(7921),Be=O(2181),ne=O(1631),ue=O(1374),Ae=O(6328),Ee=O(9397);function Se(I){return(0,ie.e)((D,v)=>{let U,A=null,R=!1;A=D.subscribe((0,Ue.x)(v,void 0,void 0,Y=>{U=(0,mt.Xf)(I(Y,Se(I)(D))),A?(A.unsubscribe(),A=null,U.subscribe(v)):R=!0})),R&&(A.unsubscribe(),A=null,U.subscribe(v))})}var Fe=O(6699),ut=O(3572);function Je(I){return I<=0?()=>He.E:(0,ie.e)((D,v)=>{let A=[];D.subscribe((0,Ue.x)(v,R=>{A.push(R),I<A.length&&A.shift()},()=>{for(const R of A)v.next(R);v.complete()},void 0,()=>{A=null}))})}var Cn=O(3026),Wt=O(4716),mn=O(9773),fn=O(7537),_n=O(6593);const it="primary",zn=Symbol("RouteTitle");class dn{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v[0]:v}return null}getAll(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Vn(I){return new dn(I)}function Pn(I,D,v){const A=v.path.split("/");if(A.length>I.length||"full"===v.pathMatch&&(D.hasChildren()||A.length<I.length))return null;const R={};for(let U=0;U<A.length;U++){const Y=A[U],xe=I[U];if(Y.startsWith(":"))R[Y.substring(1)]=xe;else if(Y!==xe.path)return null}return{consumed:I.slice(0,A.length),posParams:R}}function Xn(I,D){const v=I?Object.keys(I):void 0,A=D?Object.keys(D):void 0;if(!v||!A||v.length!=A.length)return!1;let R;for(let U=0;U<v.length;U++)if(R=v[U],!Br(I[R],D[R]))return!1;return!0}function Br(I,D){if(Array.isArray(I)&&Array.isArray(D)){if(I.length!==D.length)return!1;const v=[...I].sort(),A=[...D].sort();return v.every((R,U)=>A[U]===R)}return I===D}function Rt(I){return I.length>0?I[I.length-1]:null}function zt(I){return function fe(I){return!!I&&(I instanceof X.y||(0,z.m)(I.lift)&&(0,z.m)(I.subscribe))}(I)?I:(0,y.QGY)(I)?(0,le.D)(Promise.resolve(I)):(0,ae.of)(I)}const Vt={exact:function pn(I,D,v){if(!gr(I.segments,D.segments)||!jr(I.segments,D.segments,v)||I.numberOfChildren!==D.numberOfChildren)return!1;for(const A in D.children)if(!I.children[A]||!pn(I.children[A],D.children[A],v))return!1;return!0},subset:Ni},Un={exact:function Sr(I,D){return Xn(I,D)},subset:function Qn(I,D){return Object.keys(D).length<=Object.keys(I).length&&Object.keys(D).every(v=>Br(I[v],D[v]))},ignored:()=>!0};function Kr(I,D,v){return Vt[v.paths](I.root,D.root,v.matrixParams)&&Un[v.queryParams](I.queryParams,D.queryParams)&&!("exact"===v.fragment&&I.fragment!==D.fragment)}function Ni(I,D,v){return wt(I,D,D.segments,v)}function wt(I,D,v,A){if(I.segments.length>v.length){const R=I.segments.slice(0,v.length);return!(!gr(R,v)||D.hasChildren()||!jr(R,v,A))}if(I.segments.length===v.length){if(!gr(I.segments,v)||!jr(I.segments,v,A))return!1;for(const R in D.children)if(!I.children[R]||!Ni(I.children[R],D.children[R],A))return!1;return!0}{const R=v.slice(0,I.segments.length),U=v.slice(I.segments.length);return!!(gr(I.segments,R)&&jr(I.segments,R,A)&&I.children[it])&&wt(I.children[it],D,U,A)}}function jr(I,D,v){return D.every((A,R)=>Un[v](I[R].parameters,A.parameters))}class Gt{constructor(D=new Zt([],{}),v={},A=null){this.root=D,this.queryParams=v,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return pi.serialize(this)}}class Zt{constructor(D,v){this.segments=D,this.children=v,this.parent=null,Object.values(v).forEach(A=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gi(this)}}class ar{constructor(D,v){this.path=D,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Vn(this.parameters)),this._parameterMap}toString(){return H(this)}}function gr(I,D){return I.length===D.length&&I.every((v,A)=>v.path===D[A].path)}let er=(()=>{class I{static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:function(){return new Nr},providedIn:"root"})}return I})();class Nr{parse(D){const v=new ce(D);return new Gt(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(D){const v=`/${Qr(D.root,!0)}`,A=function $e(I){const D=Object.keys(I).map(v=>{const A=I[v];return Array.isArray(A)?A.map(R=>`${mi(v)}=${mi(R)}`).join("&"):`${mi(v)}=${mi(A)}`}).filter(v=>!!v);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${v}${A}${"string"==typeof D.fragment?`#${function re(I){return encodeURI(I)}(D.fragment)}`:""}`}}const pi=new Nr;function gi(I){return I.segments.map(D=>H(D)).join("/")}function Qr(I,D){if(!I.hasChildren())return gi(I);if(D){const v=I.children[it]?Qr(I.children[it],!1):"",A=[];return Object.entries(I.children).forEach(([R,U])=>{R!==it&&A.push(`${R}:${Qr(U,!1)}`)}),A.length>0?`${v}(${A.join("//")})`:v}{const v=function Zr(I,D){let v=[];return Object.entries(I.children).forEach(([A,R])=>{A===it&&(v=v.concat(D(R,A)))}),Object.entries(I.children).forEach(([A,R])=>{A!==it&&(v=v.concat(D(R,A)))}),v}(I,(A,R)=>R===it?[Qr(I.children[it],!1)]:[`${R}:${Qr(A,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[it]?`${gi(I)}/${v[0]}`:`${gi(I)}/(${v.join("//")})`}}function Oi(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mi(I){return Oi(I).replace(/%3B/gi,";")}function j(I){return Oi(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $(I){return decodeURIComponent(I)}function B(I){return $(I.replace(/\+/g,"%20"))}function H(I){return`${j(I.path)}${function me(I){return Object.keys(I).map(D=>`;${j(D)}=${j(I[D])}`).join("")}(I.parameters)}`}const st=/^[^\/()?;#]+/;function Ot(I){const D=I.match(st);return D?D[0]:""}const Ut=/^[^\/()?;=#]+/,Bt=/^[^=?&#]+/,ye=/^[^&#]+/;class ce{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(D.length>0||Object.keys(v).length>0)&&(A[it]=new Zt(D,v)),A}parseSegment(){const D=Ot(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(D),new ar($(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const v=function bt(I){const D=I.match(Ut);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const R=Ot(this.remaining);R&&(A=R,this.capture(A))}D[$(v)]=$(A)}parseQueryParam(D){const v=function Yn(I){const D=I.match(Bt);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let A="";if(this.consumeOptional("=")){const Y=function te(I){const D=I.match(ye);return D?D[0]:""}(this.remaining);Y&&(A=Y,this.capture(A))}const R=B(v),U=B(A);if(D.hasOwnProperty(R)){let Y=D[R];Array.isArray(Y)||(Y=[Y],D[R]=Y),Y.push(U)}else D[R]=U}parseParens(D){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=Ot(this.remaining),R=this.remaining[A.length];if("/"!==R&&")"!==R&&";"!==R)throw new y.vHH(4010,!1);let U;A.indexOf(":")>-1?(U=A.slice(0,A.indexOf(":")),this.capture(U),this.capture(":")):D&&(U=it);const Y=this.parseChildren();v[U]=1===Object.keys(Y).length?Y[it]:new Zt([],Y),this.consumeOptional("//")}return v}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new y.vHH(4011,!1)}}function Q(I){return I.segments.length>0?new Zt([],{[it]:I}):I}function K(I){const D={};for(const A of Object.keys(I.children)){const U=K(I.children[A]);if(A===it&&0===U.segments.length&&U.hasChildren())for(const[Y,xe]of Object.entries(U.children))D[Y]=xe;else(U.segments.length>0||U.hasChildren())&&(D[A]=U)}return function _e(I){if(1===I.numberOfChildren&&I.children[it]){const D=I.children[it];return new Zt(I.segments.concat(D.segments),D.children)}return I}(new Zt(I.segments,D))}function Re(I){return I instanceof Gt}function Ze(I){let D;const R=Q(function v(U){const Y={};for(const Ce of U.children){const ft=v(Ce);Y[Ce.outlet]=ft}const xe=new Zt(U.url,Y);return U===I&&(D=xe),xe}(I.root));return D??R}function jt(I,D,v,A){let R=I;for(;R.parent;)R=R.parent;if(0===D.length)return tr(R,R,R,v,A);const U=function Mn(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Or(!0,0,I);let D=0,v=!1;const A=I.reduce((R,U,Y)=>{if("object"==typeof U&&null!=U){if(U.outlets){const xe={};return Object.entries(U.outlets).forEach(([Ce,ft])=>{xe[Ce]="string"==typeof ft?ft.split("/"):ft}),[...R,{outlets:xe}]}if(U.segmentPath)return[...R,U.segmentPath]}return"string"!=typeof U?[...R,U]:0===Y?(U.split("/").forEach((xe,Ce)=>{0==Ce&&"."===xe||(0==Ce&&""===xe?v=!0:".."===xe?D++:""!=xe&&R.push(xe))}),R):[...R,U]},[]);return new Or(v,D,A)}(D);if(U.toRoot())return tr(R,R,new Zt([],{}),v,A);const Y=function ki(I,D,v){if(I.isAbsolute)return new xn(D,!0,0);if(!v)return new xn(D,!1,NaN);if(null===v.parent)return new xn(v,!0,0);const A=wn(I.commands[0])?0:1;return function Gs(I,D,v){let A=I,R=D,U=v;for(;U>R;){if(U-=R,A=A.parent,!A)throw new y.vHH(4005,!1);R=A.segments.length}return new xn(A,!1,R-U)}(v,v.segments.length-1+A,I.numberOfDoubleDots)}(U,R,I),xe=Y.processChildren?Ci(Y.segmentGroup,Y.index,U.commands):hn(Y.segmentGroup,Y.index,U.commands);return tr(R,Y.segmentGroup,xe,v,A)}function wn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function en(I){return"object"==typeof I&&null!=I&&I.outlets}function tr(I,D,v,A,R){let Y,U={};A&&Object.entries(A).forEach(([Ce,ft])=>{U[Ce]=Array.isArray(ft)?ft.map(se=>`${se}`):`${ft}`}),Y=I===D?v:br(I,D,v);const xe=Q(K(Y));return new Gt(xe,U,R)}function br(I,D,v){const A={};return Object.entries(I.children).forEach(([R,U])=>{A[R]=U===D?v:br(U,D,v)}),new Zt(I.segments,A)}class Or{constructor(D,v,A){if(this.isAbsolute=D,this.numberOfDoubleDots=v,this.commands=A,D&&A.length>0&&wn(A[0]))throw new y.vHH(4003,!1);const R=A.find(en);if(R&&R!==Rt(A))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xn{constructor(D,v,A){this.segmentGroup=D,this.processChildren=v,this.index=A}}function hn(I,D,v){if(I||(I=new Zt([],{})),0===I.segments.length&&I.hasChildren())return Ci(I,D,v);const A=function Ji(I,D,v){let A=0,R=D;const U={match:!1,pathIndex:0,commandIndex:0};for(;R<I.segments.length;){if(A>=v.length)return U;const Y=I.segments[R],xe=v[A];if(en(xe))break;const Ce=`${xe}`,ft=A<v.length-1?v[A+1]:null;if(R>0&&void 0===Ce)break;if(Ce&&ft&&"object"==typeof ft&&void 0===ft.outlets){if(!Bo(Ce,ft,Y))return U;A+=2}else{if(!Bo(Ce,{},Y))return U;A++}R++}return{match:!0,pathIndex:R,commandIndex:A}}(I,D,v),R=v.slice(A.commandIndex);if(A.match&&A.pathIndex<I.segments.length){const U=new Zt(I.segments.slice(0,A.pathIndex),{});return U.children[it]=new Zt(I.segments.slice(A.pathIndex),I.children),Ci(U,0,R)}return A.match&&0===R.length?new Zt(I.segments,{}):A.match&&!I.hasChildren()?Uo(I,D,v):A.match?Ci(I,0,R):Uo(I,D,v)}function Ci(I,D,v){if(0===v.length)return new Zt(I.segments,{});{const A=function mr(I){return en(I[0])?I[0].outlets:{[it]:I}}(v),R={};if(Object.keys(A).some(U=>U!==it)&&I.children[it]&&1===I.numberOfChildren&&0===I.children[it].segments.length){const U=Ci(I.children[it],D,v);return new Zt(I.segments,U.children)}return Object.entries(A).forEach(([U,Y])=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(R[U]=hn(I.children[U],D,Y))}),Object.entries(I.children).forEach(([U,Y])=>{void 0===A[U]&&(R[U]=Y)}),new Zt(I.segments,R)}}function Uo(I,D,v){const A=I.segments.slice(0,D);let R=0;for(;R<v.length;){const U=v[R];if(en(U)){const Ce=_s(U.outlets);return new Zt(A,Ce)}if(0===R&&wn(v[0])){A.push(new ar(I.segments[D].path,aa(v[0]))),R++;continue}const Y=en(U)?U.outlets[it]:`${U}`,xe=R<v.length-1?v[R+1]:null;Y&&xe&&wn(xe)?(A.push(new ar(Y,aa(xe))),R+=2):(A.push(new ar(Y,{})),R++)}return new Zt(A,{})}function _s(I){const D={};return Object.entries(I).forEach(([v,A])=>{"string"==typeof A&&(A=[A]),null!==A&&(D[v]=Uo(new Zt([],{}),0,A))}),D}function aa(I){const D={};return Object.entries(I).forEach(([v,A])=>D[v]=`${A}`),D}function Bo(I,D,v){return I==v.path&&Xn(D,v.parameters)}const kr="imperative";class _i{constructor(D,v){this.id=D,this.url=v}}class jo extends _i{constructor(D,v,A="imperative",R=null){super(D,v),this.type=0,this.navigationTrigger=A,this.restoredState=R}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ws extends _i{constructor(D,v,A){super(D,v),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Li extends _i{constructor(D,v,A,R){super(D,v),this.reason=A,this.code=R,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yo extends _i{constructor(D,v,A,R){super(D,v),this.reason=A,this.code=R,this.type=16}}class $o extends _i{constructor(D,v,A,R){super(D,v),this.error=A,this.target=R,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fi extends _i{constructor(D,v,A,R){super(D,v),this.urlAfterRedirects=A,this.state=R,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ja extends _i{constructor(D,v,A,R){super(D,v),this.urlAfterRedirects=A,this.state=R,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yi extends _i{constructor(D,v,A,R,U){super(D,v),this.urlAfterRedirects=A,this.state=R,this.shouldActivate=U,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ua extends _i{constructor(D,v,A,R){super(D,v),this.urlAfterRedirects=A,this.state=R,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vo extends _i{constructor(D,v,A,R){super(D,v),this.urlAfterRedirects=A,this.state=R,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nu{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Yr{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ca{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qs{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(D,v,A){this.routerEvent=D,this.position=v,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Eo{}class an{constructor(D){this.url=D}}class Rr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vi,this.attachRef=null}}let Vi=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,A){const R=this.getOrCreateContext(v);R.outlet=A,this.contexts.set(v,R)}onChildOutletDestroyed(v){const A=this.getContext(v);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let A=this.getContext(v);return A||(A=new Rr,this.contexts.set(v,A)),A}getContext(v){return this.contexts.get(v)||null}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();class Lr{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const v=this.pathFromRoot(D);return v.length>1?v[v.length-2]:null}children(D){const v=Ks(D,this._root);return v?v.children.map(A=>A.value):[]}firstChild(D){const v=Ks(D,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(D){const v=es(D,this._root);return v.length<2?[]:v[v.length-2].children.map(R=>R.value).filter(R=>R!==D)}pathFromRoot(D){return es(D,this._root).map(v=>v.value)}}function Ks(I,D){if(I===D.value)return D;for(const v of D.children){const A=Ks(I,v);if(A)return A}return null}function es(I,D){if(I===D.value)return[D];for(const v of D.children){const A=es(I,v);if(A.length)return A.unshift(D),A}return[]}class Ai{constructor(D,v){this.value=D,this.children=v}toString(){return`TreeNode(${this.value})`}}function Ms(I){const D={};return I&&I.children.forEach(v=>D[v.value.outlet]=v),D}class Zs extends Lr{constructor(D,v){super(D),this.snapshot=v,ys(this,D)}toString(){return this.snapshot.toString()}}function Gn(I,D){const v=function yt(I,D){const Y=new Qs([],{},{},"",{},it,D,null,{});return new dr("",new Ai(Y,[]))}(0,D),A=new pe.X([new ar("",{})]),R=new pe.X({}),U=new pe.X({}),Y=new pe.X({}),xe=new pe.X(""),Ce=new $t(A,R,Y,xe,U,it,D,v.root);return Ce.snapshot=v.root,new Zs(new Ai(Ce,[]),v)}class $t{constructor(D,v,A,R,U,Y,xe,Ce){this.urlSubject=D,this.paramsSubject=v,this.queryParamsSubject=A,this.fragmentSubject=R,this.dataSubject=U,this.outlet=Y,this.component=xe,this._futureSnapshot=Ce,this.title=this.dataSubject?.pipe((0,Yt.U)(ft=>ft[zn]))??(0,ae.of)(void 0),this.url=D,this.params=v,this.queryParams=A,this.fragment=R,this.data=U}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Yt.U)(D=>Vn(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Yt.U)(D=>Vn(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bn(I,D="emptyOnly"){const v=I.pathFromRoot;let A=0;if("always"!==D)for(A=v.length-1;A>=1;){const R=v[A],U=v[A-1];if(R.routeConfig&&""===R.routeConfig.path)A--;else{if(U.component)break;A--}}return function Jr(I){return I.reduce((D,v)=>({params:{...D.params,...v.params},data:{...D.data,...v.data},resolve:{...v.data,...D.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(A))}class Qs{get title(){return this.data?.[zn]}constructor(D,v,A,R,U,Y,xe,Ce,ft){this.url=D,this.params=v,this.queryParams=A,this.fragment=R,this.data=U,this.outlet=Y,this.component=xe,this.routeConfig=Ce,this._resolve=ft}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dr extends Lr{constructor(D,v){super(v),this.url=D,ys(this,v)}toString(){return jn(this._root)}}function ys(I,D){D.value._routerState=I,D.children.forEach(v=>ys(I,v))}function jn(I){const D=I.children.length>0?` { ${I.children.map(jn).join(", ")} } `:"";return`${I.value}${D}`}function vi(I){if(I.snapshot){const D=I.snapshot,v=I._futureSnapshot;I.snapshot=v,Xn(D.queryParams,v.queryParams)||I.queryParamsSubject.next(v.queryParams),D.fragment!==v.fragment&&I.fragmentSubject.next(v.fragment),Xn(D.params,v.params)||I.paramsSubject.next(v.params),function oi(I,D){if(I.length!==D.length)return!1;for(let v=0;v<I.length;++v)if(!Xn(I[v],D[v]))return!1;return!0}(D.url,v.url)||I.urlSubject.next(v.url),Xn(D.data,v.data)||I.dataSubject.next(v.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function Xr(I,D){const v=Xn(I.params,D.params)&&function ms(I,D){return gr(I,D)&&I.every((v,A)=>Xn(v.parameters,D[A].parameters))}(I.url,D.url);return v&&!(!I.parent!=!D.parent)&&(!I.parent||Xr(I.parent,D.parent))}let qt=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=it,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Vi),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(vs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:A,previousValue:R}=v.name;if(A)return;this.isTrackedInParentContexts(R)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(R)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,A){this.activated=v,this._activatedRoute=A,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,A){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=v;const R=this.location,Y=v.snapshot.component,xe=this.parentContexts.getOrCreateContext(this.name).children,Ce=new Io(v,xe,R.injector);this.activated=R.createComponent(Y,{index:R.length,injector:Ce,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275dir=y.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]})}return I})();class Io{constructor(D,v,A){this.route=D,this.childContexts=v,this.parent=A}get(D,v){return D===$t?this.route:D===Vi?this.childContexts:this.parent.get(D,v)}}const vs=new y.OlP("");let ai=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:A}=v,R=tt([A.queryParams,A.params,A.data]).pipe((0,rn.w)(([U,Y,xe],Ce)=>(xe={...U,...Y,...xe},0===Ce?(0,ae.of)(xe):Promise.resolve(xe)))).subscribe(U=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(v);const Y=(0,y.qFp)(A.component);if(Y)for(const{templateName:xe}of Y.inputs)v.activatedComponentRef.setInput(xe,U[xe]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,R)}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac})}return I})();function xs(I,D,v){if(v&&I.shouldReuseRoute(D.value,v.value.snapshot)){const A=v.value;A._futureSnapshot=D.value;const R=function _r(I,D,v){return D.children.map(A=>{for(const R of v.children)if(I.shouldReuseRoute(A.value,R.value.snapshot))return xs(I,A,R);return xs(I,A)})}(I,D,v);return new Ai(A,R)}{if(I.shouldAttach(D.value)){const U=I.retrieve(D.value);if(null!==U){const Y=U.route;return Y.value._futureSnapshot=D.value,Y.children=D.children.map(xe=>xs(I,xe)),Y}}const A=function Fr(I){return new $t(new pe.X(I.url),new pe.X(I.params),new pe.X(I.queryParams),new pe.X(I.fragment),new pe.X(I.data),I.outlet,I.component,I)}(D.value),R=D.children.map(U=>xs(I,U));return new Ai(A,R)}}const Ui="ngNavigationCancelingError";function zo(I,D){const{redirectTo:v,navigationBehaviorOptions:A}=Re(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,R=Bi(!1,0,D);return R.url=v,R.navigationBehaviorOptions=A,R}function Bi(I,D,v){const A=new Error("NavigationCancelingError: "+(I||""));return A[Ui]=!0,A.cancellationCode=D,v&&(A.url=v),A}function Si(I){return I&&I[Ui]}let Es=(()=>{class I{static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275cmp=y.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(A,R){1&A&&y._UZ(0,"router-outlet")},dependencies:[qt],encapsulation:2})}return I})();function Js(I){const D=I.children&&I.children.map(Js),v=D?{...I,children:D}:{...I};return!v.component&&!v.loadComponent&&(D||v.loadChildren)&&v.outlet&&v.outlet!==it&&(v.component=Es),v}function Ln(I){return I.outlet||it}function bi(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let D=I.parent;D;D=D.parent){const v=D.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Hr{constructor(D,v,A,R,U){this.routeReuseStrategy=D,this.futureState=v,this.currState=A,this.forwardEvent=R,this.inputBindingEnabled=U}activate(D){const v=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,A,D),vi(this.futureState.root),this.activateChildRoutes(v,A,D)}deactivateChildRoutes(D,v,A){const R=Ms(v);D.children.forEach(U=>{const Y=U.value.outlet;this.deactivateRoutes(U,R[Y],A),delete R[Y]}),Object.values(R).forEach(U=>{this.deactivateRouteAndItsChildren(U,A)})}deactivateRoutes(D,v,A){const R=D.value,U=v?v.value:null;if(R===U)if(R.component){const Y=A.getContext(R.outlet);Y&&this.deactivateChildRoutes(D,v,Y.children)}else this.deactivateChildRoutes(D,v,A);else U&&this.deactivateRouteAndItsChildren(v,A)}deactivateRouteAndItsChildren(D,v){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,v):this.deactivateRouteAndOutlet(D,v)}detachAndStoreRouteSubtree(D,v){const A=v.getContext(D.value.outlet),R=A&&D.value.component?A.children:v,U=Ms(D);for(const Y of Object.keys(U))this.deactivateRouteAndItsChildren(U[Y],R);if(A&&A.outlet){const Y=A.outlet.detach(),xe=A.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:Y,route:D,contexts:xe})}}deactivateRouteAndOutlet(D,v){const A=v.getContext(D.value.outlet),R=A&&D.value.component?A.children:v,U=Ms(D);for(const Y of Object.keys(U))this.deactivateRouteAndItsChildren(U[Y],R);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.route=null)}activateChildRoutes(D,v,A){const R=Ms(v);D.children.forEach(U=>{this.activateRoutes(U,R[U.value.outlet],A),this.forwardEvent(new $a(U.value.snapshot))}),D.children.length&&this.forwardEvent(new qs(D.value.snapshot))}activateRoutes(D,v,A){const R=D.value,U=v?v.value:null;if(vi(R),R===U)if(R.component){const Y=A.getOrCreateContext(R.outlet);this.activateChildRoutes(D,v,Y.children)}else this.activateChildRoutes(D,v,A);else if(R.component){const Y=A.getOrCreateContext(R.outlet);if(this.routeReuseStrategy.shouldAttach(R.snapshot)){const xe=this.routeReuseStrategy.retrieve(R.snapshot);this.routeReuseStrategy.store(R.snapshot,null),Y.children.onOutletReAttached(xe.contexts),Y.attachRef=xe.componentRef,Y.route=xe.route.value,Y.outlet&&Y.outlet.attach(xe.componentRef,xe.route.value),vi(xe.route.value),this.activateChildRoutes(D,null,Y.children)}else{const xe=bi(R.snapshot);Y.attachRef=null,Y.route=R,Y.injector=xe,Y.outlet&&Y.outlet.activateWith(R,Y.injector),this.activateChildRoutes(D,null,Y.children)}}else this.activateChildRoutes(D,null,A)}}class ha{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Ns{constructor(D,v){this.component=D,this.route=v}}function Ou(I,D,v){const A=I._root;return zr(A,D?D._root:null,v,[A.value])}function ts(I,D){const v=Symbol(),A=D.get(I,v);return A===v?"function"!=typeof I||(0,y.Z0I)(I)?D.get(I):I:A}function zr(I,D,v,A,R={canDeactivateChecks:[],canActivateChecks:[]}){const U=Ms(D);return I.children.forEach(Y=>{(function Lu(I,D,v,A,R={canDeactivateChecks:[],canActivateChecks:[]}){const U=I.value,Y=D?D.value:null,xe=v?v.getContext(I.value.outlet):null;if(Y&&U.routeConfig===Y.routeConfig){const Ce=function qd(I,D,v){if("function"==typeof v)return v(I,D);switch(v){case"pathParamsChange":return!gr(I.url,D.url);case"pathParamsOrQueryParamsChange":return!gr(I.url,D.url)||!Xn(I.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xr(I,D)||!Xn(I.queryParams,D.queryParams);default:return!Xr(I,D)}}(Y,U,U.routeConfig.runGuardsAndResolvers);Ce?R.canActivateChecks.push(new ha(A)):(U.data=Y.data,U._resolvedData=Y._resolvedData),zr(I,D,U.component?xe?xe.children:null:v,A,R),Ce&&xe&&xe.outlet&&xe.outlet.isActivated&&R.canDeactivateChecks.push(new Ns(xe.outlet.component,Y))}else Y&&Go(D,xe,R),R.canActivateChecks.push(new ha(A)),zr(I,null,U.component?xe?xe.children:null:v,A,R)})(Y,U[Y.value.outlet],v,A.concat([Y.value]),R),delete U[Y.value.outlet]}),Object.entries(U).forEach(([Y,xe])=>Go(xe,v.getContext(Y),R)),R}function Go(I,D,v){const A=Ms(I),R=I.value;Object.entries(A).forEach(([U,Y])=>{Go(Y,R.component?D?D.children.getContext(U):null:D,v)}),v.canDeactivateChecks.push(new Ns(R.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,R))}function $n(I){return"function"==typeof I}function qa(I){return I instanceof Xe.K||"EmptyError"===I?.name}const Wn=Symbol("INITIAL_VALUE");function Do(){return(0,rn.w)(I=>tt(I.map(D=>D.pipe((0,Ye.q)(1),(0,lt.O)(Wn)))).pipe((0,Yt.U)(D=>{for(const v of D)if(!0!==v){if(v===Wn)return Wn;if(!1===v||v instanceof Gt)return v}return!0}),(0,Be.h)(D=>D!==Wn),(0,Ye.q)(1)))}function Qa(I){return(0,Ve.z)((0,Ee.b)(D=>{if(Re(D))throw zo(0,D)}),(0,Yt.U)(D=>!0===D))}class ns{constructor(D){this.segmentGroup=D||null}}class Os{constructor(D){this.urlTree=D}}function Ri(I){return ve(new ns(I))}function Ao(I){return ve(new Os(I))}class Vu{constructor(D,v){this.urlSerializer=D,this.urlTree=v}noMatchError(D){return new y.vHH(4002,!1)}lineralizeSegments(D,v){let A=[],R=v.root;for(;;){if(A=A.concat(R.segments),0===R.numberOfChildren)return(0,ae.of)(A);if(R.numberOfChildren>1||!R.children[it])return ve(new y.vHH(4e3,!1));R=R.children[it]}}applyRedirectCommands(D,v,A){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),D,A)}applyRedirectCreateUrlTree(D,v,A,R){const U=this.createSegmentGroup(D,v.root,A,R);return new Gt(U,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(D,v){const A={};return Object.entries(D).forEach(([R,U])=>{if("string"==typeof U&&U.startsWith(":")){const xe=U.substring(1);A[R]=v[xe]}else A[R]=U}),A}createSegmentGroup(D,v,A,R){const U=this.createSegments(D,v.segments,A,R);let Y={};return Object.entries(v.children).forEach(([xe,Ce])=>{Y[xe]=this.createSegmentGroup(D,Ce,A,R)}),new Zt(U,Y)}createSegments(D,v,A,R){return v.map(U=>U.path.startsWith(":")?this.findPosParam(D,U,R):this.findOrReturn(U,A))}findPosParam(D,v,A){const R=A[v.path.substring(1)];if(!R)throw new y.vHH(4001,!1);return R}findOrReturn(D,v){let A=0;for(const R of v){if(R.path===D.path)return v.splice(A),R;A++}return D}}const ks={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _c(I,D,v,A,R){const U=Ls(I,D,v);return U.matched?(A=function tn(I,D){return I.providers&&!I._injector&&(I._injector=(0,y.MMx)(I.providers,D,`Route: ${I.path}`)),I._injector??D}(D,A),function Ya(I,D,v,A){const R=D.canMatch;if(!R||0===R.length)return(0,ae.of)(!0);const U=R.map(Y=>{const xe=ts(Y,I);return zt(function Fu(I){return I&&$n(I.canMatch)}(xe)?xe.canMatch(D,v):I.runInContext(()=>xe(D,v)))});return(0,ae.of)(U).pipe(Do(),Qa())}(A,D,v).pipe((0,Yt.U)(Y=>!0===Y?U:{...ks}))):(0,ae.of)(U)}function Ls(I,D,v){if(""===D.path)return"full"===D.pathMatch&&(I.hasChildren()||v.length>0)?{...ks}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const R=(D.matcher||Pn)(v,I,D);if(!R)return{...ks};const U={};Object.entries(R.posParams??{}).forEach(([xe,Ce])=>{U[xe]=Ce.path});const Y=R.consumed.length>0?{...U,...R.consumed[R.consumed.length-1].parameters}:U;return{matched:!0,consumedSegments:R.consumed,remainingSegments:v.slice(R.consumed.length),parameters:Y,positionalParamSegments:R.posParams??{}}}function rs(I,D,v,A){return v.length>0&&function ga(I,D,v){return v.some(A=>qo(I,D,A)&&Ln(A)!==it)}(I,v,A)?{segmentGroup:new Zt(D,pa(A,new Zt(v,I.children))),slicedSegments:[]}:0===v.length&&function yc(I,D,v){return v.some(A=>qo(I,D,A))}(I,v,A)?{segmentGroup:new Zt(I.segments,Fs(I,0,v,A,I.children)),slicedSegments:v}:{segmentGroup:new Zt(I.segments,I.children),slicedSegments:v}}function Fs(I,D,v,A,R){const U={};for(const Y of A)if(qo(I,v,Y)&&!R[Ln(Y)]){const xe=new Zt([],{});U[Ln(Y)]=xe}return{...R,...U}}function pa(I,D){const v={};v[it]=D;for(const A of I)if(""===A.path&&Ln(A)!==it){const R=new Zt([],{});v[Ln(A)]=R}return v}function qo(I,D,v){return(!(I.hasChildren()||D.length>0)||"full"!==v.pathMatch)&&""===v.path}class to{constructor(D,v,A,R,U,Y,xe){this.injector=D,this.configLoader=v,this.rootComponentType=A,this.config=R,this.urlTree=U,this.paramsInheritanceStrategy=Y,this.urlSerializer=xe,this.allowRedirects=!0,this.applyRedirects=new Vu(this.urlSerializer,this.urlTree)}noMatchError(D){return new y.vHH(4002,!1)}recognize(){const D=rs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,it).pipe(Se(v=>{if(v instanceof Os)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof ns?this.noMatchError(v):v}),(0,Yt.U)(v=>{const A=new Qs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},it,this.rootComponentType,null,{}),R=new Ai(A,v),U=new dr("",R),Y=function ht(I,D,v=null,A=null){return jt(Ze(I),D,v,A)}(A,[],this.urlTree.queryParams,this.urlTree.fragment);return Y.queryParams=this.urlTree.queryParams,U.url=this.urlSerializer.serialize(Y),this.inheritParamsAndData(U._root),{state:U,tree:Y}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,it).pipe(Se(A=>{throw A instanceof ns?this.noMatchError(A):A}))}inheritParamsAndData(D){const v=D.value,A=Bn(v,this.paramsInheritanceStrategy);v.params=Object.freeze(A.params),v.data=Object.freeze(A.data),D.children.forEach(R=>this.inheritParamsAndData(R))}processSegmentGroup(D,v,A,R){return 0===A.segments.length&&A.hasChildren()?this.processChildren(D,v,A):this.processSegment(D,v,A,A.segments,R,!0)}processChildren(D,v,A){const R=[];for(const U of Object.keys(A.children))"primary"===U?R.unshift(U):R.push(U);return(0,le.D)(R).pipe((0,Ae.b)(U=>{const Y=A.children[U],xe=function $r(I,D){const v=I.filter(A=>Ln(A)===D);return v.push(...I.filter(A=>Ln(A)!==D)),v}(v,U);return this.processSegmentGroup(D,xe,Y,U)}),(0,Fe.R)((U,Y)=>(U.push(...Y),U)),(0,ut.d)(null),function dt(I,D){const v=arguments.length>=2;return A=>A.pipe(I?(0,Be.h)((R,U)=>I(R,U,A)):De.y,Je(1),v?(0,ut.d)(D):(0,Cn.T)(()=>new Xe.K))}(),(0,ne.z)(U=>{if(null===U)return Ri(A);const Y=ma(U);return function Ko(I){I.sort((D,v)=>D.value.outlet===it?-1:v.value.outlet===it?1:D.value.outlet.localeCompare(v.value.outlet))}(Y),(0,ae.of)(Y)}))}processSegment(D,v,A,R,U,Y){return(0,le.D)(v).pipe((0,Ae.b)(xe=>this.processSegmentAgainstRoute(xe._injector??D,v,xe,A,R,U,Y).pipe(Se(Ce=>{if(Ce instanceof ns)return(0,ae.of)(null);throw Ce}))),(0,ue.P)(xe=>!!xe),Se(xe=>{if(qa(xe))return function Xa(I,D,v){return 0===D.length&&!I.children[v]}(A,R,U)?(0,ae.of)([]):Ri(A);throw xe}))}processSegmentAgainstRoute(D,v,A,R,U,Y,xe){return function Ja(I,D,v,A){return!!(Ln(I)===A||A!==it&&qo(D,v,I))&&("**"===I.path||Ls(D,I,v).matched)}(A,R,U,Y)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(D,R,A,U,Y,xe):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,R,v,A,U,Y):Ri(R):Ri(R)}expandSegmentAgainstRouteUsingRedirect(D,v,A,R,U,Y){return"**"===R.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,A,R,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(D,v,A,R,U,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,v,A,R){const U=this.applyRedirects.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?Ao(U):this.applyRedirects.lineralizeSegments(A,U).pipe((0,ne.z)(Y=>{const xe=new Zt(Y,{});return this.processSegment(D,v,xe,Y,R,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,v,A,R,U,Y){const{matched:xe,consumedSegments:Ce,remainingSegments:ft,positionalParamSegments:se}=Ls(v,R,U);if(!xe)return Ri(v);const qn=this.applyRedirects.applyRedirectCommands(Ce,R.redirectTo,se);return R.redirectTo.startsWith("/")?Ao(qn):this.applyRedirects.lineralizeSegments(R,qn).pipe((0,ne.z)(kt=>this.processSegment(D,A,v,kt.concat(ft),Y,!1)))}matchSegmentAgainstRoute(D,v,A,R,U,Y){let xe;if("**"===A.path){const Ce=R.length>0?Rt(R).parameters:{},ft=new Qs(R,Ce,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,no(A),Ln(A),A.component??A._loadedComponent??null,A,ui(A));xe=(0,ae.of)({snapshot:ft,consumedSegments:[],remainingSegments:[]}),v.children={}}else xe=_c(v,A,R,D).pipe((0,Yt.U)(({matched:Ce,consumedSegments:ft,remainingSegments:se,parameters:qn})=>Ce?{snapshot:new Qs(ft,qn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,no(A),Ln(A),A.component??A._loadedComponent??null,A,ui(A)),consumedSegments:ft,remainingSegments:se}:null));return xe.pipe((0,rn.w)(Ce=>null===Ce?Ri(v):this.getChildConfig(D=A._injector??D,A,R).pipe((0,rn.w)(({routes:ft})=>{const se=A._loadedInjector??D,{snapshot:qn,consumedSegments:kt,remainingSegments:Mi}=Ce,{segmentGroup:kn,slicedSegments:os}=rs(v,kt,Mi,ft);if(0===os.length&&kn.hasChildren())return this.processChildren(se,ft,kn).pipe((0,Yt.U)(as=>null===as?null:[new Ai(qn,as)]));if(0===ft.length&&0===os.length)return(0,ae.of)([new Ai(qn,[])]);const Dc=Ln(A)===U;return this.processSegment(se,ft,kn,os,Dc?it:U,!0).pipe((0,Yt.U)(as=>[new Ai(qn,as)]))}))))}getChildConfig(D,v,A){return v.children?(0,ae.of)({routes:v.children,injector:D}):v.loadChildren?void 0!==v._loadedRoutes?(0,ae.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function nr(I,D,v,A){const R=D.canLoad;if(void 0===R||0===R.length)return(0,ae.of)(!0);const U=R.map(Y=>{const xe=ts(Y,I);return zt(function za(I){return I&&$n(I.canLoad)}(xe)?xe.canLoad(D,v):I.runInContext(()=>xe(D,v)))});return(0,ae.of)(U).pipe(Do(),Qa())}(D,v,A).pipe((0,ne.z)(R=>R?this.configLoader.loadChildren(D,v).pipe((0,Ee.b)(U=>{v._loadedRoutes=U.routes,v._loadedInjector=U.injector})):function eo(I){return ve(Bi(!1,3))}())):(0,ae.of)({routes:[],injector:D})}}function vc(I){const D=I.value.routeConfig;return D&&""===D.path}function ma(I){const D=[],v=new Set;for(const A of I){if(!vc(A)){D.push(A);continue}const R=D.find(U=>A.value.routeConfig===U.value.routeConfig);void 0!==R?(R.children.push(...A.children),v.add(R)):D.push(A)}for(const A of v){const R=ma(A.children);D.push(new Ai(A.value,R))}return D.filter(A=>!v.has(A))}function no(I){return I.data||{}}function ui(I){return I.resolve||{}}function ke(I){return"string"==typeof I.title||null===I.title}function Tt(I){return(0,rn.w)(D=>{const v=I(D);return v?(0,le.D)(v).pipe((0,Yt.U)(()=>D)):(0,ae.of)(D)})}const vn=new y.OlP("ROUTES");let un=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,ae.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const A=zt(v.loadComponent()).pipe((0,Yt.U)(Fn),(0,Ee.b)(U=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=U}),(0,Wt.x)(()=>{this.componentLoaders.delete(v)})),R=new Nt(A,()=>new At.x).pipe(Te());return this.componentLoaders.set(v,R),R}loadChildren(v,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,ae.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const U=function On(I,D,v,A){return zt(I.loadChildren()).pipe((0,Yt.U)(Fn),(0,ne.z)(R=>R instanceof y.YKP||Array.isArray(R)?(0,ae.of)(R):(0,le.D)(D.compileModuleAsync(R))),(0,Yt.U)(R=>{A&&A(I);let U,Y,xe=!1;return Array.isArray(R)?(Y=R,!0):(U=R.create(v).injector,Y=U.get(vn,[],{optional:!0,self:!0}).flat()),{routes:Y.map(Js),injector:U}}))}(A,this.compiler,v,this.onLoadEndListener).pipe((0,Wt.x)(()=>{this.childrenLoaders.delete(A)})),Y=new Nt(U,()=>new At.x).pipe(Te());return this.childrenLoaders.set(A,Y),Y}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Fn(I){return function Xt(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Tn=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new At.x,this.transitionAbortSubject=new At.x,this.configLoader=(0,y.f3M)(un),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(er),this.rootContexts=(0,y.f3M)(Vi),this.inputBindingEnabled=null!==(0,y.f3M)(vs,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ae.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=R=>this.events.next(new Yr(R)),this.configLoader.onLoadStartListener=R=>this.events.next(new Nu(R))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:A})}setupNavigations(v,A,R){return this.transitions=new pe.X({id:0,currentUrlTree:A,currentRawUrl:A,currentBrowserUrl:A,extractedUrl:v.urlHandlingStrategy.extract(A),urlAfterRedirects:v.urlHandlingStrategy.extract(A),rawUrl:A,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:kr,restoredState:null,currentSnapshot:R.snapshot,targetSnapshot:null,currentRouterState:R,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Be.h)(U=>0!==U.id),(0,Yt.U)(U=>({...U,extractedUrl:v.urlHandlingStrategy.extract(U.rawUrl)})),(0,rn.w)(U=>{this.currentTransition=U;let Y=!1,xe=!1;return(0,ae.of)(U).pipe((0,Ee.b)(Ce=>{this.currentNavigation={id:Ce.id,initialUrl:Ce.rawUrl,extractedUrl:Ce.extractedUrl,trigger:Ce.source,extras:Ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,rn.w)(Ce=>{const ft=Ce.currentBrowserUrl.toString(),se=!v.navigated||Ce.extractedUrl.toString()!==ft||ft!==Ce.currentUrlTree.toString();if(!se&&"reload"!==(Ce.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const kt="";return this.events.next(new yo(Ce.id,this.urlSerializer.serialize(Ce.rawUrl),kt,0)),Ce.resolve(null),He.E}if(v.urlHandlingStrategy.shouldProcessUrl(Ce.rawUrl))return(0,ae.of)(Ce).pipe((0,rn.w)(kt=>{const Mi=this.transitions?.getValue();return this.events.next(new jo(kt.id,this.urlSerializer.serialize(kt.extractedUrl),kt.source,kt.restoredState)),Mi!==this.transitions?.getValue()?He.E:Promise.resolve(kt)}),function w(I,D,v,A,R,U){return(0,ne.z)(Y=>function Cl(I,D,v,A,R,U,Y="emptyOnly"){return new to(I,D,v,A,R,Y,U).recognize()}(I,D,v,A,Y.extractedUrl,R,U).pipe((0,Yt.U)(({state:xe,tree:Ce})=>({...Y,targetSnapshot:xe,urlAfterRedirects:Ce}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Ee.b)(kt=>{U.targetSnapshot=kt.targetSnapshot,U.urlAfterRedirects=kt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:kt.urlAfterRedirects};const Mi=new Fi(kt.id,this.urlSerializer.serialize(kt.extractedUrl),this.urlSerializer.serialize(kt.urlAfterRedirects),kt.targetSnapshot);this.events.next(Mi)}));if(se&&v.urlHandlingStrategy.shouldProcessUrl(Ce.currentRawUrl)){const{id:kt,extractedUrl:Mi,source:kn,restoredState:os,extras:Dc}=Ce,as=new jo(kt,this.urlSerializer.serialize(Mi),kn,os);this.events.next(as);const Pl=Gn(0,this.rootComponentType).snapshot;return this.currentTransition=U={...Ce,targetSnapshot:Pl,urlAfterRedirects:Mi,extras:{...Dc,skipLocationChange:!1,replaceUrl:!1}},(0,ae.of)(U)}{const kt="";return this.events.next(new yo(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),kt,1)),Ce.resolve(null),He.E}}),(0,Ee.b)(Ce=>{const ft=new ja(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),this.urlSerializer.serialize(Ce.urlAfterRedirects),Ce.targetSnapshot);this.events.next(ft)}),(0,Yt.U)(Ce=>(this.currentTransition=U={...Ce,guards:Ou(Ce.targetSnapshot,Ce.currentSnapshot,this.rootContexts)},U)),function Ka(I,D){return(0,ne.z)(v=>{const{targetSnapshot:A,currentSnapshot:R,guards:{canActivateChecks:U,canDeactivateChecks:Y}}=v;return 0===Y.length&&0===U.length?(0,ae.of)({...v,guardsResult:!0}):function Za(I,D,v,A){return(0,le.D)(I).pipe((0,ne.z)(R=>function Co(I,D,v,A,R){const U=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!U||0===U.length)return(0,ae.of)(!0);const Y=U.map(xe=>{const Ce=bi(D)??R,ft=ts(xe,Ce);return zt(function Wa(I){return I&&$n(I.canDeactivate)}(ft)?ft.canDeactivate(I,D,v,A):Ce.runInContext(()=>ft(I,D,v,A))).pipe((0,ue.P)())});return(0,ae.of)(Y).pipe(Do())}(R.component,R.route,v,D,A)),(0,ue.P)(R=>!0!==R,!0))}(Y,A,R,I).pipe((0,ne.z)(xe=>xe&&function Dl(I){return"boolean"==typeof I}(xe)?function Ts(I,D,v,A){return(0,le.D)(D).pipe((0,Ae.b)(R=>(0,Ct.z)(function Xs(I,D){return null!==I&&D&&D(new ca(I)),(0,ae.of)(!0)}(R.route.parent,A),function ji(I,D){return null!==I&&D&&D(new Ho(I)),(0,ae.of)(!0)}(R.route,A),function yr(I,D,v){const A=D[D.length-1],U=D.slice(0,D.length-1).reverse().map(Y=>function ku(I){const D=I.routeConfig?I.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:I,guards:D}:null}(Y)).filter(Y=>null!==Y).map(Y=>ge(()=>{const xe=Y.guards.map(Ce=>{const ft=bi(Y.node)??v,se=ts(Ce,ft);return zt(function fa(I){return I&&$n(I.canActivateChild)}(se)?se.canActivateChild(A,I):ft.runInContext(()=>se(A,I))).pipe((0,ue.P)())});return(0,ae.of)(xe).pipe(Do())}));return(0,ae.of)(U).pipe(Do())}(I,R.path,v),function mc(I,D,v){const A=D.routeConfig?D.routeConfig.canActivate:null;if(!A||0===A.length)return(0,ae.of)(!0);const R=A.map(U=>ge(()=>{const Y=bi(D)??v,xe=ts(U,Y);return zt(function Ga(I){return I&&$n(I.canActivate)}(xe)?xe.canActivate(D,I):Y.runInContext(()=>xe(D,I))).pipe((0,ue.P)())}));return(0,ae.of)(R).pipe(Do())}(I,R.route,v))),(0,ue.P)(R=>!0!==R,!0))}(A,U,I,D):(0,ae.of)(xe)),(0,Yt.U)(xe=>({...v,guardsResult:xe})))})}(this.environmentInjector,Ce=>this.events.next(Ce)),(0,Ee.b)(Ce=>{if(U.guardsResult=Ce.guardsResult,Re(Ce.guardsResult))throw zo(0,Ce.guardsResult);const ft=new yi(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),this.urlSerializer.serialize(Ce.urlAfterRedirects),Ce.targetSnapshot,!!Ce.guardsResult);this.events.next(ft)}),(0,Be.h)(Ce=>!!Ce.guardsResult||(this.cancelNavigationTransition(Ce,"",3),!1)),Tt(Ce=>{if(Ce.guards.canActivateChecks.length)return(0,ae.of)(Ce).pipe((0,Ee.b)(ft=>{const se=new ua(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(se)}),(0,rn.w)(ft=>{let se=!1;return(0,ae.of)(ft).pipe(function k(I,D){return(0,ne.z)(v=>{const{targetSnapshot:A,guards:{canActivateChecks:R}}=v;if(!R.length)return(0,ae.of)(v);let U=0;return(0,le.D)(R).pipe((0,Ae.b)(Y=>function b(I,D,v,A){const R=I.routeConfig,U=I._resolve;return void 0!==R?.title&&!ke(R)&&(U[zn]=R.title),function N(I,D,v,A){const R=function Z(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===R.length)return(0,ae.of)({});const U={};return(0,le.D)(R).pipe((0,ne.z)(Y=>function Me(I,D,v,A){const R=bi(D)??A,U=ts(I,R);return zt(U.resolve?U.resolve(D,v):R.runInContext(()=>U(D,v)))}(I[Y],D,v,A).pipe((0,ue.P)(),(0,Ee.b)(xe=>{U[Y]=xe}))),Je(1),function Qt(I){return(0,Yt.U)(()=>I)}(U),Se(Y=>qa(Y)?He.E:ve(Y)))}(U,I,D,A).pipe((0,Yt.U)(Y=>(I._resolvedData=Y,I.data=Bn(I,v).resolve,R&&ke(R)&&(I.data[zn]=R.title),null)))}(Y.route,A,I,D)),(0,Ee.b)(()=>U++),Je(1),(0,ne.z)(Y=>U===R.length?(0,ae.of)(v):He.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Ee.b)({next:()=>se=!0,complete:()=>{se||this.cancelNavigationTransition(ft,"",2)}}))}),(0,Ee.b)(ft=>{const se=new vo(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(se)}))}),Tt(Ce=>{const ft=se=>{const qn=[];se.routeConfig?.loadComponent&&!se.routeConfig._loadedComponent&&qn.push(this.configLoader.loadComponent(se.routeConfig).pipe((0,Ee.b)(kt=>{se.component=kt}),(0,Yt.U)(()=>{})));for(const kt of se.children)qn.push(...ft(kt));return qn};return tt(ft(Ce.targetSnapshot.root)).pipe((0,ut.d)(),(0,Ye.q)(1))}),Tt(()=>this.afterPreactivation()),(0,Yt.U)(Ce=>{const ft=function ur(I,D,v){const A=xs(I,D._root,v?v._root:void 0);return new Zs(A,D)}(v.routeReuseStrategy,Ce.targetSnapshot,Ce.currentRouterState);return this.currentTransition=U={...Ce,targetRouterState:ft},U}),(0,Ee.b)(()=>{this.events.next(new Eo)}),((I,D,v,A)=>(0,Yt.U)(R=>(new Hr(D,R.targetRouterState,R.currentRouterState,v,A).activate(I),R)))(this.rootContexts,v.routeReuseStrategy,Ce=>this.events.next(Ce),this.inputBindingEnabled),(0,Ye.q)(1),(0,Ee.b)({next:Ce=>{Y=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ws(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),this.urlSerializer.serialize(Ce.urlAfterRedirects))),v.titleStrategy?.updateTitle(Ce.targetRouterState.snapshot),Ce.resolve(!0)},complete:()=>{Y=!0}}),(0,mn.R)(this.transitionAbortSubject.pipe((0,Ee.b)(Ce=>{throw Ce}))),(0,Wt.x)(()=>{Y||xe||this.cancelNavigationTransition(U,"",1),this.currentNavigation?.id===U.id&&(this.currentNavigation=null)}),Se(Ce=>{if(xe=!0,Si(Ce))this.events.next(new Li(U.id,this.urlSerializer.serialize(U.extractedUrl),Ce.message,Ce.cancellationCode)),function An(I){return Si(I)&&Re(I.url)}(Ce)?this.events.next(new an(Ce.url)):U.resolve(!1);else{this.events.next(new $o(U.id,this.urlSerializer.serialize(U.extractedUrl),Ce,U.targetSnapshot??void 0));try{U.resolve(v.errorHandler(Ce))}catch(ft){U.reject(ft)}}return He.E}))}))}cancelNavigationTransition(v,A,R){const U=new Li(v.id,this.urlSerializer.serialize(v.extractedUrl),A,R);this.events.next(U),v.resolve(!1)}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Cr(I){return I!==kr}let cr=(()=>{class I{buildTitle(v){let A,R=v.root;for(;void 0!==R;)A=this.getResolvedTitleForRoute(R)??A,R=R.children.find(U=>U.outlet===it);return A}getResolvedTitleForRoute(v){return v.data[zn]}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:function(){return(0,y.f3M)(hr)},providedIn:"root"})}return I})(),hr=(()=>{class I extends cr{constructor(v){super(),this.title=v}updateTitle(v){const A=this.buildTitle(v);void 0!==A&&this.title.setTitle(A)}static#e=this.\u0275fac=function(A){return new(A||I)(y.LFG(_n.Dx))};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),fr=(()=>{class I{static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:function(){return(0,y.f3M)(is)},providedIn:"root"})}return I})();class ei{shouldDetach(D){return!1}store(D,v){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,v){return D.routeConfig===v.routeConfig}}let is=(()=>{class I extends ei{static#e=this.\u0275fac=function(){let v;return function(R){return(v||(v=y.n5z(I)))(R||I)}}();static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const lr=new y.OlP("",{providedIn:"root",factory:()=>({})});let ss=(()=>{class I{static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:function(){return(0,y.f3M)(Al)},providedIn:"root"})}return I})(),Al=(()=>{class I{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,A){return v}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();var Sn=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(Sn||{});function Ic(I,D){I.events.pipe((0,Be.h)(v=>v instanceof Ws||v instanceof Li||v instanceof $o||v instanceof yo),(0,Yt.U)(v=>v instanceof Ws||v instanceof yo?Sn.COMPLETE:v instanceof Li&&(0===v.code||1===v.code)?Sn.REDIRECTING:Sn.FAILED),(0,Be.h)(v=>v!==Sn.REDIRECTING),(0,Ye.q)(1)).subscribe(()=>{D()})}function _a(I){throw I}function Ei(I,D,v){return D.parse("/")}const Kd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new At.x,this.options=(0,y.f3M)(lr,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||_a,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ei,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(ss),this.routeReuseStrategy=(0,y.f3M)(fr),this.titleStrategy=(0,y.f3M)(cr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(vn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(Tn),this.urlSerializer=(0,y.f3M)(er),this.location=(0,y.f3M)(St.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(vs,{optional:!0}),this.eventsSubscription=new We.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Gt,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Gn(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(A=>{try{const{currentTransition:R}=this.navigationTransitions;if(null===R)return void(Uu(A)&&this._events.next(A));if(A instanceof jo)Cr(R.source)&&(this.browserUrlTree=R.extractedUrl);else if(A instanceof yo)this.rawUrlTree=R.rawUrl;else if(A instanceof Fi){if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(U,R)}this.browserUrlTree=R.urlAfterRedirects}}else if(A instanceof Eo)this.currentUrlTree=R.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl),this.routerState=R.targetRouterState,"deferred"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,R),this.browserUrlTree=R.urlAfterRedirects);else if(A instanceof Li)0!==A.code&&1!==A.code&&(this.navigated=!0),(3===A.code||2===A.code)&&this.restoreHistory(R);else if(A instanceof an){const U=this.urlHandlingStrategy.merge(A.url,R.currentRawUrl),Y={skipLocationChange:R.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cr(R.source)};this.scheduleNavigation(U,kr,null,Y,{resolve:R.resolve,reject:R.reject,promise:R.promise})}A instanceof $o&&this.restoreHistory(R,!0),A instanceof Ws&&(this.navigated=!0),Uu(A)&&this._events.next(A)}catch(R){this.navigationTransitions.transitionAbortSubject.next(R)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),kr,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const A="popstate"===v.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,A,v.state)},0)}))}navigateToSyncWithBrowser(v,A,R){const U={replaceUrl:!0},Y=R?.navigationId?R:null;if(R){const Ce={...R};delete Ce.navigationId,delete Ce.\u0275routerPageId,0!==Object.keys(Ce).length&&(U.state=Ce)}const xe=this.parseUrl(v);this.scheduleNavigation(xe,A,Y,U)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(Js),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,A={}){const{relativeTo:R,queryParams:U,fragment:Y,queryParamsHandling:xe,preserveFragment:Ce}=A,ft=Ce?this.currentUrlTree.fragment:Y;let qn,se=null;switch(xe){case"merge":se={...this.currentUrlTree.queryParams,...U};break;case"preserve":se=this.currentUrlTree.queryParams;break;default:se=U||null}null!==se&&(se=this.removeEmptyProps(se));try{qn=Ze(R?R.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),qn=this.currentUrlTree.root}return jt(qn,v,se,ft??null)}navigateByUrl(v,A={skipLocationChange:!1}){const R=Re(v)?v:this.parseUrl(v),U=this.urlHandlingStrategy.merge(R,this.rawUrlTree);return this.scheduleNavigation(U,kr,null,A)}navigate(v,A={skipLocationChange:!1}){return function Ds(I){for(let D=0;D<I.length;D++)if(null==I[D])throw new y.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,A),A)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let A;try{A=this.urlSerializer.parse(v)}catch(R){A=this.malformedUriErrorHandler(R,this.urlSerializer,v)}return A}isActive(v,A){let R;if(R=!0===A?{...Kd}:!1===A?{...Zd}:A,Re(v))return Kr(this.currentUrlTree,v,R);const U=this.parseUrl(v);return Kr(this.currentUrlTree,U,R)}removeEmptyProps(v){return Object.keys(v).reduce((A,R)=>{const U=v[R];return null!=U&&(A[R]=U),A},{})}scheduleNavigation(v,A,R,U,Y){if(this.disposed)return Promise.resolve(!1);let xe,Ce,ft;Y?(xe=Y.resolve,Ce=Y.reject,ft=Y.promise):ft=new Promise((qn,kt)=>{xe=qn,Ce=kt});const se=this.pendingTasks.add();return Ic(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(se))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:R,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:U,resolve:xe,reject:Ce,promise:ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ft.catch(qn=>Promise.reject(qn))}setBrowserUrl(v,A){const R=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(R)||A.extras.replaceUrl){const Y={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(R,"",Y)}else{const U={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId+1)};this.location.go(R,"",U)}}restoreHistory(v,A=!1){if("computed"===this.canceledNavigationResolution){const U=this.currentPageId-this.browserPageId;0!==U?this.location.historyGo(U):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===U&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,A){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:A}:{navigationId:v}}static#e=this.\u0275fac=function(A){return new(A||I)};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Uu(I){return!(I instanceof Eo||I instanceof an)}class Vs{}let ro=(()=>{class I{constructor(v,A,R,U,Y){this.router=v,this.injector=R,this.preloadingStrategy=U,this.loader=Y}setUpPreloading(){this.subscription=this.router.events.pipe((0,Be.h)(v=>v instanceof Ws),(0,Ae.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,A){const R=[];for(const U of A){U.providers&&!U._injector&&(U._injector=(0,y.MMx)(U.providers,v,`Route: ${U.path}`));const Y=U._injector??v,xe=U._loadedInjector??Y;(U.loadChildren&&!U._loadedRoutes&&void 0===U.canLoad||U.loadComponent&&!U._loadedComponent)&&R.push(this.preloadConfig(Y,U)),(U.children||U._loadedRoutes)&&R.push(this.processRoutes(xe,U.children??U._loadedRoutes))}return(0,le.D)(R).pipe((0,fn.J)())}preloadConfig(v,A){return this.preloadingStrategy.preload(A,()=>{let R;R=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(v,A):(0,ae.of)(null);const U=R.pipe((0,ne.z)(Y=>null===Y?(0,ae.of)(void 0):(A._loadedRoutes=Y.routes,A._loadedInjector=Y.injector,this.processRoutes(Y.injector??v,Y.routes))));if(A.loadComponent&&!A._loadedComponent){const Y=this.loader.loadComponent(A);return(0,le.D)([U,Y]).pipe((0,fn.J)())}return U})}static#e=this.\u0275fac=function(A){return new(A||I)(y.LFG(ci),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Vs),y.LFG(un))};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const io=new y.OlP("");let Qd=(()=>{class I{constructor(v,A,R,U,Y={}){this.urlSerializer=v,this.transitions=A,this.viewportScroller=R,this.zone=U,this.options=Y,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Y.scrollPositionRestoration=Y.scrollPositionRestoration||"disabled",Y.anchorScrolling=Y.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Ws?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof yo&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Xi&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xi(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(A){y.$Z()};static#t=this.\u0275prov=y.Yz7({token:I,factory:I.\u0275fac})}return I})();function Er(I,D){return{\u0275kind:I,\u0275providers:D}}function at(){const I=(0,y.f3M)(y.zs3);return D=>{const v=I.get(y.z2F);if(D!==v.components[0])return;const A=I.get(ci),R=I.get(Le);1===I.get(Qe)&&A.initialNavigation(),I.get(Ke,null,y.XFs.Optional)?.setUpPreloading(),I.get(io,null,y.XFs.Optional)?.init(),A.resetRootComponentType(v.componentTypes[0]),R.closed||(R.next(),R.complete(),R.unsubscribe())}}const Le=new y.OlP("",{factory:()=>new At.x}),Qe=new y.OlP("",{providedIn:"root",factory:()=>1}),Ke=new y.OlP("");function bn(I){return Er(0,[{provide:Ke,useExisting:ro},{provide:Vs,useExisting:I}])}const qi=new y.OlP("ROUTER_FORROOT_GUARD"),Bu=[St.Ye,{provide:er,useClass:Nr},ci,Vi,{provide:$t,useFactory:function vr(I){return I.routerState.root},deps:[ci]},un,[]];function Kt(){return new y.PXZ("Router",ci)}let va=(()=>{class I{constructor(v){}static forRoot(v,A){return{ngModule:I,providers:[Bu,[],{provide:vn,multi:!0,useValue:v},{provide:qi,useFactory:Ii,deps:[[ci,new y.FiY,new y.tp0]]},{provide:lr,useValue:A||{}},A?.useHash?{provide:St.S$,useClass:St.Do}:{provide:St.S$,useClass:St.b0},{provide:io,useFactory:()=>{const I=(0,y.f3M)(St.EM),D=(0,y.f3M)(y.R0b),v=(0,y.f3M)(lr),A=(0,y.f3M)(Tn),R=(0,y.f3M)(er);return v.scrollOffset&&I.setOffset(v.scrollOffset),new Qd(R,A,I,D,v)}},A?.preloadingStrategy?bn(A.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Kt},A?.initialNavigation?gn(A):[],A?.bindToComponentInputs?Er(8,[ai,{provide:vs,useExisting:ai}]).\u0275providers:[],[{provide:Cs,useFactory:at},{provide:y.tb,multi:!0,useExisting:Cs}]]}}static forChild(v){return{ngModule:I,providers:[{provide:vn,multi:!0,useValue:v}]}}static#e=this.\u0275fac=function(A){return new(A||I)(y.LFG(qi,8))};static#t=this.\u0275mod=y.oAB({type:I});static#n=this.\u0275inj=y.cJS({})}return I})();function Ii(I){return"guarded"}function gn(I){return["disabled"===I.initialNavigation?Er(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const D=(0,y.f3M)(ci);return()=>{D.setUpLocationChangeListener()}}},{provide:Qe,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Er(2,[{provide:Qe,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:D=>{const v=D.get(St.V_,Promise.resolve());return()=>v.then(()=>new Promise(A=>{const R=D.get(ci),U=D.get(Le);Ic(R,()=>{A(!0)}),D.get(Tn).afterPreactivation=()=>(A(!0),U.closed?(0,ae.of)(void 0):U),R.initialNavigation()}))}}]).\u0275providers:[]]}const Cs=new y.OlP("")},3106:(vt,Pe,O)=>{O.d(Pe,{Z:()=>tt});var y=O(9058),X=O(4537),z=O(534),fe=O(7879);class le{constructor(ot,Xe){this._delegate=ot,this.firebase=Xe,(0,z._addComponent)(ot,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(ot,Xe=z._DEFAULT_ENTRY_NAME){var Ct;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(ot);return!mt.isInitialized()&&"EXPLICIT"===(null===(Ct=mt.getComponent())||void 0===Ct?void 0:Ct.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:Xe})}_removeServiceInstance(ot,Xe=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(Xe)}_addComponent(ot){(0,z._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,z._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function De(){const qe=function Oe(qe){const ot={},Xe={__esModule:!0,initializeApp:function ge(We,ie={}){const Te=z.initializeApp(We,ie);if((0,y.r3)(ot,Te.name))return ot[Te.name];const Nt=new qe(Te,Xe);return ot[Te.name]=Nt,Nt},app:mt,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function ve(We){const ie=We.name,Te=ie.replace("-compat","");if(z._registerComponent(We)&&"PUBLIC"===We.type){const Nt=(At=mt())=>{if("function"!=typeof At[Te])throw pe.create("invalid-app-argument",{appName:ie});return At[Te]()};void 0!==We.serviceProps&&(0,y.ZB)(Nt,We.serviceProps),Xe[Te]=Nt,qe.prototype[Te]=function(...At){return this._getService.bind(this,ie).apply(this,We.multipleInstances?At:[])}}return"PUBLIC"===We.type?Xe[Te]:null},removeApp:function Ct(We){delete ot[We]},useAsService:function He(We,ie){return"serverAuth"===ie?null:ie},modularAPIs:z}};function mt(We){if(!(0,y.r3)(ot,We=We||z._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:We});return ot[We]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function Ve(){return Object.keys(ot).map(We=>ot[We])}}),mt.App=qe,Xe}(le);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function ot(Xe){(0,y.ZB)(qe,Xe)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),qe}(),J=new fe.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=W;!function je(qe){(0,z.registerVersion)("@firebase/app-compat","0.2.27",qe)}()},534:(vt,Pe,O)=>{O.r(Pe),O.d(Pe,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>ar,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>Kr,_addOrOverwriteComponent:()=>Sr,_apps:()=>Vt,_clearComponents:()=>wt,_components:()=>Un,_getProvider:()=>Qn,_registerComponent:()=>pn,_removeServiceInstance:()=>Ni,deleteApp:()=>er,getApp:()=>gr,getApps:()=>Zr,initializeApp:()=>ms,onLog:()=>gi,registerVersion:()=>pi,setLogLevel:()=>Qr});var y=O(5861),X=O(4537),z=O(7879),fe=O(9058);const le=(Q,K)=>K.some(_e=>Q instanceof _e);let ae,pe;const W=new WeakMap,J=new WeakMap,he=new WeakMap,Ue=new WeakMap,je=new WeakMap;let ot={get(Q,K,_e){if(Q instanceof IDBTransaction){if("done"===K)return J.get(Q);if("objectStoreNames"===K)return Q.objectStoreNames||he.get(Q);if("store"===K)return _e.objectStoreNames[1]?void 0:_e.objectStore(_e.objectStoreNames[0])}return ge(Q[K])},set:(Q,K,_e)=>(Q[K]=_e,!0),has:(Q,K)=>Q instanceof IDBTransaction&&("done"===K||"store"===K)||K in Q};function mt(Q){return"function"==typeof Q?function Ct(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...K){return Q.apply(Ve(this),K),ge(W.get(this))}:function(...K){return ge(Q.apply(Ve(this),K))}:function(K,..._e){const Re=Q.call(Ve(this),K,..._e);return he.set(Re,K.sort?K.sort():[K]),ge(Re)}}(Q):(Q instanceof IDBTransaction&&function qe(Q){if(J.has(Q))return;const K=new Promise((_e,Re)=>{const ht=()=>{Q.removeEventListener("complete",Ze),Q.removeEventListener("error",jt),Q.removeEventListener("abort",jt)},Ze=()=>{_e(),ht()},jt=()=>{Re(Q.error||new DOMException("AbortError","AbortError")),ht()};Q.addEventListener("complete",Ze),Q.addEventListener("error",jt),Q.addEventListener("abort",jt)});J.set(Q,K)}(Q),le(Q,function Oe(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,ot):Q)}function ge(Q){if(Q instanceof IDBRequest)return function tt(Q){const K=new Promise((_e,Re)=>{const ht=()=>{Q.removeEventListener("success",Ze),Q.removeEventListener("error",jt)},Ze=()=>{_e(ge(Q.result)),ht()},jt=()=>{Re(Q.error),ht()};Q.addEventListener("success",Ze),Q.addEventListener("error",jt)});return K.then(_e=>{_e instanceof IDBCursor&&W.set(_e,Q)}).catch(()=>{}),je.set(K,Q),K}(Q);if(Ue.has(Q))return Ue.get(Q);const K=mt(Q);return K!==Q&&(Ue.set(Q,K),je.set(K,Q)),K}const Ve=Q=>je.get(Q),We=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],Te=new Map;function Nt(Q,K){if(!(Q instanceof IDBDatabase)||K in Q||"string"!=typeof K)return;if(Te.get(K))return Te.get(K);const _e=K.replace(/FromIndex$/,""),Re=K!==_e,ht=ie.includes(_e);if(!(_e in(Re?IDBIndex:IDBObjectStore).prototype)||!ht&&!We.includes(_e))return;const Ze=function(){var jt=(0,y.Z)(function*(wn,...en){const tr=this.transaction(wn,ht?"readwrite":"readonly");let br=tr.store;return Re&&(br=br.index(en.shift())),(yield Promise.all([br[_e](...en),ht&&tr.done]))[0]});return function(en){return jt.apply(this,arguments)}}();return Te.set(K,Ze),Ze}!function Xe(Q){ot=Q(ot)}(Q=>({...Q,get:(K,_e,Re)=>Nt(K,_e)||Q.get(K,_e,Re),has:(K,_e)=>!!Nt(K,_e)||Q.has(K,_e)}));class At{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function St(Q){const K=Q.getComponent();return"VERSION"===K?.type}(_e)){const Re=_e.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(_e=>_e).join(" ")}}const Yt="@firebase/app",Ye=new z.Yd("@firebase/app"),Rt="[DEFAULT]",zt={[Yt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,Un=new Map;function Kr(Q,K){try{Q.container.addComponent(K)}catch(_e){Ye.debug(`Component ${K.name} failed to register with FirebaseApp ${Q.name}`,_e)}}function Sr(Q,K){Q.container.addOrOverwriteComponent(K)}function pn(Q){const K=Q.name;if(Un.has(K))return Ye.debug(`There were multiple attempts to register component ${K}.`),!1;Un.set(K,Q);for(const _e of Vt.values())Kr(_e,Q);return!0}function Qn(Q,K){const _e=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),Q.container.getProvider(K)}function Ni(Q,K,_e=Rt){Qn(Q,K).clearInstance(_e)}function wt(){Un.clear()}const Gt=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zt{constructor(K,_e,Re){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}const ar="10.8.0";function ms(Q,K={}){let _e=Q;"object"!=typeof K&&(K={name:K});const Re=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},K),ht=Re.name;if("string"!=typeof ht||!ht)throw Gt.create("bad-app-name",{appName:String(ht)});if(_e||(_e=(0,fe.aH)()),!_e)throw Gt.create("no-options");const Ze=Vt.get(ht);if(Ze){if((0,fe.vZ)(_e,Ze.options)&&(0,fe.vZ)(Re,Ze.config))return Ze;throw Gt.create("duplicate-app",{appName:ht})}const jt=new X.H0(ht);for(const en of Un.values())jt.addComponent(en);const wn=new Zt(_e,Re,jt);return Vt.set(ht,wn),wn}function gr(Q=Rt){const K=Vt.get(Q);if(!K&&Q===Rt&&(0,fe.aH)())return ms();if(!K)throw Gt.create("no-app",{appName:Q});return K}function Zr(){return Array.from(Vt.values())}function er(Q){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(Q){const K=Q.name;Vt.has(K)&&(Vt.delete(K),yield Promise.all(Q.container.getProviders().map(_e=>_e.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function pi(Q,K,_e){var Re;let ht=null!==(Re=zt[Q])&&void 0!==Re?Re:Q;_e&&(ht+=`-${_e}`);const Ze=ht.match(/\s|\//),jt=K.match(/\s|\//);if(Ze||jt){const wn=[`Unable to register library "${ht}" with version "${K}":`];return Ze&&wn.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Ze&&jt&&wn.push("and"),jt&&wn.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void Ye.warn(wn.join(" "))}pn(new X.wA(`${ht}-version`,()=>({library:ht,version:K}),"VERSION"))}function gi(Q,K){if(null!==Q&&"function"!=typeof Q)throw Gt.create("invalid-log-argument");(0,z.Am)(Q,K)}function Qr(Q){(0,z.Ub)(Q)}const Oi="firebase-heartbeat-database",mi=1,re="firebase-heartbeat-store";let j=null;function $(){return j||(j=function ve(Q,K,{blocked:_e,upgrade:Re,blocking:ht,terminated:Ze}={}){const jt=indexedDB.open(Q,K),wn=ge(jt);return Re&&jt.addEventListener("upgradeneeded",en=>{Re(ge(jt.result),en.oldVersion,en.newVersion,ge(jt.transaction),en)}),_e&&jt.addEventListener("blocked",en=>_e(en.oldVersion,en.newVersion,en)),wn.then(en=>{Ze&&en.addEventListener("close",()=>Ze()),ht&&en.addEventListener("versionchange",tr=>ht(tr.oldVersion,tr.newVersion,tr))}).catch(()=>{}),wn}(Oi,mi,{upgrade:(Q,K)=>{if(0===K)try{Q.createObjectStore(re)}catch(_e){console.warn(_e)}}}).catch(Q=>{throw Gt.create("idb-open",{originalErrorMessage:Q.message})})),j}function H(){return(H=(0,y.Z)(function*(Q){try{const _e=(yield $()).transaction(re),Re=yield _e.objectStore(re).get(st(Q));return yield _e.done,Re}catch(K){if(K instanceof fe.ZR)Ye.warn(K.message);else{const _e=Gt.create("idb-get",{originalErrorMessage:K?.message});Ye.warn(_e.message)}}})).apply(this,arguments)}function me(Q,K){return $e.apply(this,arguments)}function $e(){return($e=(0,y.Z)(function*(Q,K){try{const Re=(yield $()).transaction(re,"readwrite");yield Re.objectStore(re).put(K,st(Q)),yield Re.done}catch(_e){if(_e instanceof fe.ZR)Ye.warn(_e.message);else{const Re=Gt.create("idb-set",{originalErrorMessage:_e?.message});Ye.warn(Re.message)}}})).apply(this,arguments)}function st(Q){return`${Q.name}!${Q.options.appId}`}class bt{constructor(K){this.container=K,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new ye(_e),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var K=this;return(0,y.Z)(function*(){var _e,Re;const Ze=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jt=Bt();if((null!=(null===(_e=K._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||(K._heartbeatsCache=yield K._heartbeatsCachePromise,null!=(null===(Re=K._heartbeatsCache)||void 0===Re?void 0:Re.heartbeats)))&&K._heartbeatsCache.lastSentHeartbeatDate!==jt&&!K._heartbeatsCache.heartbeats.some(wn=>wn.date===jt))return K._heartbeatsCache.heartbeats.push({date:jt,agent:Ze}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(wn=>{const en=new Date(wn.date).valueOf();return Date.now()-en<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,y.Z)(function*(){var _e;if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null==(null===(_e=K._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||0===K._heartbeatsCache.heartbeats.length)return"";const Re=Bt(),{heartbeatsToSend:ht,unsentEntries:Ze}=function Yn(Q,K=1024){const _e=[];let Re=Q.slice();for(const ht of Q){const Ze=_e.find(jt=>jt.agent===ht.agent);if(Ze){if(Ze.dates.push(ht.date),te(_e)>K){Ze.dates.pop();break}}else if(_e.push({agent:ht.agent,dates:[ht.date]}),te(_e)>K){_e.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:_e,unsentEntries:Re}}(K._heartbeatsCache.heartbeats),jt=(0,fe.L)(JSON.stringify({version:2,heartbeats:ht}));return K._heartbeatsCache.lastSentHeartbeatDate=Re,Ze.length>0?(K._heartbeatsCache.heartbeats=Ze,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),jt})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class ye{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,y.Z)(function*(){if(yield K._canUseIndexedDBPromise){const Re=yield function B(Q){return H.apply(this,arguments)}(K.app);return Re?.heartbeats?Re:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(K){var _e=this;return(0,y.Z)(function*(){var Re;if(yield _e._canUseIndexedDBPromise){const Ze=yield _e.read();return me(_e.app,{lastSentHeartbeatDate:null!==(Re=K.lastSentHeartbeatDate)&&void 0!==Re?Re:Ze.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var _e=this;return(0,y.Z)(function*(){var Re;if(yield _e._canUseIndexedDBPromise){const Ze=yield _e.read();return me(_e.app,{lastSentHeartbeatDate:null!==(Re=K.lastSentHeartbeatDate)&&void 0!==Re?Re:Ze.lastSentHeartbeatDate,heartbeats:[...Ze.heartbeats,...K.heartbeats]})}})()}}function te(Q){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Q})).length}!function ce(Q){pn(new X.wA("platform-logger",K=>new At(K),"PRIVATE")),pn(new X.wA("heartbeat",K=>new bt(K),"PRIVATE")),pi(Yt,"0.9.27",Q),pi(Yt,"0.9.27","esm2017"),pi("fire-js","")}("")},4537:(vt,Pe,O)=>{O.d(Pe,{H0:()=>Oe,wA:()=>z,zt:()=>le});var y=O(5861),X=O(9058);class z{constructor(W,J,he){this.name=W,this.instanceFactory=J,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const fe="[DEFAULT]";class le{constructor(W,J){this.name=W,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const J=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(J)){const he=new X.BH;if(this.instancesDeferred.set(J,he),this.isInitialized(J)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:J});Ue&&he.resolve(Ue)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(W){var J;const he=this.normalizeInstanceIdentifier(W?.identifier),Ue=null!==(J=W?.optional)&&void 0!==J&&J;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(je){if(Ue)return null;throw je}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function pe(De){return"EAGER"===De.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[J,he]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(J);try{const je=this.getOrInitializeService({instanceIdentifier:Ue});he.resolve(je)}catch{}}}}clearInstance(W=fe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,y.Z)(function*(){const J=Array.from(W.instances.values());yield Promise.all([...J.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...J.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=fe){return this.instances.has(W)}getOptions(W=fe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:J={}}=W,he=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:he,options:J});for(const[je,tt]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(je)&&tt.resolve(Ue);return Ue}onInit(W,J){var he;const Ue=this.normalizeInstanceIdentifier(J),je=null!==(he=this.onInitCallbacks.get(Ue))&&void 0!==he?he:new Set;je.add(W),this.onInitCallbacks.set(Ue,je);const tt=this.instances.get(Ue);return tt&&W(tt,Ue),()=>{je.delete(W)}}invokeOnInitCallbacks(W,J){const he=this.onInitCallbacks.get(J);if(he)for(const Ue of he)try{Ue(W,J)}catch{}}getOrInitializeService({instanceIdentifier:W,options:J={}}){let he=this.instances.get(W);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(De=W,De===fe?void 0:De),options:J}),this.instances.set(W,he),this.instancesOptions.set(W,J),this.invokeOnInitCallbacks(he,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,he)}catch{}var De;return he||null}normalizeInstanceIdentifier(W=fe){return this.component?this.component.multipleInstances?W:fe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const J=this.getProvider(W.name);if(J.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);J.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const J=new le(W,this);return this.providers.set(W,J),J}getProviders(){return Array.from(this.providers.values())}}},7879:(vt,Pe,O)=>{O.d(Pe,{Am:()=>De,Ub:()=>Oe,Yd:()=>pe,in:()=>X});const y=[];var X=function(W){return W[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W}(X||{});const z={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},fe=X.INFO,le={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ae=(W,J,...he)=>{if(J<W.logLevel)return;const Ue=(new Date).toISOString(),je=le[J];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[je](`[${Ue}]  ${W.name}:`,...he)};class pe{constructor(J){this.name=J,this._logLevel=fe,this._logHandler=ae,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in X))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?z[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...J),this._logHandler(this,X.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...J),this._logHandler(this,X.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,X.INFO,...J),this._logHandler(this,X.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,X.WARN,...J),this._logHandler(this,X.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...J),this._logHandler(this,X.ERROR,...J)}}function Oe(W){y.forEach(J=>{J.setLogLevel(W)})}function De(W,J){for(const he of y){let Ue=null;J&&J.level&&(Ue=z[J.level]),he.userLogHandler=null===W?null:(je,tt,...qe)=>{const ot=qe.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");tt>=(Ue??je.logLevel)&&W({level:X[tt].toLowerCase(),message:ot,args:qe,type:je.name})}}}},7142:(vt,Pe,O)=>{O.d(Pe,{Z:()=>y.Z});var y=O(3106);y.Z.registerVersion("firebase","10.8.0","app-compat")},999:(vt,Pe,O)=>{O.r(Pe);var y=O(5861),X=O(3106),z=O(9058),fe=O(534),le=O(7879),ae=O(7582),pe=O(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const tt=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ct=new le.Yd("@firebase/auth");function ge(g,...d){Ct.logLevel<=le.in.ERROR&&Ct.error(`Auth (${fe.SDK_VERSION}): ${g}`,...d)}function Ve(g,...d){throw ie(g,...d)}function ve(g,...d){return ie(g,...d)}function He(g,d,f){const _=Object.assign(Object.assign({},qe()),{[d]:f});return new z.LL("auth","Firebase",_).create(d,{appName:g.name})}function We(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Ve(g,"argument-error"),He(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ie(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return ot.create(g,...d)}function Te(g,d,...f){if(!g)throw ie(d,...f)}function Nt(g){const d="INTERNAL ASSERTION FAILED: "+g;throw ge(d),new Error(d)}function At(g,d){g||Nt(d)}function St(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Yt(){return"http:"===rn()||"https:"===rn()}function rn(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Be{constructor(d,f){this.shortDelay=d,this.longDelay=f,At(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function Ye(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ne(g,d){At(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ue{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Be(3e4,6e4);function Se(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Fe(g,d,f,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,y.Z)(function*(g,d,f,_,P={}){return Je(g,P,(0,y.Z)(function*(){let F={},ee={};_&&("GET"===d?ee=_:F={body:JSON.stringify(_)});const Ie=(0,z.xO)(Object.assign({key:g.config.apiKey},ee)).slice(1),ze=yield g._getAdditionalHeaders();return ze["Content-Type"]="application/json",g.languageCode&&(ze["X-Firebase-Locale"]=g.languageCode),ue.fetch()(Wt(g,g.config.apiHost,f,Ie),Object.assign({method:d,headers:ze,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Je(g,d,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,y.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ae),d);try{const P=new fn(g),F=yield Promise.race([f(),P.promise]);P.clearNetworkTimeout();const ee=yield F.json();if("needConfirmation"in ee)throw _n(g,"account-exists-with-different-credential",ee);if(F.ok&&!("errorMessage"in ee))return ee;{const Ie=F.ok?ee.errorMessage:ee.error.message,[ze,pt]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ze)throw _n(g,"credential-already-in-use",ee);if("EMAIL_EXISTS"===ze)throw _n(g,"email-already-in-use",ee);if("USER_DISABLED"===ze)throw _n(g,"user-disabled",ee);const Pt=_[ze]||ze.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw He(g,Pt,pt);Ve(g,Pt)}}catch(P){if(P instanceof z.ZR)throw P;Ve(g,"network-request-failed",{message:String(P)})}})).apply(this,arguments)}function dt(g,d,f,_){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,y.Z)(function*(g,d,f,_,P={}){const F=yield Fe(g,d,f,_,P);return"mfaPendingCredential"in F&&Ve(g,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Wt(g,d,f,_){const P=`${d}${f}?${_}`;return g.config.emulator?ne(g.config,P):`${g.config.apiScheme}://${P}`}function mn(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _n(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const P=ve(g,d,_);return P.customData._tokenResponse=f,P}function it(g){return void 0!==g&&void 0!==g.getResponse}function zn(g){return void 0!==g&&void 0!==g.enterprise}class dn{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return mn(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function Pn(){return(Pn=(0,y.Z)(function*(g){return(yield Fe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oi(g,d){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,y.Z)(function*(g,d){return Fe(g,"GET","/v2/recaptchaConfig",Se(g,d))})).apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Kr(){return(Kr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Sr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Ni(){return(Ni=(0,y.Z)(function*(g,d=!1){const f=(0,z.m9)(g),_=yield f.getIdToken(d),P=jr(_);Te(P&&P.exp&&P.auth_time&&P.iat,f.auth,"internal-error");const F="object"==typeof P.firebase?P.firebase:void 0,ee=F?.sign_in_provider;return{claims:P,token:_,authTime:Sr(wt(P.auth_time)),issuedAtTime:Sr(wt(P.iat)),expirationTime:Sr(wt(P.exp)),signInProvider:ee||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(g){return 1e3*Number(g)}function jr(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,z.tV)(f);return P?JSON.parse(P):(ge("Failed to decode base64 JWT payload"),null)}catch(P){return ge("Caught error parsing JWT payload as JSON",P?.toString()),null}}function Zt(g,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof z.ZR&&function ms({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class gr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const P=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,y.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,y.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Zr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(g){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,y.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),P=yield Zt(g,function Un(g,d){return Kr.apply(this,arguments)}(f,{idToken:_}));Te(P?.users.length,f,"internal-error");const F=P.users[0];g._notifyReloadListener(F);const ee=null!==(d=F.providerUserInfo)&&void 0!==d&&d.length?function Oi(g){return g.map(d=>{var{providerId:f}=d,_=(0,ae._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(F.providerUserInfo):[],Ie=function Qr(g,d){return[...g.filter(_=>!d.some(P=>P.providerId===_.providerId)),...d]}(g.providerData,ee),Pt=!!g.isAnonymous&&!(g.email&&F.passwordHash||Ie?.length),Mt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Ie,metadata:new Zr(F.createdAt,F.lastLoginAt),isAnonymous:Pt};Object.assign(g,Mt)}),Nr.apply(this,arguments)}function gi(){return(gi=(0,y.Z)(function*(g){const d=(0,z.m9)(g);yield er(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function re(){return(re=(0,y.Z)(function*(g,d){const f=yield Je(g,{},(0,y.Z)(function*(){const _=(0,z.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:P,apiKey:F}=g.config,ee=Wt(g,P,"/v1/token",`key=${F}`),Ie=yield g._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(ee,{method:"POST",headers:Ie,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function $(){return($=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v2/accounts:revokeToken",Se(g,d))})).apply(this,arguments)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Te(d.idToken,"internal-error"),Te(typeof d.idToken<"u","internal-error"),Te(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Gt(g){const d=jr(g);return Te(d,"internal-error"),Te(typeof d.exp<"u","internal-error"),Te(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,y.Z)(function*(){return Te(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,y.Z)(function*(){const{accessToken:P,refreshToken:F,expiresIn:ee}=yield function mi(g,d){return re.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(P,F,Number(ee))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:P,expirationTime:F}=f,ee=new B;return _&&(Te("string"==typeof _,"internal-error",{appName:d}),ee.refreshToken=_),P&&(Te("string"==typeof P,"internal-error",{appName:d}),ee.accessToken=P),F&&(Te("number"==typeof F,"internal-error",{appName:d}),ee.expirationTime=F),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function H(g,d){Te("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class me{constructor(d){var{uid:f,auth:_,stsTokenManager:P}=d,F=(0,ae._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Zr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,y.Z)(function*(){const _=yield Zt(f,f.stsTokenManager.getToken(f.auth,d));return Te(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function Qn(g){return Ni.apply(this,arguments)}(this,d)}reload(){return function pi(g){return gi.apply(this,arguments)}(this)}_assign(d){this!==d&&(Te(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new me(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,y.Z)(function*(){let P=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),P=!0),f&&(yield er(_)),yield _.auth._persistUserIfCurrent(_),P&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,y.Z)(function*(){const f=yield d.getIdToken();return yield Zt(d,function Br(g,d){return Rt.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,P,F,ee,Ie,ze,pt,Pt;const Mt=null!==(_=f.displayName)&&void 0!==_?_:void 0,wr=null!==(P=f.email)&&void 0!==P?P:void 0,js=null!==(F=f.phoneNumber)&&void 0!==F?F:void 0,$s=null!==(ee=f.photoURL)&&void 0!==ee?ee:void 0,Pa=null!==(Ie=f.tenantId)&&void 0!==Ie?Ie:void 0,zc=null!==(ze=f._redirectEventId)&&void 0!==ze?ze:void 0,Ef=null!==(pt=f.createdAt)&&void 0!==pt?pt:void 0,Wr=null!==(Pt=f.lastLoginAt)&&void 0!==Pt?Pt:void 0,{uid:Ma,emailVerified:sd,isAnonymous:od,providerData:xa,stsTokenManager:Hs}=f;Te(Ma&&Hs,d,"internal-error");const ad=B.fromJSON(this.name,Hs);Te("string"==typeof Ma,d,"internal-error"),H(Mt,d.name),H(wr,d.name),Te("boolean"==typeof sd,d,"internal-error"),Te("boolean"==typeof od,d,"internal-error"),H(js,d.name),H($s,d.name),H(Pa,d.name),H(zc,d.name),H(Ef,d.name),H(Wr,d.name);const Gc=new me({uid:Ma,auth:d,email:wr,emailVerified:sd,displayName:Mt,isAnonymous:od,photoURL:$s,phoneNumber:js,tenantId:Pa,stsTokenManager:ad,createdAt:Ef,lastLoginAt:Wr});return xa&&Array.isArray(xa)&&(Gc.providerData=xa.map(tc=>Object.assign({},tc))),zc&&(Gc._redirectEventId=zc),Gc}static _fromIdTokenResponse(d,f,_=!1){return(0,y.Z)(function*(){const P=new B;P.updateFromServerResponse(f);const F=new me({uid:f.localId,auth:d,stsTokenManager:P,isAnonymous:_});return yield er(F),F})()}}const $e=new Map;function st(g){At(g instanceof Function,"Expected a class definition");let d=$e.get(g);return d?(At(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,$e.set(g,d),d)}const Ut=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(f,_){var P=this;return(0,y.Z)(function*(){P.storage[f]=_})()}_get(f){var _=this;return(0,y.Z)(function*(){const P=_.storage[f];return void 0===P?null:P})()}_remove(f){var _=this;return(0,y.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function bt(g,d,f){return`firebase:${g}:${d}:${f}`}class Bt{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:P,name:F}=this.auth;this.fullUserKey=bt(this.userKey,P.apiKey,F),this.fullPersistenceKey=bt("persistence",P.apiKey,F),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,y.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?me._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,y.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,y.Z)(function*(){if(!f.length)return new Bt(st(Ut),d,_);const P=(yield Promise.all(f.map(function(){var pt=(0,y.Z)(function*(Pt){if(yield Pt._isAvailable())return Pt});return function(Pt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let F=P[0]||st(Ut);const ee=bt(_,d.config.apiKey,d.name);let Ie=null;for(const pt of f)try{const Pt=yield pt._get(ee);if(Pt){const Mt=me._fromJSON(d,Pt);pt!==F&&(Ie=Mt),F=pt;break}}catch{}const ze=P.filter(pt=>pt._shouldAllowMigration);return F._shouldAllowMigration&&ze.length?(F=ze[0],Ie&&(yield F._set(ee,Ie.toJSON())),yield Promise.all(f.map(function(){var pt=(0,y.Z)(function*(Pt){if(Pt!==F)try{yield Pt._remove(ee)}catch{}});return function(Pt){return pt.apply(this,arguments)}}())),new Bt(F,d,_)):new Bt(F,d,_)})()}}function Yn(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Q(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ye(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_e(d))return"Blackberry";if(Re(d))return"Webos";if(te(d))return"Safari";if((d.includes("chrome/")||ce(d))&&!d.includes("edge/"))return"Chrome";if(K(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ye(g=(0,z.z$)()){return/firefox\//i.test(g)}function te(g=(0,z.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ce(g=(0,z.z$)()){return/crios\//i.test(g)}function Q(g=(0,z.z$)()){return/iemobile/i.test(g)}function K(g=(0,z.z$)()){return/android/i.test(g)}function _e(g=(0,z.z$)()){return/blackberry/i.test(g)}function Re(g=(0,z.z$)()){return/webos/i.test(g)}function ht(g=(0,z.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function en(g=(0,z.z$)()){return ht(g)||K(g)||Re(g)||_e(g)||/windows phone/i.test(g)||Q(g)}function br(g,d=[]){let f;switch(g){case"Browser":f=Yn((0,z.z$)());break;case"Worker":f=`${Yn((0,z.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${fe.SDK_VERSION}/${_}`}class Or{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=F=>new Promise((ee,Ie)=>{try{ee(d(F))}catch(ze){Ie(ze)}});_.onAbort=f,this.queue.push(_);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,y.Z)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const P of f.queue)yield P(d),P.onAbort&&_.push(P.onAbort)}catch(P){_.reverse();for(const F of _)try{F()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}function xn(){return(xn=(0,y.Z)(function*(g,d={}){return Fe(g,"GET","/v2/passwordPolicy",Se(g,d))})).apply(this,arguments)}class Gs{constructor(d){var f,_,P,F;const ee=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=ee.minPasswordLength)&&void 0!==f?f:6,ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ee.maxPasswordLength),void 0!==ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ee.containsLowercaseCharacter),void 0!==ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ee.containsUppercaseCharacter),void 0!==ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ee.containsNumericCharacter),void 0!==ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ee.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(P=null===(_=d.allowedNonAlphanumericCharacters)||void 0===_?void 0:_.join(""))&&void 0!==P?P:"",this.forceUpgradeOnSignin=null!==(F=d.forceUpgradeOnSignin)&&void 0!==F&&F,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,_,P,F,ee,Ie;const ze={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,ze),this.validatePasswordCharacterOptions(d,ze),ze.isValid&&(ze.isValid=null===(f=ze.meetsMinPasswordLength)||void 0===f||f),ze.isValid&&(ze.isValid=null===(_=ze.meetsMaxPasswordLength)||void 0===_||_),ze.isValid&&(ze.isValid=null===(P=ze.containsLowercaseLetter)||void 0===P||P),ze.isValid&&(ze.isValid=null===(F=ze.containsUppercaseLetter)||void 0===F||F),ze.isValid&&(ze.isValid=null===(ee=ze.containsNumericCharacter)||void 0===ee||ee),ze.isValid&&(ze.isValid=null===(Ie=ze.containsNonAlphanumericCharacter)||void 0===Ie||Ie),ze}validatePasswordLengthOptions(d,f){const _=this.customStrengthOptions.minPasswordLength,P=this.customStrengthOptions.maxPasswordLength;_&&(f.meetsMinPasswordLength=d.length>=_),P&&(f.meetsMaxPasswordLength=d.length<=P)}validatePasswordCharacterOptions(d,f){let _;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let P=0;P<d.length;P++)_=d.charAt(P),this.updatePasswordCharacterOptionsStatuses(f,_>="a"&&_<="z",_>="A"&&_<="Z",_>="0"&&_<="9",this.allowedNonAlphanumericCharacters.includes(_))}updatePasswordCharacterOptionsStatuses(d,f,_,P,F){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=_)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=P)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=F))}}class mr{constructor(d,f,_,P){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ci(this),this.idTokenSubscription=new Ci(this),this.beforeStateQueue=new Or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=st(f)),this._initializationPromise=this.queue((0,y.Z)(function*(){var P,F;if(!_._deleted&&(_.persistenceManager=yield Bt.create(_,d),!_._deleted)){if(null!==(P=_._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(F=_.currentUser)||void 0===F?void 0:F.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,y.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,y.Z)(function*(){var _;const P=yield f.assertedPersistence.getCurrentUser();let F=P,ee=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Ie=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,ze=F?._redirectEventId,pt=yield f.tryRedirectSignIn(d);(!Ie||Ie===ze)&&pt?.user&&(F=pt.user,ee=!0)}if(!F)return f.directlySetCurrentUser(null);if(!F._redirectEventId){if(ee)try{yield f.beforeStateQueue.runMiddleware(F)}catch(Ie){F=P,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Ie))}return F?f.reloadAndSetCurrentUserOrClear(F):f.directlySetCurrentUser(null)}return Te(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===F._redirectEventId?f.directlySetCurrentUser(F):f.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(d){var f=this;return(0,y.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,y.Z)(function*(){try{yield er(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function lt(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,y.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,y.Z)(function*(){const _=d?(0,z.m9)(d):null;return _&&Te(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,y.Z)(function*(){if(!_._deleted)return d&&Te(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,y.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,y.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,y.Z)(function*(){yield f.assertedPersistence.setPersistence(st(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,y.Z)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const _=f._getPasswordPolicyInternal();return _.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):_.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,y.Z)(function*(){const f=yield function Mn(g){return xn.apply(this,arguments)}(d),_=new Gs(f);null===d.tenantId?d._projectPasswordPolicy=_:d._tenantPasswordPolicies[d.tenantId]=_})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new z.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const _=this.onAuthStateChanged(()=>{_(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,y.Z)(function*(){if(f.currentUser){const _=yield f.currentUser.getIdToken(),P={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:_};null!=f.tenantId&&(P.tenantId=f.tenantId),yield function j(g,d){return $.apply(this,arguments)}(f,P)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,y.Z)(function*(){const P=yield _.getOrInitRedirectPersistenceManager(f);return null===d?P.removeCurrentUser():P.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,y.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&st(d)||f._popupRedirectResolver;Te(_,f,"argument-error"),f.redirectPersistenceManager=yield Bt.create(f,[st(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,y.Z)(function*(){var _,P;return f._isInitialized&&(yield f.queue((0,y.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(P=f.redirectUser)||void 0===P?void 0:P._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,y.Z)(function*(){if(d===f.currentUser)return f.queue((0,y.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,P){if(this._deleted)return()=>{};const F="function"==typeof f?f:f.next.bind(f);let ee=!1;const Ie=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(Ie,this,"internal-error"),Ie.then(()=>{ee||F(this.currentUser)}),"function"==typeof f){const ze=d.addObserver(f,_,P);return()=>{ee=!0,ze()}}{const ze=d.addObserver(f);return()=>{ee=!0,ze()}}}directlySetCurrentUser(d){var f=this;return(0,y.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=br(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,y.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const P=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();P&&(_["X-Firebase-Client"]=P);const F=yield d._getAppCheckToken();return F&&(_["X-Firebase-AppCheck"]=F),_})()}_getAppCheckToken(){var d=this;return(0,y.Z)(function*(){var f;const _=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function mt(g,...d){Ct.logLevel<=le.in.WARN&&Ct.warn(`Auth (${fe.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function hn(g){return(0,z.m9)(g)}class Ci{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,z.ne)(f=>this.observer=f)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ji={loadJS:()=>(0,y.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _s(g){return Ji.loadJS(g)}function _i(g){return`__${g}${Math.floor(1e6*Math.random())}`}class Li{constructor(d){this.type="recaptcha-enterprise",this.auth=hn(d)}verify(d="verify",f=!1){var _=this;return(0,y.Z)(function*(){function F(){return F=(0,y.Z)(function*(Ie){if(!f){if(null==Ie.tenantId&&null!=Ie._agentRecaptchaConfig)return Ie._agentRecaptchaConfig.siteKey;if(null!=Ie.tenantId&&void 0!==Ie._tenantRecaptchaConfigs[Ie.tenantId])return Ie._tenantRecaptchaConfigs[Ie.tenantId].siteKey}return new Promise(function(){var ze=(0,y.Z)(function*(pt,Pt){oi(Ie,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Mt=>{if(void 0!==Mt.recaptchaKey){const wr=new dn(Mt);return null==Ie.tenantId?Ie._agentRecaptchaConfig=wr:Ie._tenantRecaptchaConfigs[Ie.tenantId]=wr,pt(wr.siteKey)}Pt(new Error("recaptcha Enterprise site key undefined"))}).catch(Mt=>{Pt(Mt)})});return function(pt,Pt){return ze.apply(this,arguments)}}())}),F.apply(this,arguments)}function ee(Ie,ze,pt){const Pt=window.grecaptcha;zn(Pt)?Pt.enterprise.ready(()=>{Pt.enterprise.execute(Ie,{action:d}).then(Mt=>{ze(Mt)}).catch(()=>{ze("NO_RECAPTCHA")})}):pt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ie,ze)=>{(function P(Ie){return F.apply(this,arguments)})(_.auth).then(pt=>{if(!f&&zn(window.grecaptcha))ee(pt,Ie,ze);else{if(typeof window>"u")return void ze(new Error("RecaptchaVerifier is only supported in browser"));let Pt=function Bo(){return Ji.recaptchaEnterpriseScript}();0!==Pt.length&&(Pt+=pt),_s(Pt).then(()=>{ee(pt,Ie,ze)}).catch(Mt=>{ze(Mt)})}}).catch(pt=>{ze(pt)})})})()}}function yo(g,d,f){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(g,d,f,_=!1){const P=new Li(g);let F;try{F=yield P.verify(f)}catch{F=yield P.verify(f,!0)}const ee=Object.assign({},d);return Object.assign(ee,_?{captchaResp:F}:{captchaResponse:F}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}function Fi(g,d,f,_){return ja.apply(this,arguments)}function ja(){return ja=(0,y.Z)(function*(g,d,f,_){var P;if(null!==(P=g._getRecaptchaConfig())&&void 0!==P&&P.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const F=yield yo(g,d,f,"getOobCode"===f);return _(g,F)}return _(g,d).catch(function(){var F=(0,y.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ie=yield yo(g,d,f,"getOobCode"===f);return _(g,Ie)}return Promise.reject(ee)});return function(ee){return F.apply(this,arguments)}}())}),ja.apply(this,arguments)}function ca(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Ho(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Xi{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Nt("not implemented")}_getIdTokenResponse(d){return Nt("not implemented")}_linkToIdToken(d,f){return Nt("not implemented")}_getReauthenticationResolver(d){return Nt("not implemented")}}function Eo(g,d){return an.apply(this,arguments)}function an(){return(an=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:resetPassword",Se(g,d))})).apply(this,arguments)}function Rr(){return(Rr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Vi(g,d){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function es(){return(es=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",Se(g,d))})).apply(this,arguments)}function Ai(g,d){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPassword",Se(g,d))})).apply(this,arguments)}function Zs(g,d){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:sendOobCode",Se(g,d))})).apply(this,arguments)}function $t(){return($t=(0,y.Z)(function*(g,d){return Zs(g,d)})).apply(this,arguments)}function Bn(g,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,y.Z)(function*(g,d){return Zs(g,d)})).apply(this,arguments)}function Qs(g,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,y.Z)(function*(g,d){return Zs(g,d)})).apply(this,arguments)}function jn(){return(jn=(0,y.Z)(function*(g,d){return Zs(g,d)})).apply(this,arguments)}function Xr(){return(Xr=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithEmailLink",Se(g,d))})).apply(this,arguments)}function Io(){return(Io=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithEmailLink",Se(g,d))})).apply(this,arguments)}class vs extends Xi{constructor(d,f,_,P=null){super("password",_),this._email=d,this._password=f,this._tenantId=P}static _fromEmailAndPassword(d,f){return new vs(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new vs(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,y.Z)(function*(){switch(f.signInMethod){case"password":return Fi(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ai);case"emailLink":return function vi(g,d){return Xr.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Ve(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,y.Z)(function*(){switch(_.signInMethod){case"password":return Fi(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vi);case"emailLink":return function qt(g,d){return Io.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Ve(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ai(g,d){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithIdp",Se(g,d))})).apply(this,arguments)}class _r extends Xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new _r(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Ve("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:P}=f,F=(0,ae._T)(f,["providerId","signInMethod"]);if(!_||!P)return null;const ee=new _r(_,P);return ee.idToken=F.idToken||void 0,ee.accessToken=F.accessToken||void 0,ee.secret=F.secret,ee.nonce=F.nonce,ee.pendingToken=F.pendingToken||null,ee}_getIdTokenResponse(d){return ai(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,ai(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ai(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,z.xO)(f)}return d}}function Ui(){return(Ui=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:sendVerificationCode",Se(g,d))})).apply(this,arguments)}function Bi(){return(Bi=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Se(g,d))})).apply(this,arguments)}function Si(){return(Si=(0,y.Z)(function*(g,d){const f=yield dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Se(g,d));if(f.temporaryProof)throw _n(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Es={USER_NOT_FOUND:"user-not-found"};function gc(){return(gc=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithPhoneNumber",Se(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Es)})).apply(this,arguments)}class Is extends Xi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Is({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Is({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function zo(g,d){return Bi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function An(g,d){return Si.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function tn(g,d){return gc.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:P}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:P}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:P,temporaryProof:F}=d;return _||f||P||F?new Is({verificationId:f,verificationCode:_,phoneNumber:P,temporaryProof:F}):null}}class Ys{constructor(d){var f,_,P,F,ee,Ie;const ze=(0,z.zd)((0,z.pd)(d)),pt=null!==(f=ze.apiKey)&&void 0!==f?f:null,Pt=null!==(_=ze.oobCode)&&void 0!==_?_:null,Mt=function la(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=ze.mode)&&void 0!==P?P:null);Te(pt&&Pt&&Mt,"argument-error"),this.apiKey=pt,this.operation=Mt,this.code=Pt,this.continueUrl=null!==(F=ze.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ee=ze.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Ie=ze.tenantId)&&void 0!==Ie?Ie:null}static parseLink(d){const f=function ws(g){const d=(0,z.zd)((0,z.pd)(g)).link,f=d?(0,z.zd)((0,z.pd)(d)).deep_link_id:null,_=(0,z.zd)((0,z.pd)(g)).deep_link_id;return(_?(0,z.zd)((0,z.pd)(_)).link:null)||_||f||d||g}(d);try{return new Ys(f)}catch{return null}}}let Wi=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return vs._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const P=Ys.parseLink(_);return Te(P,"argument-error"),vs._fromEmailAndCode(f,P.code,P.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Nn{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Js extends Nn{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ln extends Js{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return Te("providerId"in f&&"signInMethod"in f,"argument-error"),_r._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Te(d.idToken||d.accessToken,"argument-error"),_r._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ln.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ln.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:P,pendingToken:F,nonce:ee,providerId:Ie}=d;if(!_&&!P&&!f&&!F||!Ie)return null;try{return new Ln(Ie)._credential({idToken:f,accessToken:_,nonce:ee,pendingToken:F})}catch{return null}}}let $r=(()=>{class g extends Js{constructor(){super("facebook.com")}static credential(f){return _r._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),bi=(()=>{class g extends Js{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return _r._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:P}=f;if(!_&&!P)return null;try{return g.credential(_,P)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),wo=(()=>{class g extends Js{constructor(){super("github.com")}static credential(f){return _r._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Hr extends Xi{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return ai(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,ai(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ai(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:P,pendingToken:F}=f;return _&&P&&F&&_===P?new Hr(_,F):null}static _create(d,f){return new Hr(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ns extends Nn{constructor(d){Te(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ns.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ns.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Hr.fromJSON(d);return Te(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return Hr._create(_,f)}catch{return null}}}let Ou=(()=>{class g extends Js{constructor(){super("twitter.com")}static credential(f,_){return _r._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:P}=f;if(!_||!P)return null;try{return g.credential(_,P)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function ku(g,d){return ts.apply(this,arguments)}function ts(){return(ts=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signUp",Se(g,d))})).apply(this,arguments)}class zr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,P=!1){return(0,y.Z)(function*(){const F=yield me._fromIdTokenResponse(d,_,P),ee=Lu(_);return new zr({user:F,providerId:ee,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,y.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const P=Lu(_);return new zr({user:d,providerId:P,_tokenResponse:_,operationType:f})})()}}function Lu(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Go(){return(Go=(0,y.Z)(function*(g){var d;const f=hn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new zr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield ku(f,{returnSecureToken:!0}),P=yield zr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}class $n extends z.ZR{constructor(d,f,_,P){var F;super(f.code,f.message),this.operationType=_,this.user=P,Object.setPrototypeOf(this,$n.prototype),this.customData={appName:d.name,tenantId:null!==(F=d.tenantId)&&void 0!==F?F:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,P){return new $n(d,f,_,P)}}function Dl(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?$n._fromErrorAndOperation(g,F,d,_):F})}function za(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function fa(){return fa=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g);yield Wo(!0,f,d);const{providerUserInfo:_}=yield function zt(g,d){return Vt.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),P=za(_||[]);return f.providerData=f.providerData.filter(F=>P.has(F.providerId)),P.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),fa.apply(this,arguments)}function Wa(g,d){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,y.Z)(function*(g,d,f=!1){const _=yield Zt(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return zr._forOperation(g,"link",_)})).apply(this,arguments)}function Wo(g,d,f){return To.apply(this,arguments)}function To(){return(To=(0,y.Z)(function*(g,d,f){yield er(d);const P=!1===g?"provider-already-linked":"no-such-provider";Te(za(d.providerData).has(f)===g,d.auth,P)})).apply(this,arguments)}function qa(g,d){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(g,d,f=!1){const{auth:_}=g,P="reauthenticate";try{const F=yield Zt(g,Dl(_,P,d,g),f);Te(F.idToken,_,"internal-error");const ee=jr(F.idToken);Te(ee,_,"internal-error");const{sub:Ie}=ee;return Te(g.uid===Ie,_,"user-mismatch"),zr._forOperation(g,P,F)}catch(F){throw"auth/user-not-found"===F?.code&&Ve(_,"user-mismatch"),F}})).apply(this,arguments)}function Do(g,d){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,y.Z)(function*(g,d,f=!1){const _="signIn",P=yield Dl(g,_,d),F=yield zr._fromIdTokenResponse(g,_,P);return f||(yield g._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Za(g,d){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,y.Z)(function*(g,d){return Do(hn(g),d)})).apply(this,arguments)}function ji(g,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g);return yield Wo(!1,f,d.providerId),Wa(f,d)})).apply(this,arguments)}function mc(g,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,y.Z)(function*(g,d){return qa((0,z.m9)(g),d)})).apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(g,d){return dt(g,"POST","/v1/accounts:signInWithCustomToken",Se(g,d))})).apply(this,arguments)}function Ya(){return Ya=(0,y.Z)(function*(g,d){const f=hn(g),_=yield function Co(g,d){return nr.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),P=yield zr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(P.user),P}),Ya.apply(this,arguments)}class ns{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?Os._fromServerResponse(d,f):"totpInfo"in f?Ri._fromServerResponse(d,f):Ve(d,"internal-error")}}class Os extends ns{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new Os(f)}}class Ri extends ns{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new Ri(f)}}function Ao(g,d,f){var _;Te((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),Te(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Te(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(Te(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function So(g){return eo.apply(this,arguments)}function eo(){return(eo=(0,y.Z)(function*(g){const d=hn(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(g,d,f){const _=hn(g),P={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&Ao(_,P,f),yield Fi(_,P,"getOobCode",Bn)})).apply(this,arguments)}function Ls(){return Ls=(0,y.Z)(function*(g,d,f){yield Eo((0,z.m9)(g),{oobCode:d,newPassword:f}).catch(function(){var _=(0,y.Z)(function*(P){throw"auth/password-does-not-meet-requirements"===P.code&&So(g),P});return function(P){return _.apply(this,arguments)}}())}),Ls.apply(this,arguments)}function Fs(){return Fs=(0,y.Z)(function*(g,d){yield function Ks(g,d){return es.apply(this,arguments)}((0,z.m9)(g),{oobCode:d})}),Fs.apply(this,arguments)}function pa(g,d){return ga.apply(this,arguments)}function ga(){return(ga=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g),_=yield Eo(f,{oobCode:d}),P=_.requestType;switch(Te(P,f,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(_.mfaInfo,f,"internal-error");default:Te(_.email,f,"internal-error")}let F=null;return _.mfaInfo&&(F=ns._fromServerResponse(hn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:F},operation:P}})).apply(this,arguments)}function qo(){return(qo=(0,y.Z)(function*(g,d){const{data:f}=yield pa((0,z.m9)(g),d);return f.email})).apply(this,arguments)}function Xa(){return(Xa=(0,y.Z)(function*(g,d,f){const _=hn(g),ee=yield Fi(_,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ku).catch(ze=>{throw"auth/password-does-not-meet-requirements"===ze.code&&So(g),ze}),Ie=yield zr._fromIdTokenResponse(_,"signIn",ee);return yield _._updateCurrentUser(Ie.user),Ie})).apply(this,arguments)}function Ko(){return(Ko=(0,y.Z)(function*(g,d,f){const _=hn(g),P={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function F(ee,Ie){Te(Ie.handleCodeInApp,_,"argument-error"),Ie&&Ao(_,ee,Ie)})(P,f),yield Fi(_,P,"getOobCode",Qs)})).apply(this,arguments)}function Ec(){return(Ec=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),P=Wi.credentialWithLink(d,f||St());return Te(P._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Za(_,P)})).apply(this,arguments)}function ui(){return(ui=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:createAuthUri",Se(g,d))})).apply(this,arguments)}function k(){return k=(0,y.Z)(function*(g,d){const _={identifier:d,continueUri:Yt()?St():"http://localhost"},{signinMethods:P}=yield function no(g,d){return ui.apply(this,arguments)}((0,z.m9)(g),_);return P||[]}),k.apply(this,arguments)}function N(){return N=(0,y.Z)(function*(g,d){const f=(0,z.m9)(g),P={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ao(f.auth,P,d);const{email:F}=yield function yt(g,d){return $t.apply(this,arguments)}(f.auth,P);F!==g.email&&(yield g.reload())}),N.apply(this,arguments)}function Me(){return Me=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Ao(_.auth,F,f);const{email:ee}=yield function ys(g,d){return jn.apply(this,arguments)}(_.auth,F);ee!==g.email&&(yield g.reload())}),Me.apply(this,arguments)}function Tt(){return(Tt=(0,y.Z)(function*(g,d){return Fe(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function un(){return un=(0,y.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,z.m9)(g),F={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},ee=yield Zt(_,function ke(g,d){return Tt.apply(this,arguments)}(_.auth,F));_.displayName=ee.displayName||null,_.photoURL=ee.photoUrl||null;const Ie=_.providerData.find(({providerId:ze})=>"password"===ze);Ie&&(Ie.displayName=_.displayName,Ie.photoURL=_.photoURL),yield _._updateTokensIfNecessary(ee)}),un.apply(this,arguments)}function Fn(g,d,f){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,y.Z)(function*(g,d,f){const{auth:_}=g,F={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(F.email=d),f&&(F.password=f);const ee=yield Zt(g,function Dr(g,d){return Rr.apply(this,arguments)}(_,F));yield g._updateTokensIfNecessary(ee,!0)}),Tn.apply(this,arguments)}class cr{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class hr extends cr{constructor(d,f,_,P){super(d,f,_),this.username=P}}class fr extends cr{constructor(d,f){super(d,"facebook.com",f)}}class ei extends hr{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class is extends cr{constructor(d,f){super(d,"google.com",f)}}class lr extends hr{constructor(d,f,_){super(d,"twitter.com",f,_)}}function ss(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Cr(g){var d,f;if(!g)return null;const{providerId:_}=g,P=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},F=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const ee=null===(f=null===(d=jr(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(ee)return new cr(F,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!_)return null;switch(_){case"facebook.com":return new fr(F,P);case"github.com":return new ei(F,P);case"google.com":return new is(F,P);case"twitter.com":return new lr(F,P,g.screenName||null);case"custom":case"anonymous":return new cr(F,null);default:return new cr(F,_,P)}}(f)}class Vs{constructor(d,f,_){this.type=d,this.credential=f,this.user=_}static _fromIdtoken(d,f){return new Vs("enroll",d,f)}static _fromMfaPendingCredential(d){return new Vs("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Vs._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Vs._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Gr{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=hn(d),P=f.customData._serverResponse,F=(P.mfaInfo||[]).map(Ie=>ns._fromServerResponse(_,Ie));Te(P.mfaPendingCredential,_,"internal-error");const ee=Vs._fromMfaPendingCredential(P.mfaPendingCredential);return new Gr(ee,F,function(){var Ie=(0,y.Z)(function*(ze){const pt=yield ze._process(_,ee);delete P.mfaInfo,delete P.mfaPendingCredential;const Pt=Object.assign(Object.assign({},P),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(f.operationType){case"signIn":const Mt=yield zr._fromIdTokenResponse(_,f.operationType,Pt);return yield _._updateCurrentUser(Mt.user),Mt;case"reauthenticate":return Te(f.user,_,"internal-error"),zr._forOperation(f.user,f.operationType,Pt);default:Ve(_,"internal-error")}});return function(ze){return Ie.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,y.Z)(function*(){return f.signInResolver(d)})()}}class Er{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>ns._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Er(d)}getSession(){var d=this;return(0,y.Z)(function*(){return Vs._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var _=this;return(0,y.Z)(function*(){const P=d,F=yield _.getSession(),ee=yield Zt(_.user,P._process(_.user.auth,F,f));return yield _.user._updateTokensIfNecessary(ee),_.user.reload()})()}unenroll(d){var f=this;return(0,y.Z)(function*(){const _="string"==typeof d?d:d.uid,P=yield f.user.getIdToken();try{const F=yield Zt(f.user,function vr(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Se(g,d))}(f.user.auth,{idToken:P,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ee})=>ee!==_),yield f.user._updateTokensIfNecessary(F),yield f.user.reload()}catch(F){throw F}})()}}const eu=new WeakMap,xt="__sak";class bl{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(xt,"1"),this.storage.removeItem(xt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const tu=(()=>{class g extends bl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function at(){const g=(0,z.z$)();return te(g)||ht(g)}()&&function tr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=en(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const P=this.storage.getItem(_),F=this.localCache[_];P!==F&&f(_,F,P)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((Ie,ze,pt)=>{this.notifyListeners(Ie,pt)});const P=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(P);if(f.newValue!==Ie)null!==f.newValue?this.storage.setItem(P,f.newValue):this.storage.removeItem(P);else if(this.localCache[P]===f.newValue&&!_)return}const F=()=>{const Ie=this.storage.getItem(P);!_&&this.localCache[P]===Ie||this.notifyListeners(P,Ie)},ee=this.storage.getItem(P);!function wn(){return(0,z.w1)()&&10===document.documentMode}()||ee===f.newValue||f.newValue===f.oldValue?F():setTimeout(F,10)}notifyListeners(f,_){this.localCache[f]=_;const P=this.listeners[f];if(P)for(const F of Array.from(P))F(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var P=()=>super._set,F=this;return(0,y.Z)(function*(){yield P().call(F,f,_),F.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,P=this;return(0,y.Z)(function*(){const F=yield _().call(P,f);return P.localCache[f]=JSON.stringify(F),F})()}_remove(f){var _=()=>super._remove,P=this;return(0,y.Z)(function*(){yield _().call(P,f),delete P.localCache[f]})()}}return g.type="LOCAL",g})(),Ke=(()=>{class g extends bl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Yd=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(F=>F.isListeningto(f));if(_)return _;const P=new g(f);return this.receivers.push(P),P}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,y.Z)(function*(){const P=f,{eventId:F,eventType:ee,data:Ie}=P.data,ze=_.handlersMap[ee];if(!ze?.size)return;P.ports[0].postMessage({status:"ack",eventId:F,eventType:ee});const pt=Array.from(ze).map(function(){var Mt=(0,y.Z)(function*(wr){return wr(P.origin,Ie)});return function(wr){return Mt.apply(this,arguments)}}()),Pt=yield function bn(g){return Promise.all(g.map(function(){var d=(0,y.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(pt);P.ports[0].postMessage({status:"done",eventId:F,eventType:ee,response:Pt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function nu(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class li{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var P=this;return(0,y.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ee,Ie;return new Promise((ze,pt)=>{const Pt=nu("",20);F.port1.start();const Mt=setTimeout(()=>{pt(new Error("unsupported_event"))},_);Ie={messageChannel:F,onMessage(wr){const js=wr;if(js.data.eventId===Pt)switch(js.data.status){case"ack":clearTimeout(Mt),ee=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),ze(js.data.response);break;default:clearTimeout(Mt),clearTimeout(ee),pt(new Error("invalid_response"))}}},P.handlers.add(Ie),F.port1.addEventListener("message",Ie.onMessage),P.target.postMessage({eventType:d,eventId:Pt,data:f},[F.port2])}).finally(()=>{Ie&&P.removeMessageHandler(Ie)})})()}}function Pr(){return window}function qi(){return typeof Pr().WorkerGlobalScope<"u"&&"function"==typeof Pr().importScripts}function Kt(){return(Kt=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const rr="firebaseLocalStorageDb",Ii="firebaseLocalStorage",gn="fbase_key";class Cs{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function En(g,d){return g.transaction([Ii],d?"readwrite":"readonly").objectStore(Ii)}function bo(){const g=indexedDB.open(rr,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(Ii,{keyPath:gn})}catch(P){f(P)}}),g.addEventListener("success",(0,y.Z)(function*(){const _=g.result;_.objectStoreNames.contains(Ii)?d(_):(_.close(),yield function _t(){const g=indexedDB.deleteDatabase(rr);return new Cs(g).toPromise()}(),d(yield bo()))}))})}function Tc(g,d,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(g,d,f){const _=En(g,!0).put({[gn]:d,value:f});return new Cs(_).toPromise()})).apply(this,arguments)}function Us(){return(Us=(0,y.Z)(function*(g,d){const f=En(g,!1).get(d),_=yield new Cs(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function I(g,d){const f=En(g,!0).delete(d);return new Cs(f).toPromise()}const R=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,y.Z)(function*(){return f.db||(f.db=yield bo()),f.db})()}_withRetries(f){var _=this;return(0,y.Z)(function*(){let P=0;for(;;)try{const F=yield _._openDb();return yield f(F)}catch(F){if(P++>3)throw F;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,y.Z)(function*(){return qi()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,y.Z)(function*(){f.receiver=Yd._getInstance(function Jd(){return qi()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,y.Z)(function*(P,F){return{keyProcessed:(yield f._poll()).includes(F.key)}});return function(P,F){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,y.Z)(function*(P,F){return["keyChanged"]});return function(P,F){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,y.Z)(function*(){var _,P;if(f.activeServiceWorker=yield function Bu(){return Kt.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new li(f.activeServiceWorker);const F=yield f.sender._send("ping",{},800);F&&null!==(_=F[0])&&void 0!==_&&_.fulfilled&&null!==(P=F[0])&&void 0!==P&&P.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,y.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function va(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const f=yield bo();return yield Tc(f,xt,"1"),yield I(f,xt),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,y.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var P=this;return(0,y.Z)(function*(){return P._withPendingWrite((0,y.Z)(function*(){return yield P._withRetries(F=>Tc(F,f,_)),P.localCache[f]=_,P.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,y.Z)(function*(){const P=yield _._withRetries(F=>function Rl(g,d){return Us.apply(this,arguments)}(F,f));return _.localCache[f]=P,P})()}_remove(f){var _=this;return(0,y.Z)(function*(){return _._withPendingWrite((0,y.Z)(function*(){return yield _._withRetries(P=>I(P,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,y.Z)(function*(){const _=yield f._withRetries(ee=>{const Ie=En(ee,!1).getAll();return new Cs(Ie).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const P=[],F=new Set;if(0!==_.length)for(const{fbase_key:ee,value:Ie}of _)F.add(ee),JSON.stringify(f.localCache[ee])!==JSON.stringify(Ie)&&(f.notifyListeners(ee,Ie),P.push(ee));for(const ee of Object.keys(f.localCache))f.localCache[ee]&&!F.has(ee)&&(f.notifyListeners(ee,null),P.push(ee));return P})()}notifyListeners(f,_){this.localCache[f]=_;const P=this.listeners[f];if(P)for(const F of Array.from(P))F(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),se=1e12;class qn{constructor(d){this.auth=d,this.counter=se,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new kt(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||se;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||se))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,y.Z)(function*(){var _;return null===(_=f._widgets.get(d||se))||void 0===_||_.execute(),""})()}}class kt{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof d?document.getElementById(d):d;Te(P,"argument-error",{appName:f}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Mi(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kn=_i("rcb"),os=new Be(3e4,6e4);class Dc{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Pr().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return Te(function as(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&it(Pr().grecaptcha)?Promise.resolve(Pr().grecaptcha):new Promise((_,P)=>{const F=Pr().setTimeout(()=>{P(ve(d,"network-request-failed"))},os.get());Pr()[kn]=()=>{Pr().clearTimeout(F),delete Pr()[kn];const Ie=Pr().grecaptcha;if(!Ie||!it(Ie))return void P(ve(d,"internal-error"));const ze=Ie.render;Ie.render=(pt,Pt)=>{const Mt=ze(pt,Pt);return this.counter++,Mt},this.hostLanguage=f,_(Ie)},_s(`${function aa(){return Ji.recaptchaV2Script}()}?${(0,z.xO)({onload:kn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(F),P(ve(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Pr().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pl{load(d){return(0,y.Z)(function*(){return new qn(d)})()}clearedOneInstance(){}}const Cc="recaptcha",Xh={theme:"light",type:"image"};class Ml{constructor(d,f,_=Object.assign({},Xh)){this.parameters=_,this.type=Cc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(d),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof f?document.getElementById(f):f;Te(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pl:new Dc,this.validateStartingState()}verify(){var d=this;return(0,y.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(F=>{const ee=Ie=>{Ie&&(d.tokenChangeListeners.delete(ee),F(Ie))};d.tokenChangeListeners.add(ee),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Pr()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,y.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,y.Z)(function*(){Te(Yt()&&!qi(),d.auth,"internal-error"),yield function ni(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Vn(g){return Pn.apply(this,arguments)}(d.auth);Te(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ru{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Is._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function iu(){return(iu=(0,y.Z)(function*(g,d,f){const _=hn(g),P=yield Sc(_,d,(0,z.m9)(f));return new ru(P,F=>Za(_,F))})).apply(this,arguments)}function Ac(){return(Ac=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);yield Wo(!1,_,"phone");const P=yield Sc(_.auth,d,(0,z.m9)(f));return new ru(P,F=>ji(_,F))})).apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g),P=yield Sc(_.auth,d,(0,z.m9)(f));return new ru(P,F=>mc(_,F))})).apply(this,arguments)}function Sc(g,d,f){return so.apply(this,arguments)}function so(){return so=(0,y.Z)(function*(g,d,f){var _;const P=yield f.verify();try{let F;if(Te("string"==typeof P,g,"argument-error"),Te(f.type===Cc,g,"argument-error"),F="string"==typeof d?{phoneNumber:d}:d,"session"in F){const ee=F.session;if("phoneNumber"in F)return Te("enroll"===ee.type,g,"internal-error"),(yield function ro(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:start",Se(g,d))}(g,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{Te("signin"===ee.type,g,"internal-error");const Ie=(null===(_=F.multiFactorHint)||void 0===_?void 0:_.uid)||F.multiFactorUid;return Te(Ie,g,"missing-multi-factor-info"),(yield function U(g,d){return Fe(g,"POST","/v2/accounts/mfaSignIn:start",Se(g,d))}(g,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Fr(g,d){return Ui.apply(this,arguments)}(g,{phoneNumber:F.phoneNumber,recaptchaToken:P});return ee}}finally{f._reset()}}),so.apply(this,arguments)}function eh(){return(eh=(0,y.Z)(function*(g,d){yield Wa((0,z.m9)(g),d)})).apply(this,arguments)}let xl=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=hn(f)}verifyPhoneNumber(f,_){return Sc(this.auth,f,(0,z.m9)(_))}static credential(f,_){return Is._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:P}=f;return _&&P?Is._fromTokenResponse(_,P):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Zo(g,d){return d?st(d):(Te(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class ef extends Xi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ai(d,this._buildIdpRequest())}_linkToIdToken(d,f){return ai(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return ai(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function dg(g){return Do(g.auth,new ef(g),g.bypassAuthState)}function hg(g){const{auth:d,user:f}=g;return Te(f,d,"internal-error"),qa(f,new ef(g),g.bypassAuthState)}function m_(g){return tf.apply(this,arguments)}function tf(){return(tf=(0,y.Z)(function*(g){const{auth:d,user:f}=g;return Te(f,d,"internal-error"),Wa(f,new ef(g),g.bypassAuthState)})).apply(this,arguments)}class Nl{constructor(d,f,_,P,F=!1){this.auth=d,this.resolver=_,this.user=P,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,y.Z)(function*(_,P){d.pendingPromise={resolve:_,reject:P};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(F){d.reject(F)}});return function(_,P){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,y.Z)(function*(){const{urlResponse:_,sessionId:P,postBody:F,tenantId:ee,error:Ie,type:ze}=d;if(Ie)return void f.reject(Ie);const pt={auth:f.auth,requestUri:_,sessionId:P,tenantId:ee||void 0,postBody:F||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ze)(pt))}catch(Pt){f.reject(Pt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return dg;case"linkViaPopup":case"linkViaRedirect":return m_;case"reauthViaPopup":case"reauthViaRedirect":return hg;default:Ve(this.auth,"internal-error")}}resolve(d){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bc=new Be(2e3,1e4);function su(){return(su=(0,y.Z)(function*(g,d,f){const _=hn(g);We(g,d,Nn);const P=Zo(_,f);return new Ol(_,"signInViaPopup",d,P).executeNotNull()})).apply(this,arguments)}function $u(){return($u=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,Nn);const P=Zo(_.auth,f);return new Ol(_.auth,"reauthViaPopup",d,P,_).executeNotNull()})).apply(this,arguments)}function Rc(){return(Rc=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,Nn);const P=Zo(_.auth,f);return new Ol(_.auth,"linkViaPopup",d,P,_).executeNotNull()})).apply(this,arguments)}let Ol=(()=>{class g extends Nl{constructor(f,_,P,F,ee){super(f,_,F,ee),this.provider=P,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,y.Z)(function*(){const _=yield f.execute();return Te(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,y.Z)(function*(){At(1===f.filter.length,"Popup operations only handle one event");const _=nu();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(P=>{f.reject(P)}),f.resolver._isIframeWebStorageSupported(f.auth,P=>{P||f.reject(ve(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,P;this.pollId=null!==(P=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,bc.get())};f()}}return g.currentPopupAction=null,g})();const nf="pendingRedirect",Ki=new Map;class pg extends Nl{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,y.Z)(function*(){let _=Ki.get(f.auth._key());if(!_){try{const F=(yield function Hu(g,d){return Vr.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(F)}catch(P){_=()=>Promise.reject(P)}Ki.set(f.auth._key(),_)}return f.bypassAuthState||Ki.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,y.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const P=yield _.auth._redirectUserForId(d.eventId);if(P)return _.user=P,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Vr(){return(Vr=(0,y.Z)(function*(g,d){const f=hi(d),_=zu(g);if(!(yield _._isAvailable()))return!1;const P="true"===(yield _._get(f));return yield _._remove(f),P})).apply(this,arguments)}function Pc(g,d){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,y.Z)(function*(g,d){return zu(g)._set(hi(d),"true")})).apply(this,arguments)}function ir(g,d){Ki.set(g._key(),d)}function zu(g){return st(g._redirectPersistence)}function hi(g){return bt(nf,g.config.apiKey,g.name)}function Jn(g,d,f){return function nh(g,d,f){return Ia.apply(this,arguments)}(g,d,f)}function Ia(){return(Ia=(0,y.Z)(function*(g,d,f){const _=hn(g);We(g,d,Nn),yield _._initializationPromise;const P=Zo(_,f);return yield Pc(P,_),P._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function xi(g,d,f){return function wa(g,d,f){return rh.apply(this,arguments)}(g,d,f)}function rh(){return(rh=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,Nn),yield _.auth._initializationPromise;const P=Zo(_.auth,f);yield Pc(P,_.auth);const F=yield Ta(_);return P._openRedirect(_.auth,d,"reauthViaRedirect",F)})).apply(this,arguments)}function ri(g,d,f){return function rf(g,d,f){return us.apply(this,arguments)}(g,d,f)}function us(){return(us=(0,y.Z)(function*(g,d,f){const _=(0,z.m9)(g);We(_.auth,d,Nn),yield _.auth._initializationPromise;const P=Zo(_.auth,f);yield Wo(!1,_,d.providerId),yield Pc(P,_.auth);const F=yield Ta(_);return P._openRedirect(_.auth,d,"linkViaRedirect",F)})).apply(this,arguments)}function Ir(){return(Ir=(0,y.Z)(function*(g,d){return yield hn(g)._initializationPromise,ou(g,d,!1)})).apply(this,arguments)}function ou(g,d){return au.apply(this,arguments)}function au(){return(au=(0,y.Z)(function*(g,d,f=!1){const _=hn(g),P=Zo(_,d),ee=yield new pg(_,P,f).execute();return ee&&!f&&(delete ee.user._redirectEventId,yield _._persistUserIfCurrent(ee.user),yield _._setRedirectUser(null,d)),ee})).apply(this,arguments)}function Ta(g){return ih.apply(this,arguments)}function ih(){return(ih=(0,y.Z)(function*(g){const d=nu(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class oo{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Zi(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cs(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!cs(d)){const P=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(ve(this.auth,P))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Po(d))}saveEventToCache(d){this.cachedEventUids.add(Po(d)),this.lastProcessedEventTime=Date.now()}}function Po(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function cs({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function uu(g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,y.Z)(function*(g,d={}){return Fe(g,"GET","/v1/projects",d)})).apply(this,arguments)}const cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mc=/^https?/;function xc(){return(xc=(0,y.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield uu(g);for(const f of d)try{if(Gu(f))return}catch{}Ve(g,"unauthorized-domain")})).apply(this,arguments)}function Gu(g){const d=St(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const ee=new URL(g);return""===ee.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&ee.hostname===_}if(!Mc.test(f))return!1;if(cu.test(g))return _===g;const P=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(_)}const sf=new Be(3e4,6e4);function Nc(){const g=Pr().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Ll=null;const Oc=new Be(5e3,15e3),af="__/auth/iframe",fi="emulator/auth/iframe",mg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uf(g){const d=g.config;Te(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?ne(d,fi):`https://${g.config.authDomain}/${af}`,_={apiKey:d.apiKey,appName:g.name,v:fe.SDK_VERSION},P=Wu.get(g.config.apiHost);P&&(_.eid=P);const F=g._getFrameworks();return F.length&&(_.fw=F.join(",")),`${f}?${(0,z.xO)(_).slice(1)}`}function Jo(){return Jo=(0,y.Z)(function*(g){const d=yield function Yo(g){return Ll=Ll||function gg(g){return new Promise((d,f)=>{var _,P,F;function ee(){Nc(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Nc(),f(ve(g,"network-request-failed"))},timeout:sf.get()})}if(null!==(P=null===(_=Pr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==P&&P.Iframe)d(gapi.iframes.getContext());else{if(null===(F=Pr().gapi)||void 0===F||!F.load){const Ie=_i("iframefcb");return Pr()[Ie]=()=>{gapi.load?ee():f(ve(g,"network-request-failed"))},_s(`${function kr(){return Ji.gapiScript}()}?onload=${Ie}`).catch(ze=>f(ze))}ee()}}).catch(d=>{throw Ll=null,d})}(g),Ll}(g),f=Pr().gapi;return Te(f,g,"internal-error"),d.open({where:document.body,url:uf(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mg,dontclear:!0},_=>new Promise(function(){var P=(0,y.Z)(function*(F,ee){yield _.restyle({setHideOnLeave:!1});const Ie=ve(g,"network-request-failed"),ze=Pr().setTimeout(()=>{ee(Ie)},Oc.get());function pt(){Pr().clearTimeout(ze),F(_)}_.ping(pt).then(pt,()=>{ee(Ie)})});return function(F,ee){return P.apply(this,arguments)}}()))}),Jo.apply(this,arguments)}const pr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lf{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Kn="__/auth/handler",uo="emulator/auth/handler",df=encodeURIComponent("fac");function Ku(g,d,f,_,P,F){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,y.Z)(function*(g,d,f,_,P,F){Te(g.config.authDomain,g,"auth-domain-config-required"),Te(g.config.apiKey,g,"invalid-api-key");const ee={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:fe.SDK_VERSION,eventId:P};if(d instanceof Nn){d.setDefaultLanguage(g.languageCode),ee.providerId=d.providerId||"",(0,z.xb)(d.getCustomParameters())||(ee.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Pt,Mt]of Object.entries(F||{}))ee[Pt]=Mt}if(d instanceof Js){const Pt=d.getScopes().filter(Mt=>""!==Mt);Pt.length>0&&(ee.scopes=Pt.join(","))}g.tenantId&&(ee.tid=g.tenantId);const Ie=ee;for(const Pt of Object.keys(Ie))void 0===Ie[Pt]&&delete Ie[Pt];const ze=yield g._getAppCheckToken(),pt=ze?`#${df}=${encodeURIComponent(ze)}`:"";return`${function oh({config:g}){return g.emulator?ne(g,uo):`https://${g.authDomain}/${Kn}`}(g)}?${(0,z.xO)(Ie).slice(1)}${pt}`})).apply(this,arguments)}const Ul="webStorageSupport",ah=class hf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ke,this._completeRedirectFn=ou,this._overrideRedirectResult=ir}_openPopup(d,f,_,P){var F=this;return(0,y.Z)(function*(){var ee;At(null===(ee=F.eventManagers[d._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Ie=yield Ku(d,f,_,St(),P);return function _g(g,d,f,_=500,P=600){const F=Math.max((window.screen.availHeight-P)/2,0).toString(),ee=Math.max((window.screen.availWidth-_)/2,0).toString();let Ie="";const ze=Object.assign(Object.assign({},pr),{width:_.toString(),height:P.toString(),top:F,left:ee}),pt=(0,z.z$)().toLowerCase();f&&(Ie=ce(pt)?"_blank":f),ye(pt)&&(d=d||"http://localhost",ze.scrollbars="yes");const Pt=Object.entries(ze).reduce((wr,[js,$s])=>`${wr}${js}=${$s},`,"");if(function jt(g=(0,z.z$)()){var d;return ht(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(pt)&&"_self"!==Ie)return function Jt(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",Ie),new lf(null);const Mt=window.open(d||"",Ie,Pt);Te(Mt,g,"popup-blocked");try{Mt.focus()}catch{}return new lf(Mt)}(d,Ie,nu())})()}_openRedirect(d,f,_,P){var F=this;return(0,y.Z)(function*(){return yield F._originValidation(d),function wc(g){Pr().location.href=g}(yield Ku(d,f,_,St(),P)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:P,promise:F}=this.eventManagers[f];return P?Promise.resolve(P):(At(F,"If manager is not set, promise should be"),F)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,y.Z)(function*(){const _=yield function sr(g){return Jo.apply(this,arguments)}(d),P=new oo(d);return _.register("authEvent",F=>(Te(F?.authEvent,d,"invalid-auth-event"),{status:P.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:P},f.iframes[d._key()]=_,P})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(Ul,{type:Ul},P=>{var F;const ee=null===(F=P?.[0])||void 0===F?void 0:F[Ul];void 0!==ee&&f(!!ee),Ve(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function sh(g){return xc.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return en()||te()||ht()}};class yg{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return Nt("unexpected MultiFactorSessionType")}}}class kc extends yg{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new kc(d)}_finalizeEnroll(d,f,_){return function io(g,d){return Fe(g,"POST","/v2/accounts/mfaEnrollment:finalize",Se(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function Y(g,d){return Fe(g,"POST","/v2/accounts/mfaSignIn:finalize",Se(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bl=(()=>{class g{constructor(){}static assertion(f){return kc._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var ff="@firebase/auth";class Lc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,y.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bs(){return window}(0,z.Pz)("authIdTokenMaxAge"),function Uo(g){Ji=g}({loadJS:g=>new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=P=>{const F=ve("internal-error");F.customData=P,f(F)},_.type="text/javascript",_.charset="UTF-8",function Eg(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Qu(g){(0,fe._registerComponent)(new pe.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),P=d.getProvider("heartbeat"),F=d.getProvider("app-check-internal"),{apiKey:ee,authDomain:Ie}=_.options;Te(ee&&!ee.includes(":"),"invalid-api-key",{appName:_.name});const ze={apiKey:ee,authDomain:Ie,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:br(g)},pt=new mr(_,P,F,ze);return function Nu(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(st);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(pt,f),pt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new pe.wA("auth-internal",d=>{const f=hn(d.getProvider("auth").getImmediate());return new Lc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(ff,"1.6.0",function Mo(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,fe.registerVersion)(ff,"1.6.0","esm2017")}("Browser");function Aa(){return Aa=(0,y.Z)(function*(g,d,f){var _;const{BuildInfo:P}=bs();At(d.sessionId,"AuthEvent did not contain a session ID");const F=yield function Vc(g){return Sa.apply(this,arguments)}(d.sessionId),ee={};return ht()?ee.ibi=P.packageName:K()?ee.apn=P.packageName:Ve(g,"operation-not-supported-in-this-environment"),P.displayName&&(ee.appDisplayName=P.displayName),ee.sessionId=F,Ku(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,ee)}),Aa.apply(this,arguments)}function Hl(){return(Hl=(0,y.Z)(function*(g){const{BuildInfo:d}=bs(),f={};ht()?f.iosBundleId=d.packageName:K()?f.androidPackageName=d.packageName:Ve(g,"operation-not-supported-in-this-environment"),yield uu(g,f)})).apply(this,arguments)}function du(){return(du=(0,y.Z)(function*(g,d,f){const{cordova:_}=bs();let P=()=>{};try{yield new Promise((F,ee)=>{let Ie=null;function ze(){var Mt;F();const wr=null===(Mt=_.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof wr&&wr(),"function"==typeof f?.close&&f.close()}function pt(){Ie||(Ie=window.setTimeout(()=>{ee(ve(g,"redirect-cancelled-by-user"))},2e3))}function Pt(){"visible"===document?.visibilityState&&pt()}d.addPassiveListener(ze),document.addEventListener("resume",pt,!1),K()&&document.addEventListener("visibilitychange",Pt,!1),P=()=>{d.removePassiveListener(ze),document.removeEventListener("resume",pt,!1),document.removeEventListener("visibilitychange",Pt,!1),Ie&&window.clearTimeout(Ie)}})}finally{P()}})).apply(this,arguments)}function Sa(){return(Sa=(0,y.Z)(function*(g){const d=function Ig(g){if(At(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(P=>P.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class wg extends oo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,y.Z)(function*(){yield d.initPromise})()}}function ls(g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,y.Z)(function*(g){const d=yield lo()._get(dh(g));return d&&(yield lo()._remove(dh(g))),d})).apply(this,arguments)}function Tg(){const g=[];for(let f=0;f<20;f++){const _=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return g.join("")}function lo(){return st(tu)}function dh(g){return bt("authEvent",g.config.apiKey,g.name)}function hu(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,z.zd)(f.join("?"))}const Wl=class _f{constructor(){this._redirectPersistence=Ke,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ou,this._overrideRedirectResult=ir}_initialize(d){var f=this;return(0,y.Z)(function*(){const _=d._key();let P=f.eventManagers.get(_);return P||(P=new wg(d),f.eventManagers.set(_,P),f.attachCallbackListeners(d,P)),P})()}_openPopup(d){Ve(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,P){var F=this;return(0,y.Z)(function*(){!function lh(g){var d,f,_,P,F,ee,Ie,ze,pt,Pt;const Mt=bs();Te("function"==typeof(null===(d=Mt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(typeof(null===(f=Mt?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(F=null===(P=null===(_=Mt?.cordova)||void 0===_?void 0:_.plugins)||void 0===P?void 0:P.browsertab)||void 0===F?void 0:F.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ze=null===(Ie=null===(ee=Mt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===ze?void 0:ze.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Pt=null===(pt=Mt?.cordova)||void 0===pt?void 0:pt.InAppBrowser)||void 0===Pt?void 0:Pt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ee=yield F._initialize(d);yield ee.initialized(),ee.resetRedirect(),function kl(){Ki.clear()}(),yield F._originValidation(d);const Ie=function co(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Tg(),postBody:null,tenantId:g.tenantId,error:ve(g,"no-auth-event")}}(d,_,P);yield function y_(g,d){return lo()._set(dh(g),d)}(d,Ie);const ze=yield function gf(g,d,f){return Aa.apply(this,arguments)}(d,Ie,f),pt=yield function Ju(g){const{cordova:d}=bs();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let P=null;_?d.plugins.browsertab.openUrl(g):P=d.InAppBrowser.open(g,function Ze(g=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(P)})})}(ze);return function Fc(g,d,f){return du.apply(this,arguments)}(d,ee,pt)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Qi(g){return Hl.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:P,BuildInfo:F}=bs(),ee=setTimeout((0,y.Z)(function*(){yield ls(d),f.onEvent(ql())}),500),Ie=function(){var Pt=(0,y.Z)(function*(Mt){clearTimeout(ee);const wr=yield ls(d);let js=null;wr&&Mt?.url&&(js=function zl(g,d){var f,_;const P=function Dg(g){const d=hu(g),f=d.link?decodeURIComponent(d.link):void 0,_=hu(f).link,P=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return hu(P).link||P||_||f||g}(d);if(P.includes("/__/auth/callback")){const F=hu(P),ee=F.firebaseError?function Gl(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(F.firebaseError)):null,Ie=null===(_=null===(f=ee?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],ze=Ie?ve(Ie):null;return ze?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:ze,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:P,postBody:null}}return null}(wr,Mt.url)),f.onEvent(js||ql())});return function(wr){return Pt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Ie);const ze=P,pt=`${F.packageName.toLowerCase()}://`;bs().handleOpenURL=function(){var Pt=(0,y.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(pt)&&Ie({url:Mt}),"function"==typeof ze)try{ze(Mt)}catch(wr){console.error(wr)}});return function(Mt){return Pt.apply(this,arguments)}}()}};function ql(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function ba(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function pu(g=(0,z.z$)()){return!("file:"!==ba()&&"ionic:"!==ba()&&"capacitor:"!==ba()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function mu(){try{const g=self.localStorage,d=nu();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Zl(g=(0,z.z$)()){return function yf(){return(0,z.w1)()&&11===document?.documentMode}()||function Ra(g=(0,z.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,z.hl)()}catch{return Ql()&&(0,z.hl)()}return!1}function Ql(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yl(){return(function Bc(){return"http:"===ba()||"https:"===ba()}()||(0,z.ru)()||pu())&&!function gu(){return(0,z.b$)()||(0,z.UG)()}()&&mu()&&!Ql()}function _u(){return pu()&&typeof document<"u"}function fh(){return(fh=(0,y.Z)(function*(){return!!_u()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},Xo=Te,jc="persistence";function ho(g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,y.Z)(function*(g){yield g._initializationPromise;const d=yu(),f=bt(jc,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function yu(){var g;try{return(null===(g=function Dn(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const xo=Te;class ea{constructor(){this.browserResolver=st(ah),this.cordovaResolver=st(Wl),this.underlyingResolver=null,this._redirectPersistence=Ke,this._completeRedirectFn=ou,this._overrideRedirectResult=ir}_initialize(d){var f=this;return(0,y.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,P){var F=this;return(0,y.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(d,f,_,P)})()}_openRedirect(d,f,_,P){var F=this;return(0,y.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(d,f,_,P)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return _u()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,y.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Cg(){return fh.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Xl(g){return g.unwrap()}function vu(g){return ed(g)}function ed(g){const{_tokenResponse:d}=g instanceof z.ZR?g.customData:g;if(!d)return null;if(!(g instanceof z.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return xl.credentialFromResult(g);const f=d.providerId;if(!f||f===De.PASSWORD)return null;let _;switch(f){case De.GOOGLE:_=bi;break;case De.FACEBOOK:_=$r;break;case De.GITHUB:_=wo;break;case De.TWITTER:_=Ou;break;default:const{oauthIdToken:P,oauthAccessToken:F,oauthTokenSecret:ee,pendingToken:Ie,nonce:ze}=d;return F||ee||P||Ie?Ie?f.startsWith("saml.")?Hr._create(f,Ie):_r._fromParams({providerId:f,signInMethod:f,pendingToken:Ie,idToken:P,accessToken:F}):new Ln(f).credential({idToken:P,accessToken:F,rawNonce:ze}):null}return g instanceof z.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function Ti(g,d){return d.catch(f=>{throw f instanceof z.ZR&&function gh(g,d){var f;const _=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new $c(g,function ya(g,d){var f;const _=(0,z.m9)(g),P=d;return Te(d.customData.operationType,_,"argument-error"),Te(null===(f=P.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),Gr._fromError(_,P)}(g,d));else if(_){const P=ed(d),F=d;P&&(F.credential=P,F.tenantId=_.tenantId||void 0,F.email=_.email||void 0,F.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const P=f.user;return{operationType:f.operationType,credential:vu(f),additionalUserInfo:ss(f),user:or.getOrCreate(P)}})}function Eu(g,d){return mh.apply(this,arguments)}function mh(){return(mh=(0,y.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>Ti(g,f.confirm(_))}})).apply(this,arguments)}class $c{constructor(d,f){this.resolver=f,this.auth=function vf(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Ti(Xl(this.auth),this.resolver.resolveSignIn(d))}}class or{constructor(d){this._delegate=d,this.multiFactor=function Dt(g){const d=(0,z.m9)(g);return eu.has(d)||eu.set(d,Er._fromUser(d)),eu.get(d)}(d)}static getOrCreate(d){return or.USER_MAP.has(d)||or.USER_MAP.set(d,new or(d)),or.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,y.Z)(function*(){return Ti(f.auth,ji(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,y.Z)(function*(){return Eu(_.auth,function di(g,d,f){return Ac.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,y.Z)(function*(){return Ti(f.auth,function __(g,d,f){return Rc.apply(this,arguments)}(f._delegate,d,ea))})()}linkWithRedirect(d){var f=this;return(0,y.Z)(function*(){return yield ho(hn(f.auth)),ri(f._delegate,d,ea)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,y.Z)(function*(){return Ti(f.auth,mc(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Eu(this.auth,function Xd(g,d,f){return As.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return Ti(this.auth,function th(g,d,f){return $u.apply(this,arguments)}(this._delegate,d,ea))}reauthenticateWithRedirect(d){var f=this;return(0,y.Z)(function*(){return yield ho(hn(f.auth)),xi(f._delegate,d,ea)})()}sendEmailVerification(d){return function b(g,d){return N.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,y.Z)(function*(){return yield function Ga(g,d){return fa.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function On(g,d){return Fn((0,z.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function Xt(g,d){return Fn((0,z.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ju(g,d){return eh.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function vn(g,d){return un.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Z(g,d,f){return Me.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}or.USER_MAP=new WeakMap;const In=Te;let td=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=f.options;In(P,"invalid-api-key",{appName:f.name}),In(P,"invalid-api-key",{appName:f.name});const F=typeof window<"u"?ea:void 0;this._delegate=_.initialize({options:{persistence:Hc(P,f.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(tt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function Yr(g,d,f){const _=hn(g);Te(_._canInitEmulator,_,"emulator-config-failed"),Te(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const P=!!f?.disableWarnings,F=ca(d),{host:ee,port:Ie}=function qs(g){const d=ca(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(_);if(P){const F=P[1];return{host:F,port:Ho(_.substr(F.length+1))}}{const[F,ee]=_.split(":");return{host:F,port:Ho(ee)}}}(d);_.config.emulator={url:`${F}//${ee}${null===Ie?"":`:${Ie}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:ee,port:Ie,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function $a(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function rs(g,d){return Fs.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return pa(this._delegate,f)}confirmPasswordReset(f,_){return function _c(g,d,f){return Ls.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var P=this;return(0,y.Z)(function*(){return Ti(P._delegate,function Ja(g,d,f){return Xa.apply(this,arguments)}(P._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function w(g,d){return k.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function vc(g,d){const f=Ys.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,y.Z)(function*(){In(Yl(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function Ur(g,d){return Ir.apply(this,arguments)}(f._delegate,ea);return _?Ti(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function fu(g,d){hn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,P){const{next:F,error:ee,complete:Ie}=nd(f,_,P);return this._delegate.onAuthStateChanged(F,ee,Ie)}onIdTokenChanged(f,_,P){const{next:F,error:ee,complete:Ie}=nd(f,_,P);return this._delegate.onIdTokenChanged(F,ee,Ie)}sendSignInLinkToEmail(f,_){return function to(g,d,f){return Ko.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Vu(g,d,f){return ks.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,y.Z)(function*(){let P;switch(function $i(g,d){Xo(Object.values(wi).includes(d),g,"invalid-persistence-type"),(0,z.b$)()?Xo(d!==wi.SESSION,g,"unsupported-persistence-type"):(0,z.UG)()?Xo(d===wi.NONE,g,"unsupported-persistence-type"):Ql()?Xo(d===wi.NONE||d===wi.LOCAL&&(0,z.hl)(),g,"unsupported-persistence-type"):Xo(d===wi.NONE||mu(),g,"unsupported-persistence-type")}(_._delegate,f),f){case wi.SESSION:P=Ke;break;case wi.LOCAL:P=(yield st(R)._isAvailable())?R:tu;break;case wi.NONE:P=Ut;break;default:return Ve("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Ti(this._delegate,function qd(g){return Go.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Ti(this._delegate,Za(this._delegate,f))}signInWithCustomToken(f){return Ti(this._delegate,function Qa(g,d){return Ya.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Ti(this._delegate,function Cl(g,d,f){return Za((0,z.m9)(g),Wi.credential(d,f)).catch(function(){var _=(0,y.Z)(function*(P){throw"auth/password-does-not-meet-requirements"===P.code&&So(g),P});return function(P){return _.apply(this,arguments)}}())}(this._delegate,f,_))}signInWithEmailLink(f,_){return Ti(this._delegate,function ma(g,d,f){return Ec.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return Eu(this._delegate,function Ea(g,d,f){return iu.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,y.Z)(function*(){return In(Yl(),_._delegate,"operation-not-supported-in-this-environment"),Ti(_._delegate,function fg(g,d,f){return su.apply(this,arguments)}(_._delegate,f,ea))})()}signInWithRedirect(f){var _=this;return(0,y.Z)(function*(){return In(Yl(),_._delegate,"operation-not-supported-in-this-environment"),yield ho(_._delegate),Jn(_._delegate,f,ea)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function yc(g,d){return qo.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=wi,g})();function nd(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const P=_;return{next:ee=>P(ee&&or.getOrCreate(ee)),error:d,complete:f}}function Hc(g,d){const f=function ph(g,d){const f=yu();if(!f)return[];const _=bt(jc,g,d);switch(f.getItem(_)){case wi.NONE:return[Ut];case wi.LOCAL:return[R,Ke];case wi.SESSION:return[Ke];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(R)&&f.push(R),typeof window<"u")for(const _ of[tu,Ke])f.includes(_)||f.push(_);return f.includes(Ut)||f.push(Ut),f}class ta{constructor(){this.providerId="phone",this._delegate=new xl(Xl(X.Z.auth()))}static credential(d,f){return xl.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}ta.PHONE_SIGN_IN_METHOD=xl.PHONE_SIGN_IN_METHOD,ta.PROVIDER_ID=xl.PROVIDER_ID;const rd=Te;class _h{constructor(d,f,_=X.Z.app()){var P;rd(null===(P=_.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Ml(_.auth(),d,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ec(g){g.INTERNAL.registerComponent(new pe.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new td(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wi,FacebookAuthProvider:$r,GithubAuthProvider:wo,GoogleAuthProvider:bi,OAuthProvider:Ln,SAMLAuthProvider:Ns,PhoneAuthProvider:ta,PhoneMultiFactorGenerator:Bl,RecaptchaVerifier:_h,TwitterAuthProvider:Ou,Auth:td,AuthCredential:Xi,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.2")}(X.Z)},5861:(vt,Pe,O)=>{function y(z,fe,le,ae,pe,Oe,De){try{var W=z[Oe](De),J=W.value}catch(he){return void le(he)}W.done?fe(J):Promise.resolve(J).then(ae,pe)}function X(z){return function(){var fe=this,le=arguments;return new Promise(function(ae,pe){var Oe=z.apply(fe,le);function De(J){y(Oe,ae,pe,De,W,"next",J)}function W(J){y(Oe,ae,pe,De,W,"throw",J)}De(void 0)})}}O.d(Pe,{Z:()=>X})},7582:(vt,Pe,O)=>{function fe(ne,ue){var Ae={};for(var Ee in ne)Object.prototype.hasOwnProperty.call(ne,Ee)&&ue.indexOf(Ee)<0&&(Ae[Ee]=ne[Ee]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(Ee=Object.getOwnPropertySymbols(ne);Se<Ee.length;Se++)ue.indexOf(Ee[Se])<0&&Object.prototype.propertyIsEnumerable.call(ne,Ee[Se])&&(Ae[Ee[Se]]=ne[Ee[Se]])}return Ae}function he(ne,ue,Ae,Ee){return new(Ae||(Ae=Promise))(function(Fe,ut){function Je(Qt){try{dt(Ee.next(Qt))}catch(Wt){ut(Wt)}}function Cn(Qt){try{dt(Ee.throw(Qt))}catch(Wt){ut(Wt)}}function dt(Qt){Qt.done?Fe(Qt.value):function Se(Fe){return Fe instanceof Ae?Fe:new Ae(function(ut){ut(Fe)})}(Qt.value).then(Je,Cn)}dt((Ee=Ee.apply(ne,ue||[])).next())})}function ge(ne){return this instanceof ge?(this.v=ne,this):new ge(ne)}function Ve(ne,ue,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,Ee=Ae.apply(ne,ue||[]),Fe=[];return Se={},ut("next"),ut("throw"),ut("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function ut(mn){Ee[mn]&&(Se[mn]=function(fn){return new Promise(function(_n,it){Fe.push([mn,fn,_n,it])>1||Je(mn,fn)})})}function Je(mn,fn){try{!function Cn(mn){mn.value instanceof ge?Promise.resolve(mn.value.v).then(dt,Qt):Wt(Fe[0][2],mn)}(Ee[mn](fn))}catch(_n){Wt(Fe[0][3],_n)}}function dt(mn){Je("next",mn)}function Qt(mn){Je("throw",mn)}function Wt(mn,fn){mn(fn),Fe.shift(),Fe.length&&Je(Fe[0][0],Fe[0][1])}}function He(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ue=ne[Symbol.asyncIterator];return ue?ue.call(ne):(ne=function qe(ne){var ue="function"==typeof Symbol&&Symbol.iterator,Ae=ue&&ne[ue],Ee=0;if(Ae)return Ae.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Ee>=ne.length&&(ne=void 0),{value:ne&&ne[Ee++],done:!ne}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),Ae={},Ee("next"),Ee("throw"),Ee("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Ee(Fe){Ae[Fe]=ne[Fe]&&function(ut){return new Promise(function(Je,Cn){!function Se(Fe,ut,Je,Cn){Promise.resolve(Cn).then(function(dt){Fe({value:dt,done:Je})},ut)}(Je,Cn,(ut=ne[Fe](ut)).done,ut.value)})}}}O.d(Pe,{FC:()=>Ve,KL:()=>He,_T:()=>fe,mG:()=>he,qq:()=>ge}),"function"==typeof SuppressedError&&SuppressedError}},vt=>{vt(vt.s=1478)}]);